<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Custom views and URLs &mdash; django-agnocomplete 0.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="django-agnocomplete 0.0.0 documentation" href="index.html" />
    <link rel="prev" title="Autocomplete definition" href="autocomplete-definition.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="custom-views-and-urls">
<h1>Custom views and URLs<a class="headerlink" href="#custom-views-and-urls" title="Permalink to this headline">¶</a></h1>
<p>For some reason, the automatically generated URLs don&#8217;t fit your architecture. Or you want/need custom URLs that are behind a more complex URL architecture. There are several points that are customizable in <code class="docutils literal"><span class="pre">django-agnocomplete</span></code>.</p>
<div class="section" id="namespace">
<h2>Namespace<a class="headerlink" href="#namespace" title="Permalink to this headline">¶</a></h2>
<p>By default, the view namespace is <code class="docutils literal"><span class="pre">agnocomplete</span></code>. If you want to refer to the
Catalog view or any Agnocomplete view, they&#8217;re fetchable with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="kn">import</span> <span class="n">reverse</span>

<span class="n">reverse</span><span class="p">(</span><span class="s">&#39;agnocomplete:catalog&#39;</span><span class="p">)</span>
<span class="n">reverse</span><span class="p">(</span><span class="s">&#39;agnocomplete:agnocomplete&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;AutocompleteName&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Nothing forces you to use the <code class="docutils literal"><span class="pre">agnocomplete</span></code> namespace. You can set the <code class="docutils literal"><span class="pre">AGNOCOMPLETE_NAMESPACE</span></code> in your settings to override this. When defining your URLs, you can then use the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">agnocomplete</span> <span class="kn">import</span> <span class="n">get_namespace</span>

<span class="n">urlpatters</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c"># ... some patterns</span>
    <span class="n">url</span><span class="p">(</span>
        <span class="s">r&#39;^agnocomplete/&#39;</span><span class="p">,</span>
        <span class="n">include</span><span class="p">(</span><span class="s">&#39;agnocomplete.urls&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">get_namespace</span><span class="p">())</span>
    <span class="p">),</span>
    <span class="c"># Other patterns</span>
<span class="p">]</span>
</pre></div>
</div>
<p>You can also use the <code class="xref py py-func docutils literal"><span class="pre">get_namespace()</span></code> function to retrieve your custom URLs.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="kn">import</span> <span class="n">reverse</span>
<span class="kn">from</span> <span class="nn">agnocomplete</span> <span class="kn">import</span> <span class="n">get_namespace</span>

<span class="n">reverse</span><span class="p">(</span><span class="n">get_namespace</span><span class="p">()</span> <span class="o">+</span> <span class="s">&#39;:catalog&#39;</span><span class="p">)</span>
<span class="n">reverse</span><span class="p">(</span><span class="n">get_namespace</span><span class="p">()</span> <span class="o">+</span> <span class="s">&#39;:agnocomplete&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;AutocompleteName&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="slugs">
<h2>Slugs<a class="headerlink" href="#slugs" title="Permalink to this headline">¶</a></h2>
<p>By default, the slugs used for URLs are using the class name. Even though you normally don&#8217;t have access to this URL by hand, you may want to customize it, simplify it, crypt it in some way. Any <code class="docutils literal"><span class="pre">Agnocomplete</span></code> class can have a slug class or instance property, like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">AutocompleteCustomUrl</span><span class="p">(</span><span class="n">AgnocompleteChoices</span><span class="p">):</span>
    <span class="n">choices</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="s">&#39;green&#39;</span><span class="p">,</span> <span class="s">&#39;Green&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;gray&#39;</span><span class="p">,</span> <span class="s">&#39;Gray&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;blue&#39;</span><span class="p">,</span> <span class="s">&#39;Blue&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;grey&#39;</span><span class="p">,</span> <span class="s">&#39;Grey&#39;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="s">&#39;colors&#39;</span>
</pre></div>
</div>
<p>So, instead of accessing this using:</p>
<div class="highlight-python"><div class="highlight"><pre>/autocomplete/autocomplete/AutocompleteCustomUrl
</pre></div>
</div>
<p>it&#8217;ll be accessible with this much cooler URL:</p>
<div class="highlight-python"><div class="highlight"><pre>/autocomplete/autocomplete/colors
</pre></div>
</div>
</div>
<div class="section" id="views">
<h2>Views<a class="headerlink" href="#views" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s say you need to check permissions on a specific autocomplete, and you need it to be completely isolated from the automatic registry. Fine, you still can.</p>
<p>Let&#8217;s consider a simple <code class="docutils literal"><span class="pre">Agnocomplete</span></code> class:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">HiddenAutocomplete</span><span class="p">(</span><span class="n">AgnocompleteChoices</span><span class="p">):</span>
    <span class="n">choices</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="s">&#39;green&#39;</span><span class="p">,</span> <span class="s">&#39;Green&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;gray&#39;</span><span class="p">,</span> <span class="s">&#39;Gray&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;blue&#39;</span><span class="p">,</span> <span class="s">&#39;Blue&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;grey&#39;</span><span class="p">,</span> <span class="s">&#39;Grey&#39;</span><span class="p">),</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>This class doesn&#8217;t have to live in an <code class="docutils literal"><span class="pre">autocomplete.py</span></code> module. It doesn&#8217;t have to be registered.</p>
<p>Then, build an view:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">agnocomplete.views</span> <span class="kn">import</span> <span class="n">AgnocompleteGenericView</span>
<span class="kn">from</span> <span class="nn">arandom.place</span> <span class="kn">import</span> <span class="n">HiddenAutocomplete</span>

<span class="k">class</span> <span class="nc">HiddenAutocompleteView</span><span class="p">(</span><span class="n">AgnocompleteGenericView</span><span class="p">):</span>
    <span class="n">klass</span> <span class="o">=</span> <span class="n">HiddenAutocomplete</span>

<span class="n">hidden_autocomplete</span> <span class="o">=</span> <span class="n">HiddenAutocompleteView</span><span class="o">.</span><span class="n">as_view</span><span class="p">()</span>
</pre></div>
</div>
<p>Join this view with a custom URL:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">url</span><span class="p">(</span><span class="s">r&#39;^hidden/$&#39;</span><span class="p">,</span>
    <span class="s">&#39;arandom.views.hidden_autocomplete&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;hidden_autocomplete&#39;</span><span class="p">),</span>
</pre></div>
</div>
<p>That&#8217;s (almost) it. You can already call the URL <code class="docutils literal"><span class="pre">/hidden</span></code> and query it using the <code class="docutils literal"><span class="pre">q</span></code> or <code class="docutils literal"><span class="pre">page_size</span></code> parameter.</p>
<p>To make sure everything is okay, simply run your server (let&#8217;s say it&#8217;s talking on <code class="docutils literal"><span class="pre">http://127.0.0.1:8000/</span></code>)</p>
<div class="highlight-sh"><div class="highlight"><pre>curl http://127.0.0.1:8000/hidden/
<span class="o">{</span><span class="s2">&quot;data&quot;</span>: <span class="o">[]}</span>
curl http://127.0.0.1:8000/hidden/?q<span class="o">=</span>gre
<span class="o">{</span><span class="s2">&quot;data&quot;</span>: <span class="o">[</span>
    <span class="o">{</span><span class="s2">&quot;label&quot;</span>: <span class="s2">&quot;Green&quot;</span>, <span class="s2">&quot;value&quot;</span>: <span class="s2">&quot;green&quot;</span><span class="o">}</span>,
    <span class="o">{</span><span class="s2">&quot;label&quot;</span>: <span class="s2">&quot;Grey&quot;</span>, <span class="s2">&quot;value&quot;</span>: <span class="s2">&quot;grey&quot;</span><span class="o">}]</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Then you can apply any access control method on your view (login_required, permission_required, etc) ; it&#8217;s like a normal view.</p>
<p>The only drawback is that, since it&#8217;s not registered in the <code class="docutils literal"><span class="pre">agnocomplete</span></code> registry, it can&#8217;t be used as a source for your <code class="docutils literal"><span class="pre">Agnocomplete</span></code> field. You&#8217;ll have to integrate this by hand.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Custom views and URLs</a><ul>
<li><a class="reference internal" href="#namespace">Namespace</a></li>
<li><a class="reference internal" href="#slugs">Slugs</a></li>
<li><a class="reference internal" href="#views">Views</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="autocomplete-definition.html" title="previous chapter">Autocomplete definition</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/custom-views.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, PeopleDoc.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="_sources/custom-views.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>