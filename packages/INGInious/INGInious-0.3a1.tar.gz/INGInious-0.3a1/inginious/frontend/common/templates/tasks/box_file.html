$def with (inputId,max_size,allowed_exts, json)

$# Copyright (c) 2014-2015 Universit√© Catholique de Louvain.
$#
$# This file is part of INGInious.
$#
$# INGInious is free software: you can redistribute it and/or modify
$# it under the terms of the GNU Affero General Public License as published
$# by the Free Software Foundation, either version 3 of the License, or
$# (at your option) any later version.
$#
$# INGInious is distributed in the hope that it will be useful,
$# but WITHOUT ANY WARRANTY; without even the implied warranty of
$# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
$# GNU Affero General Public License for more details.
$#
$# You should have received a copy of the GNU Affero General Public
$# License along with INGInious.  If not, see <http://www.gnu.org/licenses/>.

$def sizeof_fmt(num):
        $ num=float(num)
        $for x in ['bytes','KB','MB','GB']:
                $if -1024 < num < 1024:
                        $return "%3.1f%s" % (num, x)
                $ num /= 1024.0
        $return "%3.1f%s" % (num, 'TB')

<a href="" id="download-input-file-$inputId" style="display:none; margin-bottom: 10px;" class="btn btn-info btn-block">Click here to download the file
    you submitted previously</a>

$ allowed_exts= allowed_exts or default_allowed_file_extensions
<input
        type="file"
        name="$inputId"
        data-max-size="$max_size"
        data-allowed-exts="$json.dumps(allowed_exts)"
        /><br/>

$ max_size= max_size or default_max_file_size
Max file size: $sizeof_fmt(max_size)<br/>
Allowed extensions: $', '.join(allowed_exts)