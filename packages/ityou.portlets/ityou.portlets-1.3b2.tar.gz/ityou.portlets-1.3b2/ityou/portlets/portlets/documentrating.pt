<dl class="portlet portletdocumentrating"
    i18n:domain="ityou.portlets">

    <dt class="portletHeader">
        <span class="portletTopLeft"></span>
        <span i18n:translate="chart_documentrating_of_site">
           Like/Dislike Relation of your Content
        </span>
        <span class="portletTopRight"></span>
    </dt>

    <dd class="portletItem odd">
        
        <div id="documentrating-chart"></div>
    </dd>

    <dd class="portletFooter">
        <span class="portletBottomLeft"></span>
        <span>
           
        </span>
        <span class="portletBottomRight"></span>
    </dd>
    
<!--    <script type="text/javascript" src="++resource++ityou.portlets.resources/vendors/d3/d3pie/d3pie.min.js"/> -->
    <script type="text/javascript">

$(document).ready(function(){ 
    loading_chart_documentrating();

    function loading_chart_documentrating(){
                       
        $.getJSON('@@ajax-datadigger', {"data":'documentrating','chart':'d3pie','selectedcontext':'global'},function(json) {   
                d3pie_chart(json)            
            }
        );
    }
    
    function d3pie_chart_redraw(jdata){
        
        documentrating_pie.updateProp("data.content",jdata);
    }                
    function d3pie_chart(jdata){
        
        //console.log(jdata);
        var portletwidth = $("#documentrating-chart").width();
        
        documentrating_pie = new d3pie("#documentrating-chart", {
      	    header: {
	            title:{ text:    "", color:    "#333333", fontSize: 18, font:     "arial"},
	            subtitle: { color:    "#666666", fontSize: 14, font:     "arial"},
	            location: "top-center",
	            titleSubtitlePadding: 8
        	},
            footer: {
	            text: 	  "",
	            color:    "#666666",
	            fontSize: 14,
	            font:     "arial",
	            location: "left"
            },
            size: {
	            canvasHeight: portletwidth,
	            canvasWidth: portletwidth,
	            pieInnerRadius: 0,
	            pieOuterRadius: portletwidth/4.5
            },
            data: {
	            sortOrder: "none",
	           
	            content: jdata
            },
            labels: {
	            outer: {
		            format: "label-percentage2",
		            hideWhenLessThanPercentage: 5,
		            pieDistance: null
	            },
	            inner: {
		            format: null,
		            hideWhenLessThanPercentage: 5
	            },
	            mainLabel: {
		            color: "#333333",
		            font: "arial",
		            fontSize: 12
	            },
	            percentage: {
		            color: "#dddddd",
		            font: "arial",
		            fontSize: 10,
		            decimalPlaces: 0
	            },
	            value: {
		            color: "#cccc44",
		            font: "arial",
		            fontSize: 10
	            },
	            lines: {
		            enabled: true,
		            style: "curved",
		            color: "segment" // "segment" or a hex color
	            }
            },
            tooltips: {
	            enabled: false,
	            type: "placeholder", // caption|placeholder
	            string: "",
	            placeholderParser: null,
            },
            misc: {
	            colors: {
		            background: null, // transparent
		            segmentStroke: "#ffffff"
	            },
	            gradient: {
		            enabled: false,
		            percentage: 85,
		           
	            },
	            canvasPadding: {
		            top: 1,
		            right: 1,
		            bottom: 1,
		            left: 1
	            },
	            pieCenterOffset: {
		            x: 0,
		            y: 0
	            },
	            cssPrefix: null
            },
            callbacks: {
	            onload: null,
	            onMouseoverSegment: null,
	            onMouseoutSegment: null,
	            onClickSegment: null
            }
        });  
   }

    
});
    </script> 


</dl>
