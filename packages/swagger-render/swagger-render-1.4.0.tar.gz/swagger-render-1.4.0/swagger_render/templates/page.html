<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>{{ info.title }}</title>

        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha/css/bootstrap.min.css" rel="stylesheet">

        <style>
         body {
             font-size: 14px;
             position: relative;
         }

         * {
             box-sizing: border-box;
         }

         #side-nav {
             top: 0;
             position: fixed;
             right: 0;
             height: 100vh;
             overflow-y: auto;
             overflow-x: hidden;
             padding-top: 1rem;
             padding-bottom: 1rem;
         }

         .col-md-9 {
             padding-left: 2rem;
         }

         .nav ul {
             list-style: none;
             padding-left: 2rem;
         }

         .nav ul li a {
             padding: 5px 10px;
             color: inherit;
         }

         .nav li {
             transition: border 0.25s;
             word-break: break-word;
         }

         .nav-item {
             margin-bottom: 2px;
         }

         .nav-link.active {
             text-decoration: underline;
         }

         .group_link {
             color: #333;
             font-weight: bold;
         }

         a h3 {
             margin: 0;
         }

         .card, .jumbotron, .form-control {
             border-radius: 0;
         }

         .card-header>a {
             color: inherit;
         }

         .schema>.schema, .enum {
             padding-left: 1rem;
         }

         .schema>.sKey {
             font-weight: bold;
         }

         .schema>.sOptional {
             font-style: italic;
         }

         .schema>.sType {
             color: #5555aa;
         }

         .sDescription>p {
             padding: 0;
             margin: 0;
             padding-left: 1rem;
         }

         .footer {
             text-align: right;
         }

         {% for name, colors in _colors.items() %}
         li.{{name}} {
             background-color: #{{colors.background}};
             border: thin solid #{{colors.border}};
             color: #{{colors.text}};
         }
         .card-header.{{name}} {
             background-color: #{{colors.background}};
             color: #{{colors.text}};
             border-bottom-color: #{{colors.border}};
         }
         .card.{{name}} {
             border-color: #{{colors.border}};
         }
         {% endfor %}

        </style>
    </head>
    <body data-spy="scroll" data-target="#side-nav">

        <div class="container-fluid">
            <br>
            <div class="row">
                <div class="col-md-3" id="side-nav">
                    <input id="search" type="text" class="form-control" placeholder="Search">
                    <ul class="nav nav-list">
                        {% for tag in _tags %}
                        <span class="list-group">
                            <a href="#tag_{{tag}}"
                               class="group_link">{{ tag | capitalize }}</a>
                            <ul class="nav">
                                {% for path_name, method_name, method in (paths, tag) | has_tag %}
                                <li class="nav-item {{method_name |lower}}">
                                    <a class="nav-link" href="#{{(method_name, path_name) |sane}}">
                                        <strong>{{method_name | upper}}</strong>
                                        {{path_name}}
                                    </a>
                                </li>

                                {% endfor %}
                            </ul>
                        </span>
                        {% endfor %}

                    </ul>
                </div>
                <div class="col-md-9">

                    <div id="info" class="jumbotron">
                        <h1>{{ info.title }} {{ info.version }}</h1>

                        {% if info.description %}
                        {{ info.description |md }}
                        {% endif %}
                    </div>

                    <hr>

                    {% for tag in _tags -%}
                    <div class="group">
                        <h1 id="tag_{{tag}}">{{tag | capitalize}}</h1>
                        {% for path_name, method_name, method in (paths, tag) | has_tag -%}
                        <div class="card method {{method_name}}">
                            <div class="card-header {{method_name}}"
                                 id="{{(method_name, path_name) | sane}}">
                                <a href="#{{(method_name, path_name) | sane}}">
                                    <h3>
                                        <strong>{{ method_name | upper }}</strong>
                                        {{ path_name }}
                                        <span class="pull-right">
                                            {{ method.summary }}
                                        </span>
                                    </h3>
                                </a>
                            </div>
                            <div class="card-block"
                                 id="{{(method_name, path_name, "d") | sane}}">
                                {% if method.description %}
                                <h3>Description</h3>
                                {{ method.description | md }}
                                {% endif %}

                                {% if method.parameters %}
                                <h3>Parameters</h3>
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Located in</th>
                                            <th>Description</th>
                                            <th>Required</th>
                                            <th>Schema</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for parameter in method.parameters %}
                                        <tr>
                                            <td>{{ parameter.name }}</td>
                                            <td>{{ parameter.in }}</td>
                                            <td>{{ parameter.description}}</td>
                                            <td>{{ parameter.required }}</td>
                                            <td>{{ parameter | schema | render}}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                                {% endif %}

                                <h3>Responses</h3>
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Code</th>
                                            <th>Description</th>
                                            <th>Schema</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for code, response in method.responses.items() %}
                                        <tr>
                                            <td>{{ code }}</td>
                                            <td>{{ response.description }}</td>
                                            <td>{{ response | schema | render}}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% endfor %}

                    <footer class="footer">
                        Generated by
                        <a href="https://github.com/JuhaniImberg/swagger-render">
                            Swagger-Render
                        </a> {{__version__}}<br>
                        {{__time__}}
                    </footer>
                </div>
            </div>

        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha/js/bootstrap.min.js"></script>
        <script src="https://cdn.rawgit.com/joshaven/string_score/3b51216ccaa15a795df27502df5e8fbca554c0ab/string_score.min.js"></script>
        <script>
         $("#search").on("input", function(e) {
             var text = e.target.value;
             $(".nav-item").map(function(i, el) {
                 var cmp = $(el).children()[0].innerText;
                 if(cmp.score(text) > 0 || text.length == 0) {
                     $(el).show();
                 } else {
                     $(el).hide();
                 }
             });
         });
        </script>
    </body>
</html>
