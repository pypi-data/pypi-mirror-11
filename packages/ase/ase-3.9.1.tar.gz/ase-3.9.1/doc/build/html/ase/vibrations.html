<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Vibration analysis &mdash; ASE  documentation</title>
    <link rel="stylesheet" href="../_static/ase.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../_static/ase.ico"/>
    <link rel="contents" title="Global table of contents" href="../contents.html" />
    <link rel="index" title="Global index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="ASE  documentation" href="../index.html" />
    <link rel="up" title="Documentation for modules in ASE" href="ase.html" />
    <link rel="next" title="Phonon calculations" href="phonons.html" />
    <link rel="prev" title="Nudged elastic band" href="neb.html" />
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>



        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>



        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             accesskey="">modules</a> |</li>
        <a href="../index.html"><img class="logo" src="../_static/ase.ico" alt="Logo" align="absmiddle"/></a>
          <li><a href="ase.html" accesskey="U">Documentation for modules in ASE</a> &raquo;</li>
      </ul>
    </div>
    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <span class="target" id="module-ase.vibrations"></span><div class="section" id="vibration-analysis">
<h1>Vibration analysis<a class="headerlink" href="#vibration-analysis" title="Permalink to this headline">¶</a></h1>
<p>You can calculate the vibrational modes of a an
<a class="reference internal" href="atoms.html#ase.atoms.Atoms" title="ase.atoms.Atoms"><tt class="xref py py-class docutils literal"><span class="pre">Atoms</span></tt></a> object in the harmonic approximation using
the <a class="reference internal" href="#ase.vibrations.Vibrations" title="ase.vibrations.Vibrations"><tt class="xref py py-class docutils literal"><span class="pre">Vibrations</span></tt></a>.</p>
<dl class="class">
<dt id="ase.vibrations.Vibrations">
<em class="property">class </em><tt class="descclassname">ase.vibrations.</tt><tt class="descname">Vibrations</tt><big>(</big><em>atoms</em>, <em>indices=None</em>, <em>name='vib'</em>, <em>delta=0.01</em>, <em>nfree=2</em><big>)</big><a class="reference internal" href="../_modules/ase/vibrations.html#Vibrations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ase.vibrations.Vibrations" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for calculating vibrational modes using finite difference.</p>
<p>The vibrational modes are calculated from a finite difference
approximation of the Hessian matrix.</p>
<p>The <em>summary()</em>, <em>get_energies()</em> and <em>get_frequencies()</em> methods all take
an optional <em>method</em> keyword.  Use method=&#8217;Frederiksen&#8217; to use the method
described in:</p>
<blockquote>
<div>T. Frederiksen, M. Paulsson, M. Brandbyge, A. P. Jauho:
&#8220;Inelastic transport theory from first-principles: methodology and
applications for nanoscale devices&#8221;, Phys. Rev. B 75, 205413 (2007)</div></blockquote>
<dl class="docutils">
<dt>atoms: Atoms object</dt>
<dd>The atoms to work on.</dd>
<dt>indices: list of int</dt>
<dd>List of indices of atoms to vibrate.  Default behavior is
to vibrate all atoms.</dd>
<dt>name: str</dt>
<dd>Name to use for files.</dd>
<dt>delta: float</dt>
<dd>Magnitude of displacements.</dd>
<dt>nfree: int</dt>
<dd>Number of displacements per atom and cartesian coordinate, 2 and 4 are
supported. Default is 2 which will displace each atom +delta and
-delta for each cartesian coordinate.</dd>
</dl>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ase</span> <span class="kn">import</span> <span class="n">Atoms</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ase.calculators.emt</span> <span class="kn">import</span> <span class="n">EMT</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ase.optimize</span> <span class="kn">import</span> <span class="n">BFGS</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ase.vibrations</span> <span class="kn">import</span> <span class="n">Vibrations</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n2</span> <span class="o">=</span> <span class="n">Atoms</span><span class="p">(</span><span class="s">&#39;N2&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">)],</span>
<span class="gp">... </span>           <span class="n">calculator</span><span class="o">=</span><span class="n">EMT</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">BFGS</span><span class="p">(</span><span class="n">n2</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">fmax</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>
<span class="go">BFGS:   0  16:01:21        0.440339       3.2518</span>
<span class="go">BFGS:   1  16:01:21        0.271928       0.8211</span>
<span class="go">BFGS:   2  16:01:21        0.263278       0.1994</span>
<span class="go">BFGS:   3  16:01:21        0.262777       0.0088</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vib</span> <span class="o">=</span> <span class="n">Vibrations</span><span class="p">(</span><span class="n">n2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vib</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="go">Writing vib.eq.pckl</span>
<span class="go">Writing vib.0x-.pckl</span>
<span class="go">Writing vib.0x+.pckl</span>
<span class="go">Writing vib.0y-.pckl</span>
<span class="go">Writing vib.0y+.pckl</span>
<span class="go">Writing vib.0z-.pckl</span>
<span class="go">Writing vib.0z+.pckl</span>
<span class="go">Writing vib.1x-.pckl</span>
<span class="go">Writing vib.1x+.pckl</span>
<span class="go">Writing vib.1y-.pckl</span>
<span class="go">Writing vib.1y+.pckl</span>
<span class="go">Writing vib.1z-.pckl</span>
<span class="go">Writing vib.1z+.pckl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vib</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
<span class="go">---------------------</span>
<span class="go">#    meV     cm^-1</span>
<span class="go">---------------------</span>
<span class="go">0    0.0       0.0</span>
<span class="go">1    0.0       0.0</span>
<span class="go">2    0.0       0.0</span>
<span class="go">3    2.5      20.4</span>
<span class="go">4    2.5      20.4</span>
<span class="go">5  152.6    1230.8</span>
<span class="go">---------------------</span>
<span class="go">Zero-point energy: 0.079 eV</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vib</span><span class="o">.</span><span class="n">write_mode</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>  <span class="c"># write last mode to trajectory file</span>
</pre></div>
</div>
<dl class="method">
<dt id="ase.vibrations.Vibrations.fold">
<tt class="descname">fold</tt><big>(</big><em>frequencies</em>, <em>intensities</em>, <em>start=800</em>, <em>end=4000</em>, <em>npts=None</em>, <em>width=4</em>, <em>type='Gaussian'</em>, <em>normalize=False</em><big>)</big><a class="reference internal" href="../_modules/ase/vibrations.html#Vibrations.fold"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ase.vibrations.Vibrations.fold" title="Permalink to this definition">¶</a></dt>
<dd><p>Fold frequencies and intensities within the given range
and folding method (Gaussian/Lorentzian).
The energy unit is cm^-1.
normalize=True ensures the integral over the peaks to give the
intensity.</p>
</dd></dl>

<dl class="method">
<dt id="ase.vibrations.Vibrations.get_energies">
<tt class="descname">get_energies</tt><big>(</big><em>method='standard'</em>, <em>direction='central'</em><big>)</big><a class="reference internal" href="../_modules/ase/vibrations.html#Vibrations.get_energies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ase.vibrations.Vibrations.get_energies" title="Permalink to this definition">¶</a></dt>
<dd><p>Get vibration energies in eV.</p>
</dd></dl>

<dl class="method">
<dt id="ase.vibrations.Vibrations.get_frequencies">
<tt class="descname">get_frequencies</tt><big>(</big><em>method='standard'</em>, <em>direction='central'</em><big>)</big><a class="reference internal" href="../_modules/ase/vibrations.html#Vibrations.get_frequencies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ase.vibrations.Vibrations.get_frequencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Get vibration frequencies in cm^-1.</p>
</dd></dl>

<dl class="method">
<dt id="ase.vibrations.Vibrations.get_mode">
<tt class="descname">get_mode</tt><big>(</big><em>n</em><big>)</big><a class="reference internal" href="../_modules/ase/vibrations.html#Vibrations.get_mode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ase.vibrations.Vibrations.get_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Get mode number .</p>
</dd></dl>

<dl class="method">
<dt id="ase.vibrations.Vibrations.run">
<tt class="descname">run</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/ase/vibrations.html#Vibrations.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ase.vibrations.Vibrations.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the vibration calculations.</p>
<p>This will calculate the forces for 6 displacements per atom +/-x,
+/-y, +/-z. Only those calculations that are not already done will be
started. Be aware that an interrupted calculation may produce an empty
file (ending with .pckl), which must be deleted before restarting the
job. Otherwise the forces will not be calculated for that
displacement.</p>
<p>Note that the calculations for the different displacements can be done
simultaneously by several independent processes. This feature relies
on the existence of files and the subsequent creation of the file in
case it is not found.</p>
</dd></dl>

<dl class="method">
<dt id="ase.vibrations.Vibrations.summary">
<tt class="descname">summary</tt><big>(</big><em>method='standard'</em>, <em>direction='central'</em>, <em>freq=None</em>, <em>log=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w' at 0x7fafd52cc150&gt;</em><big>)</big><a class="reference internal" href="../_modules/ase/vibrations.html#Vibrations.summary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ase.vibrations.Vibrations.summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Print a summary of the vibrational frequencies.</p>
<p>Parameters:</p>
<dl class="docutils">
<dt>method <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>Can be &#8216;standard&#8217;(default) or &#8216;Frederiksen&#8217;.</dd>
<dt>direction: string</dt>
<dd>Direction for finite differences. Can be one of &#8216;central&#8217;
(default), &#8216;forward&#8217;, &#8216;backward&#8217;.</dd>
<dt>freq <span class="classifier-delimiter">:</span> <span class="classifier">numpy array</span></dt>
<dd>Optional. Can be used to create a summary on a set of known
frequencies.</dd>
<dt>log <span class="classifier-delimiter">:</span> <span class="classifier">if specified, write output to a different location than</span></dt>
<dd>stdout. Can be an object with a write() method or the name of a
file to create.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ase.vibrations.Vibrations.write_dos">
<tt class="descname">write_dos</tt><big>(</big><em>out='vib-dos.dat'</em>, <em>start=800</em>, <em>end=4000</em>, <em>npts=None</em>, <em>width=10</em>, <em>type='Gaussian'</em>, <em>method='standard'</em>, <em>direction='central'</em><big>)</big><a class="reference internal" href="../_modules/ase/vibrations.html#Vibrations.write_dos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ase.vibrations.Vibrations.write_dos" title="Permalink to this definition">¶</a></dt>
<dd><p>Write out the vibrational density of states to file.</p>
<p>First column is the wavenumber in cm^-1, the second column the
folded vibrational density of states.
Start and end points, and width of the Gaussian/Lorentzian
should be given in cm^-1.</p>
</dd></dl>

<dl class="method">
<dt id="ase.vibrations.Vibrations.write_jmol">
<tt class="descname">write_jmol</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/ase/vibrations.html#Vibrations.write_jmol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ase.vibrations.Vibrations.write_jmol" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes file for viewing of the modes with jmol.</p>
</dd></dl>

<dl class="method">
<dt id="ase.vibrations.Vibrations.write_mode">
<tt class="descname">write_mode</tt><big>(</big><em>n=None</em>, <em>kT=0.025852157076770025</em>, <em>nimages=30</em><big>)</big><a class="reference internal" href="../_modules/ase/vibrations.html#Vibrations.write_mode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ase.vibrations.Vibrations.write_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Write mode number n to trajectory file. If n is not specified,
writes all non-zero modes.</p>
</dd></dl>

</dd></dl>

<p>name is a string that is prefixed to the names of all the files
created. atoms is an Atoms object that is either at a
fully relaxed ground state or at a saddle point. freeatoms is a
list of atom indices for which the vibrational modes will be calculated,
the rest of the atoms are considered frozen. displacements is a
list of displacements, one for each free atom that are used in the
finite difference method to calculate the Hessian matrix. method is -1
for backward differences, 0 for centered differences, and 1 for
forward differences.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Using the <em>dacapo</em> calculator you must make sure that the symmetry
program in dacapo finds the same number of symmetries for the
displaced configurations in the vibrational modules as found in
the ground state used as input.
This is because the wavefunction is reused from one displacement
to the next.
One way to ensure this is to tell dacapo not to use symmetries.</p>
<p class="last">This will show op as a python error &#8216;Frames are not aligned&#8217;.
This could be the case for other calculators as well.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">

          <h3>ASE</h3>
          <ul class="this-page-menu">
            <li><a href="../overview.html">
              Overview</a></li>
            <li><a href="../download.html">
              Installation</a></li>
            <li><a href="../tutorials/tutorials.html">
              Tutorials</em></a></li>
            <li><a href="ase.html">
              Documentation</a></li>
            <li><a href="../faq.html">FAQ</a></li>
            <li><a href="../mailinglists.html">Mailing lists</a></li>
            <li><a href="../development/releasenotes.html">Release notes</a></li>
            <li><a href="../licenseinfo.html">License info</a></li>
           </ul>
           <h3>Development</h3>
           <ul class="this-page-menu">
            <li><a href="../development/development.html">
              Development</a></li>
            <li><a href="http://wiki.fysik.dtu.dk/ase/epydoc/ase-module.html">
              Epydoc</a></li>
            <li><a href="http://trac.fysik.dtu.dk/projects/ase/browser/trunk/">
              Source code (svn)</a></li>
            <li><a href="../bugs.html">Bugs!</a></li>
            <li><a href="http://trac.fysik.dtu.dk/projects/ase/report/1">
              Bug Tracker</a></li>
            <li><a href="https://ase-buildbot.fysik.dtu.dk/waterfall">
              BuildBot</a></li>
          </ul>
            <h4>Previous topic</h4>
            <p class="topless"><a href="neb.html" title="previous chapter">Nudged elastic band</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="phonons.html" title="next chapter">Phonon calculations</a></p>
            <ul class="this-page-menu">
              <li><a href="../_sources/ase/vibrations.txt">Show Source</a></li>
            </ul>
            <h3>Quick search</h3>
            <form class="search" action="../search.html" method="get">
              <input type="text" name="q" size="18" /> <input type="submit" value="Go" />
              <input type="hidden" name="check_keywords" value="yes" />
              <input type="hidden" name="area" value="default" />
            </form>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>



        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>



        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             accesskey="">modules</a> |</li>
        <a href="../index.html"><img class="logo" src="../_static/ase.ico" alt="Logo" align="absmiddle"/></a>
          <li><a href="ase.html" accesskey="U">Documentation for modules in ASE</a> &raquo;</li>
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2015, CAMd.
      Last updated on Tue, 21 Jul 2015 11:00:40.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>