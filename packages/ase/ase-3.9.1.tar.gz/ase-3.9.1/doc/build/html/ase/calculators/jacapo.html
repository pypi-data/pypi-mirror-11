<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Jacapo - ASE python interface for Dacapo &mdash; ASE  documentation</title>
    <link rel="stylesheet" href="../../_static/ase.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../../',
          VERSION:     '',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../_static/ase.ico"/>
    <link rel="contents" title="Global table of contents" href="../../contents.html" />
    <link rel="index" title="Global index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="top" title="ASE  documentation" href="../../index.html" />
    <link rel="up" title="Calculators" href="calculators.html" />
    <link rel="next" title="LAMMPS Calculators" href="lammps.html" />
    <link rel="prev" title="Gromacs" href="gromacs.html" />
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>



        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>



        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             accesskey="">modules</a> |</li>
        <a href="../../index.html"><img class="logo" src="../../_static/ase.ico" alt="Logo" align="absmiddle"/></a>
          <li><a href="../ase.html" accesskey="U">Documentation for modules in ASE</a> &raquo;</li>
          <li><a href="calculators.html" accesskey="U">Calculators</a> &raquo;</li>
      </ul>
    </div>
    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <span class="target" id="module-ase.calculators.jacapo"></span><div class="section" id="jacapo-ase-python-interface-for-dacapo">
<h1>Jacapo - ASE python interface for Dacapo<a class="headerlink" href="#jacapo-ase-python-interface-for-dacapo" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://gilgamesh.cheme.cmu.edu/doc/software/jacapo/index.html">Jacapo</a> is an ASE interface for <a class="reference external" href="http://wiki.fysik.dtu.dk/dacapo">Dacapo</a> that is fully compatible with ASE. It
replaces the old Dacapo interface using Numeric python and ASE2.
The code was originally developed by John Kitchin and detailed documentation
as well as many examples are available online:</p>
<p><a class="reference external" href="http://gilgamesh.cheme.cmu.edu/doc/software/jacapo/index.html">http://gilgamesh.cheme.cmu.edu/doc/software/jacapo/index.html</a></p>
<p>Jacapo is included as an optional calculator in ASE and small differences to the
above documentation may occur, and the documentation is no longer maintained.</p>
</div>
<div class="section" id="jacapo-calculator">
<h2>Jacapo calculator<a class="headerlink" href="#jacapo-calculator" title="Permalink to this headline">¶</a></h2>
<p>The Jacapo interface is automatically installed with ase and can be imported using:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">ase.calculators.jacapo</span> <span class="kn">import</span> <span class="n">Jacapo</span>
</pre></div>
</div>
<p>(You will need to have a working installation of Dacapo, however.)</p>
<dl class="class">
<dt id="ase.calculators.jacapo.Jacapo">
<em class="property">class </em><tt class="descclassname">ase.calculators.jacapo.</tt><tt class="descname">Jacapo</tt><a class="headerlink" href="#ase.calculators.jacapo.Jacapo" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Here is a list of available keywords to initialize the calculator:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="11%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">keyword</th>
<th class="head">type</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">nc</span></tt></td>
<td><tt class="docutils literal"><span class="pre">str</span></tt></td>
<td>Output NetCDF file, or input file if nc already exists.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">outnc</span></tt></td>
<td><tt class="docutils literal"><span class="pre">str</span></tt></td>
<td>Output file. By default equal to nc.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">atoms</span></tt></td>
<td><tt class="docutils literal"><span class="pre">object</span></tt></td>
<td>ase atoms object</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">pw</span></tt></td>
<td><tt class="docutils literal"><span class="pre">float</span></tt></td>
<td>Planewave cutoff in eV</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">dw</span></tt></td>
<td><tt class="docutils literal"><span class="pre">float</span></tt></td>
<td>Density cutoff in eV</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">xc</span></tt></td>
<td><tt class="docutils literal"><span class="pre">str</span></tt></td>
<td>Exchange-correlation functional. One of [&#8216;PZ&#8217;,&#8217;VWN&#8217;,&#8217;PW91&#8217;,&#8217;PBE&#8217;,&#8217;RPBE&#8217;,&#8217;revPBE&#8217;]</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">nbands</span></tt></td>
<td><tt class="docutils literal"><span class="pre">int</span></tt></td>
<td>Number of bands</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ft</span></tt></td>
<td><tt class="docutils literal"><span class="pre">float</span></tt></td>
<td>Fermi temperature</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">kpts</span></tt></td>
<td><tt class="docutils literal"><span class="pre">list</span></tt></td>
<td>K-point grid, e.g. kpts = (2,2,1)</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">spinpol</span></tt></td>
<td><tt class="docutils literal"><span class="pre">boolean</span></tt></td>
<td>Turn on/off spin-polarization</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">fixmagmom</span></tt></td>
<td><tt class="docutils literal"><span class="pre">str</span></tt></td>
<td>Magnetic moment of the unit cell</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">symmetry</span></tt></td>
<td><tt class="docutils literal"><span class="pre">boolean</span></tt></td>
<td>Turn on/off symmetry reduction</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">stress</span></tt></td>
<td><tt class="docutils literal"><span class="pre">boolean</span></tt></td>
<td>Turn on/off stress calculation</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">dipole</span></tt></td>
<td><tt class="docutils literal"><span class="pre">boolean</span></tt></td>
<td>Turn on/off dipole correction</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ados</span></tt></td>
<td><tt class="docutils literal"><span class="pre">dict</span></tt></td>
<td>Atom-projected density of states</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">stay_alive</span></tt></td>
<td><tt class="docutils literal"><span class="pre">boolean</span></tt></td>
<td>Turn on/off stay alive</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">debug</span></tt></td>
<td><tt class="docutils literal"><span class="pre">int</span></tt></td>
<td>Set debug level (0=off, 10=extreme)</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">deletenc</span></tt></td>
<td><tt class="docutils literal"><span class="pre">boolean</span></tt></td>
<td>If the nc file exists, delete it (to ensure a fresh run). Default is False.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>Here is an example of how to calculate the total energy of a H atom.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This is an example only - the parameters are not physically meaningful!</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">ase</span> <span class="kn">import</span> <span class="n">Atoms</span><span class="p">,</span> <span class="n">Atom</span>
<span class="kn">from</span> <span class="nn">ase.io</span> <span class="kn">import</span> <span class="n">write</span>
<span class="kn">from</span> <span class="nn">ase.calculators.jacapo</span> <span class="kn">import</span> <span class="n">Jacapo</span>

<span class="n">atoms</span> <span class="o">=</span> <span class="n">Atoms</span><span class="p">([</span><span class="n">Atom</span><span class="p">(</span><span class="s">&#39;H&#39;</span><span class="p">,[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])],</span>
              <span class="n">cell</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
              <span class="n">pbc</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">calc</span> <span class="o">=</span> <span class="n">Jacapo</span><span class="p">(</span><span class="s">&#39;Jacapo-test.nc&#39;</span><span class="p">,</span>
              <span class="n">pw</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
              <span class="n">nbands</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
              <span class="n">kpts</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
              <span class="n">spinpol</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">dipole</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">symmetry</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">ft</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>

<span class="n">atoms</span><span class="o">.</span><span class="n">set_calculator</span><span class="p">(</span><span class="n">calc</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">atoms</span><span class="o">.</span><span class="n">get_potential_energy</span><span class="p">())</span>
<span class="n">write</span><span class="p">(</span><span class="s">&#39;Jacapo-test.traj&#39;</span><span class="p">,</span> <span class="n">atoms</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that all calculator parameters should be set in the calculator definition
itself. Do not attempt to use the calc.set_* commands as they are intended to
be internal to the calculator. Note also that Dacapo can only operate with
periodic boundary conditions, so be sure that pbc is set to True.</p>
</div>
<div class="section" id="restarting-from-an-old-calculation">
<h2>Restarting from an old calculation<a class="headerlink" href="#restarting-from-an-old-calculation" title="Permalink to this headline">¶</a></h2>
<p>If the file you specify to Jacapo with the <tt class="docutils literal"><span class="pre">nc</span></tt> keyword exists, Jacapo will
assume you are attempting to restart an existing calculation. If you do not
want this behavior, turn the flag <tt class="docutils literal"><span class="pre">deletenc</span></tt> to True in your calculator
definition.</p>
<p>For example, it is possible to continue a geometry optimization with something
like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">calc</span> <span class="o">=</span> <span class="n">Jacapo</span><span class="p">(</span><span class="s">&#39;old.nc&#39;</span><span class="p">,</span> <span class="n">stay_alive</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">atoms</span> <span class="o">=</span> <span class="n">calc</span><span class="o">.</span><span class="n">get_atoms</span><span class="p">()</span>
<span class="n">dyn</span> <span class="o">=</span> <span class="n">QuasiNewton</span><span class="p">(</span><span class="n">atoms</span><span class="p">,</span> <span class="n">logfile</span><span class="o">=</span><span class="s">&#39;qn.log&#39;</span><span class="p">)</span>
<span class="n">dyn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">fmax</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
</pre></div>
</div>
<p>Note, that the stay_alive flag is not stored in the .nc file and must be set
when the calculator instance is created.</p>
</div>
<div class="section" id="atom-projected-density-of-states">
<h2>Atom-projected density of states<a class="headerlink" href="#atom-projected-density-of-states" title="Permalink to this headline">¶</a></h2>
<p>To find the atom-projected density of states with Jacapo, first specify the
ados dictionary in your calculator definition, as in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">calc</span> <span class="o">=</span> <span class="n">Jacapo</span><span class="p">(</span> <span class="o">...</span> <span class="p">,</span>
              <span class="n">ados</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;energywindow&#39;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mf">10.</span><span class="p">,</span> <span class="mf">5.</span><span class="p">),</span>
                    <span class="s">&#39;energywidth&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span>
                    <span class="s">&#39;npoints&#39;</span><span class="p">:</span> <span class="mi">250</span><span class="p">,</span>
                    <span class="s">&#39;cutoff&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">})</span>
</pre></div>
</div>
<p>After this is established, you can use the get_ados command to get the
desired ADOS data. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">energies</span><span class="p">,</span> <span class="n">dos</span> <span class="o">=</span> <span class="n">calc</span><span class="o">.</span><span class="n">get_ados</span><span class="p">(</span><span class="n">atoms</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                              <span class="n">orbitals</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;d&#39;</span><span class="p">],</span>
                              <span class="n">cutoff</span><span class="o">=</span><span class="s">&#39;short&#39;</span><span class="p">,</span>
                              <span class="n">spin</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">

          <h3>ASE</h3>
          <ul class="this-page-menu">
            <li><a href="../../overview.html">
              Overview</a></li>
            <li><a href="../../download.html">
              Installation</a></li>
            <li><a href="../../tutorials/tutorials.html">
              Tutorials</em></a></li>
            <li><a href="../ase.html">
              Documentation</a></li>
            <li><a href="../../faq.html">FAQ</a></li>
            <li><a href="../../mailinglists.html">Mailing lists</a></li>
            <li><a href="../../development/releasenotes.html">Release notes</a></li>
            <li><a href="../../licenseinfo.html">License info</a></li>
           </ul>
           <h3>Development</h3>
           <ul class="this-page-menu">
            <li><a href="../../development/development.html">
              Development</a></li>
            <li><a href="http://wiki.fysik.dtu.dk/ase/epydoc/ase-module.html">
              Epydoc</a></li>
            <li><a href="http://trac.fysik.dtu.dk/projects/ase/browser/trunk/">
              Source code (svn)</a></li>
            <li><a href="../../bugs.html">Bugs!</a></li>
            <li><a href="http://trac.fysik.dtu.dk/projects/ase/report/1">
              Bug Tracker</a></li>
            <li><a href="https://ase-buildbot.fysik.dtu.dk/waterfall">
              BuildBot</a></li>
          </ul>
            <h3>This Page</h3>
            <ul>
<li><a class="reference internal" href="#">Jacapo - ASE python interface for Dacapo</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#jacapo-calculator">Jacapo calculator</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
<li><a class="reference internal" href="#restarting-from-an-old-calculation">Restarting from an old calculation</a></li>
<li><a class="reference internal" href="#atom-projected-density-of-states">Atom-projected density of states</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="gromacs.html" title="previous chapter">Gromacs</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="lammps.html" title="next chapter">LAMMPS Calculators</a></p>
            <ul class="this-page-menu">
              <li><a href="../../_sources/ase/calculators/jacapo.txt">Show Source</a></li>
            </ul>
            <h3>Quick search</h3>
            <form class="search" action="../../search.html" method="get">
              <input type="text" name="q" size="18" /> <input type="submit" value="Go" />
              <input type="hidden" name="check_keywords" value="yes" />
              <input type="hidden" name="area" value="default" />
            </form>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>



        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>



        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             accesskey="">modules</a> |</li>
        <a href="../../index.html"><img class="logo" src="../../_static/ase.ico" alt="Logo" align="absmiddle"/></a>
          <li><a href="../ase.html" accesskey="U">Documentation for modules in ASE</a> &raquo;</li>
          <li><a href="calculators.html" accesskey="U">Calculators</a> &raquo;</li>
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2015, CAMd.
      Last updated on Tue, 21 Jul 2015 11:00:40.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>