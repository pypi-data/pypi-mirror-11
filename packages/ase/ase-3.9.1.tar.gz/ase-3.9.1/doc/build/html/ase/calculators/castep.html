<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>CASTEP &mdash; ASE  documentation</title>
    <link rel="stylesheet" href="../../_static/ase.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../../',
          VERSION:     '',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../_static/ase.ico"/>
    <link rel="contents" title="Global table of contents" href="../../contents.html" />
    <link rel="index" title="Global index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="top" title="ASE  documentation" href="../../index.html" />
    <link rel="up" title="Calculators" href="calculators.html" />
    <link rel="next" title="<no title>" href="cp2k.html" />
    <link rel="prev" title="ABINIT" href="abinit.html" />
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>



        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>



        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             accesskey="">modules</a> |</li>
        <a href="../../index.html"><img class="logo" src="../../_static/ase.ico" alt="Logo" align="absmiddle"/></a>
          <li><a href="../ase.html" accesskey="U">Documentation for modules in ASE</a> &raquo;</li>
          <li><a href="calculators.html" accesskey="U">Calculators</a> &raquo;</li>
      </ul>
    </div>
    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <span class="target" id="module-ase.calculators.castep"></span><div class="section" id="castep">
<h1>CASTEP<a class="headerlink" href="#castep" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://www.castep.org/">CASTEP</a> <a class="footnote-reference" href="#id3" id="id1">[1]</a> <a class="reference external" href="http://en.wikipedia.org/wiki/CASTEP">W</a> is a software package which uses density functional theory to
provide a good atomic-level description of all manner of materials and
molecules. CASTEP can give information about total energies, forces and
stresses on an atomic system, as well as calculating optimum geometries, band
structures, optical spectra, phonon spectra and much more. It can also perform
molecular dynamics simulations.</p>
<p>The CASTEP calculator interface class offers intuitive access to all CASTEP
settings and most results. All CASTEP specific settings are accessible via
attribute access (<em>i.e</em>. <tt class="docutils literal"><span class="pre">calc.param.keyword</span> <span class="pre">=</span> <span class="pre">...</span></tt> or
<tt class="docutils literal"><span class="pre">calc.cell.keyword</span> <span class="pre">=</span> <span class="pre">...</span></tt>)</p>
</div>
<div class="section" id="getting-started">
<h2>Getting Started:<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>Set the environment variables appropriately for your system.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">export</span> <span class="n">CASTEP_COMMAND</span><span class="o">=</span><span class="s">&#39; ... &#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">export</span> <span class="n">CASTEP_PP_PATH</span><span class="o">=</span><span class="s">&#39; ... &#39;</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Note: alternatively to CASTEP_PP_PATH one can set PSPOT_DIR</dt>
<dd>as CASTEP consults this by default, i.e.</dd>
</dl>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">export</span> <span class="n">PSPOT_DIR</span><span class="o">=</span><span class="s">&#39; ... &#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="running-the-calculator">
<h2>Running the Calculator<a class="headerlink" href="#running-the-calculator" title="Permalink to this headline">¶</a></h2>
<p>The default initialization command for the CASTEP calculator is</p>
<dl class="class">
<dt id="ase.calculators.castep.Castep">
<em class="property">class </em><tt class="descclassname">ase.calculators.castep.</tt><tt class="descname">Castep</tt><big>(</big><em>directory='CASTEP'</em>, <em>label='castep'</em><big>)</big><a class="reference internal" href="../../_modules/ase/calculators/castep.html#Castep"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ase.calculators.castep.Castep" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>To do a minimal run one only needs to set atoms, this will use all
default settings of CASTEP, meaning LDA, singlepoint, etc..</p>
<p>With a generated castep_keywords.py in place all options are accessible
by inspection, <em>i.e.</em> tab-completion. This works best when using <tt class="docutils literal"><span class="pre">ipython</span></tt>.
All options can be accessed via <tt class="docutils literal"><span class="pre">calc.param.&lt;TAB&gt;</span></tt> or <tt class="docutils literal"><span class="pre">calc.cell.&lt;TAB&gt;</span></tt>
and documentation is printed with <tt class="docutils literal"><span class="pre">calc.param.&lt;keyword&gt;</span> <span class="pre">?</span></tt> or
<tt class="docutils literal"><span class="pre">calc.cell.&lt;keyword&gt;</span> <span class="pre">?</span></tt>. All options can also be set directly
using <tt class="docutils literal"><span class="pre">calc.keyword</span> <span class="pre">=</span> <span class="pre">...</span></tt> or <tt class="docutils literal"><span class="pre">calc.KEYWORD</span> <span class="pre">=</span> <span class="pre">...</span></tt> or even
<tt class="docutils literal"><span class="pre">calc.KeYwOrD</span></tt> or directly as named arguments in the call to the constructor
(<em>e.g.</em> <tt class="docutils literal"><span class="pre">Castep(task='GeometryOptimization')</span></tt>).</p>
<p>All options that go into the <tt class="docutils literal"><span class="pre">.param</span></tt> file are held in an <tt class="docutils literal"><span class="pre">CastepParam</span></tt>
instance, while all options that go into the <tt class="docutils literal"><span class="pre">.cell</span></tt> file and don&#8217;t belong
to the atoms object are held in an <tt class="docutils literal"><span class="pre">CastepCell</span></tt> instance. Each instance can
be created individually and can be added to calculators by attribute
assignment, <em>i.e.</em> <tt class="docutils literal"><span class="pre">calc.param</span> <span class="pre">=</span> <span class="pre">param</span></tt> or <tt class="docutils literal"><span class="pre">calc.cell</span> <span class="pre">=</span> <span class="pre">cell</span></tt>.</p>
<p>All internal variables of the calculator start with an underscore (_).
All cell attributes that clearly belong into the atoms object are blocked.
Setting <tt class="docutils literal"><span class="pre">calc.atoms_attribute</span></tt> (<em>e.g.</em> <tt class="docutils literal"><span class="pre">=</span> <span class="pre">positions</span></tt>) is sent directly to
the atoms object.</p>
</div>
<div class="section" id="arguments">
<h2>Arguments:<a class="headerlink" href="#arguments" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Keyword</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">directory</span></tt></td>
<td>The relative path where all input and output files
will be placed. If this does not exist, it will be
created.  Existing directories will be moved to
directory-TIMESTAMP unless self._rename_existing_dir
is set to false.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">label</span></tt></td>
<td>The prefix of .param, .cell, .castep, etc. files.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="additional-settings">
<h2>Additional Settings<a class="headerlink" href="#additional-settings" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Internal Setting</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">_castep_command</span></tt></td>
<td>(<tt class="docutils literal"><span class="pre">=castep</span></tt>): the actual shell command used to
call CASTEP.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">_check_checkfile</span></tt></td>
<td>(<tt class="docutils literal"><span class="pre">=True</span></tt>): this makes write_param() only
write a continue or reuse statement if the
addressed .check or .castep_bin file exists in the
directory.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">_copy_pspots</span></tt></td>
<td>(<tt class="docutils literal"><span class="pre">=False</span></tt>): if set to True the calculator will
actually copy the needed pseudo-potential (*.usp)
file, usually it will only create symlinks.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">_export_settings</span></tt></td>
<td>(<tt class="docutils literal"><span class="pre">=True</span></tt>): if this is set to
True, all calculator internal settings shown here
will be included in the .param in a comment line (#)
and can be read again by merge_param. merge_param
can be forced to ignore this directive using the
optional argument <tt class="docutils literal"><span class="pre">ignore_internal_keys=True</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">_force_write</span></tt></td>
<td>(<tt class="docutils literal"><span class="pre">=True</span></tt>): this controls wether the *cell and
*param will be overwritten.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">_prepare_input_only</span></tt></td>
<td>(<tt class="docutils literal"><span class="pre">=False</span></tt>): If set to True, the calculator will
create *cell und *param file but not
start the calculation itself.
If this is used to prepare jobs locally
and run on a remote cluster it is recommended
to set <tt class="docutils literal"><span class="pre">_copy_pspots</span> <span class="pre">=</span> <span class="pre">True</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">_castep_pp_path</span></tt></td>
<td>(<tt class="docutils literal"><span class="pre">='.'</span></tt>) : the place where the calculator
will look for pseudo-potential files.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">_rename_existing_dir</span></tt></td>
<td>(<tt class="docutils literal"><span class="pre">=True</span></tt>) : when using a new instance
of the calculator, this will move directories out of
the way that would be overwritten otherwise,
appending a date string.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">_set_atoms</span></tt></td>
<td>(<tt class="docutils literal"><span class="pre">=False</span></tt>) : setting this to True will overwrite
any atoms object previously attached to the
calculator when reading a .castep file.  By de-
fault, the read() function will only create a new
atoms object if none has been attached and other-
wise try to assign forces etc. based on the atom&#8217;s
positions.  <tt class="docutils literal"><span class="pre">_set_atoms=True</span></tt> could be necessary
if one uses CASTEP&#8217;s internal geometry optimization
(<tt class="docutils literal"><span class="pre">calc.param.task='GeometryOptimization'</span></tt>)
because then the positions get out of sync.
<em>Warning</em>: this option is generally not recommended
unless one knows one really needs it. There should
never be any need, if CASTEP is used as a
single-point calculator.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">_track_output</span></tt></td>
<td>(<tt class="docutils literal"><span class="pre">=False</span></tt>) : if set to true, the interface
will append a number to the label on all input
and output files, where n is the number of calls
to this instance. <em>Warning</em>: this setting may con-
sume a lot more disk space because of the additio-
nal *check files.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">_try_reuse</span></tt></td>
<td><p class="first">(<tt class="docutils literal"><span class="pre">=_track_output</span></tt>) : when setting this, the in-
terface will try to fetch the reuse file from the
previous run even if _track_output is True. By de-
fault it is equal to _track_output, but may be
overridden.</p>
<p class="last">Since this behavior may not always be desirable for
single-point calculations. Regular reuse for <em>e.g.</em>
a geometry-optimization can be achieved by setting
<tt class="docutils literal"><span class="pre">calc.param.reuse</span> <span class="pre">=</span> <span class="pre">True</span></tt>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="special-features">
<h2>Special features:<a class="headerlink" href="#special-features" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">.dryrun_ok()</span></tt></dt>
<dd>Runs <tt class="docutils literal"><span class="pre">castep_command</span> <span class="pre">seed</span> <span class="pre">-dryrun</span></tt> in a temporary directory return True if
all variables initialized ok. This is a fast way to catch errors in the
input. Afterwards _kpoints_used is set.</dd>
<dt><tt class="docutils literal"><span class="pre">.merge_param()</span></tt></dt>
<dd>Takes a filename or filehandler of a .param file or CastepParam instance and
merges it into the current calculator instance, overwriting current settings</dd>
<dt><tt class="docutils literal"><span class="pre">.keyword.clear()</span></tt></dt>
<dd>Can be used on any option like <tt class="docutils literal"><span class="pre">calc.param.keyword.clear()</span></tt> or
<tt class="docutils literal"><span class="pre">calc.cell.keyword.clear()</span></tt> to return to the CASTEP default.</dd>
<dt><tt class="docutils literal"><span class="pre">.initialize()</span></tt></dt>
<dd>Creates all needed input in the <tt class="docutils literal"><span class="pre">_directory</span></tt>. This can then copied to and
run in a place without ASE or even python.</dd>
<dt><tt class="docutils literal"><span class="pre">.set_pspot('&lt;library&gt;')</span></tt></dt>
<dd>This automatically sets the pseudo-potential for all present species to
<em>&lt;Species&gt;_&lt;library&gt;.usp</em>. Make sure that <tt class="docutils literal"><span class="pre">_castep_pp_path</span></tt> is set
correctly.</dd>
<dt><tt class="docutils literal"><span class="pre">print(calc)</span></tt></dt>
<dd>Prints a short summary of the calculator settings and atoms.</dd>
<dt><tt class="docutils literal"><span class="pre">ase.io.castep.read_seed('path-to/seed')</span></tt></dt>
<dd>Given you have a combination of seed.{param,cell,castep} this will return an
atoms object with the last ionic positions in the .castep file and all other
settings parsed from the .cell and .param file. If no .castep file is found
the positions are taken from the .cell file. The output directory will be
set to the same directory, only the label is preceded by &#8216;copy_of_&#8217;  to
avoid overwriting.</dd>
</dl>
</div>
<div class="section" id="notes-issues">
<h2>Notes/Issues:<a class="headerlink" href="#notes-issues" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Currently <em>only</em> the FixAtoms <em>constraint</em> is fully supported for
reading and writing.</li>
<li>There is no support for the CASTEP <em>unit system</em>. Units of eV and Angstrom
are used throughout. In particular when converting total energies from
different calculators, one should check that the same <a class="reference external" href="http://physics.nist.gov/cuu/Constants/index.html">CODATA</a> version is
used for constants and conversion factors, respectively.</li>
</ul>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>S. J. Clark, M. D. Segall, C. J. Pickard, P. J. Hasnip, M. J. Probert,
K. Refson, M. C. Payne Zeitschrift für Kristallographie 220(5-6)
pp.567- 570 (2005) <a class="reference external" href="http://goo.gl/wW50m">PDF</a>.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="example">
<h2>Example:<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;This simple demo calculates the total energy of CO molecules</span>
<span class="sd">using once LDA and once PBE as xc-functional. Obviously</span>
<span class="sd">some parts in this scripts are longer than necessary, but are shown</span>
<span class="sd">to demonstrate some more features.&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">ase</span>
<span class="kn">import</span> <span class="nn">ase.calculators.castep</span>
<span class="kn">import</span> <span class="nn">ase.io.castep</span>

<span class="n">calc</span> <span class="o">=</span> <span class="n">ase</span><span class="o">.</span><span class="n">calculators</span><span class="o">.</span><span class="n">castep</span><span class="o">.</span><span class="n">Castep</span><span class="p">()</span>
<span class="n">directory</span> <span class="o">=</span> <span class="s">&#39;CASTEP_ASE_DEMO&#39;</span>

<span class="c"># include interface settings in .param file</span>
<span class="n">calc</span><span class="o">.</span><span class="n">_export_settings</span> <span class="o">=</span> <span class="bp">True</span>

<span class="c"># reuse the same directory</span>
<span class="n">calc</span><span class="o">.</span><span class="n">_directory</span> <span class="o">=</span> <span class="n">directory</span>
<span class="n">calc</span><span class="o">.</span><span class="n">_rename_existing_dir</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">calc</span><span class="o">.</span><span class="n">_label</span> <span class="o">=</span> <span class="s">&#39;CO_LDA&#39;</span>

<span class="c"># necessary for tasks with changing positions</span>
<span class="c"># such as GeometryOptimization or MolecularDynamics</span>
<span class="n">calc</span><span class="o">.</span><span class="n">_set_atoms</span> <span class="o">=</span> <span class="bp">True</span>

<span class="c"># Param settings</span>
<span class="n">calc</span><span class="o">.</span><span class="n">param</span><span class="o">.</span><span class="n">xc_functional</span> <span class="o">=</span> <span class="s">&#39;LDA&#39;</span>
<span class="n">calc</span><span class="o">.</span><span class="n">param</span><span class="o">.</span><span class="n">cut_off_energy</span> <span class="o">=</span> <span class="mi">400</span>
<span class="c"># Prevent CASTEP from writing *wvfn* files</span>
<span class="n">calc</span><span class="o">.</span><span class="n">param</span><span class="o">.</span><span class="n">num_dump_cycles</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c"># Cell settings</span>
<span class="n">calc</span><span class="o">.</span><span class="n">cell</span><span class="o">.</span><span class="n">kpoint_mp_grid</span> <span class="o">=</span> <span class="s">&#39;1 1 1&#39;</span>
<span class="n">calc</span><span class="o">.</span><span class="n">cell</span><span class="o">.</span><span class="n">fix_com</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">calc</span><span class="o">.</span><span class="n">cell</span><span class="o">.</span><span class="n">fix_all_cell</span> <span class="o">=</span> <span class="bp">True</span>

<span class="c"># Set and clear and reset settings (just for shows)</span>
<span class="n">calc</span><span class="o">.</span><span class="n">param</span><span class="o">.</span><span class="n">task</span> <span class="o">=</span> <span class="s">&#39;SinglePoint&#39;</span>
<span class="c"># Reset to CASTEP default</span>
<span class="n">calc</span><span class="o">.</span><span class="n">param</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

<span class="c"># all of the following are identical</span>
<span class="n">calc</span><span class="o">.</span><span class="n">param</span><span class="o">.</span><span class="n">task</span> <span class="o">=</span> <span class="s">&#39;GeometryOptimization&#39;</span>
<span class="n">calc</span><span class="o">.</span><span class="n">task</span> <span class="o">=</span> <span class="s">&#39;GeometryOptimization&#39;</span>
<span class="n">calc</span><span class="o">.</span><span class="n">TASK</span> <span class="o">=</span> <span class="s">&#39;GeometryOptimization&#39;</span>
<span class="n">calc</span><span class="o">.</span><span class="n">Task</span> <span class="o">=</span> <span class="s">&#39;GeometryOptimization&#39;</span>


<span class="c"># Prepare atoms</span>
<span class="n">mol</span> <span class="o">=</span> <span class="n">ase</span><span class="o">.</span><span class="n">atoms</span><span class="o">.</span><span class="n">Atoms</span><span class="p">(</span><span class="s">&#39;CO&#39;</span><span class="p">,</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">]],</span> <span class="n">cell</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
<span class="n">mol</span><span class="o">.</span><span class="n">set_calculator</span><span class="p">(</span><span class="n">calc</span><span class="p">)</span>

<span class="c"># Check for correct input</span>
<span class="k">if</span> <span class="n">calc</span><span class="o">.</span><span class="n">dryrun_ok</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s"> : </span><span class="si">%s</span><span class="s"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">mol</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">_label</span><span class="p">,</span> <span class="n">mol</span><span class="o">.</span><span class="n">get_potential_energy</span><span class="p">()))</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;Found error in input&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">calc</span><span class="o">.</span><span class="n">_error</span><span class="p">)</span>


<span class="c"># Read all settings from previous calculation</span>
<span class="n">mol</span> <span class="o">=</span> <span class="n">ase</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">castep</span><span class="o">.</span><span class="n">read_seed</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">/CO_LDA&#39;</span> <span class="o">%</span> <span class="n">directory</span><span class="p">)</span>

<span class="c"># Use the OTF pseudo-potential we have just generated</span>
<span class="n">mol</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">set_pspot</span><span class="p">(</span><span class="s">&#39;OTF&#39;</span><span class="p">)</span>

<span class="c"># Change some settings</span>
<span class="n">mol</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">param</span><span class="o">.</span><span class="n">xc_functional</span> <span class="o">=</span> <span class="s">&#39;PBE&#39;</span>
<span class="c"># don&#39;t forget to set an appropriate label</span>
<span class="n">mol</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">_label</span> <span class="o">=</span> <span class="s">&#39;CO_PBE&#39;</span>
<span class="c"># Recalculate the potential energy</span>
<span class="k">print</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s"> : </span><span class="si">%s</span><span class="s"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">mol</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">_label</span><span class="p">,</span> <span class="n">mol</span><span class="o">.</span><span class="n">get_potential_energy</span><span class="p">()))</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">

          <h3>ASE</h3>
          <ul class="this-page-menu">
            <li><a href="../../overview.html">
              Overview</a></li>
            <li><a href="../../download.html">
              Installation</a></li>
            <li><a href="../../tutorials/tutorials.html">
              Tutorials</em></a></li>
            <li><a href="../ase.html">
              Documentation</a></li>
            <li><a href="../../faq.html">FAQ</a></li>
            <li><a href="../../mailinglists.html">Mailing lists</a></li>
            <li><a href="../../development/releasenotes.html">Release notes</a></li>
            <li><a href="../../licenseinfo.html">License info</a></li>
           </ul>
           <h3>Development</h3>
           <ul class="this-page-menu">
            <li><a href="../../development/development.html">
              Development</a></li>
            <li><a href="http://wiki.fysik.dtu.dk/ase/epydoc/ase-module.html">
              Epydoc</a></li>
            <li><a href="http://trac.fysik.dtu.dk/projects/ase/browser/trunk/">
              Source code (svn)</a></li>
            <li><a href="../../bugs.html">Bugs!</a></li>
            <li><a href="http://trac.fysik.dtu.dk/projects/ase/report/1">
              Bug Tracker</a></li>
            <li><a href="https://ase-buildbot.fysik.dtu.dk/waterfall">
              BuildBot</a></li>
          </ul>
            <h3>This Page</h3>
            <ul>
<li><a class="reference internal" href="#">CASTEP</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#getting-started">Getting Started:</a></li>
<li><a class="reference internal" href="#running-the-calculator">Running the Calculator</a></li>
<li><a class="reference internal" href="#arguments">Arguments:</a></li>
<li><a class="reference internal" href="#additional-settings">Additional Settings</a></li>
<li><a class="reference internal" href="#special-features">Special features:</a></li>
<li><a class="reference internal" href="#notes-issues">Notes/Issues:</a></li>
<li><a class="reference internal" href="#example">Example:</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="abinit.html" title="previous chapter">ABINIT</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="cp2k.html" title="next chapter">&lt;no title&gt;</a></p>
            <ul class="this-page-menu">
              <li><a href="../../_sources/ase/calculators/castep.txt">Show Source</a></li>
            </ul>
            <h3>Quick search</h3>
            <form class="search" action="../../search.html" method="get">
              <input type="text" name="q" size="18" /> <input type="submit" value="Go" />
              <input type="hidden" name="check_keywords" value="yes" />
              <input type="hidden" name="area" value="default" />
            </form>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>



        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>



        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             accesskey="">modules</a> |</li>
        <a href="../../index.html"><img class="logo" src="../../_static/ase.ico" alt="Logo" align="absmiddle"/></a>
          <li><a href="../ase.html" accesskey="U">Documentation for modules in ASE</a> &raquo;</li>
          <li><a href="calculators.html" accesskey="U">Calculators</a> &raquo;</li>
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2015, CAMd.
      Last updated on Tue, 21 Jul 2015 11:00:40.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>