<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>VASP &mdash; ASE  documentation</title>
    <link rel="stylesheet" href="../../_static/ase.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../../',
          VERSION:     '',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../_static/ase.ico"/>
    <link rel="contents" title="Global table of contents" href="../../contents.html" />
    <link rel="index" title="Global index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="top" title="ASE  documentation" href="../../index.html" />
    <link rel="up" title="Calculators" href="calculators.html" />
    <link rel="next" title="ase_qmmm_manyqm" href="ase_qmmm_manyqm.html" />
    <link rel="prev" title="TURBOMOLE" href="turbomole.html" />
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>



        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>



        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             accesskey="">modules</a> |</li>
        <a href="../../index.html"><img class="logo" src="../../_static/ase.ico" alt="Logo" align="absmiddle"/></a>
          <li><a href="../ase.html" accesskey="U">Documentation for modules in ASE</a> &raquo;</li>
          <li><a href="calculators.html" accesskey="U">Calculators</a> &raquo;</li>
      </ul>
    </div>
    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <span class="target" id="module-ase.calculators.vasp"></span><div class="section" id="vasp">
<h1>VASP<a class="headerlink" href="#vasp" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://cms.mpi.univie.ac.at/vasp/">VASP</a> is a density-functional theory code using pseudopotentials or
the projector-augmented wave method and a plane wave basis set. This
interface makes it possible to use <a class="reference external" href="http://cms.mpi.univie.ac.at/vasp/">VASP</a> as a calculator in ASE, and
also to use ASE as a post-processor for an already performed <a class="reference external" href="http://cms.mpi.univie.ac.at/vasp/">VASP</a>
calculation.</p>
</div>
<div class="section" id="environment-variables">
<h2>Environment variables<a class="headerlink" href="#environment-variables" title="Permalink to this headline">¶</a></h2>
<p>You need to write a script called <tt class="file docutils literal"><span class="pre">run_vasp.py</span></tt> containing
something like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="n">exitcode</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s">&#39;vasp&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The environment variable <span class="target" id="index-0"></span><tt class="xref std std-envvar docutils literal"><span class="pre">VASP_SCRIPT</span></tt> must point to that file.</p>
<p>A directory containing the pseudopotential directories <tt class="file docutils literal"><span class="pre">potpaw</span></tt>
(LDA XC) <tt class="file docutils literal"><span class="pre">potpaw_GGA</span></tt> (PW91 XC) and <tt class="file docutils literal"><span class="pre">potpaw_PBE</span></tt> (PBE XC)
is also needed, and it is to be put in the environment variable
<span class="target" id="index-1"></span><tt class="xref std std-envvar docutils literal"><span class="pre">VASP_PP_PATH</span></tt>.</p>
<p>Set both environment variables in your shell configuration file:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">export </span><span class="nv">VASP_SCRIPT</span><span class="o">=</span><span class="nv">$HOME</span>/vasp/run_vasp.py
<span class="nv">$ </span><span class="nb">export </span><span class="nv">VASP_PP_PATH</span><span class="o">=</span><span class="nv">$HOME</span>/vasp/mypps
</pre></div>
</div>
</div>
<div class="section" id="vasp-calculator">
<h2>VASP Calculator<a class="headerlink" href="#vasp-calculator" title="Permalink to this headline">¶</a></h2>
<p>The default setting used by the VASP interface is</p>
<dl class="class">
<dt id="ase.calculators.vasp.Vasp">
<em class="property">class </em><tt class="descclassname">ase.calculators.vasp.</tt><tt class="descname">Vasp</tt><big>(</big><em>restart=None</em>, <em>xc='PW91'</em>, <em>setups=None</em>, <em>kpts=(1</em>, <em>1</em>, <em>1)</em>, <em>gamma=None</em><big>)</big><a class="reference internal" href="../../_modules/ase/calculators/vasp.html#Vasp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ase.calculators.vasp.Vasp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Below follows a list with a selection of parameters</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="14%" />
<col width="22%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">keyword</th>
<th class="head">type</th>
<th class="head">default value</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">restart</span></tt></td>
<td><tt class="docutils literal"><span class="pre">bool</span></tt></td>
<td>None</td>
<td>Restart old calculation or
use ASE for post-processing</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">xc</span></tt></td>
<td><tt class="docutils literal"><span class="pre">str</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'PW91'</span></tt></td>
<td>XC-functional</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">setups</span></tt></td>
<td><tt class="docutils literal"><span class="pre">str</span></tt></td>
<td>None</td>
<td>Additional setup option</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">kpts</span></tt></td>
<td><em>seq</em></td>
<td><span class="math">\(\Gamma\)</span>-point</td>
<td><strong>k</strong>-point sampling</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">gamma</span></tt></td>
<td><tt class="docutils literal"><span class="pre">bool</span></tt></td>
<td>None</td>
<td><span class="math">\(\Gamma\)</span>-point centered
<strong>k</strong>-point sampling</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">reciprocal</span></tt></td>
<td><tt class="docutils literal"><span class="pre">bool</span></tt></td>
<td>None</td>
<td>Use reciprocal units if
<strong>k</strong>-points are specified
explicitly</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">prec</span></tt></td>
<td><tt class="docutils literal"><span class="pre">str</span></tt></td>
<td>&nbsp;</td>
<td>Accuracy of calculation</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">encut</span></tt></td>
<td><tt class="docutils literal"><span class="pre">float</span></tt></td>
<td>&nbsp;</td>
<td>Kinetic energy cutoff</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ediff</span></tt></td>
<td><tt class="docutils literal"><span class="pre">float</span></tt></td>
<td>&nbsp;</td>
<td>Convergence break condition
for SC-loop.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">nbands</span></tt></td>
<td><tt class="docutils literal"><span class="pre">int</span></tt></td>
<td>&nbsp;</td>
<td>Number of bands</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">algo</span></tt></td>
<td><tt class="docutils literal"><span class="pre">str</span></tt></td>
<td>&nbsp;</td>
<td>Electronic minimization
algorithm</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ismear</span></tt></td>
<td><tt class="docutils literal"><span class="pre">int</span></tt></td>
<td>&nbsp;</td>
<td>Type of smearing</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">sigma</span></tt></td>
<td><tt class="docutils literal"><span class="pre">float</span></tt></td>
<td>&nbsp;</td>
<td>Width of smearing</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">nelm</span></tt></td>
<td><tt class="docutils literal"><span class="pre">int</span></tt></td>
<td>&nbsp;</td>
<td>Maximum number of
SC-iterations</td>
</tr>
</tbody>
</table>
<p><em>seq</em>: A sequence of three <tt class="docutils literal"><span class="pre">int</span></tt>&#8216;s.</p>
<p>For parameters in the list without default value given, VASP will set
the default value. Most of the parameters used in the VASP <tt class="file docutils literal"><span class="pre">INCAR</span></tt> file
are allowed keywords. See the official <a class="reference external" href="http://cms.mpi.univie.ac.at/vasp/vasp/vasp.html">VASP manual</a> for more details.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Parameters can be changed after the calculator has been constructed
by using the <tt class="xref py py-meth docutils literal"><span class="pre">set()</span></tt> method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">calc</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">prec</span><span class="o">=</span><span class="s">&#39;Accurate&#39;</span><span class="p">,</span> <span class="n">ediff</span><span class="o">=</span><span class="mf">1E-5</span><span class="p">)</span>
</pre></div>
</div>
<p class="last">This would set the precision to Accurate and the break condition for
the electronic SC-loop to <tt class="docutils literal"><span class="pre">1E-5</span></tt> eV.</p>
</div>
</div>
<div class="section" id="spin-polarized-calculation">
<h2>Spin-polarized calculation<a class="headerlink" href="#spin-polarized-calculation" title="Permalink to this headline">¶</a></h2>
<p>If the atoms object has non-zero magnetic moments, a spin-polarized calculation
will be performed by default.</p>
<p>Here follows an example how to calculate the total magnetic moment of a sodium
chloride molecule.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">ase</span> <span class="kn">import</span> <span class="n">Atoms</span><span class="p">,</span> <span class="n">Atom</span>
<span class="kn">from</span> <span class="nn">ase.calculators.vasp</span> <span class="kn">import</span> <span class="n">Vasp</span>

<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mf">6.5</span><span class="p">,</span> <span class="mf">6.5</span><span class="p">,</span> <span class="mf">7.7</span><span class="p">]</span>
<span class="n">d</span> <span class="o">=</span> <span class="mf">2.3608</span>
<span class="n">NaCl</span> <span class="o">=</span> <span class="n">Atoms</span><span class="p">([</span><span class="n">Atom</span><span class="p">(</span><span class="s">&#39;Na&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">magmom</span><span class="o">=</span><span class="mf">1.928</span><span class="p">),</span>
              <span class="n">Atom</span><span class="p">(</span><span class="s">&#39;Cl&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">d</span><span class="p">],</span> <span class="n">magmom</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)],</span>
             <span class="n">cell</span><span class="o">=</span><span class="n">a</span><span class="p">)</span>

<span class="n">calc</span> <span class="o">=</span> <span class="n">Vasp</span><span class="p">(</span><span class="n">prec</span><span class="o">=</span><span class="s">&#39;Accurate&#39;</span><span class="p">,</span>
            <span class="n">xc</span><span class="o">=</span><span class="s">&#39;PBE&#39;</span><span class="p">,</span>
            <span class="n">lreal</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">NaCl</span><span class="o">.</span><span class="n">set_calculator</span><span class="p">(</span><span class="n">calc</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">NaCl</span><span class="o">.</span><span class="n">get_magnetic_moment</span><span class="p">())</span>
</pre></div>
</div>
<p>In this example the initial magnetic moments are assigned to the atoms
when defining the Atoms object. The calculator will detect that at least
one of the atoms has a non-zero magnetic moment and a spin-polarized
calculation will automatically be performed. The ASE generated <tt class="file docutils literal"><span class="pre">INCAR</span></tt>
file will look like:</p>
<div class="highlight-python"><div class="highlight"><pre>INCAR created by Atomic Simulation Environment
 PREC = Accurate
 LREAL = .FALSE.
 ISPIN = 2
 MAGMOM = 1*1.9280 1*0.7500 
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>It is also possible to manually tell the calculator to perform a
spin-polarized calculation:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">calc</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">ispin</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p class="last">This can be useful for continuation jobs, where the initial magnetic
moment is read from the WAVECAR file.</p>
</div>
</div>
<div class="section" id="restart-old-calculation">
<h2>Restart old calculation<a class="headerlink" href="#restart-old-calculation" title="Permalink to this headline">¶</a></h2>
<p>To continue an old calculation which has been performed without the interface
use the <tt class="docutils literal"><span class="pre">restart</span></tt> parameter when constructing the calculator</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">calc</span> <span class="o">=</span> <span class="n">Vasp</span><span class="p">(</span><span class="n">restart</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Then the calculator will read atomic positions from the <tt class="file docutils literal"><span class="pre">CONTCAR</span></tt> file,
physical quantities from the <tt class="file docutils literal"><span class="pre">OUTCAR</span></tt> file, <strong>k</strong>-points from the
<tt class="file docutils literal"><span class="pre">KPOINTS</span></tt> file and parameters from the <tt class="file docutils literal"><span class="pre">INCAR</span></tt> file.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Only Monkhorst-Pack and Gamma-centered <strong>k</strong>-point sampling are supported
for restart at the moment. Some <tt class="file docutils literal"><span class="pre">INCAR</span></tt> parameters may not be
implemented for restart yet. Please report any problems to the ASE mailing
list.</p>
</div>
<p>The <tt class="docutils literal"><span class="pre">restart</span></tt> parameter can be used , as the name suggest to continue a job from where a
previous calculation finished. Furthermore, it can be used to extract data from
an already performed calculation. For example, to get the total potential energy
of the sodium chloride molecule in the previous section, without performing any additional
calculations, in the directory of the previous calculation do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">calc</span> <span class="o">=</span> <span class="n">Vasp</span><span class="p">(</span><span class="n">restart</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">atoms</span> <span class="o">=</span> <span class="n">calc</span><span class="o">.</span><span class="n">get_atoms</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">atoms</span><span class="o">.</span><span class="n">get_potential_energy</span><span class="p">()</span>
<span class="go">-4.7386889999999999</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">

          <h3>ASE</h3>
          <ul class="this-page-menu">
            <li><a href="../../overview.html">
              Overview</a></li>
            <li><a href="../../download.html">
              Installation</a></li>
            <li><a href="../../tutorials/tutorials.html">
              Tutorials</em></a></li>
            <li><a href="../ase.html">
              Documentation</a></li>
            <li><a href="../../faq.html">FAQ</a></li>
            <li><a href="../../mailinglists.html">Mailing lists</a></li>
            <li><a href="../../development/releasenotes.html">Release notes</a></li>
            <li><a href="../../licenseinfo.html">License info</a></li>
           </ul>
           <h3>Development</h3>
           <ul class="this-page-menu">
            <li><a href="../../development/development.html">
              Development</a></li>
            <li><a href="http://wiki.fysik.dtu.dk/ase/epydoc/ase-module.html">
              Epydoc</a></li>
            <li><a href="http://trac.fysik.dtu.dk/projects/ase/browser/trunk/">
              Source code (svn)</a></li>
            <li><a href="../../bugs.html">Bugs!</a></li>
            <li><a href="http://trac.fysik.dtu.dk/projects/ase/report/1">
              Bug Tracker</a></li>
            <li><a href="https://ase-buildbot.fysik.dtu.dk/waterfall">
              BuildBot</a></li>
          </ul>
            <h3>This Page</h3>
            <ul>
<li><a class="reference internal" href="#">VASP</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#environment-variables">Environment variables</a></li>
<li><a class="reference internal" href="#vasp-calculator">VASP Calculator</a></li>
<li><a class="reference internal" href="#spin-polarized-calculation">Spin-polarized calculation</a></li>
<li><a class="reference internal" href="#restart-old-calculation">Restart old calculation</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="turbomole.html" title="previous chapter">TURBOMOLE</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="ase_qmmm_manyqm.html" title="next chapter">ase_qmmm_manyqm</a></p>
            <ul class="this-page-menu">
              <li><a href="../../_sources/ase/calculators/vasp.txt">Show Source</a></li>
            </ul>
            <h3>Quick search</h3>
            <form class="search" action="../../search.html" method="get">
              <input type="text" name="q" size="18" /> <input type="submit" value="Go" />
              <input type="hidden" name="check_keywords" value="yes" />
              <input type="hidden" name="area" value="default" />
            </form>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>



        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>



        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             accesskey="">modules</a> |</li>
        <a href="../../index.html"><img class="logo" src="../../_static/ase.ico" alt="Logo" align="absmiddle"/></a>
          <li><a href="../ase.html" accesskey="U">Documentation for modules in ASE</a> &raquo;</li>
          <li><a href="calculators.html" accesskey="U">Calculators</a> &raquo;</li>
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2015, CAMd.
      Last updated on Tue, 21 Jul 2015 11:00:40.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>