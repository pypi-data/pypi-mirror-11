<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Quickstart &mdash; pytx 0.1.3 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pytx 0.1.3 documentation" href="index.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">pytx 0.1.3 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="quickstart">
<span id="id1"></span><h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">Â¶</a></h1>
<p>ThreatExchange requires an access token in each request. An access token is in
the form of:</p>
<blockquote>
<div>&lt;app-id&gt;|&lt;app-secret&gt;</div></blockquote>
<p>The app-id is public knowledge but your app-secret is sensitive. These values
are provided to you once you&#8217;ve obtained access to ThreatExchange.</p>
<p>pytx comes with an init() that allows you to provide your access token in
several ways. You <em>must</em> init() before pytx will function as the rest of pytx
will need your access token to make requests properly. Here are some examples of
how to provide your access token:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pytx</span> <span class="kn">import</span> <span class="n">init</span>

<span class="c"># Provide your app-id and app-secret individually</span>
<span class="n">init</span><span class="p">(</span><span class="n">app_id</span><span class="o">=</span><span class="s">&#39;&lt;app-id&gt;&#39;</span><span class="p">,</span> <span class="n">app_secret</span><span class="o">=</span><span class="s">&#39;&lt;app-secret&gt;&#39;</span><span class="p">)</span>

<span class="c"># Provide a file which contains your app-id and app-secret.</span>
<span class="c"># File should be in the format of:</span>
<span class="c"># - app-id and app-secret on separate lines, or</span>
<span class="c"># - app-id|app-secret on one line</span>
<span class="n">init</span><span class="p">(</span><span class="n">token_file</span><span class="o">=</span><span class="s">&#39;/path/to/token/file&#39;</span><span class="p">)</span>

<span class="c"># Use environment variables to build the access token.</span>
<span class="c"># - TX_ACCESS_TOKEN: The fully-formatted access token to use.</span>
<span class="c"># - TX_APP_ID: The app-id to use.</span>
<span class="c"># - TX_APP_SECRET: The app-secret to use.</span>
<span class="c"># If TX_ACCESS_TOKEN is found it will be used first.</span>
<span class="n">init</span><span class="p">()</span>
</pre></div>
</div>
<p>If you need to get the value of the access token pytx is using programmatically,
you can do something like the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pytx.init</span> <span class="kn">import</span> <span class="n">__ACCESS_TOKEN__</span>
<span class="k">print</span> <span class="n">__ACCESS_TOKEN__</span>
</pre></div>
</div>
<p>pytx uses classes as the primary method for developer interaction with the
ThreatExchange API. There are three main classes:</p>
<blockquote>
<div><ul class="simple">
<li>ThreatIndicator</li>
<li>Malware</li>
<li>ThreatExchangeMember</li>
</ul>
</div></blockquote>
<p>ThreatExchange allows you to upload new ThreatIndicators. To do so, instantiate
a new ThreatIndicator object, provide the required attributes according to the
ThreatExchange documentation, and then save it like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pytx</span> <span class="kn">import</span> <span class="n">ThreatIndicator</span>

<span class="n">ti</span> <span class="o">=</span> <span class="n">ThreatIndicator</span><span class="p">()</span>
<span class="n">ti</span><span class="o">.</span><span class="n">indicator</span> <span class="o">=</span> <span class="s">&quot;foo&quot;</span>
<span class="n">ti</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
</div>
<p>To query for objects in ThreatExchange, you can leverage any of the three
classes like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pytx</span> <span class="kn">import</span> <span class="n">ThreatIndicator</span>
<span class="kn">from</span> <span class="nn">pytx.vocabulary</span> <span class="kn">import</span> <span class="n">ThreatIndicator</span> <span class="k">as</span> <span class="n">ti</span>
<span class="kn">from</span> <span class="nn">pytx.vocabulary</span> <span class="kn">import</span> <span class="n">Types</span> <span class="k">as</span> <span class="n">t</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">ThreatIndicator</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s">&#39;www.facebook.com&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ti</span><span class="o">.</span><span class="n">THREAT_TYPES</span><span class="p">)</span>

<span class="c"># type is type_ because type is a reserved word.</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">ThreatIndicator</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">type_</span><span class="o">=</span><span class="n">t</span><span class="o">.</span><span class="n">IP_ADDRESS</span><span class="p">,</span>
                                  <span class="n">text</span><span class="o">=</span><span class="s">&#39;127.0.0.1&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ti</span><span class="o">.</span><span class="n">INDICATOR</span><span class="p">)</span>
</pre></div>
</div>
<p>When you query for objects you get a small summary which does not contain all of
the available fields. If you want to get all of the data about a specific
object, you can request it like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pytx</span> <span class="kn">import</span> <span class="n">ThreatIndicator</span>
<span class="kn">from</span> <span class="nn">pytx.vocabulary</span> <span class="kn">import</span> <span class="n">ThreatIndicator</span> <span class="k">as</span> <span class="n">ti</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">ThreatIndicator</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s">&#39;www.facebook.com&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
    <span class="n">result</span><span class="o">.</span><span class="n">details</span><span class="p">()</span>
    <span class="k">print</span> <span class="n">result</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</pre></div>
</div>
<p>Another way to achieve this without another API request is to use the &#8216;fields&#8217;
argument to .objects() and specify all of the fields you wish to be included in
the results.</p>
<p>When you query for objects, pytx will be default provide you with a generator
which returns instantiated objects to you. You can change the behavior in a few
ways:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pytx</span> <span class="kn">import</span> <span class="n">ThreatIndicator</span>
<span class="kn">from</span> <span class="nn">pytx.vocabulary</span> <span class="kn">import</span> <span class="n">ThreatIndicator</span> <span class="k">as</span> <span class="n">ti</span>

<span class="c"># Return the full response instead of a generator.</span>
<span class="c"># Takes precedence over dict_generator.</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">ThreatIndicator</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s">&#39;www.facebook.com&#39;</span><span class="p">,</span>
                                  <span class="n">full_response</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c"># Return a dictionary instead of an instantiated object.</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">ThreatIndicator</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s">&#39;www.facebook.com&#39;</span><span class="p">,</span>
                                  <span class="n">dict_generator</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>This gives some flexibility to developers as to how they interact with the
response.</p>
<p>Behind-the-scenes all of the above examples use the pytx Broker to actually make
the requests. If you would prefer to use the Broker directly instead of
leveraging the classes you can do so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pytx</span> <span class="kn">import</span> <span class="n">init</span>
<span class="kn">from</span> <span class="nn">pytx.request</span> <span class="kn">import</span> <span class="n">Broker</span>
<span class="kn">from</span> <span class="nn">pytx.vocabulary</span> <span class="kn">import</span> <span class="n">ThreatExchange</span> <span class="k">as</span> <span class="n">te</span>

<span class="n">init</span><span class="p">()</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">Broker</span><span class="p">()</span>
<span class="n">url</span> <span class="o">=</span> <span class="n">te</span><span class="o">.</span><span class="n">URL</span> <span class="o">+</span> <span class="n">te</span><span class="o">.</span><span class="n">THREAT_INDICATORS</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="n">te</span><span class="o">.</span><span class="n">TEXT</span><span class="p">:</span> <span class="s">&quot;www.facebook.com&quot;</span><span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
</pre></div>
</div>
<p>The Broker will also allow you to POST and DELETE if you need to.</p>
<p>One thing you might notice is the constant use of vocabulary. pytx comes with a
vocabulary which will allow you to write your code using class attributes so if
ThreatExchange ever changes a string your code will still function properly.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="installation.html"
                        title="previous chapter">Installation</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/quickstart.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             >previous</a> |</li>
        <li><a href="index.html">pytx 0.1.3 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, Mike Goffin.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b3.
    </div>
  </body>
</html>