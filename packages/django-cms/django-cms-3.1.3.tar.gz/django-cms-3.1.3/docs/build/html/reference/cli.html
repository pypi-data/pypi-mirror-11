

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Command Line Interface &mdash; django cms 3.1.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="django cms 3.1.0 documentation" href="../index.html"/>
        <link rel="up" title="Reference" href="index.html"/>
        <link rel="next" title="Development &amp; community" href="../contributing/index.html"/>
        <link rel="prev" title="Template Tags" href="templatetags.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../index.html" class="fa fa-home"> django cms</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/index.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../introduction/install.html">Installing django CMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/templates_placeholders.html">Templates &amp; Placeholders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/plugins.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/apphooks.html">Apphooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/third_party.html">Integrating a third-party application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/toolbar.html">Extending the Toolbar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/menu.html">Extending the navigation menu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/namespaced_apphooks.html">Namespaced Apphooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/contributing.html">Contributing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../how_to/index.html">How-to guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../how_to/install.html">Installing django CMS by hand</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how_to/custom_plugins.html">Custom Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how_to/menus.html">Customising navigation menus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how_to/apphooks.html">Apphooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how_to/templates.html">Working with templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how_to/extending_page_title.html">Extending the page &amp; title models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how_to/toolbar.html">Extending the Toolbar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how_to/using_south.html">Using South with django CMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how_to/testing.html">Testing Your Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how_to/placeholders.html">Placeholders outside the CMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how_to/caching.html">Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how_to/frontend_models.html">Frontend editing for Page and Django models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how_to/sitemap.html">Sitemap Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../topics/index.html">Key topics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../topics/menu_system.html">How the menu system works</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/publishing.html">Publishing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/multiple_languages.html">Serving content in multiple languages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/i18n.html">Internationalisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/permissions.html">Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/commonly_used_plugins.html">Some commonly-used plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/searchdocs.html">Search and django CMS</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="navigation.html">Navigation</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_references.html">API References</a></li>
<li class="toctree-l2"><a class="reference internal" href="fields.html">Form and model fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="templatetags.html">Template Tags</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Command Line Interface</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Development &amp; community</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contributing/development.html">Development of django CMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/contributing.html">Contributing to django CMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/management.html">Code and project management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/testing.html">Running and writing tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/code_of_conduct.html">Code of Conduct</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/index.html#branch-policy">Branch policy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade/index.html">Release notes &amp; upgrade information</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/3.1.1.html">3.1.1 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/3.1.html">3.1 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/3.0.14.html">3.0.14 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/3.0.13.html">3.0.13 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/3.0.12.html">3.0.12 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/3.0.11.html">3.0.11 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/3.0.10.html">3.0.10 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/3.0.9.html">3.0.9 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/3.0.8.html">3.0.8 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/3.0.7.html">3.0.7 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/3.0.6.html">3.0.6 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/3.0.3.html">3.0.3 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/3.0.html">3.0 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/2.4.html">2.4 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/2.3.4.html">2.3.4 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/2.3.3.html">2.3.3 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/2.3.2.html">2.3.2 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/2.3.html">2.3 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/2.2.html">2.2 release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/2.1.html">Upgrading from 2.1.x and Django 1.2.x</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">Using django CMS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../user/tutorial/index.html">Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user/reference/index.html">Reference for content editors</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">django cms</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Reference</a> &raquo;</li>
      
    <li>Command Line Interface</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/reference/cli.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="command-line-interface">
<h1>Command Line Interface<a class="headerlink" href="#command-line-interface" title="Permalink to this headline">¶</a></h1>
<p>You can invoke the django CMS command line interface using the <code class="docutils literal"><span class="pre">cms</span></code> Django
command:</p>
<div class="highlight-bash"><div class="highlight"><pre>python manage.py cms
</pre></div>
</div>
<div class="section" id="informational-commands">
<h2>Informational commands<a class="headerlink" href="#informational-commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cms-list">
<span id="cms-list-command"></span><h3><code class="docutils literal"><span class="pre">cms</span> <span class="pre">list</span></code><a class="headerlink" href="#cms-list" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">list</span></code> command is used to display information about your installation.</p>
<p>It has two subcommands:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">cms</span> <span class="pre">list</span> <span class="pre">plugins</span></code> lists all plugins that are used in your project.</li>
<li><code class="docutils literal"><span class="pre">cms</span> <span class="pre">list</span> <span class="pre">apphooks</span></code> lists all apphooks that are used in your project.</li>
</ul>
<p><code class="docutils literal"><span class="pre">cms</span> <span class="pre">list</span> <span class="pre">plugins</span></code> will issue warnings when it finds orphaned plugins (see
<code class="docutils literal"><span class="pre">cms</span> <span class="pre">delete_orphaned_plugins</span></code> below).</p>
</div>
<div class="section" id="cms-check">
<span id="cms-check-command"></span><h3><code class="docutils literal"><span class="pre">cms</span> <span class="pre">check</span></code><a class="headerlink" href="#cms-check" title="Permalink to this headline">¶</a></h3>
<p>Checks your configuration and environment.</p>
</div>
</div>
<div class="section" id="plugin-and-apphook-management-commands">
<h2>Plugin and apphook management commands<a class="headerlink" href="#plugin-and-apphook-management-commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cms-delete-orphaned-plugins">
<span id="cms-delete-orphaned-plugins-command"></span><h3><code class="docutils literal"><span class="pre">cms</span> <span class="pre">delete_orphaned_plugins</span></code><a class="headerlink" href="#cms-delete-orphaned-plugins" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <code class="docutils literal"><span class="pre">delete_orphaned_plugins</span></code> command <strong>permanently deletes</strong> data from
your database. You should make a backup of your database before using it!</p>
</div>
<p>Identifies and deletes orphaned plugins.</p>
<p>Orphaned plugins are ones that exist in the CMSPlugins table, but:</p>
<ul class="simple">
<li>have a plugin_type that is no longer even installed</li>
<li>have no corresponding saved instance in that particular plugin type&#8217;s table</li>
</ul>
<p>Such plugins will cause problems when trying to use operations that need to copy
pages (and thefore plugins), which includes <code class="docutils literal"><span class="pre">cms</span> <span class="pre">moderator</span> <span class="pre">on</span></code> as well as page
copy operations in the admin.</p>
<p>It is advised to run <code class="docutils literal"><span class="pre">cms</span> <span class="pre">list</span> <span class="pre">plugins</span></code> periodically, and <code class="docutils literal"><span class="pre">cms</span>
<span class="pre">delete_orphaned_plugins</span></code> when required.</p>
</div>
<div class="section" id="cms-uninstall">
<h3><code class="docutils literal"><span class="pre">cms</span> <span class="pre">uninstall</span></code><a class="headerlink" href="#cms-uninstall" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">uninstall</span></code> subcommand can be used to make uninstalling a CMS
Plugin or an apphook easier.</p>
<p>It has two subcommands:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">cms</span> <span class="pre">uninstall</span> <span class="pre">plugins</span> <span class="pre">&lt;plugin</span> <span class="pre">name&gt;</span> <span class="pre">[&lt;plugin</span> <span class="pre">name</span> <span class="pre">2&gt;</span> <span class="pre">[...]]</span></code> uninstalls
one or several plugins by <strong>removing</strong> them from all pages where they are
used. Note that the plugin name should be the name of the class that is
registered in the django CMS. If you are unsure about the plugin name, use
the <a class="reference internal" href="#cms-list-command"><span>cms list</span></a> to see a list of installed plugins.</li>
<li><code class="docutils literal"><span class="pre">cms</span> <span class="pre">uninstall</span> <span class="pre">apphooks</span> <span class="pre">&lt;apphook</span> <span class="pre">name&gt;</span> <span class="pre">[&lt;apphook</span> <span class="pre">name</span> <span class="pre">2&gt;</span> <span class="pre">[...]]</span></code> uninstalls
one or several apphooks by <strong>removing</strong> them from all pages where they are
used. Note that the apphook name should be the name of the class that is
registered in the django CMS. If you are unsure about the apphook name, use
the <a class="reference internal" href="#cms-list-command"><span>cms list</span></a> to see a list of installed apphooks.</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The uninstall commands <strong>permanently delete</strong> data from your database.
You should make a backup of your database before using them!</p>
</div>
</div>
<div class="section" id="cms-copy-lang">
<span id="cms-copy-lang-command"></span><h3><code class="docutils literal"><span class="pre">cms</span> <span class="pre">copy-lang</span></code><a class="headerlink" href="#cms-copy-lang" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">copy-lang</span></code> subcommand can be used to copy content (titles and plugins)
from one language to another.
By default the subcommand copy content from the current site
(e.g. the value of <code class="docutils literal"><span class="pre">SITE_ID</span></code>) and only if the target
placeholder has no content for the specified language; using the defined
options you can change this.</p>
<p>You must provide two arguments:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">from_language</span></code>: the language to copy the content from;</li>
<li><code class="docutils literal"><span class="pre">to_language</span></code>: the language to copy the content to.</li>
</ul>
<p>It accepts the following options</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">force-copy</span></code>: set to copy content even if a placeholder already has content;
if set, copied content will be appended to the original one;</li>
<li><code class="docutils literal"><span class="pre">site</span></code>: specifiy a SITE_ID to operate on sites different from the current one;</li>
<li><code class="docutils literal"><span class="pre">verbose</span></code>: set for more verbose output.</li>
</ul>
<p>Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>cms copy-lang en de force-copy <span class="nv">site</span><span class="o">=</span><span class="m">2</span> verbose
</pre></div>
</div>
</div>
<div class="section" id="cms-copy-site">
<span id="cms-copy-site-command"></span><h3><code class="docutils literal"><span class="pre">cms</span> <span class="pre">copy-site</span></code><a class="headerlink" href="#cms-copy-site" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">copy-site</span></code> subcommand can be used to copy content (pages and plugins)
from one site to another.
The subcommand copy content from the <code class="docutils literal"><span class="pre">from_site</span></code> to <code class="docutils literal"><span class="pre">to_site</span></code>; please note
that static placehoders are copied as they are shared across sites.
The whole source tree is copied, in the root of the target website.
Existing pages on the target website are not modified.</p>
<p>You must provide two arguments:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">from_site</span></code>: the site to copy the content from;</li>
<li><code class="docutils literal"><span class="pre">to_site</span></code>: the site to copy the content to.</li>
</ul>
<p>Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>cms copy-site <span class="m">1</span> 2
</pre></div>
</div>
</div>
</div>
<div class="section" id="moderation-commands">
<h2>Moderation commands<a class="headerlink" href="#moderation-commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cms-moderator">
<h3><code class="docutils literal"><span class="pre">cms</span> <span class="pre">moderator</span></code><a class="headerlink" href="#cms-moderator" title="Permalink to this headline">¶</a></h3>
<p>If you migrate from an earlier version, you should use the <code class="docutils literal"><span class="pre">cms</span> <span class="pre">moderator</span> <span class="pre">on</span></code>
command to ensure that your published pages are up to date, whether or not you
used moderation in the past.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This command <strong>alters data</strong> in your database. You should make a backup of
your database before using it! <strong>Never</strong> run this command without first
checking for orphaned plugins, using the <code class="docutils literal"><span class="pre">cms</span> <span class="pre">list</span> <span class="pre">plugins</span></code> command, and
if necessary <code class="docutils literal"><span class="pre">delete_orphaned_plugins</span></code>. Running  <code class="docutils literal"><span class="pre">cms</span> <span class="pre">moderator</span></code> with
orphaned plugins will fail and leave bad data in your database.</p>
</div>
</div>
<div class="section" id="cms-publisher-publish">
<h3><code class="docutils literal"><span class="pre">cms</span> <span class="pre">publisher_publish</span></code><a class="headerlink" href="#cms-publisher-publish" title="Permalink to this headline">¶</a></h3>
<p>If you want to publish many pages at once, this command can help you. By default,
this command publishes drafts for all public pages.</p>
<p>It accepts the following options</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">unpublished</span></code>: set to publish all drafts, including unpublished ones;
if not set, only already published pages will be republished.</li>
<li><code class="docutils literal"><span class="pre">language</span></code>: specify a language code to publish pages in only one language;
if not specified, this command publishes all page languages;</li>
<li><code class="docutils literal"><span class="pre">site</span></code>: specify a site id to publish pages for specified site only;
if not specified, this command publishes pages for all sites;</li>
</ul>
<p>Example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#publish drafts for public pages in all languages</span>
publisher_publish

<span class="c">#publish all drafts in all pages</span>
cms publisher_publish --unpublished

<span class="c">#publish drafts for public pages in deutsch</span>
cms publisher_publish --language<span class="o">=</span>de

<span class="c">#publish all drafts in deutsch</span>
cms publisher_publish --unpublished --language<span class="o">=</span>de

<span class="c">#publish all drafts in deutsch, but only for site with id=2</span>
cms publisher_publish --unpublished --language<span class="o">=</span>de --site<span class="o">=</span>2
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This command publishes drafts. You should review drafts before using this
command, because they will become public.</p>
</div>
</div>
</div>
<div class="section" id="maintenance-and-repair">
<h2>Maintenance and repair<a class="headerlink" href="#maintenance-and-repair" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fix-mptt">
<span id="id1"></span><h3><code class="docutils literal"><span class="pre">fix-mptt</span></code><a class="headerlink" href="#fix-mptt" title="Permalink to this headline">¶</a></h3>
<p>Occasionally, the MPTT tree can become corrupted (this is one of the reasons for <a class="reference internal" href="../upgrade/3.1.html"><em>our move
away from MPTT to MP in django CMS 3.1</em></a>). Typical symptoms include problems when
trying to copy or delete plugins or pages.</p>
<p>Once a database has been migrated from MPTT to MP, there is no use for this command.</p>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../contributing/index.html" class="btn btn-neutral float-right" title="Development &amp; community">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="templatetags.html" class="btn btn-neutral" title="Template Tags"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2009-2015, Patrick Lauber.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'3.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>