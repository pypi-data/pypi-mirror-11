webpackJsonp([1],{0:function(e,t,n){"use strict";var r=n(4),a=n(358),o=a.Route,s=a.RouteHandler,l=(a.Link,a.DefaultRoute),c=a.NotFoundRoute,i=n(397),u=i.IndexPage,d=n(402),m=d.JobPage,p=r.createClass({displayName:"NotFound",render:function(){return r.createElement("div",null,r.createElement("h2",null,"Page Not Found"),r.createElement("p",null,"The page you were trying to access doesn't exist."))}}),h=r.createClass({displayName:"App",render:function(){return r.createElement(s,null)}}),b=r.createElement(o,{path:"/",handler:h},r.createElement(l,{handler:u,name:"index"}),r.createElement(o,{path:"job/:id",handler:m,name:"job"}),r.createElement(c,{handler:p}));a.run(b,a.HashLocation,function(e){r.render(r.createElement(e,null),document.getElementById("arachnado-root"))})},397:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),a=n(182),o=a.Panel,s=n(400),l=s.JobList,c=n(398),i=c.AggregateJobStats,u=n(351),d=u.ProcessStatsTable,m=n(401),p=m.CrawlForm,h=r.createClass({displayName:"IndexPage",render:function(){return r.createElement("div",{className:"row"},r.createElement("div",{className:"col-lg-7 col-md-7"},r.createElement(p,{action:window.START_CRAWL_URL}),r.createElement(o,{collapsible:!0,defaultExpanded:!0,header:"Jobs",bsStyle:"primary"},r.createElement(l,null)),r.createElement(o,{collapsible:!0,defaultExpanded:!0,header:"Arachnado Stats",className:"hidden-lg"},r.createElement(d,null))),r.createElement("div",{className:"col-lg-5 col-md-5"},r.createElement(o,{collapsible:!0,defaultExpanded:!0,header:"Arachnado Stats",className:"visible-lg-block"},r.createElement(d,null)),r.createElement(o,{collapsible:!0,defaultExpanded:!0,header:"Aggregate Crawl Stats"},r.createElement(i,null))))}});t.IndexPage=h},398:function(e,t,n){"use strict";function r(e){return Object.keys(e).map(function(t){var n=e[t];if(0==n)return"";/_bytes$|memusage/.test(t)&&(n=o(n));var r=b[t]||t;return a.createElement("tr",{key:t},a.createElement("td",null,r),a.createElement("td",null,n))}).filter(function(e){return""!=e})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=(n(160),n(352)),s=n(182),l=(s.Table,n(357)),c=l.KeyValueTable,i=(n(347),n(399)),u=i.JobsMixin,d=function(e){return Array.from(new Array(e),function(e,t){return t})},m=[200,201,202,203,204,205,206,207,226,300,301,302,303,304,305,306,307,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,422,423,424,425,426,428,429,431,434,449,451,456,499,500,501,502,503,504,505,506,507,508,509,510,511].map(function(e){return"downloader/response_status_count/"+e}),p=d(20).map(function(e){return"request_depth_count/"+e}),h=["downloader/request_bytes","downloader/request_count","downloader/request_method_count/GET","downloader/request_method_count/POST","downloader/request_method_count/PUT","downloader/request_method_count/HEAD","downloader/request_method_count/DELETE","downloader/request_method_count/TRACE","downloader/request_method_count/CONNECT","downloader/request_method_count/OPTIONS","downloader/response_bytes","downloader/response_count"].concat(m).concat(["downloader/exception_count","downloader/exception_type_count/twisted.internet.error.DNSLookupError","downloader/exception_type_count/twisted.internet.error.ConnectionRefusedError","dupefilter/filtered","item_scraped_count","log_count/DEBUG","log_count/INFO","log_count/WARNING","log_count/ERROR","response_received_count","scheduler/dequeued","scheduler/dequeued/memory","scheduler/enqueued","scheduler/enqueued/memory"]).concat(p).concat(["spider_exceptions/AttributeError","spider_exceptions/ValueError","spider_exceptions/TypeError"]).concat(["motor/items_stored_count","motor/store_error_count","motor/store_error_count/AutoReconnect"]),b={"downloader/exception_type_count/twisted.internet.error.DNSLookupError":"downloader/DNS errors","downloader/exception_type_count/twisted.internet.error.ConnectionRefusedError":"downloader/Connection Refused"},E=a.createClass({displayName:"AggregateJobStats",mixins:[u],render:function(){var e=this.getAggregateStats(this.state.jobs),t=r(e);return 0==t.length?a.createElement("p",null,"This panel displays various crawl stats. Nothing to show yet."):a.createElement(c,{noheader:this.props.fill},t)},getAggregateStats:function(e){var t={};return h.forEach(function(e){t[e]=0}),e.forEach(function(e){h.forEach(function(n){t[n]+=e.stats[n]||0})}),t}});t.AggregateJobStats=E;var f=a.createClass({displayName:"JobStats",render:function(){var e=this.props.job.stats,t={};Object.keys(e).sort().forEach(function(n){t[n]=e[n]});var n=r(t);return 0==n.length?a.createElement("p",null,"Nothing to show yet."):a.createElement(c,{noheader:this.props.fill},n)}});t.JobStats=f},399:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(n(4),n(160)),a=n(347),o=r.connect(a.store,"jobs");t.JobsMixin=o},400:function(e,t,n){"use strict";function r(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{!r&&l["return"]&&l["return"]()}finally{if(a)throw o}}return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(e){for(var t=0;t<N.length;t++){var n=r(N[t],2),a=n[0],o=n[1];if(a.test(e))return o}return e}function o(e){var e=a(e);return"crawling"==e?{pause:!0,stop:!0}:"suspended"==e?{resume:!0,stop:!0}:{}}function s(e){var t=e.stats.item_scraped_count||0,n=Math.round(60*e.itemsSpeed);return t+" @ "+n+"/min"}function l(e,t){var n=e.stats||{},r=a(e.status),o=n["downloader/response_bytes"]||0,s=e.id;e.job_id&&(s=s+": "+e.job_id.slice(-5));var l=0;if(n.start_time){var c=x(n.start_time);if(n.finish_time)var i=x(n.finish_time);else var i=t||new Date;l=i.getTime()-c.getTime()}var u=l/1e3,d=l?o/u:0,m=l?(n.item_scraped_count||0)/u:0;return{id:e.job_id||e.id,status:r,rowClass:w[r]||"",stats:n,downloaded:o,downloadSpeed:d,itemsSpeed:m,todo:(n["scheduler/enqueued"]||0)-(n["scheduler/dequeued"]||0),shortId:s,duration:l}}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.buttonsForStatus=o;var i=n(4),u=n(160),d=n(352),m=n(353),p=n(358),h=(p.Link,p.Navigation),b=n(182),E=b.Table,f=b.Glyphicon,y=(b.Button,n(347)),v=n(399),g=v.JobsMixin,_=n(356);n(255);var w={crawling:"success",stopping:"info",suspended:"warning",done:""},N=[[/closespider/,"closed"]],C=i.createClass({displayName:"NoJobs",render:function(){return i.createElement("div",null,i.createElement("p",null,"No jobs to show."),i.createElement("p",null,'Start a crawling job either by using "Crawl" button or by using Arachnado HTTP API.'))}}),S=i.createClass({displayName:"GlyphA",render:function(){var e=this.props.button?" "+this.props.title:"";return i.createElement("a",c({href:"#"},this.props),i.createElement(f,{glyph:this.props.glyph}),e)}}),k=i.createClass({displayName:"JobStopButton",render:function(){return i.createElement(S,{title:"Stop",glyph:"stop",onClick:this.onClick,button:this.props.button,className:this.props.className})},onClick:function(e){e.preventDefault();var t=this.props.job.id;confirm("Stop job #"+t+"?")&&y.Actions.stopCrawl(t)}});t.JobStopButton=k;var j=i.createClass({displayName:"JobPauseButton",render:function(){return i.createElement(S,{title:"Pause",glyph:"pause",onClick:this.onClick,button:this.props.button,className:this.props.className})},onClick:function(e){e.preventDefault(),y.Actions.pauseCrawl(this.props.job.id)}});t.JobPauseButton=j;var J=i.createClass({displayName:"JobResumeButton",render:function(){return i.createElement(S,{title:"Resume",glyph:"play",onClick:this.onClick,button:this.props.button,className:this.props.className})},onClick:function(e){e.preventDefault(),y.Actions.resumeCrawl(this.props.job.id)}});t.JobResumeButton=J;var T=i.createClass({displayName:"JobControlIcons",render:function(){var e=this.props.job,t=o(e.status),n={job:e},r=[];return t.pause&&r.push(i.createElement("span",{key:"pause"},i.createElement(j,n),"  ")),t.resume&&r.push(i.createElement("span",{key:"resume"},i.createElement(J,n),"  ")),t.stop&&r.push(i.createElement(k,c({key:"stop"},n))),i.createElement("span",null,r)}});t.JobControlIcons=T;var A=i.createClass({displayName:"JobControlButtons",render:function(){var e=this.props.job,t=o(e.status),n={button:!0,job:e},r=[];return t.pause&&r.push(i.createElement("span",{key:"pause"},i.createElement(j,c({className:"btn"},n)),"  ")),t.resume&&r.push(i.createElement("span",{key:"resume"},i.createElement(J,c({className:"btn"},n)),"  ")),t.stop&&r.push(i.createElement(k,c({key:"stop",className:"btn"},n))),i.createElement("span",null,r)}});t.JobControlButtons=A;var x=function(e){var e=e.replace(" ","T");return new Date(e+"Z")},P=i.createClass({displayName:"JobRow",mixins:[h],render:function(){var e=this,t=this.props.job,n=l(t,this.props.serverTime),r={cursor:"pointer"},a=function(){e.transitionTo("job",{id:t.id})},o=[i.createElement("td",{key:"col-buttons"},i.createElement(T,{job:t})),i.createElement("th",{key:"col-id",scope:"row",style:r,onClick:a},n.shortId)],c=[t.seed,n.status,s(n),d(n.downloaded),m(n.duration)];return o=o.concat(c.map(function(e,t){return i.createElement("td",{style:r,onClick:a,key:t},e)})),i.createElement("tr",{className:n.rowClass},o)}}),R=i.createClass({displayName:"JobRowVerbose",mixins:[h],render:function(){var e=this.props.job,t=l(e,this.props.serverTime),n=[i.createElement("th",{key:"col-id",scope:"row"},t.id)],r=[e.seed,t.stats.start_time,t.status,s(t),t.todo,d(t.downloaded),d(t.downloadSpeed,{round:1})+"/s",m(t.duration)];return n=n.concat(r.map(function(e,t){return i.createElement("td",{key:t},e)})),i.createElement("tr",{className:t.rowClass},n)}}),L=i.createClass({displayName:"JobListWidget",mixins:[u.connect(_.store,"stats")],render:function(){var e=this.state.stats,t=this.props.jobs.map(function(t){return i.createElement(P,{job:t,key:t.id,serverTime:e.serverTime})});return i.createElement(E,{fill:!0,hover:this.props.link},i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",{key:"col-buttons"}),i.createElement("th",{key:"col-id"},"ID"),i.createElement("th",{key:"col-seed"},"Seed URL"),i.createElement("th",{key:"col-status"},"Status"),i.createElement("th",{key:"col-items"},"Items"),i.createElement("th",{key:"col-data",className:"col-md-2"},"Data"),i.createElement("th",{key:"col-runtime",className:"col-md-2"},"Duration"))),i.createElement("tbody",null,t))}});t.JobListWidget=L;var I=i.createClass({displayName:"JobListWidgetVerbose",mixins:[u.connect(_.store,"stats")],render:function(){var e=this.state.stats,t=this.props.jobs.map(function(t){return i.createElement(R,{job:t,key:t.id,serverTime:e.serverTime})});return i.createElement(E,{fill:!0},i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",{key:"col-id"},"ID"),i.createElement("th",{key:"col-seed"},"Seed URL"),i.createElement("th",{key:"col-started"},"Started At"),i.createElement("th",{key:"col-status"},"Status"),i.createElement("th",{key:"col-items"},"Items"),i.createElement("th",{key:"col-queue"},"Todo"),i.createElement("th",{key:"col-data",className:"col-md-1"},"Data"),i.createElement("th",{key:"col-speed",className:"col-md-1"},"↓ Speed"),i.createElement("th",{key:"col-runtime"},"Duration"))),i.createElement("tbody",null,t))}});t.JobListWidgetVerbose=I;var O=i.createClass({displayName:"JobList",mixins:[g],render:function(){var e=this.state.jobs;return e.length?i.createElement(L,{jobs:e}):i.createElement(C,null)}});t.JobList=O},401:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),a=n(182),o=(a.Panel,n(347)),s=r.createClass({displayName:"CrawlForm",getInitialState:function(){return{value:""}},render:function(){var e={paddingLeft:0,paddingRight:0,marginLeft:0,marginRight:0};return r.createElement("form",{method:"post",className:"container-fluid",style:e,action:this.props.action,onSubmit:this.onSubmit},r.createElement("div",{className:"form-group row",style:e},r.createElement("div",{className:"col-xs-2",style:e},r.createElement("button",{type:"submit",className:"btn btn-success",style:{width:"100%"}},"Crawl")),r.createElement("div",{className:"col-xs-10",style:e},r.createElement("input",{type:"text",className:"form-control",name:"domain",ref:"domainInput",value:this.state.value,onChange:this.onChange,placeholder:"website URL, e.g. scrapy.org"}))))},onChange:function(e){this.setState({value:this.refs.domainInput.getDOMNode().value})},onSubmit:function(e){e.preventDefault(),""!=this.state.value&&(o.Actions.startCrawl(this.state.value),this.setState({value:""}))}});t.CrawlForm=s},402:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),a=n(160),o=n(358),s=o.Link,l=n(182),c=l.Panel,i=l.Table,u=(l.Button,l.Glyphicon),d=(l.ButtonToolbar,n(347)),m=n(351),p=(m.ProcessStatsTable,n(398)),h=p.JobStats,b=n(400),E=b.JobListWidgetVerbose,f=b.JobControlButtons,y=n(403),v=y.ShortTermQueueWidget,g=r.createClass({displayName:"ShortJobInfo",render:function(){var e=this.props.job,t=[e];return r.createElement(E,{jobs:t})}}),_=(r.createClass({displayName:"JobInfo",render:function(){var e=this.props.job,t=[["Target",e.seed],["Status",e.status],["Job ID",e.id],["Started at",e.stats.start_time]];e.stats.finish_time&&t.push(["Finished at",e.stats.finish_time]);var n=t.map(function(e){return r.createElement("tr",{key:e[0]},r.createElement("td",null,e[0]),r.createElement("td",null,e[1]))});return r.createElement("div",null,r.createElement(i,null,r.createElement("caption",null,"General Job Information"),r.createElement("tbody",null,n)))}}),r.createClass({displayName:"NoJobPage",render:function(){return r.createElement("div",null,r.createElement("h2",null,"Job is not found"),r.createElement("p",null,"This job is either not available or never existed."),r.createElement(s,{to:"index"},r.createElement(u,{glyph:"menu-left"}),"  Back to Full Job List"))}})),w=r.createClass({displayName:"JobPage",mixins:[a.connectFilter(d.store,"job",function(e){var t=this;return e.filter(function(e){return e.id==t.props.params.id})[0]})],render:function(){var e=this.state.job;return e?r.createElement("div",{className:"row"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-lg-12"},r.createElement(s,{to:"index",className:"btn"},r.createElement(u,{glyph:"menu-left"})," All Jobs"),"  ",r.createElement(f,{job:e}),r.createElement("br",null),r.createElement("br",null),r.createElement(g,{job:e}))),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-lg-5"},r.createElement(c,{collapsible:!0,defaultExpanded:!0,header:"Scrapy Stats"},r.createElement(h,{job:e}))),r.createElement("div",{className:"col-lg-7"},r.createElement(c,{collapsible:!0,defaultExpanded:!0,header:"Request Queue"},r.createElement(v,{job:e}))))):r.createElement(_,null)}});t.JobPage=w},403:function(e,t,n){"use strict";function r(e,t){var n=new Date,r={};return e.forEach(function(e){r[e]=n}),Object.keys(t).filter(function(e){return r[e]}).forEach(function(e){r[e]=t[e]}),r}function a(e,t){var n=e.slice();return n.sort(function(e,n){return t[e.url]-t[n.url]}),n}Object.defineProperty(t,"__esModule",{value:!0});var o=n(404),s=(n(160),n(352),n(353)),l=n(182),c=l.Table,i=(n(347),n(399)),u=(i.JobsMixin,o.createClass({displayName:"ShortTermQueueWidget",propTypes:{job:o.PropTypes.object.isRequired},getInitialState:function(){return{seenAt:{}}},componentWillReceiveProps:function(e){var t=e.job.downloads.active.map(function(e){return e.url});this.setState({seenAt:r(t,this.state.seenAt)})},render:function(){var e=this,t=this.props.job.downloads,n=a(t.active,this.state.seenAt);if(!n.length)return!1;var r=function(t){var n=a(t.active,e.state.seenAt),r={};t.transferring.forEach(function(e){return r[e.url]=!0});var l=n.map(function(e){var t=r[e.url]?"success":"default";return o.createElement("tr",{key:e.url,className:t},o.createElement("td",null,e.url))}),i=s(1e3*(t.delay||0));return o.createElement(c,{key:t.key},o.createElement("caption",null,t.key,"  ",o.createElement("span",{className:"pull-right"},"download delay: ",i)),o.createElement("tbody",null,l))},l=t.slots.map(function(e){return r(e)});return o.createElement("div",null,l)}}));t.ShortTermQueueWidget=u}});