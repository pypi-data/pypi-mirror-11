<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    lang="en"
    metal:use-macro="context/main_template/macros/master"
    i18n:domain="plone">
<body>

<metal:javascript_head fill-slot="javascript_head_slot">
    <tal:block_hasjsresources 
        tal:define="jsresources python:context.get_resources_js()"
        tal:condition="jsresources"
        tal:repeat="js jsresources">
        <script
            type="text/javascript"
            charset="iso-8859-1"
            tal:attributes="src js">
        </script>
    </tal:block_hasjsresources>
</metal:javascript_head>

<metal:css fill-slot="style_slot">
    <tal:block_hascssresources
        tal:define="cssresources python:context.get_resources_css()"
        tal:condition="cssresources"
        tal:repeat="css cssresources">
        <link rel="stylesheet"
            type="text/css"
            media="all"
            tal:attributes="href css" />
    </tal:block_hascssresources>
</metal:css>

<metal:content fill-slot="main">

    <h1 class="documentFirstHeading" tal:content="context/Title">Title</h1>

    <div id="content-core">
        <form enctype="multipart/form-data"
            method="POST"
            id="plomino_form"
            tal:define="hasCreatePermissionOnDatabase python:context.hasCreatePermission(context.getParentDatabase());
                hasCreatePermissionOnForm python:context.hasCreatePermission(context);"
            tal:attributes="
                name context/id;
                action string:${context/absolute_url}/createDocument;">
            <span tal:replace="structure context/@@authenticator/authenticator"/>

            <tal:layout
                tal:content="structure python:context.openBlankForm(request)">layout</tal:layout>

            <tal:block_has_createpermission
                condition="python:hasCreatePermissionOnDatabase and hasCreatePermissionOnForm">
                <span metal:use-macro="context/plomino_actions/macros/OpenFormActionBar">display form actions</span><br/>
            </tal:block_has_createpermission>
        </form>
    </div>
</metal:content>
</body>
</html>