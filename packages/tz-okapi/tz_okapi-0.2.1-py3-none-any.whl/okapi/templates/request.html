<div class="panel panel-default" id="request-{{ request.guid }}">
  <div class="panel-heading request-header">
    <h3 class="panel-title">
      <span
          class="label label-{{ css_class }}">{{ request.method.upper() }}</span>
      <code contenteditable="true">{{ url }}</code>

            <span class="pull-right">

            <a href="#" data-toggle="modal"
               data-target="#curl-{{ request.guid }}">cURL</a>
              &nbsp;|&nbsp;
            <a href="#" data-toggle="modal"
               data-target="#jira-{{ request.guid }}">JIRA</a>
              &nbsp;|&nbsp;
            <a href="#" data-toggle="modal"
               data-target="#tests-{{ request.guid }}">Tests</a>
              &nbsp;|&nbsp;
            <a href="#request-{{ request.guid }}" class="text-right"><span
                class="glyphicon glyphicon-link"></span></a>
            </span>

    </h3>

  </div>
  <table class="table">
    <thead>
    <tr>
      <th width="33%">Request</th>
      <th>

        {% if not request.status %}
          <span class="text-warning"
                data-toggle="tooltip" data-placement="left"
                title="Tests failed">
          <span class="glyphicon glyphicon-warning-sign"></span>
        {% endif %}
        Response (status code: {{ response.status_code }})
        {% if not request.status %}
          </span>
        {% endif %}
      </th>
    </tr>
    </thead>
    <tr>
      <td>
        {% if request.headers %}
          <div class="request-request">
          <div class="pre"
              contenteditable="true">{{ request.headers|headers_as_string|nl2br }}</div>
        {% endif %}
        {% if request.payload %}
          <div class="pre" contenteditable="true">{{ request.payload|e|nl2br }}</div>
        {% endif %}
        </div>
      </td>

      <td>
        <div class="request-response">
          {% if response.body %}
            <div class="pre"
                 contenteditable="true">{{ response.body|e|nl2br }}</div>
          {% else %}
            <em>No content.</em>
          {% endif %}
        </div>

      </td>
    </tr>
  </table>

</div>


<div class="modal" id="curl-{{ request.guid }}" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <textarea
            style="width: 100%; height: 500px;">{{ request|export_curl }}</textarea>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default"
                data-dismiss="modal">Close
        </button>
      </div>
    </div>
  </div>
</div>


<div class="modal" id="jira-{{ request.guid }}" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <textarea
            style="width: 100%; height: 500px;">{{ request|export_jira }}</textarea>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default"
                data-dismiss="modal">Close
        </button>
      </div>
    </div>
  </div>
</div>

<div class="modal" id="tests-{{ request.guid }}" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <strong>Tests: </strong><br>
        <ul>
          {% for test in request.tests %}
            <li
                class="text-{% if test.result %}success{% else %}danger{% endif %}">
              {{ test }}</li>
          {% endfor %}
        </ul>

        <p><small>
          <strong>Legend:</strong><br>

          <span class="text-success">Test succeeded</span>.<br>
          <span class="text-danger">Test failed</span>.<br>
        </small></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default"
                data-dismiss="modal">Close
        </button>
      </div>
    </div>
  </div>
</div>


