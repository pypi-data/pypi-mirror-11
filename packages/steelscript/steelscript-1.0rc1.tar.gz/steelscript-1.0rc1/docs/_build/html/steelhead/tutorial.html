<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>7.2. SteelScript SteelHead Tutorial &mdash; steelscript  documentation</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/extra.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="steelscript  documentation" href="../index.html" />
    <link rel="up" title="7. SteelScript SteelHead" href="toc.html" />
    <link rel="next" title="7.3. SteelScript SteelHead Sources" href="steelhead.html" />
    <link rel="prev" title="7.1. SteelScript SteelHead" href="overview.html" />
    <script type="text/javascript" src="//nexus.ensighten.com/riverbed/rvbss/Bootstrap.js"></script>
     

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="steelhead.html" title="7.3. SteelScript SteelHead Sources"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="7.1. SteelScript SteelHead"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">steelscript  documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../toc.html" >Table of Contents</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="toc.html" accesskey="U">7. SteelScript SteelHead</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="steelscript-steelhead-tutorial">
<h1>7.2. SteelScript SteelHead Tutorial<a class="headerlink" href="#steelscript-steelhead-tutorial" title="Permalink to this headline">¶</a></h1>
<p>This tutorial will walk through the main components of the SteelScript
interfaces for Riverbed SteelHead Appliance.  It is assumed that
you have a basic understanding of the Python programming language.</p>
<p>The tutorial has been organized so you can follow it sequentially.
Throughout the examples, you will be expected to fill in details
specific to your environment.  These will be called out using a dollar
sign <code class="docutils literal"><span class="pre">$&lt;name&gt;</span></code> &#8211; for example <code class="docutils literal"><span class="pre">$host</span></code> indicates you should fill in
the host name or IP address of a SteelHead appliance.</p>
<p>Whenever you see <code class="docutils literal"><span class="pre">&gt;&gt;&gt;</span></code>, this indicates an interactive session using
the Python shell.  The command that you are expected to type follows
the <code class="docutils literal"><span class="pre">&gt;&gt;&gt;</span></code>.  The result of the command follows.  Any lines with a
<code class="docutils literal"><span class="pre">#</span></code> are just comments to describe what is happening.  In many cases
the exact output will depend on your environment, so it may not match
precisely what you see in this tutorial.</p>
<div class="section" id="background">
<h2>7.2.1. Background<a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h2>
<p>Riverbed SteelHead is the industry’s #1 optimization solution for
accelerated delivery of all applications across the hybrid enterprise.
SteelHead also provides better visibility into application and network
performance and the end user experience plus control through an
application-aware approach to hybrid networking and path selection based
on centralized, business intent-based policies for what you want to
achieve – as a business.  SteelScript for SteelHead offers a set of interfaces
to control and work with a SteelHead appliance.</p>
</div>
<div class="section" id="operation-overview">
<h2>7.2.2. Operation Overview<a class="headerlink" href="#operation-overview" title="Permalink to this headline">¶</a></h2>
<p>Interacting with a SteelHead appliance via a python script involves two steps.
The first step is to obtain a SteelHead object.  The second step is to send
command to the appliance via the existing SteelHead object.  Below we will
describe both steps in details.</p>
<div class="section" id="obtaining-a-steelhead-object">
<h3>7.2.2.1. Obtaining a SteelHead Object<a class="headerlink" href="#obtaining-a-steelhead-object" title="Permalink to this headline">¶</a></h3>
<p>As with any Python code, the first step is to import the module(s) we
intend to use. The SteelScript code for working with SteelHead
appliances resides in a module called <code class="xref py py-mod docutils literal"><span class="pre">steelscript.steelhead.core.steelhead</span></code>.
The main class in this module is <a class="reference internal" href="steelhead.html#steelscript.steelhead.core.steelhead.SteelHead" title="steelscript.steelhead.core.steelhead.SteelHead"><code class="xref py py-class docutils literal"><span class="pre">SteelHead</span></code></a>.  This object
represents a connection to a SteelHead appliance.</p>
<p>To start, start python from the shell or command line:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python
Python 2.7.3 <span class="o">(</span>default, Apr <span class="m">19</span> 2012, 00:55:09<span class="o">)</span>
<span class="o">[</span>GCC 4.2.1 <span class="o">(</span>Based on Apple Inc. build 5658<span class="o">)</span> <span class="o">(</span>LLVM build 2335.15.00<span class="o">)]</span> on darwin
Type <span class="s2">&quot;help&quot;</span>, <span class="s2">&quot;copyright&quot;</span>, <span class="s2">&quot;credits&quot;</span> or <span class="s2">&quot;license&quot;</span> <span class="k">for</span> more information.
&gt;&gt;&gt;
</pre></div>
</div>
<p>Once in the python shell, let&#8217;s create a SteelHead object:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt;&gt;&gt; from steelscript.steelhead.core import steelhead
&gt;&gt;&gt; auth = steelhead.CLIAuth(username=$username, password=$password)
&gt;&gt;&gt; sh = steelhead.SteelHead(host=$host, auth=auth)
</pre></div>
</div>
<p>At first the module of steelhead is imported. Two classes were used from
the steelhead module, including CLIAuth and SteelHead.
The object auth is created by instantiating the CLIAuth class
with username and password to access an SteelHead appliance. Afterwards,
a SteelHead object is created by instantiating the SteelHead class with
the hostname or IP address of the SteelHead appliance and the existing
authentication object. Note that the arguments <code class="docutils literal"><span class="pre">$username</span></code> and <code class="docutils literal"><span class="pre">$password</span></code>
need to be replaced with the actual username and password, and the argument
<code class="docutils literal"><span class="pre">$host</span></code> need to be replaced with the hostname or IP address of the SteelHead
appliance.</p>
<p>As soon as the <code class="docutils literal"><span class="pre">SteelHead</span></code> object is created, a connection is
established to the appliance, and the authentication credentials are
validated.  If the username and password are not correct, you will
immediately see an exception.</p>
</div>
<div class="section" id="sending-commands">
<h3>7.2.2.2. Sending commands<a class="headerlink" href="#sending-commands" title="Permalink to this headline">¶</a></h3>
<p>As soon as a SteelHead object is available, commands can be sent to the SteelHead
appliance via two kinds of interfaces: Command Line Interface (CLI) and Application Program
Interface (API).  CLI is mainly used if the end user just wants to view the
output as it returns well formatted string. In contrast, API returns python data objects and
therefore can be used for further data analysis and processing.</p>
<p>See below for a detailed description for both interfaces are presented using concrete examples.
Note that <code class="docutils literal"><span class="pre">sh</span></code> will be used to reference the existing SteelHead object, which is the
basis for all communication with the SteelHead appliance.</p>
<div class="section" id="cli-interface">
<h4>7.2.2.2.1. CLI Interface<a class="headerlink" href="#cli-interface" title="Permalink to this headline">¶</a></h4>
<p>We can get some basic version information as follows.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">sh</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">exec_command</span><span class="p">(</span><span class="s">&quot;show version&quot;</span><span class="p">)</span>
<span class="go">Product name:      rbt_sh</span>
<span class="go">Product release:   8.5.2</span>
<span class="go">Build ID:          #39</span>
<span class="go">Build date:        2013-12-20 10:10:02</span>
<span class="go">Build arch:        i386</span>
<span class="go">Built by:          mockbuild@bannow-worker4</span>

<span class="go">Uptime:            153d 10h 8m 29s</span>

<span class="go">Product model:     250</span>
<span class="go">System memory:     2063 MB used / 974 MB free / 3038 MB total</span>
<span class="go">Number of CPUs:    1</span>
<span class="go">CPU load averages: 0.23 / 0.15 / 0.10</span>
</pre></div>
</div>
<p>As shown above, a CLI object is obtained by referencing the <code class="docutils literal"><span class="pre">cli</span></code> attribute
of <code class="docutils literal"><span class="pre">sh</span></code>. Afterwards, a method <code class="docutils literal"><span class="pre">exec_command</span></code> can be called via the existing CLI
object. Note that the string argument is the actual CLI command that is run as if it
were executed on the SteelHead appliance.</p>
<p>When one logs into a SteelHead appliance, he/she will be in one of three modes
on a shell terminal, including basic mode, enable mode and configure mode. The CLI
interface from the SteelHead object defaults to enable mode. In order to enter into
configure mode, the user need to either use a &#8220;mode&#8221; parameter or change the default
mode to configure mode. The first method applies to scenarios when one just needs to
run no more than a few commands in configure mode, as shown below:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">steelscript.cmdline.cli</span> <span class="kn">import</span> <span class="n">CLIMode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sh</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">exec_command</span><span class="p">(</span><span class="s">&quot;show version&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">CLIMode</span><span class="o">.</span><span class="n">CONFIG</span><span class="p">)</span>
</pre></div>
</div>
<p>In contrast, if the user wants to engage in a fair amount of interactions with SteelHead
appliance in configure mode, it is recommended to change the default to configure mode, as
shown below:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">steelscript.cmdline.cli</span> <span class="kn">import</span> <span class="n">CLIMode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sh</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">default_mode</span> <span class="o">=</span> <span class="n">CLIMode</span><span class="o">.</span><span class="n">CONFIG</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sh</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">exec_command</span><span class="p">(</span><span class="s">&quot;show version&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="api-interface">
<h4>7.2.2.2.2. API Interface<a class="headerlink" href="#api-interface" title="Permalink to this headline">¶</a></h4>
<p>If the user wants to obtain python data objects via the SteelHead object <code class="docutils literal"><span class="pre">sh</span></code>
instead of just viewing the output, he/she should use the API interface.
The key components of the API interface are the Model and Action class.
Model class is used if the desired data is a property of a SteelHead appliance,
which can usually be derived by executing just one command.
On the other hand, the Action class is intended to include higher-level methods,
deriving data by taking some extra processing in addition to just one command.
For instance, to obtain the version information of a SteelHead appliance should
be using the Model class as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">steelscript.common.interaction.model</span> <span class="kn">import</span> <span class="n">Model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">Model</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sh</span><span class="p">,</span> <span class="n">feature</span><span class="o">=</span><span class="s">&#39;common&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">show_version</span><span class="p">())</span>
<span class="go">{u&#39;build arch&#39;: u&#39;i386&#39;,</span>
<span class="go"> u&#39;build id&#39;: u&#39;#39&#39;,</span>
<span class="go"> u&#39;built by&#39;: u&#39;mockbuild@bannow-worker4&#39;,</span>
<span class="go"> u&#39;number of cpus&#39;: 1,</span>
<span class="go"> u&#39;product model&#39;: u&#39;250&#39;,</span>
<span class="go"> u&#39;product name&#39;: u&#39;rbt_sh&#39;,</span>
<span class="go"> u&#39;product release&#39;: u&#39;8.5.2&#39;}</span>
</pre></div>
</div>
<p>In contrast, to get the product information of the SteelHead requires further processing
of the output of the version information above, thus the Action class should be used
as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">steelscript.common.interaction.action</span> <span class="kn">import</span> <span class="n">Action</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">action</span> <span class="o">=</span> <span class="n">Action</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sh</span><span class="p">,</span> <span class="n">feature</span><span class="o">=</span><span class="s">&#39;common&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">action</span><span class="o">.</span><span class="n">get_product_info</span><span class="p">())</span>
<span class="go">{u&#39;model&#39;: u&#39;250&#39;, u&#39;name&#39;: u&#39;SteelHead&#39;, u&#39;release&#39;: u&#39;8.5.2&#39;}</span>
</pre></div>
</div>
<p>From the above two examples, we can summarize on the procedure of using API to
obtain data from a SteelHead.  First of all, the Model or Action class is imported.
Secondly, the Model or Action object is created by passing the SteelHead object <code class="docutils literal"><span class="pre">sh</span></code>
and a feature string &#8220;common&#8221; to the get class method associated with either Model or Action class.
The last and most important step is to call a method associated with the derived Model
or Action object according to the specific data that is desired.
There are a total of 5 features available: &#8216;common&#8217;, &#8216;networking&#8217;, &#8216;optimization&#8217;, &#8216;flows&#8217; and &#8216;stats&#8217;.
Each feature is bound to a model and action object with a set of associated methods.
Methods supported by each feature can be found at <a class="reference internal" href="steelhead.html"><em>SteelScript SteelHead Sources</em></a>.
Note that both of the above-mentioned examples yield data as a python dictionary instead
of a well-formatted string.</p>
<p>Before moving on, exit the python interactive shell:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">Ctrl</span><span class="o">-</span><span class="n">D</span><span class="p">]</span>
<span class="go">$</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="extending-the-example">
<h2>7.2.3. Extending the Example<a class="headerlink" href="#extending-the-example" title="Permalink to this headline">¶</a></h2>
<p>As a last item to help get started with your own scripts, we will post a new
script below, then walk through the key sections in the example script.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>

<span class="kn">import</span> <span class="nn">steelscript.steelhead.core.steelhead</span> <span class="kn">as</span> <span class="nn">steelhead</span>

<span class="kn">from</span> <span class="nn">steelscript.common.app</span> <span class="kn">import</span> <span class="n">Application</span>

<span class="k">class</span> <span class="nc">ShowVersionApp</span><span class="p">(</span><span class="n">Application</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">add_positional_args</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_positional_arg</span><span class="p">(</span><span class="s">&#39;host&#39;</span><span class="p">,</span> <span class="s">&#39;SteelHead hostname or IP address&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parser</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ShowVersionApp</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">add_options</span><span class="p">(</span><span class="n">parser</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s">&#39;-u&#39;</span><span class="p">,</span> <span class="s">&#39;--username&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&quot;Username to connect with&quot;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s">&#39;-p&#39;</span><span class="p">,</span> <span class="s">&#39;--password&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&quot;Password to use&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">validate_args</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ShowVersionApp</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">validate_args</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">username</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&quot;User Name needs to be specified&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">password</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&quot;Password needs to be specified&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">auth</span> <span class="o">=</span> <span class="n">steelhead</span><span class="o">.</span><span class="n">CLIAuth</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
                                 <span class="n">password</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">password</span><span class="p">)</span>
        <span class="n">sh</span> <span class="o">=</span> <span class="n">steelhead</span><span class="o">.</span><span class="n">SteelHead</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">auth</span><span class="p">)</span>

        <span class="k">print</span> <span class="n">sh</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">exec_command</span><span class="p">(</span><span class="s">&quot;show version&quot;</span><span class="p">)</span>


<span class="n">ShowVersionApp</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>Let us break down the script. First we need to import some items:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>

import steelscript.steelhead.core.steelhead as steelhead

from steelscript.common.app import Application
</pre></div>
</div>
<p>That bit at the top is called a shebang, it tells the system that it should
execute this script using the program after the &#8216;#!&#8217;. Besides steelhead module,
we are also importing the Application class, which is used to help parse arguments
and simplify the api call to run the application.</p>
<div class="highlight-bash"><div class="highlight"><pre>class ShowVersionApp<span class="o">(</span>Application<span class="o">)</span>:

    def add_options<span class="o">(</span>self, parser<span class="o">)</span>:
        super<span class="o">(</span>ShowVersionApp, self<span class="o">)</span>.add_options<span class="o">(</span>parser<span class="o">)</span>
        parser.add_option<span class="o">(</span><span class="s1">&#39;-H&#39;</span>, <span class="s1">&#39;--host&#39;</span>,
                          <span class="nb">help</span><span class="o">=</span><span class="s1">&#39;hostname or IP address&#39;</span><span class="o">)</span>
        parser.add_option<span class="o">(</span><span class="s1">&#39;-u&#39;</span>, <span class="s1">&#39;--username&#39;</span>, <span class="nb">help</span><span class="o">=</span><span class="s2">&quot;Username to connect with&quot;</span><span class="o">)</span>
        parser.add_option<span class="o">(</span><span class="s1">&#39;-p&#39;</span>, <span class="s1">&#39;--password&#39;</span>, <span class="nb">help</span><span class="o">=</span><span class="s2">&quot;Password to use&quot;</span><span class="o">)</span>

    def validate_args<span class="o">(</span>self<span class="o">)</span>:
        super<span class="o">(</span>ShowVersionApp, self<span class="o">)</span>.validate_args<span class="o">()</span>

        <span class="k">if</span> not self.options.host:
            self.parser.error<span class="o">(</span><span class="s2">&quot;Host name needs to be specified&quot;</span><span class="o">)</span>

        <span class="k">if</span> not self.options.username:
            self.parser.error<span class="o">(</span><span class="s2">&quot;User Name needs to be specified&quot;</span><span class="o">)</span>

        <span class="k">if</span> not self.options.password:
            self.parser.error<span class="o">(</span><span class="s2">&quot;Password needs to be specified&quot;</span><span class="o">)</span>
</pre></div>
</div>
<p>This section begins the definition of a new class, which inherits from the
class Application.  This is some of the magic of object-oriented programming,
a lot of functionality is defined as part of Application, and we get all
of that for <em>free</em>, just by inheriting from it.  In fact, we go beyond that,
and <em>extend</em> its functionality by defining the function <code class="docutils literal"><span class="pre">add_options</span></code> and
<code class="docutils literal"><span class="pre">validate_args</span></code>.  Here, we add options to pass in a host name, a user name and
a password, and then if the format of the passed-in arguments in the command
is wrong, a help message will be printed out.</p>
<div class="highlight-bash"><div class="highlight"><pre>    def main<span class="o">(</span>self<span class="o">)</span>:
        <span class="nv">auth</span> <span class="o">=</span> steelhead.CLIAuth<span class="o">(</span><span class="nv">username</span><span class="o">=</span>self.options.username,
                                 <span class="nv">password</span><span class="o">=</span>self.options.password<span class="o">)</span>
        <span class="nv">sh</span> <span class="o">=</span> steelhead.SteelHead<span class="o">(</span><span class="nv">host</span><span class="o">=</span>self.options.host, <span class="nv">auth</span><span class="o">=</span>auth<span class="o">)</span>

        print <span class="o">(</span>sh.cli.exec_command<span class="o">(</span><span class="s2">&quot;show version&quot;</span><span class="o">))</span>


ShowVersionApp<span class="o">()</span>.run<span class="o">()</span>
</pre></div>
</div>
<p>This is the main part of the script, and it is using the CLI interface. One
can easily modify it to use any API interface to fetch data from a SteelHead appliance.
The last line calls the run function as defined in the Application class,
which executes the main function defined in the ShowVersionApp class.</p>
<p>Now let us try to run the script. Copy the code into a new file <code class="docutils literal"><span class="pre">show_version_example.py</span></code>,
make it executable and run it from command line. Note that <code class="docutils literal"><span class="pre">host</span></code>, <code class="docutils literal"><span class="pre">username</span></code>, <code class="docutils literal"><span class="pre">password</span></code>
are now all items to be passed to the command, shown as below.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>chmod +x show_version_example.py
<span class="nv">$ </span>show_version_example.py <span class="nv">$host</span> -u <span class="nv">$username</span> -p <span class="nv">$password</span>
Product name:      rbt_sh
Product release:   8.5.2
Build ID:          <span class="c">#39</span>
Build date:        2013-12-20 10:10:02
Build arch:        i386
Built by:          mockbuild@bannow-worker4

Uptime:            153d 10h 8m 29s

Product model:     250
System memory:     <span class="m">2063</span> MB used / <span class="m">974</span> MB free / <span class="m">3038</span> MB total
Number of CPUs:    1
CPU load averages: 0.23 / 0.15 / 0.10
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/rb-ss-logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="overview.html">SteelScript SteelHead</a></h3>
  <ul>
<li><a class="reference internal" href="#">7.2. SteelScript SteelHead Tutorial</a><ul>
<li><a class="reference internal" href="#background">7.2.1. Background</a></li>
<li><a class="reference internal" href="#operation-overview">7.2.2. Operation Overview</a><ul>
<li><a class="reference internal" href="#obtaining-a-steelhead-object">7.2.2.1. Obtaining a SteelHead Object</a></li>
<li><a class="reference internal" href="#sending-commands">7.2.2.2. Sending commands</a><ul>
<li><a class="reference internal" href="#cli-interface">7.2.2.2.1. CLI Interface</a></li>
<li><a class="reference internal" href="#api-interface">7.2.2.2.2. API Interface</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#extending-the-example">7.2.3. Extending the Example</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="overview.html"
                        title="previous chapter">7.1. SteelScript SteelHead</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="steelhead.html"
                        title="next chapter">7.3. SteelScript SteelHead Sources</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/steelhead/tutorial.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>
<a href="../license.html">License</a>
</h3>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="steelhead.html" title="7.3. SteelScript SteelHead Sources"
             >next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="7.1. SteelScript SteelHead"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">steelscript  documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../toc.html" >Table of Contents</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="toc.html" >7. SteelScript SteelHead</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015 Riverbed Technology, Inc..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>