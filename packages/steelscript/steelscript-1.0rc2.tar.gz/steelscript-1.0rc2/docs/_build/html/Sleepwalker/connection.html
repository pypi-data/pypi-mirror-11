<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Connections &mdash; steelscript  documentation</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/extra.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="steelscript  documentation" href="../index.html" />
    <script type="text/javascript" src="//nexus.ensighten.com/riverbed/rvbss/Bootstrap.js"></script>
     

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">steelscript  documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <span class="target" id="module-sleepwalker"></span><div class="section" id="module-sleepwalker.connection">
<span id="connections"></span><h1>Connections<a class="headerlink" href="#module-sleepwalker.connection" title="Permalink to this headline">¶</a></h1>
<p>This module defines the <cite>ConnectionManager</cite> class which is used
together with <cite>ServiceManager</cite> class to support seamlessly following
links and relations from one service to another, whether on the
same host or on different hosts.</p>
<p>A single <cite>ConnectionManager</cite> instance instantiates connections
to target hosts by calling registered <cite>ConnectionHook</cite> instances.
A connection is established for each unique &lt;host, auth&gt; pair,
where the auth object represents the authentication credentials
in a form understood by the underlying connection class.</p>
<div class="section" id="class-connection">
<h2>class <a class="reference internal" href="#sleepwalker.connection.Connection" title="sleepwalker.connection.Connection"><code class="xref py py-class docutils literal"><span class="pre">Connection</span></code></a><a class="headerlink" href="#class-connection" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="sleepwalker.connection.Connection">
<em class="property">class </em><code class="descclassname">sleepwalker.connection.</code><code class="descname">Connection</code><span class="sig-paren">(</span><em>hostname</em>, <em>auth=None</em>, <em>port=None</em>, <em>verify=True</em><span class="sig-paren">)</span><a class="headerlink" href="#sleepwalker.connection.Connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle authentication and communication to remote machines.</p>
<dl class="method">
<dt id="sleepwalker.connection.Connection.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>hostname</em>, <em>auth=None</em>, <em>port=None</em>, <em>verify=True</em><span class="sig-paren">)</span><a class="headerlink" href="#sleepwalker.connection.Connection.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize new connection and setup authentication</p>
<p><cite>hostname</cite> - include protocol, e.g. &#8216;<a class="reference external" href="https://host.com">https://host.com</a>&#8216;
<cite>auth</cite> - authentication object, see below
<cite>port</cite> - optional port to use for connection
<cite>verify</cite> - require SSL certificate validation.</p>
<p>Authentication:
For simple basic auth, passing a tuple of (user, pass) is
sufficient as a shortcut to an instance of HTTPBasicAuth.
This auth method will trigger a check  to ensure
the protocol is using SSL to connect (though cert verification
may still be turned off to avoid errors with self-signed certs).</p>
<p>netrc config files will be checked if auth is left as None.
If no authentication is provided for the hostname in the
netrc file, or no file exists, an error will be raised
when trying to connect.</p>
</dd></dl>

<dl class="class">
<dt id="sleepwalker.connection.Connection.JsonEncoder">
<em class="property">class </em><code class="descname">JsonEncoder</code><span class="sig-paren">(</span><em>skipkeys=False</em>, <em>ensure_ascii=True</em>, <em>check_circular=True</em>, <em>allow_nan=True</em>, <em>sort_keys=False</em>, <em>indent=None</em>, <em>separators=None</em>, <em>encoding='utf-8'</em>, <em>default=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sleepwalker.connection.Connection.JsonEncoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle more object types if first encoding doesn&#8217;t work.</p>
</dd></dl>

<dl class="method">
<dt id="sleepwalker.connection.Connection.add_headers">
<code class="descclassname">Connection.</code><code class="descname">add_headers</code><span class="sig-paren">(</span><em>headers</em><span class="sig-paren">)</span><a class="headerlink" href="#sleepwalker.connection.Connection.add_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Add headers that are common to all requests.</p>
</dd></dl>

<dl class="method">
<dt id="sleepwalker.connection.Connection.get_url">
<code class="descclassname">Connection.</code><code class="descname">get_url</code><span class="sig-paren">(</span><em>uri</em><span class="sig-paren">)</span><a class="headerlink" href="#sleepwalker.connection.Connection.get_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a fully qualified URL given a URI.</p>
</dd></dl>

<dl class="method">
<dt id="sleepwalker.connection.Connection.json_request">
<code class="descclassname">Connection.</code><code class="descname">json_request</code><span class="sig-paren">(</span><em>method</em>, <em>uri</em>, <em>body=None</em>, <em>params=None</em>, <em>extra_headers=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sleepwalker.connection.Connection.json_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a JSON request and receive JSON response.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-connectionmanager">
<h2>class <a class="reference internal" href="#sleepwalker.connection.ConnectionManager" title="sleepwalker.connection.ConnectionManager"><code class="xref py py-class docutils literal"><span class="pre">ConnectionManager</span></code></a><a class="headerlink" href="#class-connectionmanager" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="sleepwalker.connection.ConnectionManager">
<em class="property">class </em><code class="descclassname">sleepwalker.connection.</code><code class="descname">ConnectionManager</code><a class="headerlink" href="#sleepwalker.connection.ConnectionManager" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="sleepwalker.connection.ConnectionManager.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sleepwalker.connection.ConnectionManager.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="sleepwalker.connection.ConnectionManager.add">
<code class="descname">add</code><span class="sig-paren">(</span><em>host</em>, <em>auth</em>, <em>conn</em><span class="sig-paren">)</span><a class="headerlink" href="#sleepwalker.connection.ConnectionManager.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Manually add a connection to the given host to the manager.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>host</strong> &#8211; the target host of the connection</li>
<li><strong>auth</strong> &#8211; object representing authentication credentials</li>
<li><strong>conn</strong> &#8211; a <cite>Connection</cite> object</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Note that if a connection is already present to the target host
it is replaced with the new connection.</p>
</dd></dl>

<dl class="method">
<dt id="sleepwalker.connection.ConnectionManager.add_conn_hook">
<code class="descname">add_conn_hook</code><span class="sig-paren">(</span><em>hook</em><span class="sig-paren">)</span><a class="headerlink" href="#sleepwalker.connection.ConnectionManager.add_conn_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a connection hook to call to establish new connections.</p>
</dd></dl>

<dl class="method">
<dt id="sleepwalker.connection.ConnectionManager.clear_hooks">
<code class="descname">clear_hooks</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sleepwalker.connection.ConnectionManager.clear_hooks" title="Permalink to this definition">¶</a></dt>
<dd><p>Drop all connection hooks.</p>
</dd></dl>

<dl class="method">
<dt id="sleepwalker.connection.ConnectionManager.find">
<code class="descname">find</code><span class="sig-paren">(</span><em>host</em>, <em>auth</em><span class="sig-paren">)</span><a class="headerlink" href="#sleepwalker.connection.ConnectionManager.find" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a connection to the given host, trying hooks as needed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>host</strong> &#8211; the target host of the connection</li>
<li><strong>auth</strong> &#8211; object representing authentication credentials</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Raises ConnectionError:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first last">if no connection to the target host
could be found and no connection hooks succeeded in
establishing a new connection</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sleepwalker.connection.ConnectionManager.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sleepwalker.connection.ConnectionManager.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Close and forget all connections.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-connectionhook">
<h2>class <a class="reference internal" href="#sleepwalker.connection.ConnectionHook" title="sleepwalker.connection.ConnectionHook"><code class="xref py py-class docutils literal"><span class="pre">ConnectionHook</span></code></a><a class="headerlink" href="#class-connectionhook" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="sleepwalker.connection.ConnectionHook">
<em class="property">class </em><code class="descclassname">sleepwalker.connection.</code><code class="descname">ConnectionHook</code><a class="headerlink" href="#sleepwalker.connection.ConnectionHook" title="Permalink to this definition">¶</a></dt>
<dd><p>This class defines the interface for establshing connections for ConnectionManager.</p>
<p>This class must be sub-classed and the <cite>connect()</cite> method
implemented.  An instance of the new class is passed to the
<cite>ConnectionManager.add_conn_hook()</cite> method.</p>
<dl class="method">
<dt id="sleepwalker.connection.ConnectionHook.connect">
<code class="descname">connect</code><span class="sig-paren">(</span><em>host</em>, <em>auth</em><span class="sig-paren">)</span><a class="headerlink" href="#sleepwalker.connection.ConnectionHook.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Establish a new Connection to the target host.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>host</strong> &#8211; scheme / ip address or hostname / port of the
target server to connect to</li>
<li><strong>auth</strong> &#8211; object representing authentication credentials
to use for requests to the target host</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>This method must return a <cite>Connection</cite> object (or similar) or
None if this hook does not know how to connect to the named
<cite>host</cite>.</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/rb-ss-logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="overview.html">Sleepwalker</a></h3>
  <ul>
<li><a class="reference internal" href="#">Connections</a><ul>
<li><a class="reference internal" href="#class-connection">class <code class="docutils literal"><span class="pre">Connection</span></code></a></li>
<li><a class="reference internal" href="#class-connectionmanager">class <code class="docutils literal"><span class="pre">ConnectionManager</span></code></a></li>
<li><a class="reference internal" href="#class-connectionhook">class <code class="docutils literal"><span class="pre">ConnectionHook</span></code></a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/Sleepwalker/connection.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>
<a href="../license.html">License</a>
</h3>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">steelscript  documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015 Riverbed Technology, Inc..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>