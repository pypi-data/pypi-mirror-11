<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Loading Data &mdash; The yt Project 3.2-dev documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.4/readable/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.2-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="The yt Project 3.2-dev documentation" href="../index.html" />
    <link rel="up" title="Loading and Examining Data" href="index.html" />
    <link rel="next" title="Loading Generic Array Data" href="generic_array_data.html" />
    <link rel="prev" title="Loading and Examining Data" href="index.html" />
    
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-391373-2']);
      _gaq.push(['_setDomainName', 'yt-project.org']);
      _gaq.push(['_setAllowHash', false]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/yt_icon.png">
          The yt Project</a>
        <span class="navbar-text navbar-version pull-left"><b>3.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../help/index.html">How to get help</a></li>
                <li><a href="../quickstart/index.html">Quickstart notebooks</a></li>
                <li><a href="../cookbook/index.html">Cookbook</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installing.html">Getting and Installing yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installing.html#getting-yt">Getting yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installing.html#testing-your-installation">Testing Your Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installing.html#switching-between-yt-2-x-and-yt-3-x">Switching between yt-2.x and yt-3.x</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/index.html">yt Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/data_inspection.html">Data Inspection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/simple_visualization.html">Simple Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/data_objects_and_time_series.html">Data Objects and Time Series</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/derived_fields_and_profiles.html">Derived Fields and Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/volume_rendering.html">Volume Rendering</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../yt3differences.html">What&#8217;s New and Different in yt 3.0?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../yt3differences.html#updating-to-yt-3-0-from-old-versions-and-going-back">Updating to yt 3.0 from Old Versions (and going back)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yt3differences.html#converting-old-scripts-to-work-with-yt-3-0">Converting Old Scripts to Work with yt 3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yt3differences.html#cool-new-things">Cool New Things</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yt3differences.html#api-changes">API Changes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cookbook/index.html">The Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cookbook/index.html#getting-the-sample-data">Getting the Sample Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cookbook/index.html#example-scripts">Example Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cookbook/index.html#example-notebooks">Example Notebooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../visualizing/index.html">Visualizing Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/plots.html">How to Make Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/callbacks.html">Plot Modifications: Overplotting Contours, Velocities, Particles, and More</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/manual_plotting.html">Using the Manual Plotting Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/volume_rendering.html">Volume Rendering: Making 3D Photorealistic Isocontoured Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/hardware_volume_rendering.html">Hardware Volume Rendering on NVidia Graphics cards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/sketchfab.html">3D Surfaces and Sketchfab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/mapserver.html">Mapserver - A Google-Maps-like Interface to your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/streamlines.html">Streamlines: Tracking the Trajectories of Tracers in your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/colormaps/index.html">Colormaps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/writing_fits_images.html">Writing FITS Images</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../analyzing/index.html">General Data Analysis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/fields.html">Fields in yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_derived_fields.html">Creating Derived Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/objects.html">Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/units/index.html">Symbolic Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/filtering.html">Filtering your Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/generating_processed_data.html">Generating Processed Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/time_series_analysis.html">Time Series Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/parallel_computation.html">Parallel Computation With yt</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../analyzing/analysis_modules/index.html">Topic-Specific Analysis Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/analysis_modules/halo_analysis.html">Halo Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/analysis_modules/synthetic_observation.html">Synthetic Observation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/analysis_modules/exporting.html">Exporting to External Radiation Transport Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/analysis_modules/two_point_functions.html">Two Point Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/analysis_modules/clump_finding.html">Clump Finding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/analysis_modules/particle_trajectories.html">Particle Trajectories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/analysis_modules/ellipsoid_analysis.html">Halo Ellipsoid Analysis</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Loading and Examining Data</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">Loading Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="generic_array_data.html">Loading Generic Array Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="generic_particle_data.html">Loading Generic Particle Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="spherical_data.html">Loading Spherical Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="low_level_inspection.html">Low-Level Data Inspection: Accessing Raw Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developing/index.html">Developing in yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../developing/intro.html">Getting Involved</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/developing.html">How to Develop yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/building_the_docs.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/debugdrive.html">Debugging yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_datatypes.html">Creating Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_derived_fields.html">Creating Derived Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_derived_quantities.html">Creating Derived Quantities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_frontend.html">Creating A New Code Frontend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/external_analysis.html">Using yt with External Analysis Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference Materials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/code_support.html">Code Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/command-line.html">Command-Line Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/api/api.html">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/configuration.html">Customizing yt: The Configuration and Plugin Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/field_list.html">Field List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/changelog.html">ChangeLog</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#version-installation">Version &amp; Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#code-errors-and-failures">Code Errors and Failures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#units">Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#fields">Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#data-objects">Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#developing">Developing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../help/index.html">Getting Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#don-t-panic-and-don-t-give-up">Don&#8217;t panic and don&#8217;t give up</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#update-to-the-latest-version">Update to the latest version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#search-the-documentation-faq-and-mailing-lists">Search the documentation, FAQ, and mailing lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#look-at-the-source-code">Look at the source code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#isolate-and-document-your-problem">Isolate and document your problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#go-on-irc-to-ask-a-question">Go on IRC to ask a question</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#ask-the-mailing-list">Ask the mailing list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#submit-a-bug-report">Submit a bug report</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#special-issues">Special Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#what-is-yt">What is yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#who-is-yt">Who is yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#history-of-yt">History of yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#how-do-i-contact-yt">How do I contact yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#how-do-i-cite-yt">How do I cite yt?</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Loading Data</a><ul>
<li><a class="reference internal" href="#art-data">ART Data</a></li>
<li><a class="reference internal" href="#artio-data">ARTIO Data</a></li>
<li><a class="reference internal" href="#athena-data">Athena Data</a></li>
<li><a class="reference internal" href="#boxlib-data">BoxLib Data</a></li>
<li><a class="reference internal" href="#pluto-data">Pluto Data</a></li>
<li><a class="reference internal" href="#enzo-data">Enzo Data</a></li>
<li><a class="reference internal" href="#fits-data">FITS Data</a><ul>
<li><a class="reference internal" href="#making-the-most-of-yt-for-fits-data">Making the Most of yt for FITS Data</a></li>
<li><a class="reference internal" href="#fits-coordinates">FITS Coordinates</a></li>
<li><a class="reference internal" href="#fields-in-fits-datasets">Fields in FITS Datasets</a></li>
<li><a class="reference internal" href="#additional-options">Additional Options</a><ul>
<li><a class="reference internal" href="#nan-mask"><code class="docutils literal"><span class="pre">nan_mask</span></code></a></li>
<li><a class="reference internal" href="#suppress-astropy-warnings"><code class="docutils literal"><span class="pre">suppress_astropy_warnings</span></code></a></li>
<li><a class="reference internal" href="#z-axis-decomp"><code class="docutils literal"><span class="pre">z_axis_decomp</span></code></a></li>
<li><a class="reference internal" href="#spectral-factor"><code class="docutils literal"><span class="pre">spectral_factor</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#miscellaneous-tools-for-use-with-fits-data">Miscellaneous Tools for Use with FITS Data</a><ul>
<li><a class="reference internal" href="#setup-counts-fields"><code class="docutils literal"><span class="pre">setup_counts_fields</span></code></a></li>
<li><a class="reference internal" href="#ds9-region"><code class="docutils literal"><span class="pre">ds9_region</span></code></a></li>
<li><a class="reference internal" href="#plotwindowwcs"><code class="docutils literal"><span class="pre">PlotWindowWCS</span></code></a></li>
<li><a class="reference internal" href="#create-spectral-slabs"><code class="docutils literal"><span class="pre">create_spectral_slabs</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples-of-using-fits-data">Examples of Using FITS Data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#flash-data">FLASH Data</a></li>
<li><a class="reference internal" href="#gadget-data">Gadget Data</a><ul>
<li><a class="reference internal" href="#units-and-bounding-boxes">Units and Bounding Boxes</a></li>
<li><a class="reference internal" href="#indexing-criteria">Indexing Criteria</a></li>
<li><a class="reference internal" href="#field-specifications">Field Specifications</a></li>
<li><a class="reference internal" href="#particle-type-definitions">Particle Type Definitions</a></li>
<li><a class="reference internal" href="#header-specification">Header Specification</a></li>
<li><a class="reference internal" href="#specifying-units">Specifying Units</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generic-amr-data">Generic AMR Data</a></li>
<li><a class="reference internal" href="#generic-array-data">Generic Array Data</a></li>
<li><a class="reference internal" href="#semi-structured-grid-data">Semi-Structured Grid Data</a></li>
<li><a class="reference internal" href="#generic-particle-data">Generic Particle Data</a></li>
<li><a class="reference internal" href="#halo-catalog-data">Halo Catalog Data</a><ul>
<li><a class="reference internal" href="#gadget-fof-subfind">Gadget FOF/SUBFIND</a></li>
<li><a class="reference internal" href="#owls-fof-subfind">OWLS FOF/SUBFIND</a></li>
<li><a class="reference internal" href="#rockstar">Rockstar</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pyne-data">PyNE Data</a></li>
<li><a class="reference internal" href="#ramses-data">RAMSES Data</a></li>
<li><a class="reference internal" href="#sph-particle-data">SPH Particle Data</a></li>
<li><a class="reference internal" href="#tipsy-data">Tipsy Data</a><ul>
<li><a class="reference internal" href="#specifying-tipsy-cosmological-parameters">Specifying Tipsy Cosmological Parameters</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="loading-data">
<span id="id1"></span><h1>Loading Data<a class="headerlink" href="#loading-data" title="Permalink to this headline">¶</a></h1>
<p>This section contains information on how to load data into yt, as well as
some important caveats about different data formats.</p>
<div class="section" id="art-data">
<span id="loading-art-data"></span><h2>ART Data<a class="headerlink" href="#art-data" title="Permalink to this headline">¶</a></h2>
<p>ART data has been supported in the past by Christopher Moody and is currently
cared for by Kenza Arraki.  Please contact the <code class="docutils literal"><span class="pre">yt-dev</span></code> mailing list if you
are interested in using yt for ART data, or if you are interested in assisting
with development of yt to work with ART data.</p>
<p>To load an ART dataset you can use the <code class="docutils literal"><span class="pre">yt.load</span></code> command and provide it the
gas mesh file. It will search for and attempt to find the complementary dark
matter and stellar particle header and data files. However, your simulations may
not follow the same naming convention.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;D9p_500/10MpcBox_HartGal_csf_a0.500.d&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>It will search for and attempt to find the complementary dark matter and stellar
particle header and data files. However, your simulations may not follow the
same naming convention.</p>
<p>For example, the single snapshot given in the sample data has a series of files
that look like this:</p>
<div class="highlight-none"><div class="highlight"><pre>10MpcBox_HartGal_csf_a0.500.d  #Gas mesh
PMcrda0.500.DAT                #Particle header
PMcrs0a0.500.DAT               #Particle data (positions,velocities)
stars_a0.500.dat               #Stellar data (metallicities, ages, etc.)
</pre></div>
</div>
<p>The ART frontend tries to find the associated files matching the
above, but if that fails you can specify <code class="docutils literal"><span class="pre">file_particle_header</span></code>,
<code class="docutils literal"><span class="pre">file_particle_data</span></code>, and <code class="docutils literal"><span class="pre">file_particle_stars</span></code>, in addition to
specifying the gas mesh. Note that the <code class="docutils literal"><span class="pre">pta0.500.dat</span></code> or <code class="docutils literal"><span class="pre">pt.dat</span></code>
file containing particle time steps is not loaded by yt.</p>
<p>You also have the option of gridding particles and assigning them onto the
meshes.  This process is in beta, and for the time being it&#8217;s probably best to
leave <code class="docutils literal"><span class="pre">do_grid_particles=False</span></code> as the default.</p>
<p>To speed up the loading of an ART file, you have a few options. You can turn
off the particles entirely by setting <code class="docutils literal"><span class="pre">discover_particles=False</span></code>. You can
also only grid octs up to a certain level, <code class="docutils literal"><span class="pre">limit_level=5</span></code>, which is useful
when debugging by artificially creating a &#8216;smaller&#8217; dataset to work with.</p>
<p>Finally, when stellar ages are computed we &#8216;spread&#8217; the ages evenly within a
smoothing window. By default this is turned on and set to 10Myr. To turn this
off you can set <code class="docutils literal"><span class="pre">spread=False</span></code>, and you can tweak the age smoothing window
by specifying the window in seconds, <code class="docutils literal"><span class="pre">spread=1.0e7*365*24*3600</span></code>.</p>
<p>There is currently preliminary support for dark matter only ART data. To load a
dataset use the <code class="docutils literal"><span class="pre">yt.load</span></code> command and provide it the particle data file. It
will search for the complementary particle header file.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;PMcrs0a0.500.DAT&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Important: This should not be used for loading just the dark matter
data for a &#8216;regular&#8217; hydrodynamical data set as the units and IO are
different!</p>
</div>
<div class="section" id="artio-data">
<span id="loading-artio-data"></span><h2>ARTIO Data<a class="headerlink" href="#artio-data" title="Permalink to this headline">¶</a></h2>
<p>ARTIO data has a well-specified internal parameter system and has few free
parameters.  However, for optimization purposes, the parameter that provides
the most guidance to yt as to how to manage ARTIO data is <code class="docutils literal"><span class="pre">max_range</span></code>.  This
governs the maximum number of space-filling curve cells that will be used in a
single &#8220;chunk&#8221; of data read from disk.  For small datasets, setting this number
very large will enable more data to be loaded into memory at any given time;
for very large datasets, this parameter can be left alone safely.  By default
it is set to 1024; it can in principle be set as high as the total number of
SFC cells.</p>
<p>To load ARTIO data, you can specify a command such as this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ds</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s">&quot;./A11QR1/s11Qzm1h2_a1.0000.art&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="athena-data">
<span id="loading-athena-data"></span><h2>Athena Data<a class="headerlink" href="#athena-data" title="Permalink to this headline">¶</a></h2>
<p>Athena 4.x VTK data is <em>mostly</em> supported and cared for by John
ZuHone. Both uniform grid and SMR datasets are supported.</p>
<p>Loading Athena datasets is slightly different depending on whether
your dataset came from a serial or a parallel run. If the data came
from a serial run or you have joined the VTK files together using the
Athena tool <code class="docutils literal"><span class="pre">join_vtk</span></code>, you can load the data like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;kh.0010.vtk&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The filename corresponds to the file on SMR level 0, whereas if there
are multiple levels the corresponding files will be picked up
automatically, assuming they are laid out in <code class="docutils literal"><span class="pre">lev*</span></code> subdirectories
under the directory where the base file is located.</p>
<p>For parallel datasets, yt assumes that they are laid out in
directories named <code class="docutils literal"><span class="pre">id*</span></code>, one for each processor number, each with
<code class="docutils literal"><span class="pre">lev*</span></code> subdirectories for additional refinement levels. To load this
data, call <code class="docutils literal"><span class="pre">load</span></code> with the base file in the <code class="docutils literal"><span class="pre">id0</span></code> directory:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;id0/kh.0010.vtk&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>which will pick up all of the files in the different <code class="docutils literal"><span class="pre">id*</span></code> directories for
the entire dataset.</p>
<p>yt works in cgs (&#8220;Gaussian&#8221;) units by default, but Athena data is not
normally stored in these units. If you would like to convert data to
cgs units, you may supply conversions for length, time, and mass to <code class="docutils literal"><span class="pre">load</span></code> using
the <code class="docutils literal"><span class="pre">units_override</span></code> functionality:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>

<span class="n">units_override</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;length_unit&quot;</span><span class="p">:(</span><span class="mf">1.0</span><span class="p">,</span><span class="s">&quot;Mpc&quot;</span><span class="p">),</span>
                  <span class="s">&quot;time_unit&quot;</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="s">&quot;Myr&quot;</span><span class="p">),</span>
                  <span class="s">&quot;mass_unit&quot;</span><span class="p">:(</span><span class="mf">1.0e14</span><span class="p">,</span><span class="s">&quot;Msun&quot;</span><span class="p">)}</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;id0/cluster_merger.0250.vtk&quot;</span><span class="p">,</span> <span class="n">units_override</span><span class="o">=</span><span class="n">units_override</span><span class="p">)</span>
</pre></div>
</div>
<p>This means that the yt fields, e.g. <code class="docutils literal"><span class="pre">(&quot;gas&quot;,&quot;density&quot;)</span></code>, <code class="docutils literal"><span class="pre">(&quot;gas&quot;,&quot;x-velocity&quot;)</span></code>,
<code class="docutils literal"><span class="pre">(&quot;gas&quot;,&quot;magnetic_field_x&quot;)</span></code>, will be in cgs units, but the Athena fields, e.g.,
<code class="docutils literal"><span class="pre">(&quot;athena&quot;,&quot;density&quot;)</span></code>, <code class="docutils literal"><span class="pre">(&quot;athena&quot;,&quot;velocity_x&quot;)</span></code>, <code class="docutils literal"><span class="pre">(&quot;athena&quot;,&quot;cell_centered_B_x&quot;)</span></code>, will be
in code units.</p>
<p>Some 3D Athena outputs may have large grids (especially parallel datasets subsequently joined with
the <cite>join_vtk</cite> script), and may benefit from being subdivided into &#8220;virtual grids&#8221;. For this purpose,
one can pass in the <cite>nprocs</cite> parameter:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;sloshing.0000.vtk&quot;</span><span class="p">,</span> <span class="n">nprocs</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
</pre></div>
</div>
<p>which will subdivide each original grid into <cite>nprocs</cite> grids.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Virtual grids are only supported (and really only necessary) for 3D data.</p>
</div>
<p>Alternative values for the following simulation parameters may be specified using a <code class="docutils literal"><span class="pre">parameters</span></code>
dict, accepting the following keys:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">Gamma</span></code>: ratio of specific heats, Type: Float</li>
<li><code class="docutils literal"><span class="pre">geometry</span></code>: Geometry type, currently accepts <code class="docutils literal"><span class="pre">&quot;cartesian&quot;</span></code> or <code class="docutils literal"><span class="pre">&quot;cylindrical&quot;</span></code></li>
<li><code class="docutils literal"><span class="pre">periodicity</span></code>: Is the domain periodic? Type: Tuple of boolean values corresponding to each dimension</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>

<span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;gamma&quot;</span><span class="p">:</span><span class="mf">4.</span><span class="o">/</span><span class="mf">3.</span><span class="p">,</span> <span class="s">&quot;geometry&quot;</span><span class="p">:</span><span class="s">&quot;cylindrical&quot;</span><span class="p">,</span> <span class="s">&quot;periodicity&quot;</span><span class="p">:(</span><span class="bp">False</span><span class="p">,</span><span class="bp">False</span><span class="p">,</span><span class="bp">False</span><span class="p">)}</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;relativistic_jet_0000.vtk&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Caveats</p>
<ul class="simple">
<li>yt primarily works with primitive variables. If the Athena
dataset contains conservative variables, the yt primitive fields will be generated from the
conserved variables on disk.</li>
<li>Special relativistic datasets may be loaded, but are not fully supported. In particular, the relationships between
quantities such as pressure and thermal energy will be incorrect, as it is currently assumed that their relationship
is that of an ideal a <img class="math" src="../_images/math/0ebb67342b546ca42a1c634b1ef03c893c4cdedb.png" alt="\gamma"/>-law equation of state.</li>
<li>Domains may be visualized assuming periodicity.</li>
<li>Particle list data is currently unsupported.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The old behavior of supplying unit conversions using a <code class="docutils literal"><span class="pre">parameters</span></code>
dict supplied to <code class="docutils literal"><span class="pre">load</span></code> for Athena datasets is still supported, but is being deprecated in
favor of <code class="docutils literal"><span class="pre">units_override</span></code>, which provides the same functionality.</p>
</div>
</div>
<div class="section" id="boxlib-data">
<span id="loading-orion-data"></span><h2>BoxLib Data<a class="headerlink" href="#boxlib-data" title="Permalink to this headline">¶</a></h2>
<p>yt has been tested with BoxLib data generated by Orion, Nyx, Maestro and
Castro.  Currently it is cared for by a combination of Andrew Myers, Chris
Malone, Matthew Turk, and Mike Zingale.</p>
<p>To load a BoxLib dataset, you can use the <code class="docutils literal"><span class="pre">yt.load</span></code> command on
the plotfile directory name.  In general, you must also have the
<code class="docutils literal"><span class="pre">inputs</span></code> file in the base directory, but Maestro and Castro will get
all the necessary parameter information from the <code class="docutils literal"><span class="pre">job_info</span></code> file in
the plotfile directory.  For instance, if you were in a
directory with the following files:</p>
<div class="highlight-none"><div class="highlight"><pre>inputs
pltgmlcs5600/
pltgmlcs5600/Header
pltgmlcs5600/Level_0
pltgmlcs5600/Level_0/Cell_H
pltgmlcs5600/Level_1
pltgmlcs5600/Level_1/Cell_H
pltgmlcs5600/Level_2
pltgmlcs5600/Level_2/Cell_H
pltgmlcs5600/Level_3
pltgmlcs5600/Level_3/Cell_H
pltgmlcs5600/Level_4
pltgmlcs5600/Level_4/Cell_H
</pre></div>
</div>
<p>You would feed it the filename <code class="docutils literal"><span class="pre">pltgmlcs5600</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;pltgmlcs5600&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>For Maestro and Castro, you would not need the <code class="docutils literal"><span class="pre">inputs</span></code> file, and you
would have a <code class="docutils literal"><span class="pre">job_info</span></code> file in the plotfile directory.</p>
<p class="rubric">Caveats</p>
<ul class="simple">
<li>yt does not read the Maestro base state (although you can have Maestro
map it to a full Cartesian state variable before writing the plotfile
to get around this).  E-mail the dev list if you need this support.</li>
<li>yt does not know about particles in Maestro.</li>
<li>For Maestro, yt aliases either &#8220;tfromp&#8221; or &#8220;tfromh to&#8221; <code class="docutils literal"><span class="pre">temperature</span></code>
depending on the value of the <code class="docutils literal"><span class="pre">use_tfromp</span></code> runtime parameter.</li>
<li>For Maestro, some velocity fields like <code class="docutils literal"><span class="pre">velocity_magnitude</span></code> or
<code class="docutils literal"><span class="pre">mach_number</span></code> will always use the on-disk value, and not have yt
derive it, due to the complex interplay of the base state velocity.</li>
</ul>
</div>
<div class="section" id="pluto-data">
<span id="loading-pluto-data"></span><h2>Pluto Data<a class="headerlink" href="#pluto-data" title="Permalink to this headline">¶</a></h2>
<p>Support for Pluto AMR data is provided through the Chombo frontend, which
is currently maintained by Andrew Myers. Pluto output files that don&#8217;t use
the Chombo HDF5 format are currently not supported. To load a Pluto dataset,
you can use the <code class="docutils literal"><span class="pre">yt.load</span></code> command on the <a href="#id2"><span class="problematic" id="id3">*</span></a>.hdf5 file. For example, the
KelvinHelmholtz sample dataset is a directory that contains the following
files:</p>
<div class="highlight-none"><div class="highlight"><pre>data.0004.hdf5
pluto.ini
</pre></div>
</div>
<p>To load it, you can navigate into that directory and do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;data.0004.hdf5&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">pluto.ini</span></code> file must also be present alongside the HDF5 file.
By default, all of the Pluto fields will be in code units.</p>
</div>
<div class="section" id="enzo-data">
<span id="loading-enzo-data"></span><h2>Enzo Data<a class="headerlink" href="#enzo-data" title="Permalink to this headline">¶</a></h2>
<p>Enzo data is fully supported and cared for by Matthew Turk.  To load an Enzo
dataset, you can use the <code class="docutils literal"><span class="pre">yt.load</span></code> command and provide it the dataset name.
This would be the name of the output file, and it
contains no extension.  For instance, if you have the following files:</p>
<div class="highlight-none"><div class="highlight"><pre>DD0010/
DD0010/data0010
DD0010/data0010.index
DD0010/data0010.cpu0000
DD0010/data0010.cpu0001
DD0010/data0010.cpu0002
DD0010/data0010.cpu0003
</pre></div>
</div>
<p>You would feed the <code class="docutils literal"><span class="pre">load</span></code> command the filename <code class="docutils literal"><span class="pre">DD0010/data0010</span></code> as
mentioned.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;DD0010/data0010&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Caveats</p>
<ul class="simple">
<li>There are no major caveats for Enzo usage</li>
<li>Units should be correct, if you utilize standard unit-setting routines.  yt
will notify you if it cannot determine the units, although this
notification will be passive.</li>
<li>2D and 1D data are supported, but the extraneous dimensions are set to be
of length 1.0 in &#8220;code length&#8221; which may produce strange results for volume
quantities.</li>
</ul>
</div>
<div class="section" id="fits-data">
<span id="loading-fits-data"></span><h2>FITS Data<a class="headerlink" href="#fits-data" title="Permalink to this headline">¶</a></h2>
<p>FITS data is <em>mostly</em> supported and cared for by John ZuHone. In order to
read FITS data, <a class="reference external" href="http://www.astropy.org">AstroPy</a> must be installed. FITS
data cubes can be loaded in the same way by yt as other datasets. yt
can read FITS image files that have the following (case-insensitive) suffixes:</p>
<ul class="simple">
<li>fits</li>
<li>fts</li>
<li>fits.gz</li>
<li>fts.gz</li>
</ul>
<p>yt can read two kinds of FITS files: FITS image files and FITS binary table files containing
positions, times, and energies of X-ray events.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">AstroPy is necessary due to the requirements of both FITS file reading and
WCS coordinates. Since new releases of <a class="reference external" href="http://www.stsci.edu/institute/software_hardware/pyfits">PyFITS</a> are to be discontinued, individual
installations of this package and the <a class="reference external" href="http://stsdas.stsci.edu/astrolib/pywcs/">PyWCS</a> package are not supported.</p>
</div>
<p>Though a FITS image is composed of a single array in the FITS file,
upon being loaded into yt it is automatically decomposed into grids:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;m33_hi.fits&quot;</span><span class="p">)</span>
<span class="n">ds</span><span class="o">.</span><span class="n">print_stats</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>level  # grids         # cells     # cells^3
----------------------------------------------
  0       512          981940800       994
----------------------------------------------
          512          981940800
</pre></div>
</div>
<p>yt will generate its own domain decomposition, but the number of grids can be
set manually by passing the <code class="docutils literal"><span class="pre">nprocs</span></code> parameter to the <code class="docutils literal"><span class="pre">load</span></code> call:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ds</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s">&quot;m33_hi.fits&quot;</span><span class="p">,</span> <span class="n">nprocs</span><span class="o">=</span><span class="mi">1024</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="making-the-most-of-yt-for-fits-data">
<h3>Making the Most of yt for FITS Data<a class="headerlink" href="#making-the-most-of-yt-for-fits-data" title="Permalink to this headline">¶</a></h3>
<p>yt will load data without WCS information and/or some missing header keywords, but the resulting
field information will necessarily be incomplete. For example, field names may not be descriptive,
and units will not be correct. To get the full use out of yt for FITS files, make sure that for
each image the following header keywords have sensible values:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">CDELTx</span></code>: The pixel width in along axis <code class="docutils literal"><span class="pre">x</span></code></li>
<li><code class="docutils literal"><span class="pre">CRVALx</span></code>: The coordinate value at the reference position along axis <code class="docutils literal"><span class="pre">x</span></code></li>
<li><code class="docutils literal"><span class="pre">CRPIXx</span></code>: The the reference pixel along axis <code class="docutils literal"><span class="pre">x</span></code></li>
<li><code class="docutils literal"><span class="pre">CTYPEx</span></code>: The projection type of axis <code class="docutils literal"><span class="pre">x</span></code></li>
<li><code class="docutils literal"><span class="pre">CUNITx</span></code>: The units of the coordinate along axis <code class="docutils literal"><span class="pre">x</span></code></li>
<li><code class="docutils literal"><span class="pre">BTYPE</span></code>: The type of the image</li>
<li><code class="docutils literal"><span class="pre">BUNIT</span></code>: The units of the image</li>
</ul>
<p>FITS header keywords can easily be updated using AstroPy. For example,
to set the <code class="docutils literal"><span class="pre">BTYPE</span></code> and <code class="docutils literal"><span class="pre">BUNIT</span></code> keywords:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">astropy.io.fits</span> <span class="kn">as</span> <span class="nn">pyfits</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">pyfits</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&quot;xray_flux_image.fits&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">&quot;update&quot;</span><span class="p">)</span>
<span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">header</span><span class="p">[</span><span class="s">&quot;BUNIT&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;cts/s/pixel&quot;</span>
<span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">header</span><span class="p">[</span><span class="s">&quot;BTYPE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;flux&quot;</span>
<span class="n">f</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="fits-coordinates">
<h3>FITS Coordinates<a class="headerlink" href="#fits-coordinates" title="Permalink to this headline">¶</a></h3>
<p>For FITS datasets, the unit of <code class="docutils literal"><span class="pre">code_length</span></code> is always the width of one
pixel. yt will attempt to use the WCS information in the FITS header to
construct information about the coordinate system, and provides support for
the following dataset types:</p>
<ol class="arabic simple">
<li>Rectilinear 2D/3D images with length units (e.g., Mpc, AU,
etc.) defined in the <code class="docutils literal"><span class="pre">CUNITx</span></code> keywords</li>
<li>2D images in some celestial coordinate systems (RA/Dec,
galactic latitude/longitude, defined in the <code class="docutils literal"><span class="pre">CTYPEx</span></code>
keywords), and X-ray binary table event files</li>
<li>3D images with celestial coordinates and a third axis for another
quantity, such as velocity, frequency, wavelength, etc.</li>
<li>4D images with the first three axes like Case 3, where the slices
along the 4th axis are interpreted as different fields.</li>
</ol>
<p>If your data is of the first case, yt will determine the length units based
on the information in the header. If your data is of the second or third
cases, no length units will be assigned, but the world coordinate information
about the axes will be stored in separate fields. If your data is of the fourth
type, the coordinates of the first three axes will be determined according to
cases 1-3.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Linear length-based coordinates (Case 1 above) are only supported if all dimensions
have the same value for <code class="docutils literal"><span class="pre">CUNITx</span></code>. WCS coordinates are only supported for Cases 2-4.</p>
</div>
</div>
<div class="section" id="fields-in-fits-datasets">
<h3>Fields in FITS Datasets<a class="headerlink" href="#fields-in-fits-datasets" title="Permalink to this headline">¶</a></h3>
<p>Multiple fields can be included in a FITS dataset in several different ways.
The first way, and the simplest, is if more than one image HDU is
contained within the same file. The field names will be determined by the
value of <code class="docutils literal"><span class="pre">BTYPE</span></code> in the header, and the field units will be determined by
the value of <code class="docutils literal"><span class="pre">BUNIT</span></code>. The second way is if a dataset has a fourth axis,
with each slice along this axis corresponding to a different field. In this
case, the field names will be determined by the value of the <code class="docutils literal"><span class="pre">CTYPE4</span></code> keyword
and the index of the slice. So, for example, if <code class="docutils literal"><span class="pre">BTYPE</span></code> = <code class="docutils literal"><span class="pre">&quot;intensity&quot;</span></code> and
<code class="docutils literal"><span class="pre">CTYPE4</span></code> = <code class="docutils literal"><span class="pre">&quot;stokes&quot;</span></code>, then the fields will be named
<code class="docutils literal"><span class="pre">&quot;intensity_stokes_1&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;intensity_stokes_2&quot;</span></code>, and so on.</p>
<p>The third way is if auxiliary files are included along with the main file, like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ds</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s">&quot;flux.fits&quot;</span><span class="p">,</span> <span class="n">auxiliary_files</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;temp.fits&quot;</span><span class="p">,</span><span class="s">&quot;metal.fits&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>The image blocks in each of these files will be loaded as a separate field,
provided they have the same dimensions as the image blocks in the main file.</p>
<p>Additionally, fields corresponding to the WCS coordinates will be generated.
based on the corresponding <code class="docutils literal"><span class="pre">CTYPEx</span></code> keywords. When queried, these fields
will be generated from the pixel coordinates in the file using the WCS
transformations provided by AstroPy.</p>
<p>X-ray event data will be loaded as particle fields in yt, but a grid will be constructed from the
WCS information in the FITS header. There is a helper function, <code class="docutils literal"><span class="pre">setup_counts_fields</span></code>,
which may be used to make deposited image fields from the event data for different energy bands
(for an example see <a class="reference internal" href="../cookbook/fits_xray_images.html#xray-fits"><span>FITS X-ray Images in yt</span></a>).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Each FITS image from a single dataset, whether from one file or from one of
multiple files, must have the same dimensions and WCS information as the
first image in the primary file. If this is not the case,
yt will raise a warning and will not load this field.</p>
</div>
</div>
<div class="section" id="additional-options">
<span id="additional-fits-options"></span><h3>Additional Options<a class="headerlink" href="#additional-options" title="Permalink to this headline">¶</a></h3>
<p>The following are additional options that may be passed to the <code class="docutils literal"><span class="pre">load</span></code> command when analyzing
FITS data:</p>
<div class="section" id="nan-mask">
<h4><code class="docutils literal"><span class="pre">nan_mask</span></code><a class="headerlink" href="#nan-mask" title="Permalink to this headline">¶</a></h4>
<p>FITS image data may include <code class="docutils literal"><span class="pre">NaNs</span></code>. If you wish to mask this data out,
you may supply a <code class="docutils literal"><span class="pre">nan_mask</span></code> parameter, which may either be a
single floating-point number (applies to all fields) or a Python dictionary
containing different mask values for different fields:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># passing a single float</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s">&quot;m33_hi.fits&quot;</span><span class="p">,</span> <span class="n">nan_mask</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

<span class="c"># passing a dict</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s">&quot;m33_hi.fits&quot;</span><span class="p">,</span> <span class="n">nan_mask</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;intensity&quot;</span><span class="p">:</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="s">&quot;temperature&quot;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="suppress-astropy-warnings">
<h4><code class="docutils literal"><span class="pre">suppress_astropy_warnings</span></code><a class="headerlink" href="#suppress-astropy-warnings" title="Permalink to this headline">¶</a></h4>
<p>Generally, AstroPy may generate a lot of warnings about individual FITS
files, many of which you may want to ignore. If you want to see these
warnings, set <code class="docutils literal"><span class="pre">suppress_astropy_warnings</span> <span class="pre">=</span> <span class="pre">False</span></code>.</p>
</div>
<div class="section" id="z-axis-decomp">
<h4><code class="docutils literal"><span class="pre">z_axis_decomp</span></code><a class="headerlink" href="#z-axis-decomp" title="Permalink to this headline">¶</a></h4>
<p>For some applications, decomposing 3D FITS data into grids that span the x-y plane with short
strides along the z-axis may result in a significant improvement in I/O speed. To enable this feature, set <code class="docutils literal"><span class="pre">z_axis_decomp=True</span></code>.</p>
</div>
<div class="section" id="spectral-factor">
<h4><code class="docutils literal"><span class="pre">spectral_factor</span></code><a class="headerlink" href="#spectral-factor" title="Permalink to this headline">¶</a></h4>
<p>Often, the aspect ratio of 3D spectral cubes can be far from unity. Because yt
sets the pixel scale as the <code class="docutils literal"><span class="pre">code_length</span></code>, certain visualizations (such as
volume renderings) may look extended or distended in ways that are
undesirable. To adjust the width in <code class="docutils literal"><span class="pre">code_length</span></code> of the spectral axis, set
<code class="docutils literal"><span class="pre">spectral_factor</span></code> equal to a constant which gives the desired scaling, or set
it to <code class="docutils literal"><span class="pre">&quot;auto&quot;</span></code> to make the width the same as the largest axis in the sky
plane.</p>
</div>
</div>
<div class="section" id="miscellaneous-tools-for-use-with-fits-data">
<h3>Miscellaneous Tools for Use with FITS Data<a class="headerlink" href="#miscellaneous-tools-for-use-with-fits-data" title="Permalink to this headline">¶</a></h3>
<p>A number of tools have been prepared for use with FITS data that enhance yt&#8217;s visualization and
analysis capabilities for this particular type of data. These are included in the <code class="docutils literal"><span class="pre">yt.frontends.fits.misc</span></code> module, and can be imported like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">yt.frontends.fits.misc</span> <span class="kn">import</span> <span class="n">setup_counts_fields</span><span class="p">,</span> <span class="n">PlotWindowWCS</span><span class="p">,</span> <span class="n">ds9_region</span>
</pre></div>
</div>
<div class="section" id="setup-counts-fields">
<h4><code class="docutils literal"><span class="pre">setup_counts_fields</span></code><a class="headerlink" href="#setup-counts-fields" title="Permalink to this headline">¶</a></h4>
<p>This function can be used to create image fields from X-ray counts data in different energy bands:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ebounds</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">2.0</span><span class="p">),(</span><span class="mf">2.0</span><span class="p">,</span><span class="mf">5.0</span><span class="p">)]</span> <span class="c"># Energies are in keV</span>
<span class="n">setup_counts_fields</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">ebounds</span><span class="p">)</span>
</pre></div>
</div>
<p>which would make two fields, <code class="docutils literal"><span class="pre">&quot;counts_0.1-2.0&quot;</span></code> and <code class="docutils literal"><span class="pre">&quot;counts_2.0-5.0&quot;</span></code>,
and add them to the field registry for the dataset <code class="docutils literal"><span class="pre">ds</span></code>.</p>
</div>
<div class="section" id="ds9-region">
<h4><code class="docutils literal"><span class="pre">ds9_region</span></code><a class="headerlink" href="#ds9-region" title="Permalink to this headline">¶</a></h4>
<p>This function takes a <a class="reference external" href="http://ds9.si.edu/site/Home.html">ds9</a> region and creates a &#8220;cut region&#8221;
data container from it, that can be used to select the cells in the FITS dataset that fall within
the region. To use this functionality, the <a class="reference external" href="https://github.com/astropy/pyregion/">pyregion</a>
package must be installed.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;m33_hi.fits&quot;</span><span class="p">)</span>
<span class="n">circle_region</span> <span class="o">=</span> <span class="n">ds9_region</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="s">&quot;circle.reg&quot;</span><span class="p">)</span>
<span class="k">print</span> <span class="n">circle_region</span><span class="o">.</span><span class="n">quantities</span><span class="o">.</span><span class="n">extrema</span><span class="p">(</span><span class="s">&quot;flux&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="plotwindowwcs">
<h4><code class="docutils literal"><span class="pre">PlotWindowWCS</span></code><a class="headerlink" href="#plotwindowwcs" title="Permalink to this headline">¶</a></h4>
<p>This class takes a on-axis <code class="docutils literal"><span class="pre">SlicePlot</span></code> or <code class="docutils literal"><span class="pre">ProjectionPlot</span></code> of FITS data and adds celestial
coordinates to the plot axes. To use it, the <a class="reference external" href="http://wcsaxes.readthedocs.org">WCSAxes</a>
package must be installed.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">wcs_slc</span> <span class="o">=</span> <span class="n">PlotWindowWCS</span><span class="p">(</span><span class="n">slc</span><span class="p">)</span>
<span class="n">wcs_slc</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c"># for the IPython notebook</span>
<span class="n">wcs_slc</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">WCSAxes</span></code> is still in an experimental state, but as its functionality improves it will be
utilized more here.</p>
</div>
<div class="section" id="create-spectral-slabs">
<h4><code class="docutils literal"><span class="pre">create_spectral_slabs</span></code><a class="headerlink" href="#create-spectral-slabs" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The following functionality requires the <a class="reference external" href="http://spectral-cube.readthedocs.org">spectral-cube</a>
library to be installed.</p>
</div>
<p>If you have a spectral intensity dataset of some sort, and would like to extract emission in
particular slabs along the spectral axis of a certain width, <code class="docutils literal"><span class="pre">create_spectral_slabs</span></code> can be
used to generate a dataset with these slabs as different fields. In this example, we use it
to extract individual lines from an intensity cube:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">slab_centers</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;13CN&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">218.03117</span><span class="p">,</span> <span class="s">&#39;GHz&#39;</span><span class="p">),</span>
                <span class="s">&#39;CH3CH2CHO&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">218.284256</span><span class="p">,</span> <span class="s">&#39;GHz&#39;</span><span class="p">),</span>
                <span class="s">&#39;CH3NH2&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">218.40956</span><span class="p">,</span> <span class="s">&#39;GHz&#39;</span><span class="p">)}</span>
<span class="n">slab_width</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="s">&quot;GHz&quot;</span><span class="p">)</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">create_spectral_slabs</span><span class="p">(</span><span class="s">&quot;intensity_cube.fits&quot;</span><span class="p">,</span>
                                  <span class="n">slab_centers</span><span class="p">,</span> <span class="n">slab_width</span><span class="p">,</span>
                                  <span class="n">nan_mask</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
</pre></div>
</div>
<p>All keyword arguments to <cite>create_spectral_slabs</cite> are passed on to <cite>load</cite> when creating the dataset
(see <a class="reference internal" href="#additional-fits-options"><span>Additional Options</span></a> above). In the returned dataset, the different slabs will be
different fields, with the field names taken from the keys in <code class="docutils literal"><span class="pre">slab_centers</span></code>. The WCS coordinates
on the spectral axis are reset so that the center of the domain along this axis is zero, and the
left and right edges of the domain along this axis are <img class="math" src="../_images/math/79db348018d3038efeba5653af973e3191a5f656.png" alt="\pm"/> <code class="docutils literal"><span class="pre">0.5*slab_width</span></code>.</p>
</div>
</div>
<div class="section" id="examples-of-using-fits-data">
<h3>Examples of Using FITS Data<a class="headerlink" href="#examples-of-using-fits-data" title="Permalink to this headline">¶</a></h3>
<p>The following IPython notebooks show examples of working with FITS data in yt,
which we recommend you look at in the following order:</p>
<ul class="simple">
<li><a class="reference internal" href="../cookbook/fits_radio_cubes.html#radio-cubes"><span>FITS Radio Cubes in yt</span></a></li>
<li><a class="reference internal" href="../cookbook/fits_xray_images.html#xray-fits"><span>FITS X-ray Images in yt</span></a></li>
</ul>
</div>
</div>
<div class="section" id="flash-data">
<span id="loading-flash-data"></span><h2>FLASH Data<a class="headerlink" href="#flash-data" title="Permalink to this headline">¶</a></h2>
<p>FLASH HDF5 data is <em>mostly</em> supported and cared for by John ZuHone.  To load a
FLASH dataset, you can use the <code class="docutils literal"><span class="pre">yt.load</span></code> command and provide it the file name of a plot file or checkpoint file, but particle
files are not currently directly loadable by themselves, due to the fact that
they typically lack grid information. For instance, if you were in a directory
with the following files:</p>
<div class="highlight-none"><div class="highlight"><pre>cosmoSim_coolhdf5_chk_0026
</pre></div>
</div>
<p>You would feed it the filename <code class="docutils literal"><span class="pre">cosmoSim_coolhdf5_chk_0026</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;cosmoSim_coolhdf5_chk_0026&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you have a FLASH particle file that was created at the same time as
a plotfile or checkpoint file (therefore having particle data
consistent with the grid structure of the latter), its data may be loaded with the
<code class="docutils literal"><span class="pre">particle_filename</span></code> optional argument:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;radio_halo_1kpc_hdf5_plt_cnt_0100&quot;</span><span class="p">,</span> <span class="n">particle_filename</span><span class="o">=</span><span class="s">&quot;radio_halo_1kpc_hdf5_part_0100&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Caveats</p>
<ul class="simple">
<li>Please be careful that the units are correctly utilized; yt assumes cgs.</li>
</ul>
</div>
<div class="section" id="gadget-data">
<span id="loading-gadget-data"></span><h2>Gadget Data<a class="headerlink" href="#gadget-data" title="Permalink to this headline">¶</a></h2>
<p>yt has support for reading Gadget data in both raw binary and HDF5 formats.  It
is able to access the particles as it would any other particle dataset, and it
can apply smoothing kernels to the data to produce both quantitative analysis
and visualization. See <a class="reference internal" href="#loading-sph-data"><span>SPH Particle Data</span></a> for more details and
<a class="reference internal" href="../cookbook/gadget_notebook.html#gadget-notebook"><span>Using yt to view and analyze Gadget outputs</span></a> for a detailed example of loading, analyzing, and
visualizing a Gadget dataset.  An example which makes use of a Gadget snapshot
from the OWLS project can be found at <a class="reference internal" href="../cookbook/owls_notebook.html#owls-notebook"><span>Using yt to view and analyze Gadget-OWLS outputs</span></a>.</p>
<p>Gadget data in HDF5 format can be loaded with the <code class="docutils literal"><span class="pre">load</span></code> command:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;snapshot_061.hdf5&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Gadget data in raw binary format can also be loaded with the <code class="docutils literal"><span class="pre">load</span></code> command.
This is only supported for snapshots created with the <code class="docutils literal"><span class="pre">SnapFormat</span></code> parameter
set to 1 (the standard for Gadget-2).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;snapshot_061&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="units-and-bounding-boxes">
<span id="particle-bbox"></span><h3>Units and Bounding Boxes<a class="headerlink" href="#units-and-bounding-boxes" title="Permalink to this headline">¶</a></h3>
<p>There are two additional pieces of information that may be needed.  If your
simulation is cosmological, yt can often guess the bounding box and the units
of the simulation.  However, for isolated simulations and for cosmological
simulations with non-standard units, these must be supplied.  For example, if
a length unit of 1.0 corresponds to a kiloparsec, you can supply this in the
constructor.  yt can accept units such as <code class="docutils literal"><span class="pre">Mpc</span></code>, <code class="docutils literal"><span class="pre">kpc</span></code>, <code class="docutils literal"><span class="pre">cm</span></code>, <code class="docutils literal"><span class="pre">Mpccm/h</span></code>
and so on.  In particular, note that <code class="docutils literal"><span class="pre">Mpc/h</span></code> and <code class="docutils literal"><span class="pre">Mpccm/h</span></code> (<code class="docutils literal"><span class="pre">cm</span></code> for
comoving here) are usable unit definitions.</p>
<p>yt will attempt to use units for <code class="docutils literal"><span class="pre">mass</span></code>, <code class="docutils literal"><span class="pre">length</span></code> and <code class="docutils literal"><span class="pre">time</span></code> as supplied
in the argument <code class="docutils literal"><span class="pre">unit_base</span></code>.  The <code class="docutils literal"><span class="pre">bounding_box</span></code> argument is a list of
two-item tuples or lists that describe the left and right extents of the
particles.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ds</span> <span class="o">=</span> <span class="n">GadgetDataset</span><span class="p">(</span><span class="s">&quot;snap_004&quot;</span><span class="p">,</span>
        <span class="n">unit_base</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;length&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;kpc&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)},</span>
        <span class="n">bounding_box</span> <span class="o">=</span> <span class="p">[[</span><span class="o">-</span><span class="mf">600.0</span><span class="p">,</span> <span class="mf">600.0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">600.0</span><span class="p">,</span> <span class="mf">600.0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">600.0</span><span class="p">,</span> <span class="mf">600.0</span><span class="p">]])</span>
</pre></div>
</div>
</div>
<div class="section" id="indexing-criteria">
<span id="particle-indexing-criteria"></span><h3>Indexing Criteria<a class="headerlink" href="#indexing-criteria" title="Permalink to this headline">¶</a></h3>
<p>yt generates a global mesh index via octree that governs the resolution of
volume elements.  This is governed by two parameters, <code class="docutils literal"><span class="pre">n_ref</span></code> and
<code class="docutils literal"><span class="pre">over_refine_factor</span></code>.  They are weak proxies for each other.  The first,
<code class="docutils literal"><span class="pre">n_ref</span></code>, governs how many particles in an oct results in that oct being
refined into eight child octs.  Lower values mean higher resolution; the
default is 64.  The secon parameter, <code class="docutils literal"><span class="pre">over_refine_factor</span></code>, governs how many
cells are in a given oct; the default value of 1 corresponds to 8 cells.
The number of cells in an oct is defined by the expression
<code class="docutils literal"><span class="pre">2**(3*over_refine_factor)</span></code>.</p>
<p>It&#8217;s recommended that if you want higher-resolution, try reducing the value of
<code class="docutils literal"><span class="pre">n_ref</span></code> to 32 or 16.</p>
</div>
<div class="section" id="field-specifications">
<span id="gadget-field-spec"></span><h3>Field Specifications<a class="headerlink" href="#field-specifications" title="Permalink to this headline">¶</a></h3>
<p>Binary Gadget outputs often have additional fields or particle types that are
non-standard from the default Gadget distribution format.  These can be
specified in the call to <code class="docutils literal"><span class="pre">GadgetDataset</span></code> by either supplying one of the
sets of field specifications as a string or by supplying a field specification
itself.  As an example, yt has built-in definitions for <code class="docutils literal"><span class="pre">default</span></code> (the
default) and <code class="docutils literal"><span class="pre">agora_unlv</span></code>.  Field specifications must be tuples, and must be
of this format:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">default</span> <span class="o">=</span> <span class="p">(</span> <span class="s">&quot;Coordinates&quot;</span><span class="p">,</span>
            <span class="s">&quot;Velocities&quot;</span><span class="p">,</span>
            <span class="s">&quot;ParticleIDs&quot;</span><span class="p">,</span>
            <span class="s">&quot;Mass&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&quot;InternalEnergy&quot;</span><span class="p">,</span> <span class="s">&quot;Gas&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&quot;Density&quot;</span><span class="p">,</span> <span class="s">&quot;Gas&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&quot;SmoothingLength&quot;</span><span class="p">,</span> <span class="s">&quot;Gas&quot;</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This is the default specification used by the Gadget frontend.  It means that
the fields are, in order, Coordinates, Velocities, ParticleIDs, Mass, and the
fields InternalEnergy, Density and SmoothingLength <em>only</em> for Gas particles.
So for example, if you have defined a Metallicity field for the particle type
Halo, which comes right after ParticleIDs in the file, you could define it like
this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">my_field_def</span> <span class="o">=</span> <span class="p">(</span> <span class="s">&quot;Coordinates&quot;</span><span class="p">,</span>
            <span class="s">&quot;Velocities&quot;</span><span class="p">,</span>
            <span class="s">&quot;ParticleIDs&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&quot;Metallicity&quot;</span><span class="p">,</span> <span class="s">&quot;Halo&quot;</span><span class="p">),</span>
            <span class="s">&quot;Mass&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&quot;InternalEnergy&quot;</span><span class="p">,</span> <span class="s">&quot;Gas&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&quot;Density&quot;</span><span class="p">,</span> <span class="s">&quot;Gas&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&quot;SmoothingLength&quot;</span><span class="p">,</span> <span class="s">&quot;Gas&quot;</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>To save time, you can utilize the plugins file for yt and use it to add items
to the dictionary where these definitions are stored.  You could do this like
so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">yt.frontends.sph.definitions</span> <span class="kn">import</span> <span class="n">gadget_field_specs</span>
<span class="n">gadget_field_specs</span><span class="p">[</span><span class="s">&quot;my_field_def&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">my_field_def</span>
</pre></div>
</div>
<p>Please also feel free to issue a pull request with any new field
specifications, as we&#8217;re happy to include them in the main distribution!</p>
</div>
<div class="section" id="particle-type-definitions">
<span id="gadget-ptype-spec"></span><h3>Particle Type Definitions<a class="headerlink" href="#particle-type-definitions" title="Permalink to this headline">¶</a></h3>
<p>In some cases, research groups add new particle types or re-order them.  You
can supply alternate particle types by using the keyword <code class="docutils literal"><span class="pre">ptype_spec</span></code> to the
<code class="docutils literal"><span class="pre">GadgetDataset</span></code> call.  The default for Gadget binary data is:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">(</span> <span class="s">&quot;Gas&quot;</span><span class="p">,</span> <span class="s">&quot;Halo&quot;</span><span class="p">,</span> <span class="s">&quot;Disk&quot;</span><span class="p">,</span> <span class="s">&quot;Bulge&quot;</span><span class="p">,</span> <span class="s">&quot;Stars&quot;</span><span class="p">,</span> <span class="s">&quot;Bndry&quot;</span> <span class="p">)</span>
</pre></div>
</div>
<p>You can specify alternate names, but note that this may cause problems with the
field specification if none of the names match old names.</p>
</div>
<div class="section" id="header-specification">
<span id="gadget-header-spec"></span><h3>Header Specification<a class="headerlink" href="#header-specification" title="Permalink to this headline">¶</a></h3>
<p>If you have modified the header in your Gadget binary file, you can specify an
alternate header specification with the keyword <code class="docutils literal"><span class="pre">header_spec</span></code>.  This can
either be a list of strings corresponding to individual header types known to
yt, or it can be a combination of strings and header specifications.  The
default header specification (found in <code class="docutils literal"><span class="pre">yt/frontends/sph/definitions.py</span></code>) is:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">default</span>      <span class="o">=</span> <span class="p">((</span><span class="s">&#39;Npart&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s">&#39;i&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s">&#39;Massarr&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s">&#39;Time&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s">&#39;Redshift&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s">&#39;FlagSfr&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;i&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s">&#39;FlagFeedback&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;i&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s">&#39;Nall&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s">&#39;i&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s">&#39;FlagCooling&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;i&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s">&#39;NumFiles&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;i&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s">&#39;BoxSize&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s">&#39;Omega0&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s">&#39;OmegaLambda&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s">&#39;HubbleParam&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s">&#39;FlagAge&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;i&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s">&#39;FlagMEtals&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;i&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s">&#39;NallHW&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s">&#39;i&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s">&#39;unused&#39;</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="s">&#39;i&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>These items will all be accessible inside the object <code class="docutils literal"><span class="pre">ds.parameters</span></code>, which
is a dictionary.  You can add combinations of new items, specified in the same
way, or alternately other types of headers.  The other string keys defined are
<code class="docutils literal"><span class="pre">pad32</span></code>, <code class="docutils literal"><span class="pre">pad64</span></code>, <code class="docutils literal"><span class="pre">pad128</span></code>, and <code class="docutils literal"><span class="pre">pad256</span></code> each of which corresponds to
an empty padding in bytes.  For example, if you have an additional 256 bytes of
padding at the end, you can specify this with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">header_spec</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;default&quot;</span><span class="p">,</span> <span class="s">&quot;pad256&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>This can then be supplied to the constructor.  Note that you can also do this
manually, for instance with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">header_spec</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;default&quot;</span><span class="p">,</span> <span class="p">((</span><span class="s">&#39;some_value&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">),</span>
                           <span class="p">(</span><span class="s">&#39;another_value&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;i&#39;</span><span class="p">))]</span>
</pre></div>
</div>
<p>The letters correspond to data types from the Python struct module.  Please
feel free to submit alternate header types to the main yt repository.</p>
</div>
<div class="section" id="specifying-units">
<span id="specifying-gadget-units"></span><h3>Specifying Units<a class="headerlink" href="#specifying-units" title="Permalink to this headline">¶</a></h3>
<p>If you are running a cosmology simulation, yt will be able to guess the units
with some reliability.  However, if you are not and you do not specify a
dataset, yt will not be able to and will use the defaults of length
being 1.0 Mpc/h (comoving), velocity being in cm/s, and mass being in 10^10
Msun/h.  You can specify alternate units by supplying the <code class="docutils literal"><span class="pre">unit_base</span></code> keyword
argument of this form:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">unit_base</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;length&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="s">&#39;cm&#39;</span><span class="p">),</span> <span class="s">&#39;mass&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="s">&#39;g&#39;</span><span class="p">),</span> <span class="s">&#39;time&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="s">&#39;s&#39;</span><span class="p">)}</span>
</pre></div>
</div>
<p>yt will utilize length, mass and time to set up all other units.</p>
</div>
</div>
<div class="section" id="generic-amr-data">
<span id="loading-amr-data"></span><h2>Generic AMR Data<a class="headerlink" href="#generic-amr-data" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="generic_array_data.html#loading-numpy-array"><span>Loading Generic Array Data</span></a> and
<code class="xref py py-func docutils literal"><span class="pre">load_amr_grids()</span></code> for more detail.</p>
<p>It is possible to create native yt dataset from Python&#8217;s dictionary
that describes set of rectangular patches of data of possibly varying
resolution.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>

<span class="n">grid_data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="nb">dict</span><span class="p">(</span><span class="n">left_edge</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
         <span class="n">right_edge</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span>
         <span class="n">level</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
         <span class="n">dimensions</span> <span class="o">=</span> <span class="p">[</span><span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">],</span>
         <span class="n">number_of_particles</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="nb">dict</span><span class="p">(</span><span class="n">left_edge</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">],</span>
         <span class="n">right_edge</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">],</span>
         <span class="n">level</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
         <span class="n">dimensions</span> <span class="o">=</span> <span class="p">[</span><span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">],</span>
         <span class="n">number_of_particles</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">grid_data</span><span class="p">:</span>
    <span class="n">g</span><span class="p">[</span><span class="s">&quot;density&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="s">&quot;dimensions&quot;</span><span class="p">])</span> <span class="o">*</span> <span class="mi">2</span><span class="o">**</span><span class="n">g</span><span class="p">[</span><span class="s">&quot;level&quot;</span><span class="p">]</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load_amr_grids</span><span class="p">(</span><span class="n">grid_data</span><span class="p">,</span> <span class="p">[</span><span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">],</span> <span class="mf">1.0</span><span class="p">)</span>
</pre></div>
</div>
<p>Particle fields are supported by adding 1-dimensional arrays and
setting the <code class="docutils literal"><span class="pre">number_of_particles</span></code> key to each <code class="docutils literal"><span class="pre">grid</span></code>&#8216;s dict:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">grid_data</span><span class="p">:</span>
    <span class="n">g</span><span class="p">[</span><span class="s">&quot;number_of_particles&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100000</span>
    <span class="n">g</span><span class="p">[</span><span class="s">&quot;particle_position_x&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="n">g</span><span class="p">[</span><span class="s">&quot;number_of_particles&quot;</span><span class="p">]))</span>
</pre></div>
</div>
<p class="rubric">Caveats</p>
<ul class="simple">
<li>Units will be incorrect unless the data has already been converted to cgs.</li>
<li>Some functions may behave oddly, and parallelism will be disappointing or
non-existent in most cases.</li>
<li>No consistency checks are performed on the index</li>
<li>Data must already reside in memory.</li>
<li>Consistency between particle positions and grids is not checked;
<code class="docutils literal"><span class="pre">load_amr_grids</span></code> assumes that particle positions associated with one grid are
not bounded within another grid at a higher level, so this must be
ensured by the user prior to loading the grid data.</li>
</ul>
</div>
<div class="section" id="generic-array-data">
<h2>Generic Array Data<a class="headerlink" href="#generic-array-data" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="generic_array_data.html#loading-numpy-array"><span>Loading Generic Array Data</span></a> and
<a class="reference internal" href="../reference/api/generated/yt.frontends.stream.data_structures.load_uniform_grid.html#yt.frontends.stream.data_structures.load_uniform_grid" title="yt.frontends.stream.data_structures.load_uniform_grid"><code class="xref py py-func docutils literal"><span class="pre">load_uniform_grid()</span></code></a> for more detail.</p>
<p>Even if your data is not strictly related to fields commonly used in
astrophysical codes or your code is not supported yet, you can still feed it to
yt to use its advanced visualization and analysis facilities. The only
requirement is that your data can be represented as one or more uniform, three
dimensional numpy arrays. Assuming that you have your data in <code class="docutils literal"><span class="pre">arr</span></code>,
the following code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>

<span class="n">data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">Density</span> <span class="o">=</span> <span class="n">arr</span><span class="p">)</span>
<span class="n">bbox</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">]])</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load_uniform_grid</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="mf">3.08e24</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="n">bbox</span><span class="p">,</span> <span class="n">nprocs</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
<p>will create yt-native dataset <code class="docutils literal"><span class="pre">ds</span></code> that will treat your array as
density field in cubic domain of 3 Mpc edge size (3 * 3.08e24 cm) and
simultaneously divide the domain into 12 chunks, so that you can take advantage
of the underlying parallelism.</p>
<p>Particle fields are detected as one-dimensional fields. The number of
particles is set by the <code class="docutils literal"><span class="pre">number_of_particles</span></code> key in
<code class="docutils literal"><span class="pre">data</span></code>. Particle fields are then added as one-dimensional arrays in
a similar manner as the three-dimensional grid fields:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>

<span class="n">data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">Density</span> <span class="o">=</span> <span class="n">dens</span><span class="p">,</span>
            <span class="n">number_of_particles</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">,</span>
            <span class="n">particle_position_x</span> <span class="o">=</span> <span class="n">posx_arr</span><span class="p">,</span>
            <span class="n">particle_position_y</span> <span class="o">=</span> <span class="n">posy_arr</span><span class="p">,</span>
            <span class="n">particle_position_z</span> <span class="o">=</span> <span class="n">posz_arr</span><span class="p">)</span>
<span class="n">bbox</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">]])</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load_uniform_grid</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="mf">3.08e24</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="n">bbox</span><span class="p">,</span> <span class="n">nprocs</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
<p>where in this exampe the particle position fields have been assigned. <code class="docutils literal"><span class="pre">number_of_particles</span></code> must be the same size as the particle
arrays. If no particle arrays are supplied then <code class="docutils literal"><span class="pre">number_of_particles</span></code> is assumed to be zero.</p>
<p class="rubric">Caveats</p>
<ul class="simple">
<li>Units will be incorrect unless the data has already been converted to cgs.</li>
<li>Particles may be difficult to integrate.</li>
<li>Data must already reside in memory.</li>
</ul>
</div>
<div class="section" id="semi-structured-grid-data">
<h2>Semi-Structured Grid Data<a class="headerlink" href="#semi-structured-grid-data" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="generic_array_data.html#loading-numpy-array"><span>Loading Generic Array Data</span></a>,
<code class="xref py py-func docutils literal"><span class="pre">hexahedral_connectivity()</span></code>,
<a class="reference internal" href="../reference/api/generated/yt.frontends.stream.data_structures.load_hexahedral_mesh.html#yt.frontends.stream.data_structures.load_hexahedral_mesh" title="yt.frontends.stream.data_structures.load_hexahedral_mesh"><code class="xref py py-func docutils literal"><span class="pre">load_hexahedral_mesh()</span></code></a> for
more detail.</p>
<p>In addition to uniform grids as described above, you can load in data
with non-uniform spacing between datapoints. To load this type of
data, you must first specify a hexahedral mesh, a mesh of six-sided
cells, on which it will live. You define this by specifying the x,y,
and z locations of the corners of the hexahedral cells. The following
code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="kn">import</span> <span class="nn">numpy</span>

<span class="n">xgrid</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.65</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.65</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">ygrid</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">zgrid</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.447</span><span class="p">,</span> <span class="mf">0.447</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="n">coordinates</span><span class="p">,</span><span class="n">connectivity</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">hexahedral_connectivity</span><span class="p">(</span><span class="n">xgrid</span><span class="p">,</span><span class="n">ygrid</span><span class="p">,</span><span class="n">zgrid</span><span class="p">)</span>
</pre></div>
</div>
<p>will define the (x,y,z) coordinates of the hexahedral cells and
information about that cell&#8217;s neighbors such that the celll corners
will be a grid of points constructed as the Cartesion product of
xgrid, ygrid, and zgrid.</p>
<p>Then, to load your data, which should be defined on the interiors of
the hexahedral cells, and thus should have the shape,
<code class="docutils literal"><span class="pre">(len(xgrid)-1,</span> <span class="pre">len(ygrid)-1,</span> <span class="pre">len(zgrid)-1)</span></code>, you can use the following code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">bbox</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">xgrid</span><span class="p">),</span><span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">xgrid</span><span class="p">)],</span>
                    <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">ygrid</span><span class="p">),</span><span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">ygrid</span><span class="p">)],</span>
                    <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">zgrid</span><span class="p">),</span><span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">zgrid</span><span class="p">)]])</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;density&quot;</span> <span class="p">:</span> <span class="n">arr</span><span class="p">}</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load_hexahedral_mesh</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">conn</span><span class="p">,</span><span class="n">coords</span><span class="p">,</span><span class="mf">1.0</span><span class="p">,</span><span class="n">bbox</span><span class="o">=</span><span class="n">bbox</span><span class="p">)</span>
</pre></div>
</div>
<p>to load your data into the dataset <code class="docutils literal"><span class="pre">ds</span></code> as described above, where we
have assumed your data is stored in the three-dimensional array
<code class="docutils literal"><span class="pre">arr</span></code>.</p>
<p class="rubric">Caveats</p>
<ul class="simple">
<li>Units will be incorrect unless the data has already been converted to cgs.</li>
<li>Integration is not implemented.</li>
<li>Some functions may behave oddly or not work at all.</li>
<li>Data must already reside in memory.</li>
</ul>
</div>
<div class="section" id="generic-particle-data">
<h2>Generic Particle Data<a class="headerlink" href="#generic-particle-data" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="generic_particle_data.html#generic-particle-data"><span>Loading Generic Particle Data</span></a> and
<a class="reference internal" href="../reference/api/generated/yt.frontends.stream.data_structures.load_particles.html#yt.frontends.stream.data_structures.load_particles" title="yt.frontends.stream.data_structures.load_particles"><code class="xref py py-func docutils literal"><span class="pre">load_particles()</span></code></a> for more detail.</p>
<p>You can also load generic particle data using the same <code class="docutils literal"><span class="pre">stream</span></code> functionality
discussed above to load in-memory grid data.  For example, if your particle
positions and masses are stored in <code class="docutils literal"><span class="pre">positions</span></code> and <code class="docutils literal"><span class="pre">massess</span></code>, a
vertically-stacked array of particle x,y, and z positions, and a 1D array of
particle masses respectively, you would load them like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>

<span class="n">data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">particle_position</span><span class="o">=</span><span class="n">positions</span><span class="p">,</span> <span class="n">particle_mass</span><span class="o">=</span><span class="n">masses</span><span class="p">)</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load_particles</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also load data using 1D x, y, and z position arrays:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>

<span class="n">data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">particle_position_x</span><span class="o">=</span><span class="n">posx</span><span class="p">,</span>
            <span class="n">particle_position_y</span><span class="o">=</span><span class="n">posy</span><span class="p">,</span>
            <span class="n">particle_position_z</span><span class="o">=</span><span class="n">posz</span><span class="p">,</span>
            <span class="n">particle_mass</span><span class="o">=</span><span class="n">masses</span><span class="p">)</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load_particles</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">load_particles</span></code> function also accepts the following keyword parameters:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">length_unit</span></code></dt>
<dd>The units used for particle positions.</dd>
<dt><code class="docutils literal"><span class="pre">mass_unit</span></code></dt>
<dd>The units of the particle masses.</dd>
<dt><code class="docutils literal"><span class="pre">time_unit</span></code></dt>
<dd>The units used to represent times. This is optional and is only used if
your data contains a <code class="docutils literal"><span class="pre">creation_time</span></code> field or a <code class="docutils literal"><span class="pre">particle_velocity</span></code> field.</dd>
<dt><code class="docutils literal"><span class="pre">velocity_unit</span></code></dt>
<dd>The units used to represent velocities.  This is optional and is only used
if you supply a velocity field.  If this is not supplied, it is inferred from
the length and time units.</dd>
<dt><code class="docutils literal"><span class="pre">bbox</span></code></dt>
<dd>The bounding box for the particle positions.</dd>
</dl>
</div>
<div class="section" id="halo-catalog-data">
<span id="loading-pyne-data"></span><h2>Halo Catalog Data<a class="headerlink" href="#halo-catalog-data" title="Permalink to this headline">¶</a></h2>
<p>yt has support for reading halo catalogs produced by Rockstar and the inline
FOF/SUBFIND halo finders of Gadget and OWLS.  The halo catalogs are treated as
particle datasets where each particle represents a single halo.  At this time,
yt does not have the ability to load the member particles for a given halo.
However, once loaded, further halo analysis can be performed using
<a class="reference internal" href="../analyzing/analysis_modules/halo_catalogs.html#halo-catalog"><span>Halo Catalogs</span></a>.</p>
<p>In the case where halo catalogs are written to multiple files, one must only
give the path to one of them.</p>
<div class="section" id="gadget-fof-subfind">
<h3>Gadget FOF/SUBFIND<a class="headerlink" href="#gadget-fof-subfind" title="Permalink to this headline">¶</a></h3>
<p>The two field types for GadgetFOF data are &#8220;Group&#8221; (FOF) and &#8220;Subhalo&#8221; (SUBFIND).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;gadget_fof_halos/groups_042/fof_subhalo_tab_042.0.hdf5&quot;</span><span class="p">)</span>
<span class="n">ad</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">all_data</span><span class="p">()</span>
<span class="c"># The halo mass</span>
<span class="k">print</span> <span class="n">ad</span><span class="p">[</span><span class="s">&quot;Group&quot;</span><span class="p">,</span> <span class="s">&quot;particle_mass&quot;</span><span class="p">]</span>
<span class="k">print</span> <span class="n">ad</span><span class="p">[</span><span class="s">&quot;Subhalo&quot;</span><span class="p">,</span> <span class="s">&quot;particle_mass&quot;</span><span class="p">]</span>
<span class="c"># Halo ID</span>
<span class="k">print</span> <span class="n">ad</span><span class="p">[</span><span class="s">&quot;Group&quot;</span><span class="p">,</span> <span class="s">&quot;particle_identifier&quot;</span><span class="p">]</span>
<span class="k">print</span> <span class="n">ad</span><span class="p">[</span><span class="s">&quot;Subhalo&quot;</span><span class="p">,</span> <span class="s">&quot;particle_identifier&quot;</span><span class="p">]</span>
<span class="c"># positions</span>
<span class="k">print</span> <span class="n">ad</span><span class="p">[</span><span class="s">&quot;Group&quot;</span><span class="p">,</span> <span class="s">&quot;particle_position_x&quot;</span><span class="p">]</span>
<span class="c"># velocities</span>
<span class="k">print</span> <span class="n">ad</span><span class="p">[</span><span class="s">&quot;Group&quot;</span><span class="p">,</span> <span class="s">&quot;particle_velocity_x&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Multidimensional fields can be accessed through the field name followed by an
underscore and the index.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># x component of the spin</span>
<span class="k">print</span> <span class="n">ad</span><span class="p">[</span><span class="s">&quot;Subhalo&quot;</span><span class="p">,</span> <span class="s">&quot;SubhaloSpin_0&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="owls-fof-subfind">
<h3>OWLS FOF/SUBFIND<a class="headerlink" href="#owls-fof-subfind" title="Permalink to this headline">¶</a></h3>
<p>OWLS halo catalogs have a very similar structure to regular Gadget halo catalogs.
The two field types are &#8220;FOF&#8221; and &#8220;SUBFIND&#8221;.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;owls_fof_halos/groups_008/group_008.0.hdf5&quot;</span><span class="p">)</span>
<span class="n">ad</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">all_data</span><span class="p">()</span>
<span class="c"># The halo mass</span>
<span class="k">print</span> <span class="n">ad</span><span class="p">[</span><span class="s">&quot;FOF&quot;</span><span class="p">,</span> <span class="s">&quot;particle_mass&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="rockstar">
<h3>Rockstar<a class="headerlink" href="#rockstar" title="Permalink to this headline">¶</a></h3>
<p>Rockstar halo catalogs are loaded by providing the path to one of the .bin files.
The single field type available is &#8220;halos&#8221;.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;rockstar_halos/halos_0.0.bin&quot;</span><span class="p">)</span>
<span class="n">ad</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">all_data</span><span class="p">()</span>
<span class="c"># The halo mass</span>
<span class="k">print</span> <span class="n">ad</span><span class="p">[</span><span class="s">&quot;halos&quot;</span><span class="p">,</span> <span class="s">&quot;particle_mass&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="pyne-data">
<h2>PyNE Data<a class="headerlink" href="#pyne-data" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://pyne.io/">PyNE</a> is an open source nuclear engineering toolkit
maintained by the PyNE developement team (<a class="reference external" href="pyne-dev%40googlegroups.com">pyne-dev&#64;googlegroups.com</a>). PyNE meshes utilize the Mesh-Oriented datABase
<a class="reference external" href="http://trac.mcs.anl.gov/projects/ITAPS/wiki/MOAB/">(MOAB)</a> and can be
Cartesian or tetrahedral. In addition to field data, pyne meshes store pyne
Material objects which provide a rich set of capabilities for nuclear
engineering tasks. PyNE Cartesian (Hex8) meshes are supported by yt.</p>
<p>To create a pyne mesh:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyne.mesh</span> <span class="kn">import</span> <span class="n">Mesh</span>
<span class="n">num_divisions</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">coords</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">num_divisions</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">Mesh</span><span class="p">(</span><span class="n">structured</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">structured_coords</span><span class="o">=</span><span class="p">[</span><span class="n">coords</span><span class="p">,</span> <span class="n">coords</span><span class="p">,</span> <span class="n">coords</span><span class="p">])</span>
</pre></div>
</div>
<p>Field data can then be added:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyne.mesh</span> <span class="kn">import</span> <span class="n">iMeshTag</span>
<span class="n">m</span><span class="o">.</span><span class="n">neutron_flux</span> <span class="o">=</span> <span class="n">IMeshTag</span><span class="p">()</span>
<span class="c"># neutron_flux_data is a list or numpy array of size num_divisions^3</span>
<span class="n">m</span><span class="o">.</span><span class="n">neutron_flux</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">neutron_flux_data</span>
</pre></div>
</div>
<p>Any field data or material data on the mesh can then be viewed just like any other yt dataset!</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="n">pf</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">frontends</span><span class="o">.</span><span class="n">moab</span><span class="o">.</span><span class="n">data_structures</span><span class="o">.</span><span class="n">PyneMoabHex8Dataset</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">SlicePlot</span><span class="p">(</span><span class="n">pf</span><span class="p">,</span> <span class="s">&#39;z&#39;</span><span class="p">,</span> <span class="s">&#39;neutron_flux&#39;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="ramses-data">
<span id="loading-ramses-data"></span><h2>RAMSES Data<a class="headerlink" href="#ramses-data" title="Permalink to this headline">¶</a></h2>
<p>In yt-3.0, RAMSES data is fully supported.  If you are interested in taking a
development or stewardship role, please contact the yt-dev mailing list.  To
load a RAMSES dataset, you can use the <code class="docutils literal"><span class="pre">yt.load</span></code> command and provide it
the <code class="docutils literal"><span class="pre">info*.txt</span></code> filename.  For instance, if you were in a
directory with the following files:</p>
<div class="highlight-none"><div class="highlight"><pre>output_00007
output_00007/amr_00007.out00001
output_00007/grav_00007.out00001
output_00007/hydro_00007.out00001
output_00007/info_00007.txt
output_00007/part_00007.out00001
</pre></div>
</div>
<p>You would feed it the filename <code class="docutils literal"><span class="pre">output_00007/info_00007.txt</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;output_00007/info_00007.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>yt will attempt to guess the fields in the file.  You may also specify a list
of fields by supplying the <code class="docutils literal"><span class="pre">fields</span></code> keyword in your call to <code class="docutils literal"><span class="pre">load</span></code>.</p>
</div>
<div class="section" id="sph-particle-data">
<span id="loading-sph-data"></span><h2>SPH Particle Data<a class="headerlink" href="#sph-particle-data" title="Permalink to this headline">¶</a></h2>
<p>For all of the SPH frontends, yt uses cython-based SPH smoothing onto an
in-memory octree to create deposited mesh fields from individual SPH particle
fields.</p>
<p>This uses a standard M4 smoothing kernel and the <code class="docutils literal"><span class="pre">smoothing_length</span></code>
field to calculate SPH sums, filling in the mesh fields.  This gives you the
ability to both track individual particles (useful for tasks like following
contiguous clouds of gas that would be require a clump finder in grid data) as
well as doing standard grid-based analysis (i.e. slices, projections, and profiles).</p>
<p>The <code class="docutils literal"><span class="pre">smoothing_length</span></code> variable is also useful for determining which particles
can interact with each other, since particles more distant than twice the
smoothing length do not typically see each other in SPH simulations.  By
changing the value of the <code class="docutils literal"><span class="pre">smoothing_length</span></code> and then re-depositing particles
onto the grid, you can also effectively mimic what your data would look like at
lower resolution.</p>
</div>
<div class="section" id="tipsy-data">
<span id="loading-tipsy-data"></span><h2>Tipsy Data<a class="headerlink" href="#tipsy-data" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="../cookbook/tipsy_notebook.html#tipsy-notebook"><span>Using yt to view and analyze Tipsy outputs from Gasoline</span></a> and <a class="reference internal" href="#loading-sph-data"><span>SPH Particle Data</span></a> for more details.</p>
<p>yt also supports loading Tipsy data.  Many of its characteristics are similar
to how Gadget data is loaded; specifically, it shares its definition of
indexing and mesh-identification with that described in
<a class="reference internal" href="#particle-indexing-criteria"><span>Indexing Criteria</span></a>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ds</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s">&quot;./halo1e11_run1.00400&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="specifying-tipsy-cosmological-parameters">
<span id="specifying-cosmology-tipsy"></span><h3>Specifying Tipsy Cosmological Parameters<a class="headerlink" href="#specifying-tipsy-cosmological-parameters" title="Permalink to this headline">¶</a></h3>
<p>Cosmological parameters can be specified to Tipsy to enable computation of
default units.  The parameters recognized are of this form:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cosmology_parameters</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;current_redshift&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                        <span class="s">&#39;omega_lambda&#39;</span><span class="p">:</span> <span class="mf">0.728</span><span class="p">,</span>
                        <span class="s">&#39;omega_matter&#39;</span><span class="p">:</span> <span class="mf">0.272</span><span class="p">,</span>
                        <span class="s">&#39;hubble_constant&#39;</span><span class="p">:</span> <span class="mf">0.702</span><span class="p">}</span>
</pre></div>
</div>
<p>These will be used set the units, if they are specified.</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
    <div class="footer">
      &copy; Copyright 2013, the yt Project.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>