<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Halo Ellipsoid Analysis &mdash; The yt Project 3.2-dev documentation</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootswatch-3.3.4/readable/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '3.2-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="The yt Project 3.2-dev documentation" href="../../index.html" />
    <link rel="up" title="Topic-Specific Analysis Modules" href="index.html" />
    <link rel="next" title="Loading and Examining Data" href="../../examining/index.html" />
    <link rel="prev" title="Particle Trajectories" href="particle_trajectories.html" />
    
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-391373-2']);
      _gaq.push(['_setDomainName', 'yt-project.org']);
      _gaq.push(['_setAllowHash', false]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html"><img src="../../_static/yt_icon.png">
          The yt Project</a>
        <span class="navbar-text navbar-version pull-left"><b>3.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../../help/index.html">How to get help</a></li>
                <li><a href="../../quickstart/index.html">Quickstart notebooks</a></li>
                <li><a href="../../cookbook/index.html">Cookbook</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installing.html">Getting and Installing yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../installing.html#getting-yt">Getting yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installing.html#testing-your-installation">Testing Your Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installing.html#switching-between-yt-2-x-and-yt-3-x">Switching between yt-2.x and yt-3.x</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart/index.html">yt Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart/data_inspection.html">Data Inspection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart/simple_visualization.html">Simple Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart/data_objects_and_time_series.html">Data Objects and Time Series</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart/derived_fields_and_profiles.html">Derived Fields and Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart/volume_rendering.html">Volume Rendering</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../yt3differences.html">What&#8217;s New and Different in yt 3.0?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../yt3differences.html#updating-to-yt-3-0-from-old-versions-and-going-back">Updating to yt 3.0 from Old Versions (and going back)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../yt3differences.html#converting-old-scripts-to-work-with-yt-3-0">Converting Old Scripts to Work with yt 3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../yt3differences.html#cool-new-things">Cool New Things</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../yt3differences.html#api-changes">API Changes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../cookbook/index.html">The Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../cookbook/index.html#getting-the-sample-data">Getting the Sample Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cookbook/index.html#example-scripts">Example Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cookbook/index.html#example-notebooks">Example Notebooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../visualizing/index.html">Visualizing Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../visualizing/plots.html">How to Make Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../visualizing/callbacks.html">Plot Modifications: Overplotting Contours, Velocities, Particles, and More</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../visualizing/manual_plotting.html">Using the Manual Plotting Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../visualizing/volume_rendering.html">Volume Rendering: Making 3D Photorealistic Isocontoured Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../visualizing/hardware_volume_rendering.html">Hardware Volume Rendering on NVidia Graphics cards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../visualizing/sketchfab.html">3D Surfaces and Sketchfab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../visualizing/mapserver.html">Mapserver - A Google-Maps-like Interface to your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../visualizing/streamlines.html">Streamlines: Tracking the Trajectories of Tracers in your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../visualizing/colormaps/index.html">Colormaps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../visualizing/writing_fits_images.html">Writing FITS Images</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">General Data Analysis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../fields.html">Fields in yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developing/creating_derived_fields.html">Creating Derived Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../objects.html">Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../units/index.html">Symbolic Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../filtering.html">Filtering your Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generating_processed_data.html">Generating Processed Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../time_series_analysis.html">Time Series Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parallel_computation.html">Parallel Computation With yt</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Topic-Specific Analysis Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="halo_analysis.html">Halo Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="synthetic_observation.html">Synthetic Observation</a></li>
<li class="toctree-l2"><a class="reference internal" href="exporting.html">Exporting to External Radiation Transport Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="two_point_functions.html">Two Point Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="clump_finding.html">Clump Finding</a></li>
<li class="toctree-l2"><a class="reference internal" href="particle_trajectories.html">Particle Trajectories</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Halo Ellipsoid Analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../examining/index.html">Loading and Examining Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examining/loading_data.html">Loading Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examining/generic_array_data.html">Loading Generic Array Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examining/generic_particle_data.html">Loading Generic Particle Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examining/spherical_data.html">Loading Spherical Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examining/low_level_inspection.html">Low-Level Data Inspection: Accessing Raw Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developing/index.html">Developing in yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../developing/intro.html">Getting Involved</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developing/developing.html">How to Develop yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developing/building_the_docs.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developing/testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developing/debugdrive.html">Debugging yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developing/creating_datatypes.html">Creating Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developing/creating_derived_fields.html">Creating Derived Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developing/creating_derived_quantities.html">Creating Derived Quantities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developing/creating_frontend.html">Creating A New Code Frontend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developing/external_analysis.html">Using yt with External Analysis Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">Reference Materials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../reference/code_support.html">Code Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/command-line.html">Command-Line Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/api/api.html">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/configuration.html">Customizing yt: The Configuration and Plugin Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/field_list.html">Field List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/changelog.html">ChangeLog</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../faq/index.html#version-installation">Version &amp; Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq/index.html#code-errors-and-failures">Code Errors and Failures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq/index.html#units">Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq/index.html#fields">Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq/index.html#data-objects">Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq/index.html#developing">Developing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq/index.html#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../help/index.html">Getting Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../help/index.html#don-t-panic-and-don-t-give-up">Don&#8217;t panic and don&#8217;t give up</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../help/index.html#update-to-the-latest-version">Update to the latest version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../help/index.html#search-the-documentation-faq-and-mailing-lists">Search the documentation, FAQ, and mailing lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../help/index.html#look-at-the-source-code">Look at the source code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../help/index.html#isolate-and-document-your-problem">Isolate and document your problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../help/index.html#go-on-irc-to-ask-a-question">Go on IRC to ask a question</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../help/index.html#ask-the-mailing-list">Ask the mailing list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../help/index.html#submit-a-bug-report">Submit a bug report</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../help/index.html#special-issues">Special Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../about/index.html#what-is-yt">What is yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/index.html#who-is-yt">Who is yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/index.html#history-of-yt">History of yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/index.html#how-do-i-contact-yt">How do I contact yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/index.html#how-do-i-cite-yt">How do I cite yt?</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Halo Ellipsoid Analysis</a><ul>
<li><a class="reference internal" href="#purpose">Purpose</a></li>
<li><a class="reference internal" href="#general-overview">General Overview</a></li>
<li><a class="reference internal" href="#example">Example</a><ul>
<li><a class="reference internal" href="#halo-finding">Halo Finding</a></li>
<li><a class="reference internal" href="#ellipsoid-parameters">Ellipsoid Parameters</a></li>
<li><a class="reference internal" href="#ellipsoid-3d-container">Ellipsoid 3D Container</a></li>
</ul>
</li>
<li><a class="reference internal" href="#drawbacks">Drawbacks</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="halo-ellipsoid-analysis">
<span id="ellipsoid-analysis"></span><h1>Halo Ellipsoid Analysis<a class="headerlink" href="#halo-ellipsoid-analysis" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This is my first attempt at modifying the yt source code,
so the program may be bug ridden.  Please send yt-dev an email and
address to Geoffrey So if you discover something wrong with this
portion of the code.</p>
</div>
<div class="section" id="purpose">
<h2>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h2>
<p>The purpose of creating this feature in yt is to analyze field
properties that surround dark matter haloes.  Originally, this was
usually done with the sphere 3D container, but since many halo
particles are linked together in a more elongated shape, I thought it
would be better to use an ellipsoid 3D container to wrap around the
particles.  This way, less of the empty-of-particle space around the
halo would be included when doing the analysis of field properties
where the particles are suppose to occupy.</p>
</div>
<div class="section" id="general-overview">
<h2>General Overview<a class="headerlink" href="#general-overview" title="Permalink to this headline">¶</a></h2>
<p>In order to use the ellipsoid 3D container object, one must supply it
with a center, the magnitude of the semi-principle axes, the direction
of the first semi-principle axis, the tilt angle (rotation angle about
the y axis that will align the first semi-principle axis with the x
axis once it is aligned in the x-z plane.)</p>
<p>Once those parameters are determined, the function &#8220;ellipsoid&#8221; will
return the 3D object, and users will be able to get field attributes
from the data object just as they would from spheres, cylinders etc.</p>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>To use the ellipsoid container to get field information, you
will have to first determine the ellipsoid&#8217;s parameters.  This can be
done with the haloes obtained from halo finding, but essentially it
takes the information:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Center position x,y,z</li>
<li>List of particles position x,y,z</li>
</ol>
</div></blockquote>
<p>And calculates the ellipsoid information needed for the 3D container.</p>
<p>What I usually do is get this information from the halo finder output
files in the .h5 HDF5 binary format. I load them into memory using the
LoadHaloes() function instead of reading in the ASCII output.</p>
<div class="section" id="halo-finding">
<h3>Halo Finding<a class="headerlink" href="#halo-finding" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="kn">from</span> <span class="nn">yt.analysis_modules.halo_finding.api</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;Enzo_64/RD0006/RedshiftOutput0006&#39;</span><span class="p">)</span>
<span class="n">halo_list</span> <span class="o">=</span> <span class="n">parallelHF</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
<span class="n">halo_list</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="s">&#39;MyHaloList&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="ellipsoid-parameters">
<h3>Ellipsoid Parameters<a class="headerlink" href="#ellipsoid-parameters" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="kn">from</span> <span class="nn">yt.analysis_modules.halo_finding.api</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;Enzo_64/RD0006/RedshiftOutput0006&#39;</span><span class="p">)</span>
<span class="n">haloes</span> <span class="o">=</span> <span class="n">LoadHaloes</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="s">&#39;MyHaloList&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Once the halo information is saved you can load it into the data
object &#8220;haloes&#8221;, you can get loop over the list of haloes and do</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ell_param</span> <span class="o">=</span> <span class="n">haloes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_ellipsoid_parameters</span><span class="p">()</span>
</pre></div>
</div>
<p>This will return 6 items</p>
<ol class="arabic simple">
<li>The center of mass as an array.</li>
<li>A as a float.  (Must have A&gt;=B)</li>
<li>B as a float.  (Must have B&gt;=C)</li>
<li>C as a float.  (Must have C &gt; cell size)</li>
<li>e0 vector as an array.  (now normalized automatically in the code)</li>
<li>tilt as a float.</li>
</ol>
<p>The center of mass would be the same one as returned by the halo
finder.  The A, B, C are the largest to smallest magnitude of the
ellipsoid&#8217;s semi-principle axes. &#8220;e0&#8221; is the largest semi-principle
axis vector direction that would have magnitude A but normalized.
The &#8220;tilt&#8221; is an angle measured in radians.  It can be best described
as after the rotation about the z-axis to allign e0 to x in the x-y
plane, and then rotating about the y-axis to align e0 completely to
the x-axis, the angle remaining to rotate about the x-axis to align
both e1 to the y-axis and e2 to the z-axis.</p>
</div>
<div class="section" id="ellipsoid-3d-container">
<h3>Ellipsoid 3D Container<a class="headerlink" href="#ellipsoid-3d-container" title="Permalink to this headline">¶</a></h3>
<p>Once the parameters are obtained from the get_ellipsoid_parameters()
function, or picked at random by the user, it can be input into the
ellipsoid container as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ell</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">ellipsoid</span><span class="p">(</span><span class="n">ell_param</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="n">ell_param</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<span class="n">ell_param</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
<span class="n">ell_param</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
<span class="n">ell_param</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
<span class="n">ell_param</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
<span class="n">dens</span> <span class="o">=</span> <span class="n">ell</span><span class="o">.</span><span class="n">quantities</span><span class="p">[</span><span class="s">&#39;TotalQuantity&#39;</span><span class="p">](</span><span class="s">&#39;density&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>This way, &#8220;ell&#8221; will be the ellipsoid container, and &#8220;dens&#8221; will be
the total density of the ellipsoid in an unigrid simulation.  One can
of course use this container object with parameters that they come up
with, the ellipsoid parameters do not have to come from the Halo
Finder.  And of course, one can use the ellipsoid container with other
derived fields or fields that they are interested in.</p>
</div>
</div>
<div class="section" id="drawbacks">
<h2>Drawbacks<a class="headerlink" href="#drawbacks" title="Permalink to this headline">¶</a></h2>
<p>Since this is a first attempt, there are many drawbacks and corners
cut.  Many things listed here will be amended when I have time.</p>
<ul class="simple">
<li>The ellipsoid 3D container like the boolean object, do not contain
particle position and velocity information.</li>
<li>This currently assume periodic boundary condition, so if an
ellipsoid center is at the edge, it will return part of the opposite
edge field information.  Will try to put in the option to turn off
periodicity in the future.</li>
<li>This method gives a minimalistic ellipsoid centered around the
center of mass that contains all the particles, but sometimes people
prefer an inertial tensor triaxial ellipsoid described in
<a class="reference external" href="http://adsabs.harvard.edu/abs/1991ApJ...378..496D">Dubinski, Carlberg 1991</a>.  I have that
method composed but it is not fully tested yet.</li>
<li>The method to obtain information from the halo still uses the center
of mass as the center of the ellipsoid, so it is not making the
smallest ellipsoid that contains the particles as possible.  To
start at the center of the particles based on position will require
an O(<img class="math" src="../../_images/math/b0614445362e91ebcad2b2650b0eab330c60a5ea.png" alt="N^2"/>) operation, right now I&#8217;m trying to limit
everything to O(<img class="math" src="../../_images/math/75e27f04188974063be3230dca208cd495b77ce1.png" alt="N"/>) operations.  If particle count does not
get too large, I may implement the O(<img class="math" src="../../_images/math/b0614445362e91ebcad2b2650b0eab330c60a5ea.png" alt="N^2"/>) operation.</li>
<li>Currently the list of haloes can be analyzed using object
parallelism (one halo per core), but I&#8217;m not sure if haloes will get
big enough soon that other forms of parallelism will be needed to
analyze them due to memory constraint.</li>
<li>This has only been tested on unigrid simulation data, not AMR.  In
unigrid simulations, I can take &#8220;dens&#8221; from the example and divide
it by the total number of cells to get the average density, in AMR
one would need to do an volume weighted average instead.</li>
</ul>
</div>
</div>


    </div>
      
  </div>
</div>
    <div class="footer">
      &copy; Copyright 2013, the yt Project.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>