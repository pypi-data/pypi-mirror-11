<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Halo Mass Function &mdash; The yt Project 3.2-dev documentation</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootswatch-3.3.4/readable/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '3.2-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="The yt Project 3.2-dev documentation" href="../../index.html" />
    <link rel="up" title="Halo Analysis" href="halo_analysis.html" />
    <link rel="next" title="Halo Merger Tree" href="halo_merger_tree.html" />
    <link rel="prev" title="Halo Finding" href="halo_finders.html" />
    
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-391373-2']);
      _gaq.push(['_setDomainName', 'yt-project.org']);
      _gaq.push(['_setAllowHash', false]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html"><img src="../../_static/yt_icon.png">
          The yt Project</a>
        <span class="navbar-text navbar-version pull-left"><b>3.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../../help/index.html">How to get help</a></li>
                <li><a href="../../quickstart/index.html">Quickstart notebooks</a></li>
                <li><a href="../../cookbook/index.html">Cookbook</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installing.html">Getting and Installing yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../installing.html#getting-yt">Getting yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installing.html#testing-your-installation">Testing Your Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installing.html#switching-between-yt-2-x-and-yt-3-x">Switching between yt-2.x and yt-3.x</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart/index.html">yt Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart/data_inspection.html">Data Inspection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart/simple_visualization.html">Simple Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart/data_objects_and_time_series.html">Data Objects and Time Series</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart/derived_fields_and_profiles.html">Derived Fields and Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart/volume_rendering.html">Volume Rendering</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../yt3differences.html">What&#8217;s New and Different in yt 3.0?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../yt3differences.html#updating-to-yt-3-0-from-old-versions-and-going-back">Updating to yt 3.0 from Old Versions (and going back)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../yt3differences.html#converting-old-scripts-to-work-with-yt-3-0">Converting Old Scripts to Work with yt 3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../yt3differences.html#cool-new-things">Cool New Things</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../yt3differences.html#api-changes">API Changes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../cookbook/index.html">The Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../cookbook/index.html#getting-the-sample-data">Getting the Sample Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cookbook/index.html#example-scripts">Example Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cookbook/index.html#example-notebooks">Example Notebooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../visualizing/index.html">Visualizing Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../visualizing/plots.html">How to Make Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../visualizing/callbacks.html">Plot Modifications: Overplotting Contours, Velocities, Particles, and More</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../visualizing/manual_plotting.html">Using the Manual Plotting Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../visualizing/volume_rendering.html">Volume Rendering: Making 3D Photorealistic Isocontoured Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../visualizing/hardware_volume_rendering.html">Hardware Volume Rendering on NVidia Graphics cards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../visualizing/sketchfab.html">3D Surfaces and Sketchfab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../visualizing/mapserver.html">Mapserver - A Google-Maps-like Interface to your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../visualizing/streamlines.html">Streamlines: Tracking the Trajectories of Tracers in your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../visualizing/colormaps/index.html">Colormaps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../visualizing/writing_fits_images.html">Writing FITS Images</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">General Data Analysis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../fields.html">Fields in yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developing/creating_derived_fields.html">Creating Derived Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../objects.html">Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../units/index.html">Symbolic Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../filtering.html">Filtering your Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generating_processed_data.html">Generating Processed Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../time_series_analysis.html">Time Series Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parallel_computation.html">Parallel Computation With yt</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Topic-Specific Analysis Modules</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="halo_analysis.html">Halo Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="synthetic_observation.html">Synthetic Observation</a></li>
<li class="toctree-l2"><a class="reference internal" href="exporting.html">Exporting to External Radiation Transport Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="two_point_functions.html">Two Point Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="clump_finding.html">Clump Finding</a></li>
<li class="toctree-l2"><a class="reference internal" href="particle_trajectories.html">Particle Trajectories</a></li>
<li class="toctree-l2"><a class="reference internal" href="ellipsoid_analysis.html">Halo Ellipsoid Analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../examining/index.html">Loading and Examining Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examining/loading_data.html">Loading Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examining/generic_array_data.html">Loading Generic Array Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examining/generic_particle_data.html">Loading Generic Particle Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examining/spherical_data.html">Loading Spherical Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examining/low_level_inspection.html">Low-Level Data Inspection: Accessing Raw Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developing/index.html">Developing in yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../developing/intro.html">Getting Involved</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developing/developing.html">How to Develop yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developing/building_the_docs.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developing/testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developing/debugdrive.html">Debugging yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developing/creating_datatypes.html">Creating Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developing/creating_derived_fields.html">Creating Derived Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developing/creating_derived_quantities.html">Creating Derived Quantities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developing/creating_frontend.html">Creating A New Code Frontend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developing/external_analysis.html">Using yt with External Analysis Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">Reference Materials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../reference/code_support.html">Code Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/command-line.html">Command-Line Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/api/api.html">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/configuration.html">Customizing yt: The Configuration and Plugin Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/field_list.html">Field List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/changelog.html">ChangeLog</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../faq/index.html#version-installation">Version &amp; Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq/index.html#code-errors-and-failures">Code Errors and Failures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq/index.html#units">Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq/index.html#fields">Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq/index.html#data-objects">Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq/index.html#developing">Developing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq/index.html#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../help/index.html">Getting Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../help/index.html#don-t-panic-and-don-t-give-up">Don&#8217;t panic and don&#8217;t give up</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../help/index.html#update-to-the-latest-version">Update to the latest version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../help/index.html#search-the-documentation-faq-and-mailing-lists">Search the documentation, FAQ, and mailing lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../help/index.html#look-at-the-source-code">Look at the source code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../help/index.html#isolate-and-document-your-problem">Isolate and document your problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../help/index.html#go-on-irc-to-ask-a-question">Go on IRC to ask a question</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../help/index.html#ask-the-mailing-list">Ask the mailing list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../help/index.html#submit-a-bug-report">Submit a bug report</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../help/index.html#special-issues">Special Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../about/index.html#what-is-yt">What is yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/index.html#who-is-yt">Who is yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/index.html#history-of-yt">History of yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/index.html#how-do-i-contact-yt">How do I contact yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/index.html#how-do-i-cite-yt">How do I cite yt?</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Halo Mass Function</a><ul>
<li><a class="reference internal" href="#general-overview">General Overview</a></li>
<li><a class="reference internal" href="#analytical-fits">Analytical Fits</a></li>
<li><a class="reference internal" href="#basic-halo-mass-function-creation">Basic Halo Mass Function Creation</a></li>
<li><a class="reference internal" href="#keyword-arguments">Keyword Arguments</a></li>
<li><a class="reference internal" href="#outputs">Outputs</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="halo-mass-function">
<span id="id1"></span><h1>Halo Mass Function<a class="headerlink" href="#halo-mass-function" title="Permalink to this headline">¶</a></h1>
<p>The Halo Mass Function extension is capable of outputting the halo mass function
for a collection halos (input), and/or an analytical fit over a given mass range
for a set of specified cosmological parameters.
This extension is based on code generously provided by Brian O&#8217;Shea.</p>
<div class="section" id="general-overview">
<h2>General Overview<a class="headerlink" href="#general-overview" title="Permalink to this headline">¶</a></h2>
<p>A halo mass function can be created for the halos identified in a cosmological
simulation, as well as analytic fits using any arbitrary set of cosmological
paramters. In order to create a mass function for simulated halos, they must
first be identified (using HOP, FOF, or Rockstar, see
<a class="reference internal" href="halo_catalogs.html#halo-catalog"><span>Halo Catalogs</span></a>) and loaded as a halo dataset object. The distribution of
halo masses will then be found, and can be compared to the analytic prediction
at the same redshift and using the same cosmological parameters as were used
in the simulation. Care should be taken in this regard, as the analytic fit
requires the specification of cosmological parameters that are not necessarily
stored in the halo or simulation datasets, and must be specified by the user.
Efforts have been made to set reasonable defaults for these parameters, but
setting them to identically match those used in the simulation will produce a
much better comparison.</p>
<p>Analytic halo mass functions can also be created without a halo dataset by
providing either a simulation dataset or specifying cosmological parameters by
hand. yt includes 5 analytic fits for the halo mass function which can be
selected.</p>
</div>
<div class="section" id="analytical-fits">
<h2>Analytical Fits<a class="headerlink" href="#analytical-fits" title="Permalink to this headline">¶</a></h2>
<p>There are five analytical fits to choose from.</p>
<blockquote>
<div><ol class="arabic simple">
<li><a class="reference external" href="http://adsabs.harvard.edu/abs/1974ApJ...187..425P">Press-Schechter (1974)</a></li>
<li><a class="reference external" href="http://adsabs.harvard.edu/abs/2001MNRAS.321..372J">Jenkins (2001)</a></li>
<li><a class="reference external" href="http://adsabs.harvard.edu/abs/2002MNRAS.329...61S">Sheth-Tormen (2002)</a></li>
<li><a class="reference external" href="http://adsabs.harvard.edu/abs/2006ApJ...646..881W">Warren (2006)</a></li>
<li><a class="reference external" href="http://adsabs.harvard.edu/abs/2008ApJ...688..709T">Tinker (2008)</a></li>
</ol>
</div></blockquote>
<p>We encourage reading each of the primary sources.
In general, we recommend the Warren fitting function because it matches
simulations over a wide range of masses very well.
The Warren fitting function is the default (equivalent to not specifying
<code class="docutils literal"><span class="pre">fitting_function</span></code> in <code class="docutils literal"><span class="pre">HaloMassFcn()</span></code>, below).
The Tinker fit is for the <img class="math" src="../../_images/math/887327c54c3a70d1ec41a9409807f77c7b5895e2.png" alt="\Delta=300"/> fits given in the paper, which
appears to fit HOP threshold=80.0 fairly well.</p>
</div>
<div class="section" id="basic-halo-mass-function-creation">
<h2>Basic Halo Mass Function Creation<a class="headerlink" href="#basic-halo-mass-function-creation" title="Permalink to this headline">¶</a></h2>
<p>The simplest way to create a halo mass function object is to simply pass it no
arguments and let it use the default cosmological parameters.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">yt.analysis_modules.halo_mass_function.api</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">hmf</span> <span class="o">=</span> <span class="n">HaloMassFcn</span><span class="p">()</span>
</pre></div>
</div>
<p>This will create a HaloMassFcn object off of which arrays holding the information
about the analytic mass function hang. Creating the halo mass function for a set
of simulated halos requires only the loaded halo dataset to be passed as an
argument. This also creates the analytic mass function using all parameters that
can be extracted from the halo dataset, at the same redshift, spanning a similar
range of halo masses.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">yt.mods</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">yt.analysis_modules.halo_mass_function.api</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">my_halos</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s">&quot;rockstar_halos/halos_0.0.bin&quot;</span><span class="p">)</span>
<span class="n">hmf</span> <span class="o">=</span> <span class="n">HaloMassFcn</span><span class="p">(</span><span class="n">halos_ds</span><span class="o">=</span><span class="n">my_halos</span><span class="p">)</span>
</pre></div>
</div>
<p>A simulation dataset can be passed along with additonal cosmological parameters
to create an analytic mass function.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">yt.mods</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">yt.analysis_modules.halo_mass_function.api</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">my_ds</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s">&quot;RD0027/RedshiftOutput0027&quot;</span><span class="p">)</span>
<span class="n">hmf</span> <span class="o">=</span> <span class="n">HaloMassFcn</span><span class="p">(</span><span class="n">simulation_ds</span><span class="o">=</span><span class="n">my_ds</span><span class="p">,</span> <span class="n">omega_baryon0</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">primordial_index</span><span class="o">=</span><span class="mf">0.96</span><span class="p">,</span>
                  <span class="n">sigma8</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">,</span> <span class="n">log_mass_min</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">log_mass_max</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>
</pre></div>
</div>
<p>The analytic mass function can be created for a set of arbitrary cosmological
parameters without any dataset being passed as an argument.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">yt.mods</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">yt.analysis_modules.halo_mass_function.api</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">hmf</span> <span class="o">=</span> <span class="n">HaloMassFcn</span><span class="p">(</span><span class="n">omega_baryon0</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">omega_matter0</span><span class="o">=</span><span class="mf">0.27</span><span class="p">,</span>
                  <span class="n">omega_lambda0</span><span class="o">=</span><span class="mf">0.73</span><span class="p">,</span> <span class="n">hubble0</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">this_redshift</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                  <span class="n">log_mass_min</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">log_mass_max</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">fitting_function</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="keyword-arguments">
<h2>Keyword Arguments<a class="headerlink" href="#keyword-arguments" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>simulation_ds</strong> (<em>Simulation dataset object</em>)
The loaded simulation dataset, used to set cosmological paramters.
Default : None.</li>
<li><strong>halos_ds</strong> (<em>Halo dataset object</em>)
The halos from a simulation to be used for creation of the
halo mass function in the simulation.
Default : None.</li>
<li><strong>make_analytic</strong> (<em>bool</em>)
Whether or not to calculate the analytic mass function to go with
the simulated halo mass function.  Automatically set to true if a
simulation dataset is provided.
Default : True.</li>
<li><strong>omega_matter0</strong> (<em>float</em>)
The fraction of the universe made up of matter (dark and baryonic).
Default : 0.2726.</li>
<li><strong>omega_lambda0</strong> (<em>float</em>)
The fraction of the universe made up of dark energy.
Default : 0.7274.</li>
<li><strong>omega_baryon0</strong>  (<em>float</em>)
The fraction of the universe made up of baryonic matter. This is not
always stored in the datset and should be checked by hand.
Default : 0.0456.</li>
<li><strong>hubble0</strong> (<em>float</em>)
The expansion rate of the universe in units of 100 km/s/Mpc.
Default : 0.704.</li>
<li><strong>sigma8</strong> (<em>float</em>)
The amplitude of the linear power spectrum at z=0 as specified by
the rms amplitude of mass-fluctuations in a top-hat sphere of radius
8 Mpc/h. This is not always stored in the datset and should be
checked by hand.
Default : 0.86.</li>
<li><strong>primoridal_index</strong> (<em>float</em>)
This is the index of the mass power spectrum before modification by
the transfer function. A value of 1 corresponds to the scale-free
primordial spectrum. This is not always stored in the datset and
should be checked by hand.
Default : 1.0.</li>
<li><strong>this_redshift</strong> (<em>float</em>)
The current redshift.
Default : 0.</li>
<li><strong>log_mass_min</strong> (<em>float</em>)
The log10 of the mass of the minimum of the halo mass range. This is
set automatically by the range of halo masses if a simulated halo
dataset is provided. If a halo dataset if not provided and no value
is specified, it will be set to 5. Units: M_solar
Default : None.</li>
<li><strong>log_mass_max</strong> (<em>float</em>)
The log10 of the mass of the maximum of the halo mass range. This is
set automatically by the range of halo masses if a simulated halo
dataset is provided. If a halo dataset if not provided and no value
is specified, it will be set to 16. Units: M_solar
Default : None.</li>
<li><strong>num_sigma_bins</strong> (<em>float</em>)
The number of bins (points) to use for the calculation of the
analytic mass function.
Default : 360.</li>
<li><strong>fitting_function</strong> (<em>int</em>)
Which fitting function to use. 1 = Press-Schechter, 2 = Jenkins,
3 = Sheth-Tormen, 4 = Warren, 5 = Tinker
Default : 4.</li>
</ul>
</div>
<div class="section" id="outputs">
<h2>Outputs<a class="headerlink" href="#outputs" title="Permalink to this headline">¶</a></h2>
<p>A HaloMassFnc object has several arrays hanging off of it containing the</p>
<ul class="simple">
<li><strong>masses_sim</strong>: Halo masses from simulated halos. Units: M_solar</li>
<li><strong>n_cumulative_sim</strong>: Number density of halos with mass greater than the
corresponding mass in masses_sim. Units: comoving Mpc^-3</li>
<li><strong>masses_analytic</strong>: Masses used for the generation of the analytic mass
function. Units: M_solar</li>
<li><strong>n_cumulative_analytic</strong>: Number density of halos with mass greater then
the corresponding mass in masses_analytic. Units: comoving Mpc^-3</li>
<li><strong>dndM_dM_analytic</strong>: Differential number density of halos, (dn/dM)*dM.</li>
</ul>
<p>After the mass function has been created for both simulated halos and the
corresponding analytic fits, they can be plotted though something along the
lines of</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="kn">from</span> <span class="nn">yt.analysis_modules.halo_mass_function.api</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="n">my_halos</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;rockstar_halos/halos_0.0.bin&quot;</span><span class="p">)</span>
<span class="n">hmf</span> <span class="o">=</span> <span class="n">HaloMassFcn</span><span class="p">(</span><span class="n">halos_ds</span><span class="o">=</span><span class="n">my_halos</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">hmf</span><span class="o">.</span><span class="n">masses_sim</span><span class="p">,</span> <span class="n">hmf</span><span class="o">.</span><span class="n">n_cumulative_sim</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">hmf</span><span class="o">.</span><span class="n">masses_analytic</span><span class="p">,</span> <span class="n">hmf</span><span class="o">.</span><span class="n">n_cumulative_analytic</span><span class="p">)</span>
</pre></div>
</div>
<p>Attached to <code class="docutils literal"><span class="pre">hmf</span></code> is the convenience function <code class="docutils literal"><span class="pre">write_out</span></code>, which saves the
halo mass function to a text file. (continued from above)
.. code-block:: python</p>
<blockquote>
<div>hmf.write_out(prefix=&#8217;hmf&#8217;, analytic=True, simulated=True)</div></blockquote>
<p>This writes the files <code class="docutils literal"><span class="pre">hmf-analytic.dat</span></code> with columns:</p>
<ul class="simple">
<li>mass [Msun]</li>
<li>cumulative number density of halos [comoving Mpc^-3]</li>
<li>(dn/dM)*dM (differential number density of halos) [comoving Mpc^-3]</li>
</ul>
<p>and the file <code class="docutils literal"><span class="pre">hmf-simulated.dat</span></code> with columns:</p>
<ul class="simple">
<li>mass [Msun]</li>
<li>cumulative number density of halos [comoving Mpc^-3]</li>
</ul>
</div>
</div>


    </div>
      
  </div>
</div>
    <div class="footer">
      &copy; Copyright 2013, the yt Project.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>