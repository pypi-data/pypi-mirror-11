<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Filtering your Dataset &mdash; The yt Project 3.2-dev documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.4/readable/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.2-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="The yt Project 3.2-dev documentation" href="../index.html" />
    <link rel="up" title="General Data Analysis" href="index.html" />
    <link rel="next" title="Generating Processed Data" href="generating_processed_data.html" />
    <link rel="prev" title="Unit Equivalencies" href="units/unit_equivalencies.html" />
    
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-391373-2']);
      _gaq.push(['_setDomainName', 'yt-project.org']);
      _gaq.push(['_setAllowHash', false]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/yt_icon.png">
          The yt Project</a>
        <span class="navbar-text navbar-version pull-left"><b>3.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../help/index.html">How to get help</a></li>
                <li><a href="../quickstart/index.html">Quickstart notebooks</a></li>
                <li><a href="../cookbook/index.html">Cookbook</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installing.html">Getting and Installing yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installing.html#getting-yt">Getting yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installing.html#testing-your-installation">Testing Your Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installing.html#switching-between-yt-2-x-and-yt-3-x">Switching between yt-2.x and yt-3.x</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/index.html">yt Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/data_inspection.html">Data Inspection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/simple_visualization.html">Simple Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/data_objects_and_time_series.html">Data Objects and Time Series</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/derived_fields_and_profiles.html">Derived Fields and Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/volume_rendering.html">Volume Rendering</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../yt3differences.html">What&#8217;s New and Different in yt 3.0?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../yt3differences.html#updating-to-yt-3-0-from-old-versions-and-going-back">Updating to yt 3.0 from Old Versions (and going back)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yt3differences.html#converting-old-scripts-to-work-with-yt-3-0">Converting Old Scripts to Work with yt 3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yt3differences.html#cool-new-things">Cool New Things</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yt3differences.html#api-changes">API Changes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cookbook/index.html">The Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cookbook/index.html#getting-the-sample-data">Getting the Sample Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cookbook/index.html#example-scripts">Example Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cookbook/index.html#example-notebooks">Example Notebooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../visualizing/index.html">Visualizing Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/plots.html">How to Make Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/callbacks.html">Plot Modifications: Overplotting Contours, Velocities, Particles, and More</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/manual_plotting.html">Using the Manual Plotting Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/volume_rendering.html">Volume Rendering: Making 3D Photorealistic Isocontoured Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/hardware_volume_rendering.html">Hardware Volume Rendering on NVidia Graphics cards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/sketchfab.html">3D Surfaces and Sketchfab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/mapserver.html">Mapserver - A Google-Maps-like Interface to your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/streamlines.html">Streamlines: Tracking the Trajectories of Tracers in your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/colormaps/index.html">Colormaps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/writing_fits_images.html">Writing FITS Images</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">General Data Analysis</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="fields.html">Fields in yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_derived_fields.html">Creating Derived Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="objects.html">Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="units/index.html">Symbolic Units</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Filtering your Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="generating_processed_data.html">Generating Processed Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="time_series_analysis.html">Time Series Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="parallel_computation.html">Parallel Computation With yt</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="analysis_modules/index.html">Topic-Specific Analysis Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="analysis_modules/halo_analysis.html">Halo Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="analysis_modules/synthetic_observation.html">Synthetic Observation</a></li>
<li class="toctree-l2"><a class="reference internal" href="analysis_modules/exporting.html">Exporting to External Radiation Transport Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="analysis_modules/two_point_functions.html">Two Point Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="analysis_modules/clump_finding.html">Clump Finding</a></li>
<li class="toctree-l2"><a class="reference internal" href="analysis_modules/particle_trajectories.html">Particle Trajectories</a></li>
<li class="toctree-l2"><a class="reference internal" href="analysis_modules/ellipsoid_analysis.html">Halo Ellipsoid Analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examining/index.html">Loading and Examining Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../examining/loading_data.html">Loading Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examining/generic_array_data.html">Loading Generic Array Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examining/generic_particle_data.html">Loading Generic Particle Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examining/spherical_data.html">Loading Spherical Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examining/low_level_inspection.html">Low-Level Data Inspection: Accessing Raw Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developing/index.html">Developing in yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../developing/intro.html">Getting Involved</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/developing.html">How to Develop yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/building_the_docs.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/debugdrive.html">Debugging yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_datatypes.html">Creating Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_derived_fields.html">Creating Derived Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_derived_quantities.html">Creating Derived Quantities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_frontend.html">Creating A New Code Frontend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/external_analysis.html">Using yt with External Analysis Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference Materials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/code_support.html">Code Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/command-line.html">Command-Line Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/api/api.html">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/configuration.html">Customizing yt: The Configuration and Plugin Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/field_list.html">Field List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/changelog.html">ChangeLog</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#version-installation">Version &amp; Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#code-errors-and-failures">Code Errors and Failures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#units">Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#fields">Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#data-objects">Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#developing">Developing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../help/index.html">Getting Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#don-t-panic-and-don-t-give-up">Don&#8217;t panic and don&#8217;t give up</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#update-to-the-latest-version">Update to the latest version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#search-the-documentation-faq-and-mailing-lists">Search the documentation, FAQ, and mailing lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#look-at-the-source-code">Look at the source code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#isolate-and-document-your-problem">Isolate and document your problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#go-on-irc-to-ask-a-question">Go on IRC to ask a question</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#ask-the-mailing-list">Ask the mailing list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#submit-a-bug-report">Submit a bug report</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#special-issues">Special Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#what-is-yt">What is yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#who-is-yt">Who is yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#history-of-yt">History of yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#how-do-i-contact-yt">How do I contact yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#how-do-i-cite-yt">How do I cite yt?</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Filtering your Dataset</a><ul>
<li><a class="reference internal" href="#filtering-mesh-fields">Filtering Mesh Fields</a><ul>
<li><a class="reference internal" href="#boolean-masks">Boolean Masks</a></li>
<li><a class="reference internal" href="#cut-regions">Cut Regions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#filtering-particle-fields">Filtering Particle Fields</a></li>
<li><a class="reference internal" href="#particle-unions">Particle Unions</a></li>
<li><a class="reference internal" href="#filtering-fields-by-spatial-location-geometric-objects">Filtering Fields by Spatial Location: Geometric Objects</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="filtering-your-dataset">
<span id="filtering-data"></span><h1>Filtering your Dataset<a class="headerlink" href="#filtering-your-dataset" title="Permalink to this headline">¶</a></h1>
<p>Large datasets are oftentimes too overwhelming to deal with in their
entirety, and it can be useful and faster
to analyze subsets of these datasets.  Furthermore, filtering the dataset
based on some field condition can reveal subtle information not easily
accessible by looking at the whole dataset.
Filters can be generated based on spatial position, say in a sphere
in the center of your dataset space, or more generally they can be
defined by the properties of any field in the simulation.</p>
<p>Because <cite>mesh fields</cite> are internally different from <cite>particle fields</cite>,
there are different ways of filtering each type as indicated below;
however, filtering fields by spatial location (i.e. geometric
objects) will apply to both types equally.</p>
<div class="section" id="filtering-mesh-fields">
<span id="filtering-mesh"></span><h2>Filtering Mesh Fields<a class="headerlink" href="#filtering-mesh-fields" title="Permalink to this headline">¶</a></h2>
<p>Mesh fields can be filtered by two methods: cut region objects
(<a class="reference internal" href="../reference/api/generated/yt.data_objects.selection_data_containers.YTCutRegionBase.html#yt.data_objects.selection_data_containers.YTCutRegionBase" title="yt.data_objects.selection_data_containers.YTCutRegionBase"><code class="xref py py-class docutils literal"><span class="pre">YTCutRegionBase</span></code></a>)
and NumPy boolean masks.  Boolean masks are simpler, but they only work
for examining datasets, whereas cut regions objects create wholly new
data objects suitable for full analysis (data examination, image generation,
etc.)</p>
<div class="section" id="boolean-masks">
<h3>Boolean Masks<a class="headerlink" href="#boolean-masks" title="Permalink to this headline">¶</a></h3>
<p>NumPy boolean masks can be used with any NumPy array simply by passing the
array a conditional.  As a general example of this:</p>
<p>Similarly, if you&#8217;ve created a yt data object (e.g. a region, a sphere), you
can examine its field values as a NumPy array by simply indexing it with the
field name.  Thus, it too can be masked using a NumPy boolean mask.  Let&#8217;s
set a simple mask based on the contents of one of our fields.</p>
<p>This was a simple example, but one can make the conditionals that define
a boolean mask have multiple parts, and one can stack masks together to
make very complex cuts on one&#8217;s data.  Once the data is filtered, it can be
used if you simply need to access the NumPy arrays:</p>
</div>
<div class="section" id="cut-regions">
<span id="id1"></span><h3>Cut Regions<a class="headerlink" href="#cut-regions" title="Permalink to this headline">¶</a></h3>
<p>Cut regions are a more general solution to filtering mesh fields.  The output
of a cut region is an entirely new data object, which can be treated like any
other data object to generate images, examine its values, etc.</p>
<p>Cut regions can also operator on particle fields, but a single cut region object
cannot operate on both particle fields and mesh fields at the same time.</p>
</div>
</div>
<div class="section" id="filtering-particle-fields">
<span id="filtering-particles"></span><h2>Filtering Particle Fields<a class="headerlink" href="#filtering-particle-fields" title="Permalink to this headline">¶</a></h2>
<p>Particle filters create new particle fields based on the manipulation and
cuts on existing particle fields.  You can apply cuts to them to effectively
mask out everything except the particles with which you are concerned.</p>
<p>Creating a particle filter takes a few steps.  You must first define a
function which accepts a data object (e.g. all_data, sphere, etc.)
as its argument.  It uses the fields and information in this geometric
object in order to produce some sort of conditional mask that is then returned
to create a new particle type.</p>
<p>Here is a particle filter to create a new <code class="docutils literal"><span class="pre">star</span></code> particle type.  For Enzo
simulations, stars have <code class="docutils literal"><span class="pre">particle_type</span></code> set to 2, so our filter will select
only the particles with <code class="docutils literal"><span class="pre">particle_type</span></code> (i.e.  field = <code class="docutils literal"><span class="pre">('all',</span>
<span class="pre">'particle_type')</span></code> equal to 2.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@yt.particle_filter</span><span class="p">(</span><span class="n">requires</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;particle_type], filtered_type=&#39;all&#39;)</span>
<span class="k">def</span> <span class="nf">stars</span><span class="p">(</span><span class="n">pfilter</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="nb">filter</span> <span class="o">=</span> <span class="n">data</span><span class="p">[(</span><span class="n">pfilter</span><span class="o">.</span><span class="n">filtered_type</span><span class="p">,</span> <span class="s">&quot;particle_type&quot;</span><span class="p">)]</span> <span class="o">==</span> <span class="mi">2</span>
    <span class="k">return</span> <span class="nb">filter</span>
</pre></div>
</div>
<p>The <code class="xref py py-func docutils literal"><span class="pre">particle_filter()</span></code> decorator takes a
few options.  You must specify the names of the particle fields that are
required in order to define the filter &#8212; in this case the <code class="docutils literal"><span class="pre">particle_type</span></code>
field.  Additionally, you must specify the particle type to be filtered &#8212; in
this case we filter all the particle in dataset by specifying the <code class="docutils literal"><span class="pre">all</span></code>
particle type.</p>
<p>In addition, you may specify a name for the newly defined particle type.  If no
name is specified, the name for the particle type will be inferred from the name
of the filter definition &#8212; in this case the inferred name will be <code class="docutils literal"><span class="pre">stars</span></code>.</p>
<p>Lastly, the filter must be applied to our dataset of choice.  Note that this
filter can be added to as many datasets as we wish.  It will only actually
create new filtered fields if the dataset has the required fields, though.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;IsolatedGalaxy/galaxy0030/galaxy0030&#39;</span><span class="p">)</span>
<span class="n">ds</span><span class="o">.</span><span class="n">add_particle_filter</span><span class="p">(</span><span class="s">&#39;stars&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>And that&#8217;s it!  We can now access all of the (&#8216;stars&#8217;, field) fields from
our dataset <code class="docutils literal"><span class="pre">ds</span></code> and treat them as any other particle field.  In addition,
it created some <code class="docutils literal"><span class="pre">deposit</span></code> fields, where the particles were deposited on to
the grid as mesh fields.</p>
<p>As an alternative syntax, you can also define a new particle filter via the
<code class="xref py py-func docutils literal"><span class="pre">add_particle_filter()</span></code> function.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">Stars</span><span class="p">(</span><span class="n">pfilter</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="nb">filter</span> <span class="o">=</span> <span class="n">data</span><span class="p">[(</span><span class="n">pfilter</span><span class="o">.</span><span class="n">filtered_type</span><span class="p">,</span> <span class="s">&quot;particle_type&quot;</span><span class="p">)]</span> <span class="o">==</span> <span class="mi">2</span>
    <span class="k">return</span> <span class="nb">filter</span>

<span class="n">add_particle_filter</span><span class="p">(</span><span class="s">&quot;stars&quot;</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="n">Stars</span><span class="p">,</span> <span class="n">filtered_type</span><span class="o">=</span><span class="s">&#39;all&#39;</span><span class="p">,</span>
                    <span class="n">requires</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;particle_type&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>This is equivalent to our use of the <code class="docutils literal"><span class="pre">particle_filter</span></code> decorator above.  The
choice to use either the <code class="docutils literal"><span class="pre">particle_filter</span></code> decorator or the
<code class="docutils literal"><span class="pre">add_particle_fitler</span></code> function is a purely stylistic choice.</p>
</div>
<div class="section" id="particle-unions">
<span id="id2"></span><h2>Particle Unions<a class="headerlink" href="#particle-unions" title="Permalink to this headline">¶</a></h2>
<p>Multiple types of particles can be combined into a single, conceptual type.  As
an example, the NMSU-ART code has multiple &#8220;species&#8221; of dark matter, which we
union into a single <code class="docutils literal"><span class="pre">darkmatter</span></code> field.  The <code class="docutils literal"><span class="pre">all</span></code> particle type is a
special case of this.</p>
<p>To create a particle union, you need to import the <code class="docutils literal"><span class="pre">ParticleUnion</span></code> class from
<code class="docutils literal"><span class="pre">yt.data_objects.particle_unions</span></code>, which you then create and pass into
<code class="docutils literal"><span class="pre">add_particle_union</span></code> on a dataset object.</p>
<p>Here is an example, where we union the <code class="docutils literal"><span class="pre">halo</span></code> and <code class="docutils literal"><span class="pre">disk</span></code> particle types
into a single type, <code class="docutils literal"><span class="pre">star</span></code>.  yt will then determine which fields are
accessible to this new particle type and it will add them.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">yt.data_objects.particle_unions</span> <span class="kn">import</span> \
    <span class="n">ParticleUnion</span>

<span class="n">u</span> <span class="o">=</span> <span class="n">ParticleUnion</span><span class="p">(</span><span class="s">&quot;star&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;halo&quot;</span><span class="p">,</span> <span class="s">&quot;disk&quot;</span><span class="p">])</span>
<span class="n">ds</span><span class="o">.</span><span class="n">add_particle_union</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="filtering-fields-by-spatial-location-geometric-objects">
<span id="filtering-by-location"></span><h2>Filtering Fields by Spatial Location: Geometric Objects<a class="headerlink" href="#filtering-fields-by-spatial-location-geometric-objects" title="Permalink to this headline">¶</a></h2>
<p>Creating geometric objects for a dataset provides a means for filtering
a field based on spatial location.  The most commonly used of these are
spheres, regions (3D prisms), ellipsoids, disks, and rays.  The <code class="docutils literal"><span class="pre">all_data</span></code>
object which gets used throughout this documentation section is an example of
a geometric object, but it defaults to including all the data in the dataset
volume.  To see all of the geometric objects available, see
<a class="reference internal" href="objects.html#available-objects"><span>Available Objects</span></a>.</p>
<p>Consult the object documentation section for all of the different objects
one can use, but here is a simple example using a sphere object to filter
a dataset.  Let&#8217;s filter out everything not within 10 Mpc of some random
location, say [0.2, 0.5, 0.1], in the simulation volume.  The resulting object
will only contain grid cells with centers falling inside of our defined sphere,
which may look offset based on the presence of different resolution elements
distributed throughout the dataset.</p>
</div>
</div>


    </div>
      
  </div>
</div>
    <div class="footer">
      &copy; Copyright 2013, the yt Project.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>