<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Fields in yt &mdash; The yt Project 3.2-dev documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.4/readable/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.2-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="The yt Project 3.2-dev documentation" href="../index.html" />
    <link rel="up" title="General Data Analysis" href="index.html" />
    <link rel="next" title="Creating Derived Fields" href="../developing/creating_derived_fields.html" />
    <link rel="prev" title="General Data Analysis" href="index.html" />
    
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-391373-2']);
      _gaq.push(['_setDomainName', 'yt-project.org']);
      _gaq.push(['_setAllowHash', false]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/yt_icon.png">
          The yt Project</a>
        <span class="navbar-text navbar-version pull-left"><b>3.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../help/index.html">How to get help</a></li>
                <li><a href="../quickstart/index.html">Quickstart notebooks</a></li>
                <li><a href="../cookbook/index.html">Cookbook</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installing.html">Getting and Installing yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installing.html#getting-yt">Getting yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installing.html#testing-your-installation">Testing Your Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installing.html#switching-between-yt-2-x-and-yt-3-x">Switching between yt-2.x and yt-3.x</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/index.html">yt Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/data_inspection.html">Data Inspection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/simple_visualization.html">Simple Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/data_objects_and_time_series.html">Data Objects and Time Series</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/derived_fields_and_profiles.html">Derived Fields and Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/volume_rendering.html">Volume Rendering</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../yt3differences.html">What&#8217;s New and Different in yt 3.0?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../yt3differences.html#updating-to-yt-3-0-from-old-versions-and-going-back">Updating to yt 3.0 from Old Versions (and going back)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yt3differences.html#converting-old-scripts-to-work-with-yt-3-0">Converting Old Scripts to Work with yt 3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yt3differences.html#cool-new-things">Cool New Things</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yt3differences.html#api-changes">API Changes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cookbook/index.html">The Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cookbook/index.html#getting-the-sample-data">Getting the Sample Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cookbook/index.html#example-scripts">Example Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cookbook/index.html#example-notebooks">Example Notebooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../visualizing/index.html">Visualizing Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/plots.html">How to Make Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/callbacks.html">Plot Modifications: Overplotting Contours, Velocities, Particles, and More</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/manual_plotting.html">Using the Manual Plotting Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/volume_rendering.html">Volume Rendering: Making 3D Photorealistic Isocontoured Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/hardware_volume_rendering.html">Hardware Volume Rendering on NVidia Graphics cards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/sketchfab.html">3D Surfaces and Sketchfab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/mapserver.html">Mapserver - A Google-Maps-like Interface to your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/streamlines.html">Streamlines: Tracking the Trajectories of Tracers in your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/colormaps/index.html">Colormaps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualizing/writing_fits_images.html">Writing FITS Images</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">General Data Analysis</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">Fields in yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_derived_fields.html">Creating Derived Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="objects.html">Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="units/index.html">Symbolic Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="filtering.html">Filtering your Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="generating_processed_data.html">Generating Processed Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="time_series_analysis.html">Time Series Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="parallel_computation.html">Parallel Computation With yt</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="analysis_modules/index.html">Topic-Specific Analysis Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="analysis_modules/halo_analysis.html">Halo Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="analysis_modules/synthetic_observation.html">Synthetic Observation</a></li>
<li class="toctree-l2"><a class="reference internal" href="analysis_modules/exporting.html">Exporting to External Radiation Transport Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="analysis_modules/two_point_functions.html">Two Point Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="analysis_modules/clump_finding.html">Clump Finding</a></li>
<li class="toctree-l2"><a class="reference internal" href="analysis_modules/particle_trajectories.html">Particle Trajectories</a></li>
<li class="toctree-l2"><a class="reference internal" href="analysis_modules/ellipsoid_analysis.html">Halo Ellipsoid Analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examining/index.html">Loading and Examining Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../examining/loading_data.html">Loading Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examining/generic_array_data.html">Loading Generic Array Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examining/generic_particle_data.html">Loading Generic Particle Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examining/spherical_data.html">Loading Spherical Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examining/low_level_inspection.html">Low-Level Data Inspection: Accessing Raw Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developing/index.html">Developing in yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../developing/intro.html">Getting Involved</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/developing.html">How to Develop yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/building_the_docs.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/debugdrive.html">Debugging yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_datatypes.html">Creating Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_derived_fields.html">Creating Derived Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_derived_quantities.html">Creating Derived Quantities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_frontend.html">Creating A New Code Frontend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/external_analysis.html">Using yt with External Analysis Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference Materials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/code_support.html">Code Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/command-line.html">Command-Line Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/api/api.html">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/configuration.html">Customizing yt: The Configuration and Plugin Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/field_list.html">Field List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/changelog.html">ChangeLog</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#version-installation">Version &amp; Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#code-errors-and-failures">Code Errors and Failures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#units">Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#fields">Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#data-objects">Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#developing">Developing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../help/index.html">Getting Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#don-t-panic-and-don-t-give-up">Don&#8217;t panic and don&#8217;t give up</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#update-to-the-latest-version">Update to the latest version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#search-the-documentation-faq-and-mailing-lists">Search the documentation, FAQ, and mailing lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#look-at-the-source-code">Look at the source code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#isolate-and-document-your-problem">Isolate and document your problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#go-on-irc-to-ask-a-question">Go on IRC to ask a question</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#ask-the-mailing-list">Ask the mailing list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#submit-a-bug-report">Submit a bug report</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#special-issues">Special Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#what-is-yt">What is yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#who-is-yt">Who is yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#history-of-yt">History of yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#how-do-i-contact-yt">How do I contact yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#how-do-i-cite-yt">How do I cite yt?</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Fields in yt</a><ul>
<li><a class="reference internal" href="#how-are-fields-implemented">How are fields implemented?</a></li>
<li><a class="reference internal" href="#field-types-known-to-yt">Field types known to yt</a></li>
<li><a class="reference internal" href="#field-plugins">Field Plugins</a></li>
<li><a class="reference internal" href="#what-fields-are-available">What fields are available?</a></li>
<li><a class="reference internal" href="#particle-fields">Particle Fields</a></li>
<li><a class="reference internal" href="#field-parameters">Field Parameters</a></li>
<li><a class="reference internal" href="#gradient-fields">Gradient Fields</a></li>
<li><a class="reference internal" href="#general-particle-fields">General Particle Fields</a></li>
<li><a class="reference internal" href="#deposited-particle-fields">Deposited Particle Fields</a></li>
<li><a class="reference internal" href="#sph-fields">SPH Fields</a></li>
<li><a class="reference internal" href="#computing-the-nth-nearest-neighbor">Computing the Nth Nearest Neighbor</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="fields-in-yt">
<span id="fields"></span><h1>Fields in yt<a class="headerlink" href="#fields-in-yt" title="Permalink to this headline">¶</a></h1>
<p>Fields are spatially-dependent quantities associated with a parent dataset.
Examples of fields are gas density, gas temperature, particle mass, etc.
The fundamental way to query data in yt is to access a field, either in its raw
form (by examining a data container) or a processed form (derived quantities,
projections, and so on).  &#8220;Field&#8221; is something of a loaded word, as it can
refer to quantities that are defined everywhere, which we refer to as &#8220;mesh&#8221; or
&#8220;fluid&#8221; fields, or discrete points that populate the domain, traditionally
thought of as &#8220;particle&#8221; fields.  The word &#8220;particle&#8221; here is gradually falling
out of favor, as these discrete fields can be any type of sparsely populated
data.</p>
<p>In previous versions of yt, there was a single mechanism of accessing fields on
a data container &#8211; by their name, which was mandated to be a single string,
and which often varied between different code frontends.  yt 3.0 allows
for datasets containing multiple different types of fluid fields, mesh fields,
particles (with overlapping or disjoint lists of fields).  To enable accessing
these fields in a meaningful, simple way, the mechanism for accessing them has
changed to take an optional <em>field type</em> in addition to the <em>field name</em> of
the form (&#8216;<em>field type</em>&#8216;, &#8216;<em>field name</em>&#8216;).</p>
<p>As an example, we may be in a situation where have multiple types of particles
which possess the <code class="docutils literal"><span class="pre">particle_position</span></code> field.  In the case where a data
container, here called <code class="docutils literal"><span class="pre">ad</span></code> (short for &#8220;all data&#8221;) contains a field, we can
specify which particular particle type we want to query:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">print</span> <span class="n">ad</span><span class="p">[</span><span class="s">&quot;humans&quot;</span><span class="p">,</span> <span class="s">&quot;particle_position&quot;</span><span class="p">]</span>
<span class="k">print</span> <span class="n">ad</span><span class="p">[</span><span class="s">&quot;dogs&quot;</span><span class="p">,</span> <span class="s">&quot;particle_position&quot;</span><span class="p">]</span>
<span class="k">print</span> <span class="n">ad</span><span class="p">[</span><span class="s">&quot;dinosaurs&quot;</span><span class="p">,</span> <span class="s">&quot;particle_position&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Each of these three fields may have different sizes.  In order to enable
falling back on asking only for a field by the name, yt will use the most
recently requested field type for subsequent queries.  (By default, if no field
has been queried, it will look for the special field <code class="docutils literal"><span class="pre">all</span></code>, which
concatenates all particle types.)  For example, if I were to then query for the
velocity:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">print</span> <span class="n">ad</span><span class="p">[</span><span class="s">&quot;particle_velocity&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>it would select <code class="docutils literal"><span class="pre">dinosaurs</span></code> as the field type.</p>
<p>The same operations work for fluid and mesh fields.  As an example, in some
cosmology simulations, we may want to examine the mass of particles in a region
versus the mass of gas.  We can do so by examining the special &#8220;deposit&#8221; field
types (described below) versus the gas fields:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">print</span> <span class="n">ad</span><span class="p">[</span><span class="s">&quot;deposit&quot;</span><span class="p">,</span> <span class="s">&quot;dark_matter_density&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">ad</span><span class="p">[</span><span class="s">&quot;gas&quot;</span><span class="p">,</span> <span class="s">&quot;density&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">deposit</span></code> field type is a mesh field, so it will have the same shape as
the gas density.  If we weren&#8217;t using <code class="docutils literal"><span class="pre">deposit</span></code>, and instead directly
querying a particle field, this <em>wouldn&#8217;t</em> work, as they are different shapes.
This is the primary difference, in practice, between mesh and particle fields
&#8211; they will be different shapes and so cannot be directly compared without
translating one to the other, typically through a &#8220;deposition&#8221; or &#8220;smoothing&#8221;
step.</p>
<div class="section" id="how-are-fields-implemented">
<h2>How are fields implemented?<a class="headerlink" href="#how-are-fields-implemented" title="Permalink to this headline">¶</a></h2>
<p>There are two classes of fields in yt.  The first are those fields that exist
external to yt, which are immutable and can be queried &#8211; most commonly, these
are fields that exist on disk.  These will often be returned in units that are
not in a known, external unit system (except possibly by design, on the part of
the code that wrote the data), and yt will take every effort possible to use
the names by which they are referred to by the data producer.  The default
field type for mesh fields that are &#8220;on-disk&#8221; is the name of the code frontend.
(For example, <code class="docutils literal"><span class="pre">art</span></code>, <code class="docutils literal"><span class="pre">enzo</span></code>, <code class="docutils literal"><span class="pre">pyne</span></code>, and so on.) The default name for
particle fields, if they do not have a particle type affiliated with them, is
<code class="docutils literal"><span class="pre">io</span></code>.</p>
<p>The second class of field is the &#8220;derived field.&#8221;  These are fields that are
functionally defined, either <em>ab initio</em> or as a transformation or combination
of other fields.  For example, when dealing with simulation codes, often the
fields that are evolved and output to disk are not the fields that are the most
relevant to researchers.  Rather than examining the internal gas energy, it is
more convenient to think of the temperature.  By applying one or multiple
functions to on-disk quantities, yt can construct new derived fields from them.
Derived fields do not always have to relate to the data found on disk; special
fields such as <code class="docutils literal"><span class="pre">x</span></code>, <code class="docutils literal"><span class="pre">y</span></code>, <code class="docutils literal"><span class="pre">phi</span></code> and <code class="docutils literal"><span class="pre">dz</span></code> all relate exclusively to the
geometry of the mesh, and provide information about the mesh that can be used
elsewhere for further transformations.</p>
<p>For more information, see <a class="reference internal" href="../developing/creating_derived_fields.html#creating-derived-fields"><span>Creating Derived Fields</span></a>.</p>
<p>There is a third, borderline class of field in yt, as well.  This is the
&#8220;alias&#8221; type, where a field on disk (for example, (frontend, <code class="docutils literal"><span class="pre">Density</span></code>)) is
aliased into an internal yt-name (for example, (<code class="docutils literal"><span class="pre">gas</span></code>, <code class="docutils literal"><span class="pre">density</span></code>)).  The
aliasing process allows universally-defined derived fields to take advantage of
internal names, and it also provides an easy way to address what units something
should be returned in.  If an aliased field is requested (and aliased fields
will always be lowercase, with underscores separating words) it will be returned
in CGS units (future versions will enable global defaults to be set for MKS and
other unit systems), whereas if the frontend-specific field is requested, it
will not undergo any unit conversions from its natural units.  (This rule is
occasionally violated for fields which are mesh-dependent, specifically particle
masses in some cosmology codes.)</p>
</div>
<div class="section" id="field-types-known-to-yt">
<span id="known-field-types"></span><h2>Field types known to yt<a class="headerlink" href="#field-types-known-to-yt" title="Permalink to this headline">¶</a></h2>
<p>Recall that fields are formally accessed in two parts: (&#8216;<em>field type</em>&#8216;,
&#8216;<em>field name</em>&#8216;).  Here we describe the different field types you will encounter:</p>
<ul class="simple">
<li>frontend-name &#8211; Mesh or fluid fields that exist on-disk default to having
the name of the frontend as their type name (e.g., <code class="docutils literal"><span class="pre">enzo</span></code>, <code class="docutils literal"><span class="pre">flash</span></code>,
<code class="docutils literal"><span class="pre">pyne</span></code> and so on).  The units of these types are whatever units are
designated by the source frontend when it writes the data.</li>
<li><code class="docutils literal"><span class="pre">index</span></code> &#8211; This field type refers to characteristics of the mesh, whether
that mesh is defined by the simulation or internally by an octree indexing
of particle data.  A few handy fields are <code class="docutils literal"><span class="pre">x</span></code>, <code class="docutils literal"><span class="pre">y</span></code>, <code class="docutils literal"><span class="pre">z</span></code>, <code class="docutils literal"><span class="pre">theta</span></code>,
<code class="docutils literal"><span class="pre">phi</span></code>, <code class="docutils literal"><span class="pre">radius</span></code>, <code class="docutils literal"><span class="pre">dx</span></code>, <code class="docutils literal"><span class="pre">dy</span></code>, <code class="docutils literal"><span class="pre">dz</span></code> and so on.  Default units
are in CGS.</li>
<li><code class="docutils literal"><span class="pre">gas</span></code> &#8211; This is the usual default for simulation frontends for fluid
types.  These fields are typically aliased to the frontend-specific mesh
fields for grid-based codes or to the deposit fields for particle-based
codes.  Default units are in CGS.</li>
<li>particle type &#8211; These are particle fields that exist on-disk as written
by individual frontends.  If the frontend designates names for these particles
(i.e. particle type) those names are the field types.
Additionally, any particle unions or filters will be accessible as field
types.  Examples of particle types are <code class="docutils literal"><span class="pre">Stars</span></code>, <code class="docutils literal"><span class="pre">DM</span></code>, <code class="docutils literal"><span class="pre">io</span></code>, etc.
Like the front-end specific mesh or fluid fields, the units of these fields
are whatever was designated by the source frontend when written to disk.</li>
<li><code class="docutils literal"><span class="pre">io</span></code> &#8211; If a data frontend does not have a set of multiple particle types,
this is the default for all particles.</li>
<li><code class="docutils literal"><span class="pre">all</span></code> &#8211; This is a special particle field type that represents a
concatenation of all particle field types using <a class="reference internal" href="filtering.html#particle-unions"><span>Particle Unions</span></a>.</li>
<li><code class="docutils literal"><span class="pre">deposit</span></code> &#8211; This field type refers to the deposition of particles
(discrete data) onto a mesh, typically to compute smoothing kernels, local
density estimates, counts, and the like.  See <a class="reference internal" href="#deposited-particle-fields"><span>Deposited Particle Fields</span></a>
for more information.</li>
</ul>
<p>While it is best to be explicit access fields by their full names
(i.e. (&#8216;<em>field type</em>&#8216;, &#8216;<em>field name</em>&#8216;)), yt provides an abbreviated
interface for accessing common fields (i.e. &#8216;<em>field name</em>&#8216;).  In the abbreviated
case, yt will assume you want the last <em>field type</em> accessed.  If you
haven&#8217;t previously accessed a <em>field type</em>, it will default to <em>field type</em> =
<code class="docutils literal"><span class="pre">'all'</span></code> in the case of particle fields and <em>field type</em> = <code class="docutils literal"><span class="pre">'gas'</span></code> in the
case of mesh fields.</p>
</div>
<div class="section" id="field-plugins">
<h2>Field Plugins<a class="headerlink" href="#field-plugins" title="Permalink to this headline">¶</a></h2>
<p>Derived fields are organized via plugins.  Inside yt are a number of field
plugins, which take information about fields in a dataset and then construct
derived fields on top of them.  This allows them to take into account
variations in naming system, units, data representations, and most importantly,
allows only the fields that are relevant to be added.  This system will be
expanded in future versions to enable much deeper semantic awareness of the
data types being analyzed by yt.</p>
<p>The field plugin system works in this order:</p>
<blockquote>
<div><ul class="simple">
<li>Available, inherent fields are identified by yt</li>
<li>The list of enabled field plugins is iterated over.  Each is called, and new
derived fields are added as relevant.</li>
<li>Any fields which are not available, or which throw errors, are discarded.</li>
<li>Remaining fields are added to the list of derived fields available for a
dataset</li>
<li>Dependencies for every derived field are identified, to enable data
preloading</li>
</ul>
</div></blockquote>
<p>Field plugins can be loaded dynamically, although at present this is not
particularly useful.  Plans for extending field plugins to dynamically load, to
enable simple definition of common types (gradient, divergence, etc), and to
more verbosely describe available fields, have been put in place for future
versions.</p>
<p>The field plugins currently available include:</p>
<blockquote>
<div><ul class="simple">
<li>Angular momentum fields for particles and fluids</li>
<li>Astrophysical fields, such as those related to cosmology</li>
<li>Vector fields for fluid fields, such as gradients and divergences</li>
<li>Particle vector fields</li>
<li>Magnetic field-related fields</li>
<li>Species fields, such as for chemistry species (yt can recognize the entire
periodic table in field names and construct ionization fields as need be)</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="what-fields-are-available">
<h2>What fields are available?<a class="headerlink" href="#what-fields-are-available" title="Permalink to this headline">¶</a></h2>
<p>We provide a full list of fields that yt recognizes by default at
<a class="reference internal" href="../reference/field_list.html#field-list"><span>Field List</span></a>.  If you want to create additional custom derived fields,
see <a class="reference internal" href="../developing/creating_derived_fields.html#creating-derived-fields"><span>Creating Derived Fields</span></a>.</p>
<p>The full list of fields available for a dataset can be found as
the attribute <code class="docutils literal"><span class="pre">field_list</span></code> for native, on-disk fields and <code class="docutils literal"><span class="pre">derived_field_list</span></code>
for derived fields (<code class="docutils literal"><span class="pre">derived_field_list</span></code> is a superset of <code class="docutils literal"><span class="pre">field_list</span></code>).
You can view these lists by examining a dataset like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;my_data&quot;</span><span class="p">)</span>
<span class="k">print</span> <span class="n">ds</span><span class="o">.</span><span class="n">field_list</span>
<span class="k">print</span> <span class="n">ds</span><span class="o">.</span><span class="n">derived_field_list</span>
</pre></div>
</div>
<p>By using the <code class="docutils literal"><span class="pre">field_info()</span></code> class, one can access information about a given
field, like its default units or the source code for it.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;my_data&quot;</span><span class="p">)</span>
<span class="n">ds</span><span class="o">.</span><span class="n">index</span>
<span class="k">print</span> <span class="n">ds</span><span class="o">.</span><span class="n">field_info</span><span class="p">[</span><span class="s">&quot;gas&quot;</span><span class="p">,</span> <span class="s">&quot;pressure&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get_units</span><span class="p">()</span>
<span class="k">print</span> <span class="n">ds</span><span class="o">.</span><span class="n">field_info</span><span class="p">[</span><span class="s">&quot;gas&quot;</span><span class="p">,</span> <span class="s">&quot;pressure&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get_source</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="particle-fields">
<h2>Particle Fields<a class="headerlink" href="#particle-fields" title="Permalink to this headline">¶</a></h2>
<p>Naturally, particle fields contain properties of particles rather than
grid cells.  By examining the particle field in detail, you can see that
each element of the field array represents a single particle, whereas in mesh
fields each element represents a single mesh cell.  This means that for the
most part, operations cannot operate on both particle fields and mesh fields
simultaneously in the same way, like filters (see <a class="reference internal" href="filtering.html#filtering-data"><span>Filtering your Dataset</span></a>).
However, many of the particle fields have corresponding mesh fields that
can be populated by &#8220;depositing&#8221; the particle values onto a yt grid as
described below.</p>
</div>
<div class="section" id="field-parameters">
<span id="id1"></span><h2>Field Parameters<a class="headerlink" href="#field-parameters" title="Permalink to this headline">¶</a></h2>
<p>Certain fields require external information in order to be calculated.  For
example, the radius field has to be defined based on some point of reference
and the radial velocity field needs to know the bulk velocity of the data object
so that it can be subtracted.  This information is passed into a field function
by setting field parameters, which are user-specified data that can be associated
with a data object.  The
<a class="reference internal" href="../reference/api/generated/yt.data_objects.data_containers.YTDataContainer.set_field_parameter.html#yt.data_objects.data_containers.YTDataContainer.set_field_parameter" title="yt.data_objects.data_containers.YTDataContainer.set_field_parameter"><code class="xref py py-meth docutils literal"><span class="pre">set_field_parameter()</span></code></a>
and
<a class="reference internal" href="../reference/api/generated/yt.data_objects.data_containers.YTDataContainer.get_field_parameter.html#yt.data_objects.data_containers.YTDataContainer.get_field_parameter" title="yt.data_objects.data_containers.YTDataContainer.get_field_parameter"><code class="xref py py-meth docutils literal"><span class="pre">get_field_parameter()</span></code></a>
functions are
used to set and retrieve field parameter values for a given data object.  In the
cases above, the field parameters are <code class="docutils literal"><span class="pre">center</span></code> and <code class="docutils literal"><span class="pre">bulk_velocity</span></code> respectively &#8211;
the two most commonly used field parameters.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;my_data&quot;</span><span class="p">)</span>
<span class="n">ad</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">all_data</span><span class="p">()</span>

<span class="n">ad</span><span class="o">.</span><span class="n">set_field_parameter</span><span class="p">(</span><span class="s">&quot;wickets&quot;</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>

<span class="k">print</span> <span class="n">ad</span><span class="o">.</span><span class="n">get_field_parameter</span><span class="p">(</span><span class="s">&quot;wickets&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If a field parameter is not set, <code class="docutils literal"><span class="pre">get_field_parameter</span></code> will return None.
Within a field function, these can then be retrieved and used in the same way.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">_wicket_density</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="n">n_wickets</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get_field_parameter</span><span class="p">(</span><span class="s">&quot;wickets&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n_wickets</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c"># use a default if unset</span>
        <span class="n">n_wickets</span> <span class="o">=</span> <span class="mi">88</span>
    <span class="k">return</span> <span class="n">data</span><span class="p">[</span><span class="s">&quot;gas&quot;</span><span class="p">,</span> <span class="s">&quot;density&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">n_wickets</span>
</pre></div>
</div>
<p>For a practical application of this, see <a class="reference internal" href="../cookbook/calculating_information.html#cookbook-radial-velocity"><span>Radial Velocity Profile</span></a>.</p>
</div>
<div class="section" id="gradient-fields">
<h2>Gradient Fields<a class="headerlink" href="#gradient-fields" title="Permalink to this headline">¶</a></h2>
<p>yt provides a way to compute gradients of spatial fields using the
<code class="xref py py-meth docutils literal"><span class="pre">add_gradient_fields()</span></code>
method. If you have a spatially-based field such as density or temperature,
and want to calculate the gradient of that field, you can do it like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;GasSloshing/sloshing_nomag2_hdf5_plt_cnt_0150&quot;</span><span class="p">)</span>
<span class="n">grad_fields</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">add_gradient_fields</span><span class="p">((</span><span class="s">&quot;gas&quot;</span><span class="p">,</span><span class="s">&quot;temperature&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>where the <code class="docutils literal"><span class="pre">grad_fields</span></code> list will now have a list of new field names that can be used
in calculations, representing the 3 different components of the field and the magnitude
of the gradient, e.g., <code class="docutils literal"><span class="pre">&quot;temperature_gradient_x&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;temperature_gradient_y&quot;</span></code>,
<code class="docutils literal"><span class="pre">&quot;temperature_gradient_z&quot;</span></code>, and <code class="docutils literal"><span class="pre">&quot;temperature_gradient_magnitude&quot;</span></code>. To see an example
of how to create and use these fields, see <a class="reference internal" href="../cookbook/calculating_information.html#cookbook-complicated-derived-fields"><span>Complicated Derived Fields</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal"><span class="pre">add_gradient_fields</span></code> currently only supports Cartesian geometries!</p>
</div>
</div>
<div class="section" id="general-particle-fields">
<h2>General Particle Fields<a class="headerlink" href="#general-particle-fields" title="Permalink to this headline">¶</a></h2>
<p>Every particle will contain both a <code class="docutils literal"><span class="pre">particle_position</span></code> and <code class="docutils literal"><span class="pre">particle_velocity</span></code>
that tracks the position and velocity (respectively) in code units.</p>
</div>
<div class="section" id="deposited-particle-fields">
<span id="id2"></span><h2>Deposited Particle Fields<a class="headerlink" href="#deposited-particle-fields" title="Permalink to this headline">¶</a></h2>
<p>In order to turn particle (discrete) fields into fields that are deposited in
some regular, space-filling way (even if that space is empty, it is defined
everywhere) yt provides mechanisms for depositing particles onto a mesh.  These
are in the special field-type space <code class="docutils literal"><span class="pre">deposit</span></code>, and are typically of the form
<code class="docutils literal"><span class="pre">(&quot;deposit&quot;,</span> <span class="pre">&quot;particletype_depositiontype&quot;)</span></code> where <code class="docutils literal"><span class="pre">depositiontype</span></code> is the
mechanism by which the field is deposited, and <code class="docutils literal"><span class="pre">particletype</span></code> is the particle
type of the particles being deposited.  If you are attempting to examine the
cloud-in-cell (<code class="docutils literal"><span class="pre">cic</span></code>) deposition of the <code class="docutils literal"><span class="pre">all</span></code> particle type, you would
access the field <code class="docutils literal"><span class="pre">(&quot;deposit&quot;,</span> <span class="pre">&quot;all_cic&quot;)</span></code>.</p>
<p>yt defines a few particular types of deposition internally, and creating new
ones can be done by modifying the files <code class="docutils literal"><span class="pre">yt/geometry/particle_deposit.pyx</span></code>
and <code class="docutils literal"><span class="pre">yt/fields/particle_fields.py</span></code>, although that is an advanced topic
somewhat outside the scope of this section.  The default deposition types
available are:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">count</span></code> - this field counts the total number of particles of a given type
in a given mesh zone.  Note that because, in general, the mesh for particle
datasets is defined by the number of particles in a region, this may not be
the most useful metric.  This may be made more useful by depositing particle
data onto an <a class="reference internal" href="objects.html#arbitrary-grid"><span>Arbitrary Grids Objects for Particle Deposition</span></a>.</li>
<li><code class="docutils literal"><span class="pre">density</span></code> - this field takes the total sum of <code class="docutils literal"><span class="pre">particle_mass</span></code> in a given
mesh field and divides by the volume.</li>
<li><code class="docutils literal"><span class="pre">mass</span></code> - this field takes the total sum of <code class="docutils literal"><span class="pre">particle_mass</span></code> in each mesh
zone.</li>
<li><code class="docutils literal"><span class="pre">cic</span></code> - this field performs cloud-in-cell interpolation (see <a class="reference external" href="http://ta.twi.tudelft.nl/dv/users/Lemmens/MThesis.TTH/chapter4.html">Section 2.2</a> for more
information) of the density of particles in a given mesh zone.</li>
<li><code class="docutils literal"><span class="pre">smoothed</span></code> - this is a special deposition type.  See discussion below for
more information, in <a class="reference internal" href="#sph-fields"><span>SPH Fields</span></a>.</li>
</ul>
</div>
<div class="section" id="sph-fields">
<span id="id3"></span><h2>SPH Fields<a class="headerlink" href="#sph-fields" title="Permalink to this headline">¶</a></h2>
<p>For gas particles from SPH simulations, each particle will typically carry
a field for the smoothing length <code class="docutils literal"><span class="pre">h</span></code>, which is roughly equivalent to
<code class="docutils literal"><span class="pre">(m/\rho)^{1/3}</span></code>, where <code class="docutils literal"><span class="pre">m</span></code> and <code class="docutils literal"><span class="pre">rho</span></code> are the particle mass and density
respectively.  This can be useful for doing neighbour finding.</p>
<p>As a note, SPH fields are special cases of the &#8220;deposited&#8221; particle fields.
They contain an additional piece of information about what is being examined,
and any fields that are recognized as being identical to intrinsic yt fields
will be aliased.  For example, in a Gadget dataset, the smoothed density of
<code class="docutils literal"><span class="pre">Gas</span></code> particles will be aliased to the mesh field <code class="docutils literal"><span class="pre">(&quot;gas&quot;,</span> <span class="pre">&quot;density&quot;)</span></code> so
that operations conducted on the mesh field <code class="docutils literal"><span class="pre">density</span></code> (which are frequent
occurrences) will operate on the smoothed gas density from the SPH particles.</p>
<p>The special deposition types based on smoothing (<code class="docutils literal"><span class="pre">smoothed</span></code>) are defined in
the file <code class="docutils literal"><span class="pre">yt/geometry/particle_smooth.pyx</span></code>, and they require non-local
operations defined on a variable number of neighbors.  The default smoothing
type utilizes a cubic spline kernel and uses 64 nearest neighbors, providing a
volume-normalized smoothing.  Other types are possible, and yt provides
functionality for many different types of non-local correlation between
particles.  (For instance, a friends-of-friends grouper has been built on this
same infrastructure.)</p>
<p>Every particle field on a smoothed particle type is the source for a smoothed
field; this is not always useful, but it errs on the side of extra fields,
rather than too few fields.  (For instance, it may be unlikely that the
smoothed angular momentum field will be useful.)  The naming scheme is an
extension of the scheme described in <a class="reference internal" href="#deposited-particle-fields"><span>Deposited Particle Fields</span></a>, and is
defined as such: <code class="docutils literal"><span class="pre">(&quot;deposit&quot;,</span> <span class="pre">&quot;particletype_smoothed_fieldname&quot;)</span></code>, where
<code class="docutils literal"><span class="pre">fieldname</span></code> is the name of the field being smoothed.  For example, smoothed
<code class="docutils literal"><span class="pre">Temperature</span></code> of the <code class="docutils literal"><span class="pre">Gas</span></code> particle type would be <code class="docutils literal"><span class="pre">(&quot;deposit&quot;,</span>
<span class="pre">&quot;Gas_smoothed_Temperature&quot;)</span></code>, which in most cases would be aliased to the
field <code class="docutils literal"><span class="pre">(&quot;gas&quot;,</span> <span class="pre">&quot;temperature&quot;)</span></code> for convenience.</p>
</div>
<div class="section" id="computing-the-nth-nearest-neighbor">
<h2>Computing the Nth Nearest Neighbor<a class="headerlink" href="#computing-the-nth-nearest-neighbor" title="Permalink to this headline">¶</a></h2>
<p>One particularly useful field that can be created is that of the distance to
the Nth-nearest neighbor.  This field can then be used as input to smoothing
operations, in the case when a particular particle type does not have an
associated smoothing length or other length estimate.</p>
<p>yt defines this field as a plugin, and it can be added like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="kn">from</span> <span class="nn">yt.fields.particle_fields</span> <span class="kn">import</span> \
  <span class="n">add_nearest_neighbor_field</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;snapshot_033/snap_033.0.hdf5&quot;</span><span class="p">)</span>
<span class="n">fn</span><span class="p">,</span> <span class="o">=</span> <span class="n">add_nearest_neighbor_field</span><span class="p">(</span><span class="s">&quot;all&quot;</span><span class="p">,</span> <span class="s">&quot;particle_position&quot;</span><span class="p">,</span> <span class="n">ds</span><span class="p">)</span>

<span class="n">dd</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">all_data</span><span class="p">()</span>
<span class="k">print</span> <span class="n">dd</span><span class="p">[</span><span class="n">fn</span><span class="p">]</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal"><span class="pre">fn</span></code> here is the &#8220;field name&#8221; that yt adds.  It will be of the form
<code class="docutils literal"><span class="pre">(ptype,</span> <span class="pre">nearest_neighbor_distance_NN)</span></code> where <code class="docutils literal"><span class="pre">NN</span></code> is the integer.  By
default this is 64, but it can be supplied as the final argument to
<code class="docutils literal"><span class="pre">add_nearest_neighbor_field</span></code>.  For the example above, it would be
<code class="docutils literal"><span class="pre">nearest_neighbor_64</span></code>.</p>
<p>This can then be used as input to the function
<code class="docutils literal"><span class="pre">add_volume_weighted_smoothed_field</span></code>, which can enable smoothing particle
types that would normally not be smoothed.</p>
</div>
</div>


    </div>
      
  </div>
</div>
    <div class="footer">
      &copy; Copyright 2013, the yt Project.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>