<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>sympy.core.assumptions &mdash; The yt Project 3.2-dev documentation</title>
    
    <link rel="stylesheet" href="../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootswatch-3.3.4/readable/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '3.2-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="The yt Project 3.2-dev documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" />
    
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-391373-2']);
      _gaq.push(['_setDomainName', 'yt-project.org']);
      _gaq.push(['_setAllowHash', false]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../index.html"><img src="../../../_static/yt_icon.png">
          The yt Project</a>
        <span class="navbar-text navbar-version pull-left"><b>3.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../../../help/index.html">How to get help</a></li>
                <li><a href="../../../quickstart/index.html">Quickstart notebooks</a></li>
                <li><a href="../../../cookbook/index.html">Cookbook</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../../installing.html">Getting and Installing yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../installing.html#getting-yt">Getting yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installing.html#testing-your-installation">Testing Your Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installing.html#switching-between-yt-2-x-and-yt-3-x">Switching between yt-2.x and yt-3.x</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart/index.html">yt Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart/data_inspection.html">Data Inspection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart/simple_visualization.html">Simple Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart/data_objects_and_time_series.html">Data Objects and Time Series</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart/derived_fields_and_profiles.html">Derived Fields and Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart/volume_rendering.html">Volume Rendering</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../yt3differences.html">What&#8217;s New and Different in yt 3.0?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../yt3differences.html#updating-to-yt-3-0-from-old-versions-and-going-back">Updating to yt 3.0 from Old Versions (and going back)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../yt3differences.html#converting-old-scripts-to-work-with-yt-3-0">Converting Old Scripts to Work with yt 3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../yt3differences.html#cool-new-things">Cool New Things</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../yt3differences.html#api-changes">API Changes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../cookbook/index.html">The Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../cookbook/index.html#getting-the-sample-data">Getting the Sample Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cookbook/index.html#example-scripts">Example Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cookbook/index.html#example-notebooks">Example Notebooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../visualizing/index.html">Visualizing Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../visualizing/plots.html">How to Make Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../visualizing/callbacks.html">Plot Modifications: Overplotting Contours, Velocities, Particles, and More</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../visualizing/manual_plotting.html">Using the Manual Plotting Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../visualizing/volume_rendering.html">Volume Rendering: Making 3D Photorealistic Isocontoured Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../visualizing/hardware_volume_rendering.html">Hardware Volume Rendering on NVidia Graphics cards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../visualizing/sketchfab.html">3D Surfaces and Sketchfab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../visualizing/mapserver.html">Mapserver - A Google-Maps-like Interface to your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../visualizing/streamlines.html">Streamlines: Tracking the Trajectories of Tracers in your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../visualizing/colormaps/index.html">Colormaps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../visualizing/writing_fits_images.html">Writing FITS Images</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../analyzing/index.html">General Data Analysis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/fields.html">Fields in yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/creating_derived_fields.html">Creating Derived Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/objects.html">Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/units/index.html">Symbolic Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/filtering.html">Filtering your Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/generating_processed_data.html">Generating Processed Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/time_series_analysis.html">Time Series Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/parallel_computation.html">Parallel Computation With yt</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../analyzing/analysis_modules/index.html">Topic-Specific Analysis Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/analysis_modules/halo_analysis.html">Halo Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/analysis_modules/synthetic_observation.html">Synthetic Observation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/analysis_modules/exporting.html">Exporting to External Radiation Transport Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/analysis_modules/two_point_functions.html">Two Point Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/analysis_modules/clump_finding.html">Clump Finding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/analysis_modules/particle_trajectories.html">Particle Trajectories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/analysis_modules/ellipsoid_analysis.html">Halo Ellipsoid Analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../examining/index.html">Loading and Examining Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../examining/loading_data.html">Loading Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../examining/generic_array_data.html">Loading Generic Array Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../examining/generic_particle_data.html">Loading Generic Particle Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../examining/spherical_data.html">Loading Spherical Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../examining/low_level_inspection.html">Low-Level Data Inspection: Accessing Raw Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../developing/index.html">Developing in yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/intro.html">Getting Involved</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/developing.html">How to Develop yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/building_the_docs.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/debugdrive.html">Debugging yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/creating_datatypes.html">Creating Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/creating_derived_fields.html">Creating Derived Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/creating_derived_quantities.html">Creating Derived Quantities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/creating_frontend.html">Creating A New Code Frontend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/external_analysis.html">Using yt with External Analysis Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/index.html">Reference Materials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/code_support.html">Code Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/command-line.html">Command-Line Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/api/api.html">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/configuration.html">Customizing yt: The Configuration and Plugin Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/field_list.html">Field List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/changelog.html">ChangeLog</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/index.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../faq/index.html#version-installation">Version &amp; Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../faq/index.html#code-errors-and-failures">Code Errors and Failures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../faq/index.html#units">Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../faq/index.html#fields">Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../faq/index.html#data-objects">Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../faq/index.html#developing">Developing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../faq/index.html#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../help/index.html">Getting Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../help/index.html#don-t-panic-and-don-t-give-up">Don&#8217;t panic and don&#8217;t give up</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../help/index.html#update-to-the-latest-version">Update to the latest version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../help/index.html#search-the-documentation-faq-and-mailing-lists">Search the documentation, FAQ, and mailing lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../help/index.html#look-at-the-source-code">Look at the source code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../help/index.html#isolate-and-document-your-problem">Isolate and document your problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../help/index.html#go-on-irc-to-ask-a-question">Go on IRC to ask a question</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../help/index.html#ask-the-mailing-list">Ask the mailing list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../help/index.html#submit-a-bug-report">Submit a bug report</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../help/index.html#special-issues">Special Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../about/index.html">About yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../about/index.html#what-is-yt">What is yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about/index.html#who-is-yt">Who is yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about/index.html#history-of-yt">History of yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about/index.html#how-do-i-contact-yt">How do I contact yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about/index.html#how-do-i-cite-yt">How do I cite yt?</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"></ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <h1>Source code for sympy.core.assumptions</h1><div class="highlight"><pre>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This module contains the machinery handling assumptions.</span>

<span class="sd">All symbolic objects have assumption attributes that can be accessed via</span>
<span class="sd">.is_&lt;assumption name&gt; attribute.</span>

<span class="sd">Assumptions determine certain properties of symbolic objects. Assumptions</span>
<span class="sd">can have 3 possible values: True, False, None.  None is returned when it is</span>
<span class="sd">impossible to say something about the property. For example, a generic Symbol</span>
<span class="sd">is not known beforehand to be positive.</span>

<span class="sd">By default, all symbolic values are in the largest set in the given context</span>
<span class="sd">without specifying the property. For example, a symbol that has a property</span>
<span class="sd">being integer, is also real, complex, etc.</span>

<span class="sd">Here follows a list of possible assumption names:</span>

<span class="sd">.. glossary::</span>

<span class="sd">    commutative</span>
<span class="sd">        object commutes with any other object with</span>
<span class="sd">        respect to multiplication operation.</span>

<span class="sd">    complex</span>
<span class="sd">        object can have only values from the set</span>
<span class="sd">        of complex numbers.</span>

<span class="sd">    imaginary</span>
<span class="sd">        object value is a number that can be written as a real</span>
<span class="sd">        number multiplied by the imaginary unit ``I``.  See</span>
<span class="sd">        [3]_.  Please note, that ``0`` is not considered to be an</span>
<span class="sd">        imaginary number, see</span>
<span class="sd">        `issue #7649 &lt;https://github.com/sympy/sympy/issues/7649&gt;`_.</span>

<span class="sd">    real</span>
<span class="sd">        object can have only values from the set</span>
<span class="sd">        of real numbers.</span>

<span class="sd">    integer</span>
<span class="sd">        object can have only values from the set</span>
<span class="sd">        of integers.</span>

<span class="sd">    odd</span>
<span class="sd">    even</span>
<span class="sd">        object can have only values from the set of</span>
<span class="sd">        odd (even) integers [2]_.</span>

<span class="sd">    prime</span>
<span class="sd">        object is a natural number greater than ``1`` that has</span>
<span class="sd">        no positive divisors other than ``1`` and itself.  See [6]_.</span>

<span class="sd">    composite</span>
<span class="sd">        object is a positive integer that has at least one positive</span>
<span class="sd">        divisor other than ``1`` or the number itself.  See [4]_.</span>

<span class="sd">    zero</span>
<span class="sd">    nonzero</span>
<span class="sd">        object is zero (not zero).</span>

<span class="sd">    rational</span>
<span class="sd">        object can have only values from the set</span>
<span class="sd">        of rationals.</span>

<span class="sd">    algebraic</span>
<span class="sd">        object can have only values from the set</span>
<span class="sd">        of algebraic numbers [11]_.</span>

<span class="sd">    transcendental</span>
<span class="sd">        object can have only values from the set</span>
<span class="sd">        of transcendental numbers [10]_.</span>

<span class="sd">    irrational</span>
<span class="sd">        object value cannot be represented exactly by Rational, see [5]_.</span>

<span class="sd">    finite</span>
<span class="sd">    infinite</span>
<span class="sd">        object absolute value is bounded (is value is</span>
<span class="sd">        arbitrarily large).  See [7]_, [8]_, [9]_.</span>

<span class="sd">    negative</span>
<span class="sd">    nonnegative</span>
<span class="sd">        object can have only negative (only</span>
<span class="sd">        nonnegative) values [1]_.</span>

<span class="sd">    positive</span>
<span class="sd">    nonpositive</span>
<span class="sd">        object can have only positive (only</span>
<span class="sd">        nonpositive) values.</span>

<span class="sd">    hermitian</span>
<span class="sd">    antihermitian</span>
<span class="sd">        object belongs to the field of hermitian</span>
<span class="sd">        (antihermitian) operators.</span>

<span class="sd">Examples</span>
<span class="sd">========</span>

<span class="sd">    &gt;&gt;&gt; from sympy import Symbol</span>
<span class="sd">    &gt;&gt;&gt; x = Symbol(&#39;x&#39;, real = True); x</span>
<span class="sd">    x</span>
<span class="sd">    &gt;&gt;&gt; x.is_real</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; x.is_complex</span>
<span class="sd">    True</span>

<span class="sd">See Also</span>
<span class="sd">========</span>

<span class="sd">.. seealso::</span>

<span class="sd">    :py:class:`sympy.core.numbers.ImaginaryUnit`</span>
<span class="sd">    :py:class:`sympy.core.numbers.Zero`</span>
<span class="sd">    :py:class:`sympy.core.numbers.One`</span>

<span class="sd">Notes</span>
<span class="sd">=====</span>

<span class="sd">Assumption values are stored in obj._assumptions dictionary or</span>
<span class="sd">are returned by getter methods (with property decorators) or are</span>
<span class="sd">attributes of objects/classes.</span>


<span class="sd">References</span>
<span class="sd">==========</span>

<span class="sd">.. [1] http://en.wikipedia.org/wiki/Negative_number</span>
<span class="sd">.. [2] http://en.wikipedia.org/wiki/Parity_%28mathematics%29</span>
<span class="sd">.. [3] http://en.wikipedia.org/wiki/Imaginary_number</span>
<span class="sd">.. [4] http://en.wikipedia.org/wiki/Composite_number</span>
<span class="sd">.. [5] http://en.wikipedia.org/wiki/Irrational_number</span>
<span class="sd">.. [6] http://en.wikipedia.org/wiki/Prime_number</span>
<span class="sd">.. [7] http://en.wikipedia.org/wiki/Finite</span>
<span class="sd">.. [8] https://docs.python.org/3/library/math.html#math.isfinite</span>
<span class="sd">.. [9] http://docs.scipy.org/doc/numpy/reference/generated/numpy.isfinite.html</span>
<span class="sd">.. [10] http://en.wikipedia.org/wiki/Transcendental_number</span>
<span class="sd">.. [11] http://en.wikipedia.org/wiki/Algebraic_number</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span><span class="p">,</span> <span class="n">division</span>

<span class="kn">from</span> <span class="nn">sympy.core.facts</span> <span class="kn">import</span> <span class="n">FactRules</span><span class="p">,</span> <span class="n">FactKB</span>
<span class="kn">from</span> <span class="nn">sympy.core.core</span> <span class="kn">import</span> <span class="n">BasicMeta</span>
<span class="kn">from</span> <span class="nn">sympy.core.compatibility</span> <span class="kn">import</span> <span class="n">integer_types</span><span class="p">,</span> <span class="n">with_metaclass</span>

<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">shuffle</span>


<span class="n">_assume_rules</span> <span class="o">=</span> <span class="n">FactRules</span><span class="p">([</span>

    <span class="s">&#39;integer        -&gt;  rational&#39;</span><span class="p">,</span>
    <span class="s">&#39;rational       -&gt;  real&#39;</span><span class="p">,</span>
    <span class="s">&#39;rational       -&gt;  algebraic&#39;</span><span class="p">,</span>
    <span class="s">&#39;algebraic      -&gt;  complex&#39;</span><span class="p">,</span>
    <span class="s">&#39;real           -&gt;  complex&#39;</span><span class="p">,</span>
    <span class="s">&#39;real           -&gt;  hermitian&#39;</span><span class="p">,</span>
    <span class="s">&#39;imaginary      -&gt;  complex&#39;</span><span class="p">,</span>
    <span class="s">&#39;imaginary      -&gt;  antihermitian&#39;</span><span class="p">,</span>
    <span class="s">&#39;complex        -&gt;  commutative&#39;</span><span class="p">,</span>

    <span class="s">&#39;odd            ==  integer &amp; !even&#39;</span><span class="p">,</span>
    <span class="s">&#39;even           ==  integer &amp; !odd&#39;</span><span class="p">,</span>

    <span class="s">&#39;real           ==  negative | zero | positive&#39;</span><span class="p">,</span>
    <span class="s">&#39;transcendental ==  complex &amp; !algebraic&#39;</span><span class="p">,</span>

    <span class="s">&#39;negative       ==  nonpositive &amp; nonzero&#39;</span><span class="p">,</span>
    <span class="s">&#39;positive       ==  nonnegative &amp; nonzero&#39;</span><span class="p">,</span>
    <span class="s">&#39;zero           ==  nonnegative &amp; nonpositive&#39;</span><span class="p">,</span>

    <span class="s">&#39;nonpositive    ==  real &amp; !positive&#39;</span><span class="p">,</span>
    <span class="s">&#39;nonnegative    ==  real &amp; !negative&#39;</span><span class="p">,</span>

    <span class="s">&#39;zero           -&gt;  even &amp; finite&#39;</span><span class="p">,</span>

    <span class="s">&#39;prime          -&gt;  integer &amp; positive&#39;</span><span class="p">,</span>
    <span class="s">&#39;composite      ==  integer &amp; positive &amp; !prime&#39;</span><span class="p">,</span>

    <span class="s">&#39;irrational     ==  real &amp; !rational&#39;</span><span class="p">,</span>

    <span class="s">&#39;imaginary      -&gt;  !real&#39;</span><span class="p">,</span>

    <span class="s">&#39;infinite       -&gt;  !finite&#39;</span><span class="p">,</span>
    <span class="s">&#39;noninteger     ==  real &amp; !integer&#39;</span><span class="p">,</span>
    <span class="s">&#39;nonzero        ==  !zero&#39;</span><span class="p">,</span>
<span class="p">])</span>

<span class="n">_assume_defined</span> <span class="o">=</span> <span class="n">_assume_rules</span><span class="o">.</span><span class="n">defined_facts</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">_assume_defined</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;polar&#39;</span><span class="p">)</span>
<span class="n">_assume_defined</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">_assume_defined</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">StdFactKB</span><span class="p">(</span><span class="n">FactKB</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A FactKB specialised for the built-in rules</span>

<span class="sd">    This is the only kind of FactKB that Basic objects should use.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rules</span> <span class="o">=</span> <span class="n">_assume_rules</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">facts</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">facts</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deduce_all_facts</span><span class="p">(</span><span class="n">facts</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">as_property</span><span class="p">(</span><span class="n">fact</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert a fact name to the name of the corresponding property&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s">&#39;is_</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">fact</span>


<span class="k">def</span> <span class="nf">make_property</span><span class="p">(</span><span class="n">fact</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create the automagic property corresponding to a fact.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">getit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_assumptions</span><span class="p">[</span><span class="n">fact</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_assumptions</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_assumptions</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_assumptions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_assumptions</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">_ask</span><span class="p">(</span><span class="n">fact</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

    <span class="n">getit</span><span class="o">.</span><span class="n">func_name</span> <span class="o">=</span> <span class="n">as_property</span><span class="p">(</span><span class="n">fact</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">property</span><span class="p">(</span><span class="n">getit</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_ask</span><span class="p">(</span><span class="n">fact</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find the truth value for a property of an object.</span>

<span class="sd">    This function is called when a request is made to see what a fact</span>
<span class="sd">    value is.</span>

<span class="sd">    For this we use several techniques:</span>

<span class="sd">    First, the fact-evaluation function is tried, if it exists (for</span>
<span class="sd">    example _eval_is_integer). Then we try related facts. For example</span>

<span class="sd">        rational   --&gt;   integer</span>

<span class="sd">    another example is joined rule:</span>

<span class="sd">        integer &amp; !odd  --&gt; even</span>

<span class="sd">    so in the latter case if we are looking at what &#39;even&#39; value is,</span>
<span class="sd">    &#39;integer&#39; and &#39;odd&#39; facts will be asked.</span>

<span class="sd">    In all cases, when we settle on some fact value, its implications are</span>
<span class="sd">    deduced, and the result is cached in ._assumptions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">assumptions</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">_assumptions</span>
    <span class="n">handler_map</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">_prop_handler</span>

    <span class="c"># Store None into the assumptions so that recursive attempts at</span>
    <span class="c"># evaluating the same fact don&#39;t trigger infinite recursion.</span>
    <span class="n">assumptions</span><span class="o">.</span><span class="n">_tell</span><span class="p">(</span><span class="n">fact</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

    <span class="c"># First try the assumption evaluation function if it exists</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">evaluate</span> <span class="o">=</span> <span class="n">handler_map</span><span class="p">[</span><span class="n">fact</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">evaluate</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">a</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">assumptions</span><span class="o">.</span><span class="n">deduce_all_facts</span><span class="p">(((</span><span class="n">fact</span><span class="p">,</span> <span class="n">a</span><span class="p">),))</span>
            <span class="k">return</span> <span class="n">a</span>

    <span class="c"># Try assumption&#39;s prerequisites</span>
    <span class="n">prereq</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">_assume_rules</span><span class="o">.</span><span class="n">prereq</span><span class="p">[</span><span class="n">fact</span><span class="p">])</span>
    <span class="n">shuffle</span><span class="p">(</span><span class="n">prereq</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">pk</span> <span class="ow">in</span> <span class="n">prereq</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">pk</span> <span class="ow">in</span> <span class="n">assumptions</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">pk</span> <span class="ow">in</span> <span class="n">handler_map</span><span class="p">:</span>
            <span class="n">_ask</span><span class="p">(</span><span class="n">pk</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>

            <span class="c"># we might have found the value of fact</span>
            <span class="n">ret_val</span> <span class="o">=</span> <span class="n">assumptions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">fact</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ret_val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ret_val</span>

    <span class="c"># Note: the result has already been cached</span>
    <span class="k">return</span> <span class="bp">None</span>


<span class="k">class</span> <span class="nc">ManagedProperties</span><span class="p">(</span><span class="n">with_metaclass</span><span class="p">(</span><span class="n">BasicMeta</span><span class="p">,</span> <span class="n">BasicMeta</span><span class="p">)):</span>
    <span class="sd">&quot;&quot;&quot;Metaclass for classes with old-style assumptions&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
        <span class="n">BasicMeta</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">)</span>

        <span class="n">local_defs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">_assume_defined</span><span class="p">:</span>
            <span class="n">attrname</span> <span class="o">=</span> <span class="n">as_property</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">attrname</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">None</span><span class="p">))):</span>
                <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">v</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="n">local_defs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>

        <span class="n">defs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">base</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">__bases__</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">defs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">_explicit_class_assumptions</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="n">defs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">local_defs</span><span class="p">)</span>

        <span class="n">cls</span><span class="o">.</span><span class="n">_explicit_class_assumptions</span> <span class="o">=</span> <span class="n">defs</span>
        <span class="n">cls</span><span class="o">.</span><span class="n">default_assumptions</span> <span class="o">=</span> <span class="n">StdFactKB</span><span class="p">(</span><span class="n">defs</span><span class="p">)</span>

        <span class="n">cls</span><span class="o">.</span><span class="n">_prop_handler</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">_assume_defined</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">cls</span><span class="o">.</span><span class="n">_prop_handler</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="s">&#39;_eval_is_</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">k</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="c"># Put definite results directly into the class dict, for speed</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">default_assumptions</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">as_property</span><span class="p">(</span><span class="n">k</span><span class="p">),</span> <span class="n">v</span><span class="p">)</span>

        <span class="c"># protection e.g. for Integer.is_even=F &lt;- (Rational.is_integer=F)</span>
        <span class="n">derived_from_bases</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">base</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">__bases__</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">derived_from_bases</span> <span class="o">|=</span> <span class="nb">set</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">default_assumptions</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">continue</span>  <span class="c"># not an assumption-aware class</span>
        <span class="k">for</span> <span class="n">fact</span> <span class="ow">in</span> <span class="n">derived_from_bases</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">default_assumptions</span><span class="p">):</span>
            <span class="n">pname</span> <span class="o">=</span> <span class="n">as_property</span><span class="p">(</span><span class="n">fact</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">__dict__</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">pname</span><span class="p">,</span> <span class="n">make_property</span><span class="p">(</span><span class="n">fact</span><span class="p">))</span>

        <span class="c"># Finally, add any missing automagic property (e.g. for Basic)</span>
        <span class="k">for</span> <span class="n">fact</span> <span class="ow">in</span> <span class="n">_assume_defined</span><span class="p">:</span>
            <span class="n">pname</span> <span class="o">=</span> <span class="n">as_property</span><span class="p">(</span><span class="n">fact</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">pname</span><span class="p">):</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">pname</span><span class="p">,</span> <span class="n">make_property</span><span class="p">(</span><span class="n">fact</span><span class="p">))</span>
</pre></div>

    </div>
      
  </div>
</div>
    <div class="footer">
      &copy; Copyright 2013, the yt Project.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>