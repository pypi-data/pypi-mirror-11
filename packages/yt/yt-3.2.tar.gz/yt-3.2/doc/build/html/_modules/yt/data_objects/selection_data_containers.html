<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>yt.data_objects.selection_data_containers &mdash; The yt Project 3.2-dev documentation</title>
    
    <link rel="stylesheet" href="../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootswatch-3.3.4/readable/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '3.2-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="The yt Project 3.2-dev documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" />
    
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-391373-2']);
      _gaq.push(['_setDomainName', 'yt-project.org']);
      _gaq.push(['_setAllowHash', false]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../index.html"><img src="../../../_static/yt_icon.png">
          The yt Project</a>
        <span class="navbar-text navbar-version pull-left"><b>3.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../../../help/index.html">How to get help</a></li>
                <li><a href="../../../quickstart/index.html">Quickstart notebooks</a></li>
                <li><a href="../../../cookbook/index.html">Cookbook</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../../installing.html">Getting and Installing yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../installing.html#getting-yt">Getting yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installing.html#testing-your-installation">Testing Your Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installing.html#switching-between-yt-2-x-and-yt-3-x">Switching between yt-2.x and yt-3.x</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart/index.html">yt Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart/data_inspection.html">Data Inspection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart/simple_visualization.html">Simple Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart/data_objects_and_time_series.html">Data Objects and Time Series</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart/derived_fields_and_profiles.html">Derived Fields and Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart/volume_rendering.html">Volume Rendering</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../yt3differences.html">What&#8217;s New and Different in yt 3.0?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../yt3differences.html#updating-to-yt-3-0-from-old-versions-and-going-back">Updating to yt 3.0 from Old Versions (and going back)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../yt3differences.html#converting-old-scripts-to-work-with-yt-3-0">Converting Old Scripts to Work with yt 3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../yt3differences.html#cool-new-things">Cool New Things</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../yt3differences.html#api-changes">API Changes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../cookbook/index.html">The Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../cookbook/index.html#getting-the-sample-data">Getting the Sample Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cookbook/index.html#example-scripts">Example Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cookbook/index.html#example-notebooks">Example Notebooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../visualizing/index.html">Visualizing Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../visualizing/plots.html">How to Make Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../visualizing/callbacks.html">Plot Modifications: Overplotting Contours, Velocities, Particles, and More</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../visualizing/manual_plotting.html">Using the Manual Plotting Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../visualizing/volume_rendering.html">Volume Rendering: Making 3D Photorealistic Isocontoured Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../visualizing/hardware_volume_rendering.html">Hardware Volume Rendering on NVidia Graphics cards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../visualizing/sketchfab.html">3D Surfaces and Sketchfab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../visualizing/mapserver.html">Mapserver - A Google-Maps-like Interface to your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../visualizing/streamlines.html">Streamlines: Tracking the Trajectories of Tracers in your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../visualizing/colormaps/index.html">Colormaps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../visualizing/writing_fits_images.html">Writing FITS Images</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../analyzing/index.html">General Data Analysis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/fields.html">Fields in yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/creating_derived_fields.html">Creating Derived Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/objects.html">Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/units/index.html">Symbolic Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/filtering.html">Filtering your Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/generating_processed_data.html">Generating Processed Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/time_series_analysis.html">Time Series Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/parallel_computation.html">Parallel Computation With yt</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../analyzing/analysis_modules/index.html">Topic-Specific Analysis Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/analysis_modules/halo_analysis.html">Halo Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/analysis_modules/synthetic_observation.html">Synthetic Observation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/analysis_modules/exporting.html">Exporting to External Radiation Transport Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/analysis_modules/two_point_functions.html">Two Point Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/analysis_modules/clump_finding.html">Clump Finding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/analysis_modules/particle_trajectories.html">Particle Trajectories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../analyzing/analysis_modules/ellipsoid_analysis.html">Halo Ellipsoid Analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../examining/index.html">Loading and Examining Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../examining/loading_data.html">Loading Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../examining/generic_array_data.html">Loading Generic Array Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../examining/generic_particle_data.html">Loading Generic Particle Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../examining/spherical_data.html">Loading Spherical Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../examining/low_level_inspection.html">Low-Level Data Inspection: Accessing Raw Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../developing/index.html">Developing in yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/intro.html">Getting Involved</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/developing.html">How to Develop yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/building_the_docs.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/debugdrive.html">Debugging yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/creating_datatypes.html">Creating Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/creating_derived_fields.html">Creating Derived Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/creating_derived_quantities.html">Creating Derived Quantities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/creating_frontend.html">Creating A New Code Frontend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/external_analysis.html">Using yt with External Analysis Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/index.html">Reference Materials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/code_support.html">Code Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/command-line.html">Command-Line Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/api/api.html">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/configuration.html">Customizing yt: The Configuration and Plugin Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/field_list.html">Field List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/changelog.html">ChangeLog</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/index.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../faq/index.html#version-installation">Version &amp; Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../faq/index.html#code-errors-and-failures">Code Errors and Failures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../faq/index.html#units">Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../faq/index.html#fields">Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../faq/index.html#data-objects">Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../faq/index.html#developing">Developing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../faq/index.html#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../help/index.html">Getting Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../help/index.html#don-t-panic-and-don-t-give-up">Don&#8217;t panic and don&#8217;t give up</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../help/index.html#update-to-the-latest-version">Update to the latest version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../help/index.html#search-the-documentation-faq-and-mailing-lists">Search the documentation, FAQ, and mailing lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../help/index.html#look-at-the-source-code">Look at the source code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../help/index.html#isolate-and-document-your-problem">Isolate and document your problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../help/index.html#go-on-irc-to-ask-a-question">Go on IRC to ask a question</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../help/index.html#ask-the-mailing-list">Ask the mailing list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../help/index.html#submit-a-bug-report">Submit a bug report</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../help/index.html#special-issues">Special Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../about/index.html">About yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../about/index.html#what-is-yt">What is yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about/index.html#who-is-yt">Who is yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about/index.html#history-of-yt">History of yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about/index.html#how-do-i-contact-yt">How do I contact yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about/index.html#how-do-i-cite-yt">How do I cite yt?</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"></ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <h1>Source code for yt.data_objects.selection_data_containers</h1><div class="highlight"><pre>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Data containers based on geometric selection</span>




<span class="sd">&quot;&quot;&quot;</span>

<span class="c">#-----------------------------------------------------------------------------</span>
<span class="c"># Copyright (c) 2013, yt Development Team.</span>
<span class="c">#</span>
<span class="c"># Distributed under the terms of the Modified BSD License.</span>
<span class="c">#</span>
<span class="c"># The full license is in the file COPYING.txt, distributed with this software.</span>
<span class="c">#-----------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">types</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">contextlib</span> <span class="kn">import</span> <span class="n">contextmanager</span>

<span class="kn">from</span> <span class="nn">yt.funcs</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">yt.utilities.lib.alt_ray_tracers</span> <span class="kn">import</span> <span class="n">cylindrical_ray_trace</span>
<span class="kn">from</span> <span class="nn">yt.utilities.orientation</span> <span class="kn">import</span> <span class="n">Orientation</span>
<span class="kn">from</span> <span class="nn">.data_containers</span> <span class="kn">import</span> \
    <span class="n">YTSelectionContainer0D</span><span class="p">,</span> <span class="n">YTSelectionContainer1D</span><span class="p">,</span> \
    <span class="n">YTSelectionContainer2D</span><span class="p">,</span> <span class="n">YTSelectionContainer3D</span>
<span class="kn">from</span> <span class="nn">yt.data_objects.derived_quantities</span> <span class="kn">import</span> \
    <span class="n">DerivedQuantityCollection</span>
<span class="kn">from</span> <span class="nn">yt.utilities.exceptions</span> <span class="kn">import</span> \
    <span class="n">YTSphereTooSmall</span><span class="p">,</span> \
    <span class="n">YTIllDefinedCutRegion</span><span class="p">,</span> \
    <span class="n">YTMixedCutRegion</span>
<span class="kn">from</span> <span class="nn">yt.utilities.linear_interpolators</span> <span class="kn">import</span> <span class="n">TrilinearFieldInterpolator</span>
<span class="kn">from</span> <span class="nn">yt.utilities.minimal_representation</span> <span class="kn">import</span> \
    <span class="n">MinimalSliceData</span>
<span class="kn">from</span> <span class="nn">yt.utilities.math_utils</span> <span class="kn">import</span> <span class="n">get_rotation_matrix</span>
<span class="kn">from</span> <span class="nn">yt.units.yt_array</span> <span class="kn">import</span> <span class="n">YTQuantity</span>


<div class="viewcode-block" id="YTPointBase"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTPointBase.html#yt.data_objects.selection_data_containers.YTPointBase">[docs]</a><span class="k">class</span> <span class="nc">YTPointBase</span><span class="p">(</span><span class="n">YTSelectionContainer0D</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A 0-dimensional object defined by a single point</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    p: array_like</span>
<span class="sd">        A points defined within the domain.  If the domain is</span>
<span class="sd">        periodic its position will be corrected to lie inside</span>
<span class="sd">        the range [DLE,DRE) to ensure one and only one cell may</span>
<span class="sd">        match that point</span>
<span class="sd">    ds: Dataset, optional</span>
<span class="sd">        An optional dataset to use rather than self.ds</span>
<span class="sd">    field_parameters : dictionary</span>
<span class="sd">        A dictionary of field parameters than can be accessed by derived</span>
<span class="sd">        fields.</span>
<span class="sd">    data_source: optional</span>
<span class="sd">        Draw the selection from the provided data source rather than</span>
<span class="sd">        all data associated with the data_set</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; import yt</span>
<span class="sd">    &gt;&gt;&gt; ds = yt.load(&quot;RedshiftOutput0005&quot;)</span>
<span class="sd">    &gt;&gt;&gt; c = [0.5,0.5,0.5]</span>
<span class="sd">    &gt;&gt;&gt; point = ds.point(c)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_type_name</span> <span class="o">=</span> <span class="s">&quot;point&quot;</span>
    <span class="n">_con_args</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;p&#39;</span><span class="p">,)</span>
<div class="viewcode-block" id="YTPointBase.__init__"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTPointBase.__init__.html#yt.data_objects.selection_data_containers.YTPointBase.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">ds</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">field_parameters</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">data_source</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">YTPointBase</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">field_parameters</span><span class="p">,</span> <span class="n">data_source</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">p</span> <span class="o">=</span> <span class="n">p</span>
</div></div>
<div class="viewcode-block" id="YTOrthoRayBase"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTOrthoRayBase.html#yt.data_objects.selection_data_containers.YTOrthoRayBase">[docs]</a><span class="k">class</span> <span class="nc">YTOrthoRayBase</span><span class="p">(</span><span class="n">YTSelectionContainer1D</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is an orthogonal ray cast through the entire domain, at a specific</span>
<span class="sd">    coordinate.</span>

<span class="sd">    This object is typically accessed through the `ortho_ray` object that</span>
<span class="sd">    hangs off of index objects.  The resulting arrays have their</span>
<span class="sd">    dimensionality reduced to one, and an ordered list of points at an</span>
<span class="sd">    (x,y) tuple along `axis` are available.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    axis : int</span>
<span class="sd">        The axis along which to cast the ray.  Can be 0, 1, or 2 for x, y, z.</span>
<span class="sd">    coords : tuple of floats</span>
<span class="sd">        The (plane_x, plane_y) coordinates at which to cast the ray.  Note</span>
<span class="sd">        that this is in the plane coordinates: so if you are casting along</span>
<span class="sd">        x, this will be (y,z).  If you are casting along y, this will be</span>
<span class="sd">        (x,z).  If you are casting along z, this will be (x,y).</span>
<span class="sd">    ds: Dataset, optional</span>
<span class="sd">        An optional dataset to use rather than self.ds</span>
<span class="sd">    field_parameters : dictionary</span>
<span class="sd">         A dictionary of field parameters than can be accessed by derived</span>
<span class="sd">         fields.</span>
<span class="sd">    data_source: optional</span>
<span class="sd">        Draw the selection from the provided data source rather than</span>
<span class="sd">        all data associated with the data_set</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; import yt</span>
<span class="sd">    &gt;&gt;&gt; ds = yt.load(&quot;RedshiftOutput0005&quot;)</span>
<span class="sd">    &gt;&gt;&gt; oray = ds.ortho_ray(0, (0.2, 0.74))</span>
<span class="sd">    &gt;&gt;&gt; print oray[&quot;Density&quot;]</span>

<span class="sd">    Note: The low-level data representation for rays are not guaranteed to be </span>
<span class="sd">    spatially ordered.  In particular, with AMR datasets, higher resolution </span>
<span class="sd">    data is tagged on to the end of the ray.  If you want this data </span>
<span class="sd">    represented in a spatially ordered manner, manually sort it by the &quot;t&quot; </span>
<span class="sd">    field, which is the value of the parametric variable that goes from 0 at </span>
<span class="sd">    the start of the ray to 1 at the end:</span>

<span class="sd">    &gt;&gt;&gt; my_ray = ds.ortho_ray(...)</span>
<span class="sd">    &gt;&gt;&gt; ray_sort = np.argsort(my_ray[&quot;t&quot;])</span>
<span class="sd">    &gt;&gt;&gt; density = my_ray[&quot;density&quot;][ray_sort]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_key_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="s">&#39;y&#39;</span><span class="p">,</span><span class="s">&#39;z&#39;</span><span class="p">,</span><span class="s">&#39;dx&#39;</span><span class="p">,</span><span class="s">&#39;dy&#39;</span><span class="p">,</span><span class="s">&#39;dz&#39;</span><span class="p">]</span>
    <span class="n">_type_name</span> <span class="o">=</span> <span class="s">&quot;ortho_ray&quot;</span>
    <span class="n">_con_args</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;axis&#39;</span><span class="p">,</span> <span class="s">&#39;coords&#39;</span><span class="p">)</span>
<div class="viewcode-block" id="YTOrthoRayBase.__init__"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTOrthoRayBase.__init__.html#yt.data_objects.selection_data_containers.YTOrthoRayBase.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">coords</span><span class="p">,</span> <span class="n">ds</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> 
                 <span class="n">field_parameters</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">data_source</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">YTOrthoRayBase</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">field_parameters</span><span class="p">,</span> <span class="n">data_source</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axis</span> <span class="o">=</span> <span class="n">axis</span>
        <span class="n">xax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">x_axis</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="p">]</span>
        <span class="n">yax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">y_axis</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">px_ax</span> <span class="o">=</span> <span class="n">xax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">py_ax</span> <span class="o">=</span> <span class="n">yax</span>
        <span class="c"># Even though we may not be using x,y,z we use them here.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">px_dx</span> <span class="o">=</span> <span class="s">&#39;d</span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span><span class="p">(</span><span class="s">&#39;xyz&#39;</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">px_ax</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">py_dx</span> <span class="o">=</span> <span class="s">&#39;d</span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span><span class="p">(</span><span class="s">&#39;xyz&#39;</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">py_ax</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">px</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">py</span> <span class="o">=</span> <span class="n">coords</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sort_by</span> <span class="o">=</span> <span class="s">&#39;xyz&#39;</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="p">]</span>
</div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">coords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">px</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">py</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="YTRayBase"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTRayBase.html#yt.data_objects.selection_data_containers.YTRayBase">[docs]</a><span class="k">class</span> <span class="nc">YTRayBase</span><span class="p">(</span><span class="n">YTSelectionContainer1D</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is an arbitrarily-aligned ray cast through the entire domain, at a</span>
<span class="sd">    specific coordinate.</span>

<span class="sd">    This object is typically accessed through the `ray` object that hangs</span>
<span class="sd">    off of index objects.  The resulting arrays have their</span>
<span class="sd">    dimensionality reduced to one, and an ordered list of points at an</span>
<span class="sd">    (x,y) tuple along `axis` are available, as is the `t` field, which</span>
<span class="sd">    corresponds to a unitless measurement along the ray from start to</span>
<span class="sd">    end.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    start_point : array-like set of 3 floats</span>
<span class="sd">        The place where the ray starts.</span>
<span class="sd">    end_point : array-like set of 3 floats</span>
<span class="sd">        The place where the ray ends.</span>
<span class="sd">    ds: Dataset, optional</span>
<span class="sd">        An optional dataset to use rather than self.ds</span>
<span class="sd">    field_parameters : dictionary</span>
<span class="sd">         A dictionary of field parameters than can be accessed by derived</span>
<span class="sd">         fields.</span>
<span class="sd">    data_source: optional</span>
<span class="sd">        Draw the selection from the provided data source rather than</span>
<span class="sd">        all data associated with the data_set</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; import yt</span>
<span class="sd">    &gt;&gt;&gt; ds = yt.load(&quot;RedshiftOutput0005&quot;)</span>
<span class="sd">    &gt;&gt;&gt; ray = ds.ray((0.2, 0.74, 0.11), (0.4, 0.91, 0.31))</span>
<span class="sd">    &gt;&gt;&gt; print ray[&quot;Density&quot;], ray[&quot;t&quot;], ray[&quot;dts&quot;]</span>

<span class="sd">    Note: The low-level data representation for rays are not guaranteed to be </span>
<span class="sd">    spatially ordered.  In particular, with AMR datasets, higher resolution </span>
<span class="sd">    data is tagged on to the end of the ray.  If you want this data </span>
<span class="sd">    represented in a spatially ordered manner, manually sort it by the &quot;t&quot; </span>
<span class="sd">    field, which is the value of the parametric variable that goes from 0 at </span>
<span class="sd">    the start of the ray to 1 at the end:</span>

<span class="sd">    &gt;&gt;&gt; my_ray = ds.ray(...)</span>
<span class="sd">    &gt;&gt;&gt; ray_sort = np.argsort(my_ray[&quot;t&quot;])</span>
<span class="sd">    &gt;&gt;&gt; density = my_ray[&quot;density&quot;][ray_sort]</span>

<span class="sd">&quot;&quot;&quot;</span>
    <span class="n">_type_name</span> <span class="o">=</span> <span class="s">&quot;ray&quot;</span>
    <span class="n">_con_args</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;start_point&#39;</span><span class="p">,</span> <span class="s">&#39;end_point&#39;</span><span class="p">)</span>
    <span class="n">_container_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s">&quot;t&quot;</span><span class="p">,</span> <span class="s">&quot;dts&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="YTRayBase.__init__"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTRayBase.__init__.html#yt.data_objects.selection_data_containers.YTRayBase.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_point</span><span class="p">,</span> <span class="n">end_point</span><span class="p">,</span> <span class="n">ds</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">field_parameters</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">data_source</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">YTRayBase</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">field_parameters</span><span class="p">,</span> <span class="n">data_source</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_point</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">arr</span><span class="p">(</span><span class="n">start_point</span><span class="p">,</span>
                            <span class="s">&#39;code_length&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;float64&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end_point</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">arr</span><span class="p">(</span><span class="n">end_point</span><span class="p">,</span>
                            <span class="s">&#39;code_length&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;float64&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_point</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_point</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_center</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_point</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_field_parameter</span><span class="p">(</span><span class="s">&#39;center&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_point</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dts</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ts</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span>
</div>
    <span class="k">def</span> <span class="nf">_generate_container_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_chunk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">_identify_base_chunk</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field</span> <span class="o">==</span> <span class="s">&quot;dts&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_chunk</span><span class="o">.</span><span class="n">dtcoords</span>
        <span class="k">elif</span> <span class="n">field</span> <span class="o">==</span> <span class="s">&quot;t&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_chunk</span><span class="o">.</span><span class="n">tcoords</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="YTSliceBase"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTSliceBase.html#yt.data_objects.selection_data_containers.YTSliceBase">[docs]</a><span class="k">class</span> <span class="nc">YTSliceBase</span><span class="p">(</span><span class="n">YTSelectionContainer2D</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is a data object corresponding to a slice through the simulation</span>
<span class="sd">    domain.</span>

<span class="sd">    This object is typically accessed through the `slice` object that hangs</span>
<span class="sd">    off of index objects.  Slice is an orthogonal slice through the</span>
<span class="sd">    data, taking all the points at the finest resolution available and then</span>
<span class="sd">    indexing them.  It is more appropriately thought of as a slice</span>
<span class="sd">    &#39;operator&#39; than an object, however, as its field and coordinate can</span>
<span class="sd">    both change.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    axis : int or char</span>
<span class="sd">        The axis along which to slice.  Can be 0, 1, or 2 for x, y, z.</span>
<span class="sd">    coord : float</span>
<span class="sd">        The coordinate along the axis at which to slice.  This is in</span>
<span class="sd">        &quot;domain&quot; coordinates.</span>
<span class="sd">    center : array_like, optional</span>
<span class="sd">        The &#39;center&#39; supplied to fields that use it.  Note that this does</span>
<span class="sd">        not have to have `coord` as one value.  optional.</span>
<span class="sd">    ds: Dataset, optional</span>
<span class="sd">        An optional dataset to use rather than self.ds</span>
<span class="sd">    field_parameters : dictionary</span>
<span class="sd">         A dictionary of field parameters than can be accessed by derived</span>
<span class="sd">         fields.</span>
<span class="sd">    data_source: optional</span>
<span class="sd">        Draw the selection from the provided data source rather than</span>
<span class="sd">        all data associated with the data_set</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; import yt</span>
<span class="sd">    &gt;&gt;&gt; ds = yt.load(&quot;RedshiftOutput0005&quot;)</span>
<span class="sd">    &gt;&gt;&gt; slice = ds.slice(0, 0.25)</span>
<span class="sd">    &gt;&gt;&gt; print slice[&quot;Density&quot;]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_top_node</span> <span class="o">=</span> <span class="s">&quot;/Slices&quot;</span>
    <span class="n">_type_name</span> <span class="o">=</span> <span class="s">&quot;slice&quot;</span>
    <span class="n">_con_args</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;axis&#39;</span><span class="p">,</span> <span class="s">&#39;coord&#39;</span><span class="p">)</span>
    <span class="n">_container_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s">&quot;px&quot;</span><span class="p">,</span> <span class="s">&quot;py&quot;</span><span class="p">,</span> <span class="s">&quot;pdx&quot;</span><span class="p">,</span> <span class="s">&quot;pdy&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="YTSliceBase.__init__"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTSliceBase.__init__.html#yt.data_objects.selection_data_containers.YTSliceBase.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ds</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">field_parameters</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">data_source</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">YTSelectionContainer2D</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">ds</span><span class="p">,</span>
                                        <span class="n">field_parameters</span><span class="p">,</span> <span class="n">data_source</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_center</span><span class="p">(</span><span class="n">center</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coord</span> <span class="o">=</span> <span class="n">coord</span>
</div>
    <span class="k">def</span> <span class="nf">_generate_container_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
        <span class="n">xax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">x_axis</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="p">]</span>
        <span class="n">yax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">coordinates</span><span class="o">.</span><span class="n">y_axis</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_chunk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">_identify_base_chunk</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field</span> <span class="o">==</span> <span class="s">&quot;px&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_chunk</span><span class="o">.</span><span class="n">fcoords</span><span class="p">[:,</span><span class="n">xax</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">field</span> <span class="o">==</span> <span class="s">&quot;py&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_chunk</span><span class="o">.</span><span class="n">fcoords</span><span class="p">[:,</span><span class="n">yax</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">field</span> <span class="o">==</span> <span class="s">&quot;pdx&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_chunk</span><span class="o">.</span><span class="n">fwidth</span><span class="p">[:,</span><span class="n">xax</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.5</span>
        <span class="k">elif</span> <span class="n">field</span> <span class="o">==</span> <span class="s">&quot;pdy&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_chunk</span><span class="o">.</span><span class="n">fwidth</span><span class="p">[:,</span><span class="n">yax</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.5</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_mrep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">MinimalSliceData</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="YTSliceBase.hub_upload"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTSliceBase.hub_upload.html#yt.data_objects.selection_data_containers.YTSliceBase.hub_upload">[docs]</a>    <span class="k">def</span> <span class="nf">hub_upload</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mrep</span><span class="o">.</span><span class="n">upload</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="YTSliceBase.to_pw"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTSliceBase.to_pw.html#yt.data_objects.selection_data_containers.YTSliceBase.to_pw">[docs]</a>    <span class="k">def</span> <span class="nf">to_pw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s">&#39;center-window&#39;</span><span class="p">):</span>
        <span class="sd">r&quot;&quot;&quot;Create a :class:`~yt.visualization.plot_window.PWViewerMPL` from this</span>
<span class="sd">        object.</span>

<span class="sd">        This is a bare-bones mechanism of creating a plot window from this</span>
<span class="sd">        object, which can then be moved around, zoomed, and on and on.  All</span>
<span class="sd">        behavior of the plot window is relegated to that routine.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_pw</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">origin</span><span class="p">,</span> <span class="s">&#39;Slice&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pw</span>
</div></div>
<div class="viewcode-block" id="YTCuttingPlaneBase"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTCuttingPlaneBase.html#yt.data_objects.selection_data_containers.YTCuttingPlaneBase">[docs]</a><span class="k">class</span> <span class="nc">YTCuttingPlaneBase</span><span class="p">(</span><span class="n">YTSelectionContainer2D</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is a data object corresponding to an oblique slice through the</span>
<span class="sd">    simulation domain.</span>

<span class="sd">    This object is typically accessed through the `cutting` object</span>
<span class="sd">    that hangs off of index objects.  A cutting plane is an oblique</span>
<span class="sd">    plane through the data, defined by a normal vector and a coordinate.</span>
<span class="sd">    It attempts to guess an &#39;north&#39; vector, which can be overridden, and</span>
<span class="sd">    then it pixelizes the appropriate data onto the plane without</span>
<span class="sd">    interpolation.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    normal : array_like</span>
<span class="sd">        The vector that defines the desired plane.  For instance, the</span>
<span class="sd">        angular momentum of a sphere.</span>
<span class="sd">    center : array_like</span>
<span class="sd">        The center of the cutting plane, where the normal vector is anchored.</span>
<span class="sd">    north_vector: array_like, optional</span>
<span class="sd">        An optional vector to describe the north-facing direction in the resulting</span>
<span class="sd">        plane.</span>
<span class="sd">    ds: Dataset, optional</span>
<span class="sd">        An optional dataset to use rather than self.ds</span>
<span class="sd">    field_parameters : dictionary</span>
<span class="sd">         A dictionary of field parameters than can be accessed by derived</span>
<span class="sd">         fields.</span>
<span class="sd">    data_source: optional</span>
<span class="sd">        Draw the selection from the provided data source rather than</span>
<span class="sd">        all data associated with the data_set</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>

<span class="sd">    This data object in particular can be somewhat expensive to create.</span>
<span class="sd">    It&#39;s also important to note that unlike the other 2D data objects, this</span>
<span class="sd">    object provides px, py, pz, as some cells may have a height from the</span>
<span class="sd">    plane.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; import yt</span>
<span class="sd">    &gt;&gt;&gt; ds = yt.load(&quot;RedshiftOutput0005&quot;)</span>
<span class="sd">    &gt;&gt;&gt; cp = ds.cutting([0.1, 0.2, -0.9], [0.5, 0.42, 0.6])</span>
<span class="sd">    &gt;&gt;&gt; print cp[&quot;Density&quot;]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_plane</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_top_node</span> <span class="o">=</span> <span class="s">&quot;/CuttingPlanes&quot;</span>
    <span class="n">_key_fields</span> <span class="o">=</span> <span class="n">YTSelectionContainer2D</span><span class="o">.</span><span class="n">_key_fields</span> <span class="o">+</span> <span class="p">[</span><span class="s">&#39;pz&#39;</span><span class="p">,</span><span class="s">&#39;pdz&#39;</span><span class="p">]</span>
    <span class="n">_type_name</span> <span class="o">=</span> <span class="s">&quot;cutting&quot;</span>
    <span class="n">_con_args</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;normal&#39;</span><span class="p">,</span> <span class="s">&#39;center&#39;</span><span class="p">)</span>
    <span class="n">_container_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s">&quot;px&quot;</span><span class="p">,</span> <span class="s">&quot;py&quot;</span><span class="p">,</span> <span class="s">&quot;pz&quot;</span><span class="p">,</span> <span class="s">&quot;pdx&quot;</span><span class="p">,</span> <span class="s">&quot;pdy&quot;</span><span class="p">,</span> <span class="s">&quot;pdz&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="YTCuttingPlaneBase.__init__"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTCuttingPlaneBase.__init__.html#yt.data_objects.selection_data_containers.YTCuttingPlaneBase.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">north_vector</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">ds</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">field_parameters</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">data_source</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">YTSelectionContainer2D</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">ds</span><span class="p">,</span>
                                        <span class="n">field_parameters</span><span class="p">,</span> <span class="n">data_source</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_center</span><span class="p">(</span><span class="n">center</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_field_parameter</span><span class="p">(</span><span class="s">&#39;center&#39;</span><span class="p">,</span><span class="n">center</span><span class="p">)</span>
        <span class="c"># Let&#39;s set up our plane equation</span>
        <span class="c"># ax + by + cz + d = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">orienter</span> <span class="o">=</span> <span class="n">Orientation</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">north_vector</span> <span class="o">=</span> <span class="n">north_vector</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_norm_vec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">orienter</span><span class="o">.</span><span class="n">normal_vector</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_d</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_norm_vec</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x_vec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">orienter</span><span class="o">.</span><span class="n">unit_vectors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y_vec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">orienter</span><span class="o">.</span><span class="n">unit_vectors</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="c"># First we try all three, see which has the best result:</span>
        <span class="n">vecs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">identity</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rot_mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_x_vec</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_y_vec</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_norm_vec</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_inv_mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">pinv</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rot_mat</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_field_parameter</span><span class="p">(</span><span class="s">&#39;cp_x_vec&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_x_vec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_field_parameter</span><span class="p">(</span><span class="s">&#39;cp_y_vec&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_y_vec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_field_parameter</span><span class="p">(</span><span class="s">&#39;cp_z_vec&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_norm_vec</span><span class="p">)</span>
</div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_norm_vec</span>

    <span class="k">def</span> <span class="nf">_generate_container_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_chunk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">_identify_base_chunk</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field</span> <span class="o">==</span> <span class="s">&quot;px&quot;</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_chunk</span><span class="o">.</span><span class="n">fcoords</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_chunk</span><span class="o">.</span><span class="n">fcoords</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_chunk</span><span class="o">.</span><span class="n">fcoords</span><span class="p">[:,</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">tr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;float64&#39;</span><span class="p">)</span>
            <span class="n">tr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">arr</span><span class="p">(</span><span class="n">tr</span><span class="p">,</span> <span class="s">&quot;code_length&quot;</span><span class="p">)</span>
            <span class="n">tr</span> <span class="o">+=</span> <span class="n">x</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x_vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">tr</span> <span class="o">+=</span> <span class="n">y</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x_vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">tr</span> <span class="o">+=</span> <span class="n">z</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x_vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">tr</span>
        <span class="k">elif</span> <span class="n">field</span> <span class="o">==</span> <span class="s">&quot;py&quot;</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_chunk</span><span class="o">.</span><span class="n">fcoords</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_chunk</span><span class="o">.</span><span class="n">fcoords</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_chunk</span><span class="o">.</span><span class="n">fcoords</span><span class="p">[:,</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">tr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;float64&#39;</span><span class="p">)</span>
            <span class="n">tr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">arr</span><span class="p">(</span><span class="n">tr</span><span class="p">,</span> <span class="s">&quot;code_length&quot;</span><span class="p">)</span>
            <span class="n">tr</span> <span class="o">+=</span> <span class="n">x</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y_vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">tr</span> <span class="o">+=</span> <span class="n">y</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y_vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">tr</span> <span class="o">+=</span> <span class="n">z</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y_vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">tr</span>
        <span class="k">elif</span> <span class="n">field</span> <span class="o">==</span> <span class="s">&quot;pz&quot;</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_chunk</span><span class="o">.</span><span class="n">fcoords</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_chunk</span><span class="o">.</span><span class="n">fcoords</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_chunk</span><span class="o">.</span><span class="n">fcoords</span><span class="p">[:,</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">tr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;float64&#39;</span><span class="p">)</span>
            <span class="n">tr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">arr</span><span class="p">(</span><span class="n">tr</span><span class="p">,</span> <span class="s">&quot;code_length&quot;</span><span class="p">)</span>
            <span class="n">tr</span> <span class="o">+=</span> <span class="n">x</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_norm_vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">tr</span> <span class="o">+=</span> <span class="n">y</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_norm_vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">tr</span> <span class="o">+=</span> <span class="n">z</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_norm_vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">tr</span>
        <span class="k">elif</span> <span class="n">field</span> <span class="o">==</span> <span class="s">&quot;pdx&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_chunk</span><span class="o">.</span><span class="n">fwidth</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.5</span>
        <span class="k">elif</span> <span class="n">field</span> <span class="o">==</span> <span class="s">&quot;pdy&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_chunk</span><span class="o">.</span><span class="n">fwidth</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.5</span>
        <span class="k">elif</span> <span class="n">field</span> <span class="o">==</span> <span class="s">&quot;pdz&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_chunk</span><span class="o">.</span><span class="n">fwidth</span><span class="p">[:,</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.5</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>

<div class="viewcode-block" id="YTCuttingPlaneBase.to_pw"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTCuttingPlaneBase.to_pw.html#yt.data_objects.selection_data_containers.YTCuttingPlaneBase.to_pw">[docs]</a>    <span class="k">def</span> <span class="nf">to_pw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">axes_unit</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">r&quot;&quot;&quot;Create a :class:`~yt.visualization.plot_window.PWViewerMPL` from this</span>
<span class="sd">        object.</span>

<span class="sd">        This is a bare-bones mechanism of creating a plot window from this</span>
<span class="sd">        object, which can then be moved around, zoomed, and on and on.  All</span>
<span class="sd">        behavior of the plot window is relegated to that routine.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span>
        <span class="n">center</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="n">ensure_list</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_data</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                                             <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_key_fields</span><span class="p">]</span>
        <span class="kn">from</span> <span class="nn">yt.visualization.plot_window</span> <span class="kn">import</span> <span class="n">get_oblique_window_parameters</span><span class="p">,</span> <span class="n">PWViewerMPL</span>
        <span class="kn">from</span> <span class="nn">yt.visualization.fixed_resolution</span> <span class="kn">import</span> <span class="n">ObliqueFixedResolutionBuffer</span>
        <span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="n">center_rot</span><span class="p">)</span> <span class="o">=</span> <span class="n">get_oblique_window_parameters</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="p">)</span>
        <span class="n">pw</span> <span class="o">=</span> <span class="n">PWViewerMPL</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s">&#39;center-window&#39;</span><span class="p">,</span> 
            <span class="n">periodic</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">oblique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="n">frb_generator</span><span class="o">=</span><span class="n">ObliqueFixedResolutionBuffer</span><span class="p">,</span> 
            <span class="n">plot_type</span><span class="o">=</span><span class="s">&#39;OffAxisSlice&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">axes_unit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">pw</span><span class="o">.</span><span class="n">set_axes_unit</span><span class="p">(</span><span class="n">axes_unit</span><span class="p">)</span>
        <span class="n">pw</span><span class="o">.</span><span class="n">_setup_plots</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">pw</span>
</div>
<div class="viewcode-block" id="YTCuttingPlaneBase.to_frb"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTCuttingPlaneBase.to_frb.html#yt.data_objects.selection_data_containers.YTCuttingPlaneBase.to_frb">[docs]</a>    <span class="k">def</span> <span class="nf">to_frb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">resolution</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">periodic</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">r&quot;&quot;&quot;This function returns an ObliqueFixedResolutionBuffer generated</span>
<span class="sd">        from this object.</span>

<span class="sd">        An ObliqueFixedResolutionBuffer is an object that accepts a</span>
<span class="sd">        variable-resolution 2D object and transforms it into an NxM bitmap that</span>
<span class="sd">        can be plotted, examined or processed.  This is a convenience function</span>
<span class="sd">        to return an FRB directly from an existing 2D data object.  Unlike the</span>
<span class="sd">        corresponding to_frb function for other YTSelectionContainer2D objects, </span>
<span class="sd">        this does not accept a &#39;center&#39; parameter as it is assumed to be </span>
<span class="sd">        centered at the center of the cutting plane.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        width : width specifier</span>
<span class="sd">            This can either be a floating point value, in the native domain</span>
<span class="sd">            units of the simulation, or a tuple of the (value, unit) style.</span>
<span class="sd">            This will be the width of the FRB.</span>
<span class="sd">        height : height specifier, optional</span>
<span class="sd">            This will be the height of the FRB, by default it is equal to width.</span>
<span class="sd">        resolution : int or tuple of ints</span>
<span class="sd">            The number of pixels on a side of the final FRB.</span>
<span class="sd">        periodic : boolean</span>
<span class="sd">            This can be true or false, and governs whether the pixelization</span>
<span class="sd">            will span the domain boundaries.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        frb : :class:`~yt.visualization.fixed_resolution.ObliqueFixedResolutionBuffer`</span>
<span class="sd">            A fixed resolution buffer, which can be queried for fields.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; v, c = ds.find_max(&quot;density&quot;)</span>
<span class="sd">        &gt;&gt;&gt; sp = ds.sphere(c, (100.0, &#39;au&#39;))</span>
<span class="sd">        &gt;&gt;&gt; L = sp.quantities.angular_momentum_vector()</span>
<span class="sd">        &gt;&gt;&gt; cutting = ds.cutting(L, c)</span>
<span class="sd">        &gt;&gt;&gt; frb = cutting.to_frb( (1.0, &#39;pc&#39;), 1024)</span>
<span class="sd">        &gt;&gt;&gt; write_image(np.log10(frb[&quot;Density&quot;]), &#39;density_1pc.png&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">iterable</span><span class="p">(</span><span class="n">width</span><span class="p">):</span>
            <span class="n">validate_width_tuple</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>
            <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">quan</span><span class="p">(</span><span class="n">width</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">width</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">height</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">height</span> <span class="o">=</span> <span class="n">width</span>
        <span class="k">elif</span> <span class="n">iterable</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
            <span class="n">validate_width_tuple</span><span class="p">(</span><span class="n">height</span><span class="p">)</span>
            <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">quan</span><span class="p">(</span><span class="n">height</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">height</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">iterable</span><span class="p">(</span><span class="n">resolution</span><span class="p">):</span>
            <span class="n">resolution</span> <span class="o">=</span> <span class="p">(</span><span class="n">resolution</span><span class="p">,</span> <span class="n">resolution</span><span class="p">)</span>
        <span class="kn">from</span> <span class="nn">yt.visualization.fixed_resolution</span> <span class="kn">import</span> <span class="n">ObliqueFixedResolutionBuffer</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">width</span><span class="o">/</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">width</span><span class="o">/</span><span class="mf">2.0</span><span class="p">,</span> <span class="o">-</span><span class="n">height</span><span class="o">/</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">height</span><span class="o">/</span><span class="mf">2.0</span><span class="p">)</span>
        <span class="n">frb</span> <span class="o">=</span> <span class="n">ObliqueFixedResolutionBuffer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">resolution</span><span class="p">,</span>
                                           <span class="n">periodic</span><span class="o">=</span><span class="n">periodic</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">frb</span>
</div></div>
<div class="viewcode-block" id="YTDiskBase"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTDiskBase.html#yt.data_objects.selection_data_containers.YTDiskBase">[docs]</a><span class="k">class</span> <span class="nc">YTDiskBase</span><span class="p">(</span><span class="n">YTSelectionContainer3D</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    By providing a *center*, a *normal*, a *radius* and a *height* we</span>
<span class="sd">    can define a cylinder of any proportion.  Only cells whose centers are</span>
<span class="sd">    within the cylinder will be selected.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    center : array_like</span>
<span class="sd">        coordinate to which the normal, radius, and height all reference</span>
<span class="sd">    normal : array_like</span>
<span class="sd">        the normal vector defining the direction of lengthwise part of the </span>
<span class="sd">        cylinder</span>
<span class="sd">    radius : float</span>
<span class="sd">        the radius of the cylinder</span>
<span class="sd">    height : float</span>
<span class="sd">        the distance from the midplane of the cylinder to the top and </span>
<span class="sd">        bottom planes</span>
<span class="sd">    fields : array of fields, optional</span>
<span class="sd">        any fields to be pre-loaded in the cylinder object</span>
<span class="sd">    ds: Dataset, optional</span>
<span class="sd">        An optional dataset to use rather than self.ds</span>
<span class="sd">    field_parameters : dictionary</span>
<span class="sd">         A dictionary of field parameters than can be accessed by derived</span>
<span class="sd">         fields.</span>
<span class="sd">    data_source: optional</span>
<span class="sd">        Draw the selection from the provided data source rather than</span>
<span class="sd">        all data associated with the data_set</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; import yt</span>
<span class="sd">    &gt;&gt;&gt; ds = yt.load(&quot;RedshiftOutput0005&quot;)</span>
<span class="sd">    &gt;&gt;&gt; c = [0.5,0.5,0.5]</span>
<span class="sd">    &gt;&gt;&gt; disk = ds.disk(c, [1,0,0], (1, &#39;kpc&#39;), (10, &#39;kpc&#39;))</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_type_name</span> <span class="o">=</span> <span class="s">&quot;disk&quot;</span>
    <span class="n">_con_args</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;center&#39;</span><span class="p">,</span> <span class="s">&#39;_norm_vec&#39;</span><span class="p">,</span> <span class="s">&#39;radius&#39;</span><span class="p">,</span> <span class="s">&#39;height&#39;</span><span class="p">)</span>
<div class="viewcode-block" id="YTDiskBase.__init__"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTDiskBase.__init__.html#yt.data_objects.selection_data_containers.YTDiskBase.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">ds</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">field_parameters</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">data_source</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">YTSelectionContainer3D</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">ds</span><span class="p">,</span>
                                        <span class="n">field_parameters</span><span class="p">,</span> <span class="n">data_source</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_norm_vec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">normal</span><span class="p">)</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span><span class="n">normal</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_field_parameter</span><span class="p">(</span><span class="s">&quot;normal&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_norm_vec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_field_parameter</span><span class="p">(</span><span class="s">&quot;center&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">fix_length</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">fix_length</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_d</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_norm_vec</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="YTRegionBase"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTRegionBase.html#yt.data_objects.selection_data_containers.YTRegionBase">[docs]</a><span class="k">class</span> <span class="nc">YTRegionBase</span><span class="p">(</span><span class="n">YTSelectionContainer3D</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A 3D region of data with an arbitrary center.</span>

<span class="sd">    Takes an array of three *left_edge* coordinates, three</span>
<span class="sd">    *right_edge* coordinates, and a *center* that can be anywhere</span>
<span class="sd">    in the domain. If the selected region extends past the edges</span>
<span class="sd">    of the domain, no data will be found there, though the</span>
<span class="sd">    object&#39;s `left_edge` or `right_edge` are not modified.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    center : array_like</span>
<span class="sd">        The center of the region</span>
<span class="sd">    left_edge : array_like</span>
<span class="sd">        The left edge of the region</span>
<span class="sd">    right_edge : array_like</span>
<span class="sd">        The right edge of the region</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_type_name</span> <span class="o">=</span> <span class="s">&quot;region&quot;</span>
    <span class="n">_con_args</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;center&#39;</span><span class="p">,</span> <span class="s">&#39;left_edge&#39;</span><span class="p">,</span> <span class="s">&#39;right_edge&#39;</span><span class="p">)</span>
<div class="viewcode-block" id="YTRegionBase.__init__"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTRegionBase.__init__.html#yt.data_objects.selection_data_containers.YTRegionBase.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">left_edge</span><span class="p">,</span> <span class="n">right_edge</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">ds</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">field_parameters</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">data_source</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">YTSelectionContainer3D</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">ds</span><span class="p">,</span>
                                        <span class="n">field_parameters</span><span class="p">,</span> <span class="n">data_source</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left_edge</span><span class="p">,</span> <span class="n">YTArray</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">left_edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">arr</span><span class="p">(</span><span class="n">left_edge</span><span class="p">,</span> <span class="s">&#39;code_length&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">left_edge</span> <span class="o">=</span> <span class="n">left_edge</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right_edge</span><span class="p">,</span> <span class="n">YTArray</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">right_edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">arr</span><span class="p">(</span><span class="n">right_edge</span><span class="p">,</span> <span class="s">&#39;code_length&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">right_edge</span> <span class="o">=</span> <span class="n">right_edge</span>
</div></div>
<div class="viewcode-block" id="YTDataCollectionBase"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTDataCollectionBase.html#yt.data_objects.selection_data_containers.YTDataCollectionBase">[docs]</a><span class="k">class</span> <span class="nc">YTDataCollectionBase</span><span class="p">(</span><span class="n">YTSelectionContainer3D</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    By selecting an arbitrary *object_list*, we can act on those grids.</span>
<span class="sd">    Child cells are not returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_type_name</span> <span class="o">=</span> <span class="s">&quot;data_collection&quot;</span>
    <span class="n">_con_args</span> <span class="o">=</span> <span class="p">(</span><span class="s">&quot;_obj_list&quot;</span><span class="p">,)</span>
<div class="viewcode-block" id="YTDataCollectionBase.__init__"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTDataCollectionBase.__init__.html#yt.data_objects.selection_data_containers.YTDataCollectionBase.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_list</span><span class="p">,</span> <span class="n">ds</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">field_parameters</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">data_source</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">YTSelectionContainer3D</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">ds</span><span class="p">,</span>
                                        <span class="n">field_parameters</span><span class="p">,</span> <span class="n">data_source</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_obj_ids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">o</span><span class="o">.</span><span class="n">id</span> <span class="o">-</span> <span class="n">o</span><span class="o">.</span><span class="n">_id_offset</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">obj_list</span><span class="p">],</span>
                                <span class="n">dtype</span><span class="o">=</span><span class="s">&quot;int64&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_obj_list</span> <span class="o">=</span> <span class="n">obj_list</span>
</div></div>
<div class="viewcode-block" id="YTSphereBase"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTSphereBase.html#yt.data_objects.selection_data_containers.YTSphereBase">[docs]</a><span class="k">class</span> <span class="nc">YTSphereBase</span><span class="p">(</span><span class="n">YTSelectionContainer3D</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A sphere of points defined by a *center* and a *radius*.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    center : array_like</span>
<span class="sd">        The center of the sphere.</span>
<span class="sd">    radius : float</span>
<span class="sd">        The radius of the sphere.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; import yt</span>
<span class="sd">    &gt;&gt;&gt; ds = yt.load(&quot;RedshiftOutput0005&quot;)</span>
<span class="sd">    &gt;&gt;&gt; c = [0.5,0.5,0.5]</span>
<span class="sd">    &gt;&gt;&gt; sphere = ds.sphere(c, (1., &quot;kpc&quot;))</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_type_name</span> <span class="o">=</span> <span class="s">&quot;sphere&quot;</span>
    <span class="n">_con_args</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;center&#39;</span><span class="p">,</span> <span class="s">&#39;radius&#39;</span><span class="p">)</span>
<div class="viewcode-block" id="YTSphereBase.__init__"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTSphereBase.__init__.html#yt.data_objects.selection_data_containers.YTSphereBase.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">ds</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">field_parameters</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">data_source</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">YTSphereBase</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">center</span><span class="p">,</span> <span class="n">ds</span><span class="p">,</span>
                                           <span class="n">field_parameters</span><span class="p">,</span> <span class="n">data_source</span><span class="p">)</span>
        <span class="c"># Unpack the radius, if necessary</span>
        <span class="n">radius</span> <span class="o">=</span> <span class="n">fix_length</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">radius</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_smallest_dx</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">YTSphereTooSmall</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">radius</span><span class="o">.</span><span class="n">in_units</span><span class="p">(</span><span class="s">&quot;code_length&quot;</span><span class="p">),</span>
                                   <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_smallest_dx</span><span class="p">()</span><span class="o">.</span><span class="n">in_units</span><span class="p">(</span><span class="s">&quot;code_length&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_field_parameter</span><span class="p">(</span><span class="s">&#39;radius&#39;</span><span class="p">,</span><span class="n">radius</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_field_parameter</span><span class="p">(</span><span class="s">&quot;center&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>
</div></div>
<div class="viewcode-block" id="YTEllipsoidBase"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTEllipsoidBase.html#yt.data_objects.selection_data_containers.YTEllipsoidBase">[docs]</a><span class="k">class</span> <span class="nc">YTEllipsoidBase</span><span class="p">(</span><span class="n">YTSelectionContainer3D</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    By providing a *center*,*A*,*B*,*C*,*e0*,*tilt* we</span>
<span class="sd">    can define a ellipsoid of any proportion.  Only cells whose</span>
<span class="sd">    centers are within the ellipsoid will be selected.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    center : array_like</span>
<span class="sd">        The center of the ellipsoid.</span>
<span class="sd">    A : float</span>
<span class="sd">        The magnitude of the largest axis (semi-major) of the ellipsoid.</span>
<span class="sd">    B : float</span>
<span class="sd">        The magnitude of the medium axis (semi-medium) of the ellipsoid.</span>
<span class="sd">    C : float</span>
<span class="sd">        The magnitude of the smallest axis (semi-minor) of the ellipsoid.</span>
<span class="sd">    e0 : array_like (automatically normalized)</span>
<span class="sd">        the direction of the largest semi-major axis of the ellipsoid</span>
<span class="sd">    tilt : float</span>
<span class="sd">        After the rotation about the z-axis to allign e0 to x in the x-y</span>
<span class="sd">        plane, and then rotating about the y-axis to align e0 completely</span>
<span class="sd">        to the x-axis, tilt is the angle in radians remaining to</span>
<span class="sd">        rotate about the x-axis to align both e1 to the y-axis and e2 to</span>
<span class="sd">        the z-axis.</span>
<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; import yt</span>
<span class="sd">    &gt;&gt;&gt; ds = yt.load(&quot;RedshiftOutput0005&quot;)</span>
<span class="sd">    &gt;&gt;&gt; c = [0.5,0.5,0.5]</span>
<span class="sd">    &gt;&gt;&gt; ell = ds.ellipsoid(c, 0.1, 0.1, 0.1, np.array([0.1, 0.1, 0.1]), 0.2)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_type_name</span> <span class="o">=</span> <span class="s">&quot;ellipsoid&quot;</span>
    <span class="n">_con_args</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;center&#39;</span><span class="p">,</span> <span class="s">&#39;_A&#39;</span><span class="p">,</span> <span class="s">&#39;_B&#39;</span><span class="p">,</span> <span class="s">&#39;_C&#39;</span><span class="p">,</span> <span class="s">&#39;_e0&#39;</span><span class="p">,</span> <span class="s">&#39;_tilt&#39;</span><span class="p">)</span>
<div class="viewcode-block" id="YTEllipsoidBase.__init__"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTEllipsoidBase.__init__.html#yt.data_objects.selection_data_containers.YTEllipsoidBase.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">e0</span><span class="p">,</span> <span class="n">tilt</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">ds</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">field_parameters</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">data_source</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">YTSelectionContainer3D</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">ds</span><span class="p">,</span>
                                        <span class="n">field_parameters</span><span class="p">,</span> <span class="n">data_source</span><span class="p">)</span>
        <span class="c"># make sure the magnitudes of semi-major axes are in order</span>
        <span class="k">if</span> <span class="n">A</span><span class="o">&lt;</span><span class="n">B</span> <span class="ow">or</span> <span class="n">B</span><span class="o">&lt;</span><span class="n">C</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">YTEllipsoidOrdering</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span>
        <span class="c"># make sure the smallest side is not smaller than dx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_A</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">quan</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="s">&#39;code_length&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_B</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">quan</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="s">&#39;code_length&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_C</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">quan</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="s">&#39;code_length&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_C</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_smallest_dx</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">YTSphereTooSmall</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_C</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_smallest_dx</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_e0</span> <span class="o">=</span> <span class="n">e0</span> <span class="o">=</span> <span class="n">e0</span> <span class="o">/</span> <span class="p">(</span><span class="n">e0</span><span class="o">**</span><span class="mf">2.0</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">**</span><span class="mf">0.5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tilt</span> <span class="o">=</span> <span class="n">tilt</span>
 
        <span class="c"># find the t1 angle needed to rotate about z axis to align e0 to x</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan</span><span class="p">(</span><span class="n">e0</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="n">e0</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="c"># rotate e0 by -t1</span>
        <span class="n">RZ</span> <span class="o">=</span> <span class="n">get_rotation_matrix</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
        <span class="n">r1</span> <span class="o">=</span> <span class="p">(</span><span class="n">e0</span> <span class="o">*</span> <span class="n">RZ</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
        <span class="c"># find the t2 angle needed to rotate about y axis to align e0 to x</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan</span><span class="p">(</span><span class="o">-</span><span class="n">r1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">/</span> <span class="n">r1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        calculate the original e1</span>
<span class="sd">        given the tilt about the x axis when e0 was aligned </span>
<span class="sd">        to x after t1, t2 rotations about z, y</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">RX</span> <span class="o">=</span> <span class="n">get_rotation_matrix</span><span class="p">(</span><span class="o">-</span><span class="n">tilt</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
        <span class="n">RY</span> <span class="o">=</span> <span class="n">get_rotation_matrix</span><span class="p">(</span><span class="o">-</span><span class="n">t2</span><span class="p">,</span>   <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
        <span class="n">RZ</span> <span class="o">=</span> <span class="n">get_rotation_matrix</span><span class="p">(</span><span class="o">-</span><span class="n">t1</span><span class="p">,</span>   <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
        <span class="n">e1</span> <span class="o">=</span> <span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="n">RX</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">e1</span> <span class="o">=</span> <span class="p">(</span><span class="n">e1</span> <span class="o">*</span> <span class="n">RY</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">e1</span> <span class="o">=</span> <span class="p">(</span><span class="n">e1</span> <span class="o">*</span> <span class="n">RZ</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">e2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">e0</span><span class="p">,</span> <span class="n">e1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_e1</span> <span class="o">=</span> <span class="n">e1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_e2</span> <span class="o">=</span> <span class="n">e2</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_field_parameter</span><span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="n">A</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_field_parameter</span><span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_field_parameter</span><span class="p">(</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_field_parameter</span><span class="p">(</span><span class="s">&#39;e0&#39;</span><span class="p">,</span> <span class="n">e0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_field_parameter</span><span class="p">(</span><span class="s">&#39;e1&#39;</span><span class="p">,</span> <span class="n">e1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_field_parameter</span><span class="p">(</span><span class="s">&#39;e2&#39;</span><span class="p">,</span> <span class="n">e2</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="YTCutRegionBase"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTCutRegionBase.html#yt.data_objects.selection_data_containers.YTCutRegionBase">[docs]</a><span class="k">class</span> <span class="nc">YTCutRegionBase</span><span class="p">(</span><span class="n">YTSelectionContainer3D</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is a data object designed to allow individuals to apply logical</span>
<span class="sd">    operations to fields and filter as a result of those cuts.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data_source : YTSelectionContainer3D</span>
<span class="sd">        The object to which cuts will be applied.</span>
<span class="sd">    conditionals : list of strings</span>
<span class="sd">        A list of conditionals that will be evaluated.  In the namespace</span>
<span class="sd">        available, these conditionals will have access to &#39;obj&#39; which is a data</span>
<span class="sd">        object of unknown shape, and they must generate a boolean array.  For</span>
<span class="sd">        instance, conditionals = [&quot;obj[&#39;temperature&#39;] &lt; 1e3&quot;]</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; import yt</span>
<span class="sd">    &gt;&gt;&gt; ds = yt.load(&quot;RedshiftOutput0005&quot;)</span>
<span class="sd">    &gt;&gt;&gt; sp = ds.sphere(&quot;max&quot;, (1.0, &#39;Mpc&#39;))</span>
<span class="sd">    &gt;&gt;&gt; cr = ds.cut_region(sp, [&quot;obj[&#39;temperature&#39;] &lt; 1e3&quot;])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_type_name</span> <span class="o">=</span> <span class="s">&quot;cut_region&quot;</span>
    <span class="n">_con_args</span> <span class="o">=</span> <span class="p">(</span><span class="s">&quot;base_object&quot;</span><span class="p">,</span> <span class="s">&quot;conditionals&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="YTCutRegionBase.__init__"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTCutRegionBase.__init__.html#yt.data_objects.selection_data_containers.YTCutRegionBase.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_source</span><span class="p">,</span> <span class="n">conditionals</span><span class="p">,</span> <span class="n">ds</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">field_parameters</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">base_object</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">base_object</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c"># passing base_object explicitly has been deprecated,</span>
            <span class="c"># but we handle it here for backward compatibility</span>
            <span class="k">if</span> <span class="n">data_source</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                    <span class="s">&quot;Cannot use both base_object and data_source&quot;</span><span class="p">)</span>
            <span class="n">data_source</span><span class="o">=</span><span class="n">base_object</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">YTCutRegionBase</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span>
            <span class="n">data_source</span><span class="o">.</span><span class="n">center</span><span class="p">,</span> <span class="n">ds</span><span class="p">,</span> <span class="n">field_parameters</span><span class="p">,</span> <span class="n">data_source</span><span class="o">=</span><span class="n">data_source</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conditionals</span> <span class="o">=</span> <span class="n">ensure_list</span><span class="p">(</span><span class="n">conditionals</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base_object</span> <span class="o">=</span> <span class="n">data_source</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_selector</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c"># Need to interpose for __getitem__, fwidth, fcoords, icoords, iwidth,</span>
        <span class="c"># ires and get_data</span>
</div>
<div class="viewcode-block" id="YTCutRegionBase.chunks"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTCutRegionBase.chunks.html#yt.data_objects.selection_data_containers.YTCutRegionBase.chunks">[docs]</a>    <span class="k">def</span> <span class="nf">chunks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span> <span class="n">chunking_style</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c"># We actually want to chunk the sub-chunk, not ourselves.  We have no</span>
        <span class="c"># chunks to speak of, as we do not data IO.</span>
        <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">_chunk</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_object</span><span class="p">,</span>
                                       <span class="n">chunking_style</span><span class="p">,</span>
                                       <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_object</span><span class="o">.</span><span class="n">_chunked_read</span><span class="p">(</span><span class="n">chunk</span><span class="p">):</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chunked_read</span><span class="p">(</span><span class="n">chunk</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
                    <span class="k">yield</span> <span class="bp">self</span>
</div>
<div class="viewcode-block" id="YTCutRegionBase.get_data"><a class="viewcode-back" href="../../../reference/api/generated/yt.data_objects.selection_data_containers.YTCutRegionBase.get_data.html#yt.data_objects.selection_data_containers.YTCutRegionBase.get_data">[docs]</a>    <span class="k">def</span> <span class="nf">get_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fields</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="n">ensure_list</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base_object</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
        <span class="n">ind</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cond_ind</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
            <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_object</span><span class="p">[</span><span class="n">field</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">shape</span> <span class="o">!=</span> <span class="n">ind</span><span class="o">.</span><span class="n">shape</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">YTMixedCutRegion</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conditionals</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">field_data</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_object</span><span class="p">[</span><span class="n">field</span><span class="p">][</span><span class="n">ind</span><span class="p">]</span>
</div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">blocks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># We have to take a slightly different approach here.  Note that all</span>
        <span class="c"># that .blocks has to yield is a 3D array and a mask.</span>
        <span class="k">for</span> <span class="n">obj</span><span class="p">,</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_object</span><span class="o">.</span><span class="n">blocks</span><span class="p">:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">with</span> <span class="n">obj</span><span class="o">.</span><span class="n">_field_parameter_state</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">field_parameters</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">cond</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">conditionals</span><span class="p">:</span>
                    <span class="n">ss</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">cond</span><span class="p">)</span>
                    <span class="n">m</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">ss</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">m</span><span class="p">):</span> <span class="k">continue</span>
            <span class="k">yield</span> <span class="n">obj</span><span class="p">,</span> <span class="n">m</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_cond_ind</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ind</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_object</span>
        <span class="k">with</span> <span class="n">obj</span><span class="o">.</span><span class="n">_field_parameter_state</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">field_parameters</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">cond</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">conditionals</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">cond</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ind</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="n">ind</span> <span class="o">=</span> <span class="n">res</span>
                <span class="k">if</span> <span class="n">ind</span><span class="o">.</span><span class="n">shape</span> <span class="o">!=</span> <span class="n">res</span><span class="o">.</span><span class="n">shape</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">YTIllDefinedCutRegion</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conditionals</span><span class="p">)</span>
                <span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">ind</span><span class="p">,</span> <span class="n">ind</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ind</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">icoords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_object</span><span class="o">.</span><span class="n">icoords</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_cond_ind</span><span class="p">,:]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fcoords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_object</span><span class="o">.</span><span class="n">fcoords</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_cond_ind</span><span class="p">,:]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ires</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_object</span><span class="o">.</span><span class="n">ires</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_cond_ind</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fwidth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_object</span><span class="o">.</span><span class="n">fwidth</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_cond_ind</span><span class="p">,:]</span></div>
</pre></div>

    </div>
      
  </div>
</div>
    <div class="footer">
      &copy; Copyright 2013, the yt Project.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>