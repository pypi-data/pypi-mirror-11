<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Volume Rendering: Making 3D Photorealistic Isocontoured Images &mdash; The yt Project 3.2-dev documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.4/readable/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.2-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="The yt Project 3.2-dev documentation" href="../index.html" />
    <link rel="up" title="Visualizing Data" href="index.html" />
    <link rel="next" title="Hardware Volume Rendering on NVidia Graphics cards" href="hardware_volume_rendering.html" />
    <link rel="prev" title="Using the Manual Plotting Interface" href="manual_plotting.html" />
    
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-391373-2']);
      _gaq.push(['_setDomainName', 'yt-project.org']);
      _gaq.push(['_setAllowHash', false]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/yt_icon.png">
          The yt Project</a>
        <span class="navbar-text navbar-version pull-left"><b>3.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../help/index.html">How to get help</a></li>
                <li><a href="../quickstart/index.html">Quickstart notebooks</a></li>
                <li><a href="../cookbook/index.html">Cookbook</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installing.html">Getting and Installing yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installing.html#getting-yt">Getting yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installing.html#testing-your-installation">Testing Your Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installing.html#switching-between-yt-2-x-and-yt-3-x">Switching between yt-2.x and yt-3.x</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/index.html">yt Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/data_inspection.html">Data Inspection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/simple_visualization.html">Simple Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/data_objects_and_time_series.html">Data Objects and Time Series</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/derived_fields_and_profiles.html">Derived Fields and Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/volume_rendering.html">Volume Rendering</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../yt3differences.html">What&#8217;s New and Different in yt 3.0?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../yt3differences.html#updating-to-yt-3-0-from-old-versions-and-going-back">Updating to yt 3.0 from Old Versions (and going back)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yt3differences.html#converting-old-scripts-to-work-with-yt-3-0">Converting Old Scripts to Work with yt 3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yt3differences.html#cool-new-things">Cool New Things</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yt3differences.html#api-changes">API Changes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cookbook/index.html">The Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cookbook/index.html#getting-the-sample-data">Getting the Sample Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cookbook/index.html#example-scripts">Example Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cookbook/index.html#example-notebooks">Example Notebooks</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Visualizing Data</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="plots.html">How to Make Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="callbacks.html">Plot Modifications: Overplotting Contours, Velocities, Particles, and More</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual_plotting.html">Using the Manual Plotting Interface</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Volume Rendering: Making 3D Photorealistic Isocontoured Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="hardware_volume_rendering.html">Hardware Volume Rendering on NVidia Graphics cards</a></li>
<li class="toctree-l2"><a class="reference internal" href="sketchfab.html">3D Surfaces and Sketchfab</a></li>
<li class="toctree-l2"><a class="reference internal" href="mapserver.html">Mapserver - A Google-Maps-like Interface to your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="streamlines.html">Streamlines: Tracking the Trajectories of Tracers in your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="colormaps/index.html">Colormaps</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing_fits_images.html">Writing FITS Images</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../analyzing/index.html">General Data Analysis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/fields.html">Fields in yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_derived_fields.html">Creating Derived Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/objects.html">Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/units/index.html">Symbolic Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/filtering.html">Filtering your Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/generating_processed_data.html">Generating Processed Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/time_series_analysis.html">Time Series Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/parallel_computation.html">Parallel Computation With yt</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../analyzing/analysis_modules/index.html">Topic-Specific Analysis Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/analysis_modules/halo_analysis.html">Halo Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/analysis_modules/synthetic_observation.html">Synthetic Observation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/analysis_modules/exporting.html">Exporting to External Radiation Transport Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/analysis_modules/two_point_functions.html">Two Point Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/analysis_modules/clump_finding.html">Clump Finding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/analysis_modules/particle_trajectories.html">Particle Trajectories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/analysis_modules/ellipsoid_analysis.html">Halo Ellipsoid Analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examining/index.html">Loading and Examining Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../examining/loading_data.html">Loading Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examining/generic_array_data.html">Loading Generic Array Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examining/generic_particle_data.html">Loading Generic Particle Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examining/spherical_data.html">Loading Spherical Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examining/low_level_inspection.html">Low-Level Data Inspection: Accessing Raw Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developing/index.html">Developing in yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../developing/intro.html">Getting Involved</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/developing.html">How to Develop yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/building_the_docs.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/debugdrive.html">Debugging yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_datatypes.html">Creating Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_derived_fields.html">Creating Derived Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_derived_quantities.html">Creating Derived Quantities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_frontend.html">Creating A New Code Frontend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/external_analysis.html">Using yt with External Analysis Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference Materials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/code_support.html">Code Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/command-line.html">Command-Line Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/api/api.html">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/configuration.html">Customizing yt: The Configuration and Plugin Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/field_list.html">Field List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/changelog.html">ChangeLog</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#version-installation">Version &amp; Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#code-errors-and-failures">Code Errors and Failures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#units">Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#fields">Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#data-objects">Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#developing">Developing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../help/index.html">Getting Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#don-t-panic-and-don-t-give-up">Don&#8217;t panic and don&#8217;t give up</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#update-to-the-latest-version">Update to the latest version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#search-the-documentation-faq-and-mailing-lists">Search the documentation, FAQ, and mailing lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#look-at-the-source-code">Look at the source code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#isolate-and-document-your-problem">Isolate and document your problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#go-on-irc-to-ask-a-question">Go on IRC to ask a question</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#ask-the-mailing-list">Ask the mailing list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#submit-a-bug-report">Submit a bug report</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#special-issues">Special Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#what-is-yt">What is yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#who-is-yt">Who is yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#history-of-yt">History of yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#how-do-i-contact-yt">How do I contact yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#how-do-i-cite-yt">How do I cite yt?</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Volume Rendering: Making 3D Photorealistic Isocontoured Images</a><ul>
<li><a class="reference internal" href="#tutorial">Tutorial</a></li>
<li><a class="reference internal" href="#method">Method</a></li>
<li><a class="reference internal" href="#the-camera-interface">The Camera Interface</a></li>
<li><a class="reference internal" href="#camera-movement">Camera Movement</a></li>
<li><a class="reference internal" href="#transfer-functions">Transfer Functions</a><ul>
<li><a class="reference internal" href="#color-transfer-functions">Color Transfer Functions</a></li>
<li><a class="reference internal" href="#projection-transfer-function">Projection Transfer Function</a></li>
<li><a class="reference internal" href="#planck-transfer-function">Planck Transfer Function</a></li>
<li><a class="reference internal" href="#more-complicated-transfer-functions">More Complicated Transfer Functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#transferfunctionhelper">TransferFunctionHelper</a></li>
<li><a class="reference internal" href="#mpi-parallelization">MPI Parallelization</a></li>
<li><a class="reference internal" href="#openmp-parallelization">OpenMP Parallelization</a></li>
<li><a class="reference internal" href="#running-in-hybrid-mpi-openmp">Running in Hybrid MPI + OpenMP</a></li>
<li><a class="reference internal" href="#opacity">Opacity</a></li>
<li><a class="reference internal" href="#lighting">Lighting</a></li>
<li><a class="reference internal" href="#generating-a-homogenized-volume">Generating a Homogenized Volume</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="volume-rendering-making-3d-photorealistic-isocontoured-images">
<span id="volume-rendering"></span><h1>Volume Rendering: Making 3D Photorealistic Isocontoured Images<a class="headerlink" href="#volume-rendering-making-3d-photorealistic-isocontoured-images" title="Permalink to this headline">¶</a></h1>
<p>Volume rendering, as implemented in yt, is a mechanism by which rays are cast
through a domain, converting field values to emission and absorption, and producing a final image.
This provides the ability to create off-axis projections, isocontour images,
volume emission, and absorption from intervening material.  The primary goal
of the volume rendering in yt is to provide the ability to make
<em>scientifically-informed</em> visualizations of simulations.</p>
<p>The volume renderer is implemented in a hybrid of Python and Cython, which is
Python-like code compiled down to C.  It has been optimized, but it is still a
<em>software</em> volume renderer: it does not currently operate on graphics
processing units (GPUs).  However, while the rendering engine itself may not
directly translate to GPU code (OpenCL, CUDA or OpenGL), the Python structures:
partitioning, transfer functions, display, etc., may be useful in the future
for transitioning the rendering to the GPU.  In addition, this allows users to create
volume renderings on traditional supercomputing platforms that may not have access to GPUs.</p>
<p>The volume renderer is also threaded using OpenMP.  Many of the commands
(including <cite>snapshot</cite>) will accept a <cite>num_threads</cite> option.</p>
<div class="section" id="tutorial">
<h2>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h2>
<p>Volume renderings are created by combining three objects: a volume
homogenization; a transfer function, and a camera object.</p>
<ol class="arabic simple">
<li>Find the appropriate bounds for your data.</li>
<li>Create a ColorTransferFunction object.</li>
<li>Create a Camera object, which homogenizes the volume and orients the viewing
direction</li>
<li>Take a snapshot and save the image.</li>
</ol>
<p>Here is a working example for the IsolatedGalaxy dataset.</p>
</div>
<div class="section" id="method">
<h2>Method<a class="headerlink" href="#method" title="Permalink to this headline">¶</a></h2>
<p>Direct ray casting through a volume enables the generation of new types of
visualizations and images describing a simulation.  yt has the facility
to generate volume renderings by a direct ray casting method.  However, the
ability to create volume renderings informed by analysis by other mechanisms &#8211;
for instance, halo location, angular momentum, spectral energy distributions &#8211;
is useful.</p>
<p>The volume rendering in yt follows a relatively straightforward approach.</p>
<ol class="arabic">
<li><p class="first">Create a set of transfer functions governing the emission and absorption as
a function of one or more variables. (<img class="math" src="../_images/math/ddba6b9da821d34430ec6349d8a62c0d90891bec.png" alt="f(v) \rightarrow (r,g,b,a)"/>)
These can be functions of any field variable, weighted by independent
fields, and even weighted by other evaluated transfer functions.  (See
<cite>transfer_functions</cite>.)</p>
</li>
<li><p class="first">Partition all chunks into non-overlapping, fully domain-tiling &#8220;bricks.&#8221;
Each of these &#8220;bricks&#8221; contains the finest available data at any location.</p>
</li>
<li><p class="first">Generate vertex-centered data for all grids in the volume rendered domain.</p>
</li>
<li><p class="first">Order the bricks from back-to-front.</p>
</li>
<li><p class="first">Construct plane of rays parallel to the image plane, with initial values set
to zero and located at the back of the region to be rendered.</p>
</li>
<li><p class="first">For every brick, identify which rays intersect.  These are then each &#8216;cast&#8217;
through the brick.</p>
<ol class="arabic">
<li><p class="first">Every cell a ray intersects is sampled 5 times (adjustable by parameter),
and data values at each sampling point are trilinearly interpolated from
the vertex-centered data.</p>
</li>
<li><p class="first">Each transfer function is evaluated at each sample point.  This gives us,
for each channel, both emission (<img class="math" src="../_images/math/d32c78b759903e3f4bd4fd2ce0b86358f7500c5d.png" alt="j"/>) and absorption
(<img class="math" src="../_images/math/ad59b6e24a4a00ac621801f8d7513d68be654ab5.png" alt="\alpha"/>) values.</p>
</li>
<li><p class="first">The value for the pixel corresponding to the current ray is updated with
new values calculated by rectangular integration over the path length:</p>
<p><img class="math" src="../_images/math/a29c91dc1f8513cc137e343c90648129262924c1.png" alt="v^{n+1}_{i} =  j_{i}\Delta s + (1 - \alpha_{i}\Delta s )v^{n}_{i}"/></p>
<p>where <img class="math" src="../_images/math/413f8a8e40062a9090d9d50b88bc7b551b314c26.png" alt="n"/> and <img class="math" src="../_images/math/f1299887120e51fb9e64e2a29c4ede283c9fec3c.png" alt="n+1"/> represent the pixel before and after
passing through a sample, <img class="math" src="../_images/math/a581f053bbfa5115f42c13094857cdd12a37ec49.png" alt="i"/> is the color (red, green, blue) and
<img class="math" src="../_images/math/647d18a48bf5793879dd0b6f4a4785ffd7039473.png" alt="\Delta s"/> is the path length between samples.</p>
</li>
</ol>
</li>
<li><p class="first">The image is returned to the user:</p>
</li>
</ol>
<a class="reference internal image-reference" href="../_images/vr_sample.jpg"><img alt="../_images/vr_sample.jpg" src="../_images/vr_sample.jpg" style="width: 512px;" /></a>
</div>
<div class="section" id="the-camera-interface">
<span id="id1"></span><h2>The Camera Interface<a class="headerlink" href="#the-camera-interface" title="Permalink to this headline">¶</a></h2>
<p>A camera object has also been created, to allow for more programmatic
descriptions of the viewpoint and image plane, and to allow for moving the
camera object through the volume and creating multiple images.  There are
several camera objects available, but the most commonly used is the standard,
orthographic projection camera.</p>
<p>The primary interface here is through the creation of an instance of
<a class="reference internal" href="../reference/api/generated/yt.visualization.volume_rendering.camera.Camera.html#yt.visualization.volume_rendering.camera.Camera" title="yt.visualization.volume_rendering.camera.Camera"><code class="xref py py-class docutils literal"><span class="pre">Camera</span></code></a>, which represents a
viewpoint into a volume.  The camera optionally accepts a volume, which can be
either an instance of
<a class="reference internal" href="../reference/api/generated/yt.utilities.amr_kdtree.amr_kdtree.AMRKDTree.html#yt.utilities.amr_kdtree.amr_kdtree.AMRKDTree" title="yt.utilities.amr_kdtree.amr_kdtree.AMRKDTree"><code class="xref py py-class docutils literal"><span class="pre">AMRKDTree</span></code></a> that
has already been initialized.  If one is not supplied, the camera will generate
one itself.  This can also be specified if you wish to save bricks between
repeated calls, thus saving considerable amounts of time.</p>
<p>The camera interface allows the user to move the camera about the domain, as
well as providing interfaces for zooming in and out.  Furthermore, yt now
includes a stereoscopic camera
(<a class="reference internal" href="../reference/api/generated/yt.visualization.volume_rendering.camera.StereoPairCamera.html#yt.visualization.volume_rendering.camera.StereoPairCamera" title="yt.visualization.volume_rendering.camera.StereoPairCamera"><code class="xref py py-class docutils literal"><span class="pre">StereoPairCamera</span></code></a>).</p>
<p>Much like most data objects, the
<a class="reference internal" href="../reference/api/generated/yt.visualization.volume_rendering.camera.Camera.html#yt.visualization.volume_rendering.camera.Camera" title="yt.visualization.volume_rendering.camera.Camera"><code class="xref py py-class docutils literal"><span class="pre">Camera</span></code></a> object hangs off of
the index file, and can be instantiated in that manner.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The keyword <em>no_ghost</em> has been set to True by default
for speed considerations.  However, because this turns off ghost
zones, there may be artifacts at grid boundaries.  If a higher quality
rendering is required, use <em>no_ghost = False</em>.</p>
</div>
<p>Here&#8217;s a fully functional script that demonstrates how to use the camera
interface.</p>
<p>For an example, see the cookbook <a class="reference internal" href="../cookbook/simple_plots.html#cookbook-simple-volume-rendering"><span>Simple Volume Rendering</span></a>.</p>
<p>The <a class="reference internal" href="../reference/api/generated/yt.visualization.volume_rendering.camera.StereoPairCamera.html#yt.visualization.volume_rendering.camera.StereoPairCamera" title="yt.visualization.volume_rendering.camera.StereoPairCamera"><code class="xref py py-class docutils literal"><span class="pre">StereoPairCamera</span></code></a> object
has a single primary method,
<a class="reference internal" href="../reference/api/generated/yt.visualization.volume_rendering.camera.StereoPairCamera.split.html#yt.visualization.volume_rendering.camera.StereoPairCamera.split" title="yt.visualization.volume_rendering.camera.StereoPairCamera.split"><code class="xref py py-meth docutils literal"><span class="pre">split()</span></code></a>, that
will return two cameras, a left and a right.</p>
</div>
<div class="section" id="camera-movement">
<span id="id2"></span><h2>Camera Movement<a class="headerlink" href="#camera-movement" title="Permalink to this headline">¶</a></h2>
<p>There are multiple ways to manipulate the camera viewpoint to create a series of
renderings.  For an example, see this cookbook:
<a class="reference internal" href="../cookbook/complex_plots.html#cookbook-camera-movement"><span>Moving a Volume Rendering Camera</span></a>.  For a current list of
motion helper functions, see the docstrings associated with
<a class="reference internal" href="../reference/api/generated/yt.visualization.volume_rendering.camera.Camera.html#yt.visualization.volume_rendering.camera.Camera" title="yt.visualization.volume_rendering.camera.Camera"><code class="xref py py-class docutils literal"><span class="pre">Camera</span></code></a>.</p>
</div>
<div class="section" id="transfer-functions">
<span id="id3"></span><h2>Transfer Functions<a class="headerlink" href="#transfer-functions" title="Permalink to this headline">¶</a></h2>
<p>Transfer functions are the most essential component.  Several different
fundamental types have been provided, but there are many different ways the
construct complicated expressions to produce visualizations and images using
the underlying machinery.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All of the information about how transfer functions are used and values
extracted is contained in the functions <cite>TransferFunctionProxy.eval_transfer</cite>
and <cite>FIT_get_value</cite> in the file <cite>yt/_amr_utils/VolumeIntegrator.pyx</cite>.  If
you&#8217;re curious about how to construct your own, or why you get the values
you do, you should read the source!</p>
</div>
<p>There are three ready-to-go transfer functions implemented in yt.
<a class="reference internal" href="../reference/api/generated/yt.visualization.volume_rendering.transfer_functions.ColorTransferFunction.html#yt.visualization.volume_rendering.transfer_functions.ColorTransferFunction" title="yt.visualization.volume_rendering.transfer_functions.ColorTransferFunction"><code class="xref py py-class docutils literal"><span class="pre">ColorTransferFunction</span></code></a>,
<a class="reference internal" href="../reference/api/generated/yt.visualization.volume_rendering.transfer_functions.ProjectionTransferFunction.html#yt.visualization.volume_rendering.transfer_functions.ProjectionTransferFunction" title="yt.visualization.volume_rendering.transfer_functions.ProjectionTransferFunction"><code class="xref py py-class docutils literal"><span class="pre">ProjectionTransferFunction</span></code></a>,
and
<a class="reference internal" href="../reference/api/generated/yt.visualization.volume_rendering.transfer_functions.PlanckTransferFunction.html#yt.visualization.volume_rendering.transfer_functions.PlanckTransferFunction" title="yt.visualization.volume_rendering.transfer_functions.PlanckTransferFunction"><code class="xref py py-class docutils literal"><span class="pre">PlanckTransferFunction</span></code></a>.</p>
<div class="section" id="color-transfer-functions">
<h3>Color Transfer Functions<a class="headerlink" href="#color-transfer-functions" title="Permalink to this headline">¶</a></h3>
<p>These transfer functions are the standard way to apply colors to specific
values in the field being rendered.  For instance, applying isocontours at
specific densities.  They have several different mechanisms that can be used.
The easiest mechanism is to use
<a class="reference internal" href="../reference/api/generated/yt.visualization.volume_rendering.transfer_functions.ColorTransferFunction.add_layers.html#yt.visualization.volume_rendering.transfer_functions.ColorTransferFunction.add_layers" title="yt.visualization.volume_rendering.transfer_functions.ColorTransferFunction.add_layers"><code class="xref py py-meth docutils literal"><span class="pre">add_layers()</span></code></a>,
which will add evenly spaced isocontours between the bounds of the transfer
function.  However, you can also use
<a class="reference internal" href="../reference/api/generated/yt.visualization.volume_rendering.transfer_functions.ColorTransferFunction.sample_colormap.html#yt.visualization.volume_rendering.transfer_functions.ColorTransferFunction.sample_colormap" title="yt.visualization.volume_rendering.transfer_functions.ColorTransferFunction.sample_colormap"><code class="xref py py-meth docutils literal"><span class="pre">sample_colormap()</span></code></a>,
which will sample a colormap at a given value.  Additionally, you can directly
call
<a class="reference internal" href="../reference/api/generated/yt.visualization.volume_rendering.transfer_functions.ColorTransferFunction.add_gaussian.html#yt.visualization.volume_rendering.transfer_functions.ColorTransferFunction.add_gaussian" title="yt.visualization.volume_rendering.transfer_functions.ColorTransferFunction.add_gaussian"><code class="xref py py-meth docutils literal"><span class="pre">add_gaussian()</span></code></a>,
which will allow you to specify the colors directly.</p>
<p>An alternate method for modifying the colormap is done using
<a class="reference internal" href="../reference/api/generated/yt.visualization.volume_rendering.transfer_functions.ColorTransferFunction.map_to_colormap.html#yt.visualization.volume_rendering.transfer_functions.ColorTransferFunction.map_to_colormap" title="yt.visualization.volume_rendering.transfer_functions.ColorTransferFunction.map_to_colormap"><code class="xref py py-meth docutils literal"><span class="pre">map_to_colormap()</span></code></a>,
where you can map a segment of the transfer function space to an entire
colormap at a single alpha value.  This is sometimes useful for very opaque
renderings.</p>
<p>See <a class="reference internal" href="../cookbook/simple_plots.html#cookbook-simple-volume-rendering"><span>Simple Volume Rendering</span></a> for an example usage.</p>
</div>
<div class="section" id="projection-transfer-function">
<h3>Projection Transfer Function<a class="headerlink" href="#projection-transfer-function" title="Permalink to this headline">¶</a></h3>
<p>This is designed to allow you to very easily project off-axis through a region.
See <a class="reference internal" href="../cookbook/complex_plots.html#cookbook-offaxis-projection"><span>Off-Axis Projection (an alternate method)</span></a> for a simple example.  Note that the
integration here is scaled to a width of 1.0; this means that if you want to
apply a colorbar, you will have to multiply by the integration width (specified
when you initialize the volume renderer) in whatever units are appropriate.</p>
</div>
<div class="section" id="planck-transfer-function">
<h3>Planck Transfer Function<a class="headerlink" href="#planck-transfer-function" title="Permalink to this headline">¶</a></h3>
<p>This transfer function is designed to apply a semi-realistic color field based
on temperature, emission weighted by density, and approximate scattering based
on the density.  This class is currently under-documented, and it may be best
to examine the source code to use it.</p>
</div>
<div class="section" id="more-complicated-transfer-functions">
<h3>More Complicated Transfer Functions<a class="headerlink" href="#more-complicated-transfer-functions" title="Permalink to this headline">¶</a></h3>
<p>For more complicated transfer functions, you can use the
<a class="reference internal" href="../reference/api/generated/yt.visualization.volume_rendering.transfer_functions.MultiVariateTransferFunction.html#yt.visualization.volume_rendering.transfer_functions.MultiVariateTransferFunction" title="yt.visualization.volume_rendering.transfer_functions.MultiVariateTransferFunction"><code class="xref py py-class docutils literal"><span class="pre">MultiVariateTransferFunction</span></code></a>
object.  This allows for a set of weightings, linkages and so on.</p>
</div>
</div>
<div class="section" id="transferfunctionhelper">
<span id="transfer-function-helper"></span><h2>TransferFunctionHelper<a class="headerlink" href="#transferfunctionhelper" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="mpi-parallelization">
<span id="healpix-volume-rendering"></span><h2>MPI Parallelization<a class="headerlink" href="#mpi-parallelization" title="Permalink to this headline">¶</a></h2>
<p>Currently the volume renderer is parallelized using MPI to decompose the volume
by attempting to split up the
<a class="reference internal" href="../reference/api/generated/yt.utilities.amr_kdtree.amr_kdtree.AMRKDTree.html#yt.utilities.amr_kdtree.amr_kdtree.AMRKDTree" title="yt.utilities.amr_kdtree.amr_kdtree.AMRKDTree"><code class="xref py py-class docutils literal"><span class="pre">AMRKDTree</span></code></a> in a balanced way.  This
has two advantages:</p>
<ol class="arabic simple">
<li>The <a class="reference internal" href="../reference/api/generated/yt.utilities.amr_kdtree.amr_kdtree.AMRKDTree.html#yt.utilities.amr_kdtree.amr_kdtree.AMRKDTree" title="yt.utilities.amr_kdtree.amr_kdtree.AMRKDTree"><code class="xref py py-class docutils literal"><span class="pre">AMRKDTree</span></code></a>
construction is parallelized since each MPI task only needs
to know about the part of the tree it will traverse.</li>
<li>Each MPI task will only read data for portion of the volume that it has
assigned.</li>
</ol>
<p>Once the <a class="reference internal" href="../reference/api/generated/yt.utilities.amr_kdtree.amr_kdtree.AMRKDTree.html#yt.utilities.amr_kdtree.amr_kdtree.AMRKDTree" title="yt.utilities.amr_kdtree.amr_kdtree.AMRKDTree"><code class="xref py py-class docutils literal"><span class="pre">AMRKDTree</span></code></a> has been
constructed, each MPI task begins the rendering
phase until all of its bricks are completed.  At that point, each MPI task has
a full image plane which we then use a tree reduction to construct the final
image, using alpha blending to add the images together at each reduction phase.</p>
<p>Caveats:</p>
<ol class="arabic simple">
<li>At this time, the <a class="reference internal" href="../reference/api/generated/yt.utilities.amr_kdtree.amr_kdtree.AMRKDTree.html#yt.utilities.amr_kdtree.amr_kdtree.AMRKDTree" title="yt.utilities.amr_kdtree.amr_kdtree.AMRKDTree"><code class="xref py py-class docutils literal"><span class="pre">AMRKDTree</span></code></a>
can only be decomposed by a power of 2 MPI
tasks.  If a number of tasks not equal to a power of 2 are used, the largest
power of 2 below that number is used, and the remaining cores will be idle.
This issue is being actively addressed by current development.</li>
<li>Each MPI task, currently, holds the entire image plane.  Therefore when
image plane sizes get large (&gt;2048^2), the memory usage can also get large,
limiting the number of MPI tasks you can use.  This is also being addressed
in current development by using image plane decomposition.</li>
</ol>
<p>For more information about enabling parallelism, see <a class="reference internal" href="../analyzing/parallel_computation.html#parallel-computation"><span>Parallel Computation With yt</span></a>.</p>
</div>
<div class="section" id="openmp-parallelization">
<h2>OpenMP Parallelization<a class="headerlink" href="#openmp-parallelization" title="Permalink to this headline">¶</a></h2>
<p>The volume rendering also parallelized using the OpenMP interface in Cython.
While the MPI parallelization is done using domain decomposition, the OpenMP
threading parallelizes the rays intersecting a given brick of data.  As the
average brick size relative to the image plane increases, the parallel
efficiency increases.</p>
<p>By default, the volume renderer will use the total number of cores available on
the symmetric multiprocessing (SMP) compute platform.  For example, if you have
a shiny new laptop with 8 cores, you&#8217;ll by default launch 8 OpenMP threads.
The number of threads can be controlled with the num_threads keyword in
<a class="reference internal" href="../reference/api/generated/yt.visualization.volume_rendering.camera.Camera.snapshot.html#yt.visualization.volume_rendering.camera.Camera.snapshot" title="yt.visualization.volume_rendering.camera.Camera.snapshot"><code class="xref py py-meth docutils literal"><span class="pre">snapshot()</span></code></a>.  You may also restrict the number of OpenMP threads used
by default by modifying the environment variable OMP_NUM_THREADS.</p>
</div>
<div class="section" id="running-in-hybrid-mpi-openmp">
<h2>Running in Hybrid MPI + OpenMP<a class="headerlink" href="#running-in-hybrid-mpi-openmp" title="Permalink to this headline">¶</a></h2>
<p>The two methods for volume rendering parallelization can be used together to
leverage large supercomputing resources.  When choosing how to balance the
number of MPI tasks vs OpenMP threads, there are a few things to keep in mind.
For these examples, we will assume you are using Nmpi MPI tasks, and Nmp OpenMP
tasks, on a total of P cores. We will assume that the machine has a Nnode SMP
nodes, each with cores_per_node cores per node.</p>
<ol class="arabic simple">
<li>For each MPI task, num_threads (or OMP_NUM_THREADS) OpenMP threads will be
used. Therefore you should usually make sure that Nmpi*Nmp = P.</li>
<li>For simulations with many grids/AMRKDTree bricks, you generally want to increase Nmpi.</li>
<li>For simulations with large image planes (&gt;2048^2), you generally want to
decrease Nmpi and increase Nmp. This is because, currently, each MPI task
stores the entire image plane, and doing so can approach the memory limits
of a given SMP node.</li>
<li>Please make sure you understand the (super)computer topology in terms of
the numbers of cores per socket, node, etc when making these decisions.</li>
<li>For many cases when rendering using your laptop/desktop, OpenMP will
provide a good enough speedup by default that it is preferable to launching
the MPI tasks.</li>
</ol>
<p>For more information about enabling parallelism, see <a class="reference internal" href="../analyzing/parallel_computation.html#parallel-computation"><span>Parallel Computation With yt</span></a>.</p>
</div>
<div class="section" id="opacity">
<h2>Opacity<a class="headerlink" href="#opacity" title="Permalink to this headline">¶</a></h2>
<p>There are currently two models for opacity when rendering a volume, which are
controlled in the ColorTransferFunction with the keyword
grey_opacity=False(default)/True. The first (default) will act such for each of
the r,g,b channels, each channel is only opaque to itself.  This means that if
a ray that has some amount of red then encounters material that emits blue, the
red will still exist and in the end that pixel will be a combination of blue
and red.  However, if the ColorTransferFunction is set up with
grey_opacity=True, then blue will be opaque to red, and only the blue emission
will remain.</p>
<p>For an in-depth example, please see the cookbook example on opaque renders here:
<a class="reference internal" href="../cookbook/complex_plots.html#cookbook-opaque-rendering"><span>Opaque Volume Rendering</span></a>.</p>
</div>
<div class="section" id="lighting">
<h2>Lighting<a class="headerlink" href="#lighting" title="Permalink to this headline">¶</a></h2>
<p>Lighting can be optionally used in volume renders by specifying use_light=True
in the Camera object creation.  If used, one can then change the default
lighting color and direction by modifying Camera.light_dir and
Camera.light_rgb.  Lighting works in this context by evaluating not only the
field value but also its gradient in order to compute the emissivity.  This is
not the same as casting shadows, but provides a way of highlighting sides of a
contour.</p>
</div>
<div class="section" id="generating-a-homogenized-volume">
<h2>Generating a Homogenized Volume<a class="headerlink" href="#generating-a-homogenized-volume" title="Permalink to this headline">¶</a></h2>
<p>In order to perform a volume rendering, the data must first be decomposed into
a HomogenizedVolume object.  This structure splits the domain up into
single-resolution tiles which cover the domain at the highest resolution
possible for a given point in space.  This means that every point in space is
mapped to exactly one data point, which receives its values from the highest
resolution grid that covers that volume.</p>
<p>The creation of these homogenized volumes is done during the
<a class="reference internal" href="../reference/api/generated/yt.visualization.volume_rendering.camera.Camera.html#yt.visualization.volume_rendering.camera.Camera" title="yt.visualization.volume_rendering.camera.Camera"><code class="xref py py-class docutils literal"><span class="pre">Camera</span></code></a>  object
instantiation by default.  However, in some cases it is useful to first build
your homogenized volume to then be passed in to the camera. A sample usage is shown
in <a class="reference internal" href="../cookbook/complex_plots.html#cookbook-amrkdtree-downsampling"><span>Downsampling Data for Volume Rendering</span></a>.</p>
</div>
</div>


    </div>
      
  </div>
</div>
    <div class="footer">
      &copy; Copyright 2013, the yt Project.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>