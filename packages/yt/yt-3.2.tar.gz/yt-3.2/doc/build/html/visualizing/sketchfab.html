<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>3D Surfaces and Sketchfab &mdash; The yt Project 3.2-dev documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.4/readable/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.2-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="The yt Project 3.2-dev documentation" href="../index.html" />
    <link rel="up" title="Visualizing Data" href="index.html" />
    <link rel="next" title="Mapserver - A Google-Maps-like Interface to your Data" href="mapserver.html" />
    <link rel="prev" title="Hardware Volume Rendering on NVidia Graphics cards" href="hardware_volume_rendering.html" />
    
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-391373-2']);
      _gaq.push(['_setDomainName', 'yt-project.org']);
      _gaq.push(['_setAllowHash', false]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/yt_icon.png">
          The yt Project</a>
        <span class="navbar-text navbar-version pull-left"><b>3.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../help/index.html">How to get help</a></li>
                <li><a href="../quickstart/index.html">Quickstart notebooks</a></li>
                <li><a href="../cookbook/index.html">Cookbook</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installing.html">Getting and Installing yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installing.html#getting-yt">Getting yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installing.html#testing-your-installation">Testing Your Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installing.html#switching-between-yt-2-x-and-yt-3-x">Switching between yt-2.x and yt-3.x</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/index.html">yt Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/data_inspection.html">Data Inspection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/simple_visualization.html">Simple Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/data_objects_and_time_series.html">Data Objects and Time Series</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/derived_fields_and_profiles.html">Derived Fields and Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/volume_rendering.html">Volume Rendering</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../yt3differences.html">What&#8217;s New and Different in yt 3.0?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../yt3differences.html#updating-to-yt-3-0-from-old-versions-and-going-back">Updating to yt 3.0 from Old Versions (and going back)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yt3differences.html#converting-old-scripts-to-work-with-yt-3-0">Converting Old Scripts to Work with yt 3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yt3differences.html#cool-new-things">Cool New Things</a></li>
<li class="toctree-l2"><a class="reference internal" href="../yt3differences.html#api-changes">API Changes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cookbook/index.html">The Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cookbook/index.html#getting-the-sample-data">Getting the Sample Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cookbook/index.html#example-scripts">Example Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cookbook/index.html#example-notebooks">Example Notebooks</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Visualizing Data</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="plots.html">How to Make Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="callbacks.html">Plot Modifications: Overplotting Contours, Velocities, Particles, and More</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual_plotting.html">Using the Manual Plotting Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="volume_rendering.html">Volume Rendering: Making 3D Photorealistic Isocontoured Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="hardware_volume_rendering.html">Hardware Volume Rendering on NVidia Graphics cards</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">3D Surfaces and Sketchfab</a></li>
<li class="toctree-l2"><a class="reference internal" href="mapserver.html">Mapserver - A Google-Maps-like Interface to your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="streamlines.html">Streamlines: Tracking the Trajectories of Tracers in your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="colormaps/index.html">Colormaps</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing_fits_images.html">Writing FITS Images</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../analyzing/index.html">General Data Analysis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/fields.html">Fields in yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_derived_fields.html">Creating Derived Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/objects.html">Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/units/index.html">Symbolic Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/filtering.html">Filtering your Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/generating_processed_data.html">Generating Processed Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/time_series_analysis.html">Time Series Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/parallel_computation.html">Parallel Computation With yt</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../analyzing/analysis_modules/index.html">Topic-Specific Analysis Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/analysis_modules/halo_analysis.html">Halo Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/analysis_modules/synthetic_observation.html">Synthetic Observation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/analysis_modules/exporting.html">Exporting to External Radiation Transport Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/analysis_modules/two_point_functions.html">Two Point Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/analysis_modules/clump_finding.html">Clump Finding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/analysis_modules/particle_trajectories.html">Particle Trajectories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/analysis_modules/ellipsoid_analysis.html">Halo Ellipsoid Analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examining/index.html">Loading and Examining Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../examining/loading_data.html">Loading Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examining/generic_array_data.html">Loading Generic Array Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examining/generic_particle_data.html">Loading Generic Particle Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examining/spherical_data.html">Loading Spherical Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examining/low_level_inspection.html">Low-Level Data Inspection: Accessing Raw Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developing/index.html">Developing in yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../developing/intro.html">Getting Involved</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/developing.html">How to Develop yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/building_the_docs.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/debugdrive.html">Debugging yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_datatypes.html">Creating Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_derived_fields.html">Creating Derived Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_derived_quantities.html">Creating Derived Quantities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/creating_frontend.html">Creating A New Code Frontend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/external_analysis.html">Using yt with External Analysis Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference Materials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/code_support.html">Code Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/command-line.html">Command-Line Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/api/api.html">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/configuration.html">Customizing yt: The Configuration and Plugin Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/field_list.html">Field List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/changelog.html">ChangeLog</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#version-installation">Version &amp; Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#code-errors-and-failures">Code Errors and Failures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#units">Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#fields">Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#data-objects">Data Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#developing">Developing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/index.html#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../help/index.html">Getting Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#don-t-panic-and-don-t-give-up">Don&#8217;t panic and don&#8217;t give up</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#update-to-the-latest-version">Update to the latest version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#search-the-documentation-faq-and-mailing-lists">Search the documentation, FAQ, and mailing lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#look-at-the-source-code">Look at the source code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#isolate-and-document-your-problem">Isolate and document your problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#go-on-irc-to-ask-a-question">Go on IRC to ask a question</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#ask-the-mailing-list">Ask the mailing list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#submit-a-bug-report">Submit a bug report</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html#special-issues">Special Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About yt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#what-is-yt">What is yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#who-is-yt">Who is yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#history-of-yt">History of yt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#how-do-i-contact-yt">How do I contact yt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/index.html#how-do-i-cite-yt">How do I cite yt?</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">3D Surfaces and Sketchfab</a><ul>
<li><a class="reference internal" href="#surface-objects-and-extracting-isocontour-information">Surface Objects and Extracting Isocontour Information</a></li>
<li><a class="reference internal" href="#exporting-to-a-file">Exporting to a File</a></li>
<li><a class="reference internal" href="#exporting-to-sketchfab">Exporting to Sketchfab</a></li>
<li><a class="reference internal" href="#obj-and-mtl-files">OBJ and MTL Files</a></li>
<li><a class="reference internal" href="#a-few-more-options">A Few More Options</a></li>
<li><a class="reference internal" href="#uploading-to-sketchfab">Uploading to SketchFab</a></li>
<li><a class="reference internal" href="#importing-to-meshlab-and-blender">Importing to MeshLab and Blender</a></li>
<li><a class="reference internal" href="#one-more-option">...One More Option</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="d-surfaces-and-sketchfab">
<span id="surfaces"></span><span id="extracting-isocontour-information"></span><h1>3D Surfaces and Sketchfab<a class="headerlink" href="#d-surfaces-and-sketchfab" title="Permalink to this headline">¶</a></h1>
<div class="section" id="surface-objects-and-extracting-isocontour-information">
<h2>Surface Objects and Extracting Isocontour Information<a class="headerlink" href="#surface-objects-and-extracting-isocontour-information" title="Permalink to this headline">¶</a></h2>
<p>yt contains an implementation of the <a class="reference external" href="http://en.wikipedia.org/wiki/Marching_cubes">Marching Cubes</a> algorithm, which can operate on
3D data objects.  This provides two things.  The first is to identify
isocontours and return either the geometry of those isocontours or to return
another field value sampled along that isocontour.  The second piece of
functionality is to calculate the flux of a field over an isocontour.</p>
<p>Note that these isocontours are not guaranteed to be topologically connected.
In fact, inside a given data object, the marching cubes algorithm will return
all isocontours, not just a single connected one.  This means if you encompass
two clumps of a given density in your data object and extract an isocontour at
that density, it will include both of the clumps.</p>
<p>This means that with adaptive mesh refinement
data, you <em>will</em> see cracks across refinement boundaries unless a
&#8220;crack-fixing&#8221; step is applied to match up these boundaries.  yt does not
perform such an operation, and so there will be seams visible in 3D views of
your isosurfaces.</p>
<p>Surfaces can be exported in <a class="reference external" href="http://en.wikipedia.org/wiki/Wavefront_.obj_file">OBJ format</a>, values can be samples
at the center of each face of the surface, and flux of a given field could be
calculated over the surface.  This means you can, for instance, extract an
isocontour in density and calculate the mass flux over that isocontour.  It
also means you can export a surface from yt and view it in something like
<a class="reference external" href="http://www.blender.org/">Blender</a>, <a class="reference external" href="http://meshlab.sourceforge.net/">MeshLab</a>, or even on your Android or iOS device in
<a class="reference external" href="http://www.meshpad.org/">MeshPad</a> or <a class="reference external" href="https://play.google.com/store/apps/details?id=it.isticnr.meshlab&amp;hl=en">MeshLab Android</a>.</p>
<p>To extract geometry or sample a field, call
<a class="reference internal" href="../reference/api/generated/yt.data_objects.data_containers.YTSelectionContainer3D.extract_isocontours.html#yt.data_objects.data_containers.YTSelectionContainer3D.extract_isocontours" title="yt.data_objects.data_containers.YTSelectionContainer3D.extract_isocontours"><code class="xref py py-meth docutils literal"><span class="pre">extract_isocontours()</span></code></a>.  To
calculate a flux, call
<a class="reference internal" href="../reference/api/generated/yt.data_objects.data_containers.YTSelectionContainer3D.calculate_isocontour_flux.html#yt.data_objects.data_containers.YTSelectionContainer3D.calculate_isocontour_flux" title="yt.data_objects.data_containers.YTSelectionContainer3D.calculate_isocontour_flux"><code class="xref py py-meth docutils literal"><span class="pre">calculate_isocontour_flux()</span></code></a>.
both of these operations will run in parallel.  For more information on enabling
parallelism in yt, see <a class="reference internal" href="../analyzing/parallel_computation.html#parallel-computation"><span>Parallel Computation With yt</span></a>.</p>
<p>Alternatively, you can make an object called <code class="docutils literal"><span class="pre">YTSurfaceBase</span></code> that makes
this process much easier.  You can create one of these objects by specifying a
source data object and a field over which to identify a surface at a given
value.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;/data/workshop2012/IsolatedGalaxy/galaxy0030/galaxy0030&quot;</span><span class="p">)</span>
<span class="n">sphere</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">sphere</span><span class="p">(</span><span class="s">&quot;max&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="s">&quot;Mpc&quot;</span><span class="p">))</span>
<span class="n">surface</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">surface</span><span class="p">(</span><span class="n">sphere</span><span class="p">,</span> <span class="s">&quot;density&quot;</span><span class="p">,</span> <span class="mf">1e-27</span><span class="p">)</span>
</pre></div>
</div>
<p>This object, <code class="docutils literal"><span class="pre">surface</span></code>, can be queried for values on the surface.  For
instance:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">print</span> <span class="n">surface</span><span class="p">[</span><span class="s">&quot;temperature&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">surface</span><span class="p">[</span><span class="s">&quot;temperature&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
</pre></div>
</div>
<p>will return the values 11850.7476943 and 13641.0663899.  These values are
interpolated to the face centers of every triangle that constitutes a portion
of the surface.  Note that reading a new field requires re-calculating the
entire surface, so it&#8217;s not the fastest operation.  You can get the vertices of
the triangle by looking at the property <code class="docutils literal"><span class="pre">.vertices</span></code>.</p>
</div>
<div class="section" id="exporting-to-a-file">
<h2>Exporting to a File<a class="headerlink" href="#exporting-to-a-file" title="Permalink to this headline">¶</a></h2>
<p>If you want to export this to a <a class="reference external" href="http://en.wikipedia.org/wiki/PLY_(file_format)">PLY file</a> you can call the routine
<code class="docutils literal"><span class="pre">export_ply</span></code>, which will write to a file and optionally sample a field at
every face or vertex, outputting a color value to the file as well.  This file
can then be viewed in MeshLab, Blender or on the website <a class="reference external" href="Sketchfab.com">Sketchfab.com</a>.  But if you want to view it on Sketchfab, there&#8217;s an even
easier way!</p>
</div>
<div class="section" id="exporting-to-sketchfab">
<h2>Exporting to Sketchfab<a class="headerlink" href="#exporting-to-sketchfab" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://sketchfab.com">Sketchfab</a> is a website that uses WebGL, a relatively
new technology for displaying 3D graphics in any browser.  It&#8217;s very fast and
typically requires no plugins.  Plus, it means that you can share data with
anyone and they can view it immersively without having to download the data or
any software packages!  Sketchfab provides a free tier for up to 10 models, and
these models can be embedded in websites.</p>
<p>There are lots of reasons to want to export to Sketchfab.  For instance, if
you&#8217;re looking at a galaxy formation simulation and you publish a paper, you
can include a link to the model in that paper (or in the arXiv listing) so that
people can explore and see what the data looks like.  You can also embed a
model in a website with other supplemental data, or you can use Sketchfab to
discuss morphological properties of a dataset with collaborators.  It&#8217;s also
just plain cool.</p>
<p>The <code class="docutils literal"><span class="pre">YTSurfaceBase</span></code> object includes a method to upload directly to Sketchfab,
but it requires that you get an API key first.  You can get this API key by
creating an account and then going to your &#8220;dashboard,&#8221; where it will be listed
on the right hand side.  Once you&#8217;ve obtained it, put it into your
<code class="docutils literal"><span class="pre">~/.yt/config</span></code> file under the heading <code class="docutils literal"><span class="pre">[yt]</span></code> as the variable
<code class="docutils literal"><span class="pre">sketchfab_api_key</span></code>.  If you don&#8217;t want to do this, you can also supply it as
an argument to the function <code class="docutils literal"><span class="pre">export_sketchfab</span></code>.</p>
<p>Now you can run a script like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;redshift0058&quot;</span><span class="p">)</span>
<span class="n">dd</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">sphere</span><span class="p">(</span><span class="s">&quot;max&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="s">&quot;kpc&quot;</span><span class="p">))</span>
<span class="n">rho</span> <span class="o">=</span> <span class="mf">5e-27</span>

<span class="n">bounds</span> <span class="o">=</span> <span class="p">[(</span><span class="n">dd</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mf">100.0</span><span class="o">/</span><span class="n">ds</span><span class="p">[</span><span class="s">&#39;kpc&#39;</span><span class="p">],</span>
           <span class="n">dd</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mf">100.0</span><span class="o">/</span><span class="n">ds</span><span class="p">[</span><span class="s">&#39;kpc&#39;</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>

<span class="n">surf</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">surface</span><span class="p">(</span><span class="n">dd</span><span class="p">,</span> <span class="s">&quot;density&quot;</span><span class="p">,</span> <span class="n">rho</span><span class="p">)</span>

<span class="n">upload_id</span> <span class="o">=</span> <span class="n">surf</span><span class="o">.</span><span class="n">export_sketchfab</span><span class="p">(</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;RD0058 - 5e-27&quot;</span><span class="p">,</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s">&quot;Extraction of Density (colored by Temperature) at 5e-27 &quot;</span> \
                <span class="o">+</span> <span class="s">&quot;g/cc from a galaxy formation simulation by Ryan Joung.&quot;</span>
    <span class="n">color_field</span> <span class="o">=</span> <span class="s">&quot;temperature&quot;</span><span class="p">,</span>
    <span class="n">color_map</span> <span class="o">=</span> <span class="s">&quot;hot&quot;</span><span class="p">,</span>
    <span class="n">color_log</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="n">bounds</span>
<span class="p">)</span>
</pre></div>
</div>
<p>and yt will extract a surface, convert to a format that Sketchfab.com
understands (PLY, in a zip file) and then upload it using your API key.  For
this demo, I&#8217;ve used data kindly provided by Ryan Joung from a simulation of
galaxy formation.  Here&#8217;s what my newly-uploaded model looks like, using the
embed code from Sketchfab:</p>
<iframe frameborder="0" height="480" width="854" allowFullScreen
webkitallowfullscreen="true" mozallowfullscreen="true"
src="http://skfb.ly/l4jh2edcba?autostart=0&transparent=0&autospin=0&controls=1&watermark=1"></iframe><p>As a note, Sketchfab has a maximum model size of 50MB for the free account.
50MB is pretty hefty, though, so it shouldn&#8217;t be a problem for most needs.
We&#8217;re working on a way to optionally upload links to the Sketchfab models on
the <a class="reference external" href="https://hub.yt-project.org/">yt Hub</a>, but for now, if you want to share
a cool model we&#8217;d love to see it!</p>
</div>
<div class="section" id="obj-and-mtl-files">
<h2>OBJ and MTL Files<a class="headerlink" href="#obj-and-mtl-files" title="Permalink to this headline">¶</a></h2>
<p>If the ability to maneuver around an isosurface of your 3D simulation in
<a class="reference external" href="https://sketchfab.com">Sketchfab</a> cost you half a day of work (let&#8217;s be
honest, 2 days), prepare to be even less productive.  With a new  <a class="reference external" href="http://en.wikipedia.org/wiki/Wavefront_.obj_file">OBJ file</a> exporter, you can now
upload multiple surfaces of different transparencies in the same file.
The following code snippet produces two files which contain the vertex info
(surfaces.obj) and color/transparency info (surfaces.mtl) for a 3D
galaxy simulation:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;/data/workshop2012/IsolatedGalaxy/galaxy0030/galaxy0030&quot;</span><span class="p">)</span>
<span class="n">rho</span> <span class="o">=</span> <span class="p">[</span><span class="mf">2e-27</span><span class="p">,</span> <span class="mf">1e-27</span><span class="p">]</span>
<span class="n">trans</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s">&#39;./surfaces&#39;</span>

<span class="n">sphere</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">sphere</span><span class="p">(</span><span class="s">&quot;max&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="s">&quot;Mpc&quot;</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">r</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rho</span><span class="p">):</span>
    <span class="n">surf</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">surface</span><span class="p">(</span><span class="n">sphere</span><span class="p">,</span> <span class="s">&#39;density&#39;</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
    <span class="n">surf</span><span class="o">.</span><span class="n">export_obj</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">transparency</span> <span class="o">=</span> <span class="n">trans</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">color_field</span><span class="o">=</span><span class="s">&#39;temperature&#39;</span><span class="p">,</span> <span class="n">plot_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p>The calling sequence is fairly similar to the <code class="docutils literal"><span class="pre">export_ply</span></code> function
<a class="reference external" href="http://blog.yt-project.org/post/3DSurfacesAndSketchFab.html">previously used</a>
to export 3D surfaces.  However, one can now specify a transparency for each
surface of interest, and each surface is enumerated in the OBJ files with <code class="docutils literal"><span class="pre">plot_index</span></code>.
This means one could potentially add surfaces to a previously
created file by setting <code class="docutils literal"><span class="pre">plot_index</span></code> to the number of previously written
surfaces.</p>
<p>One tricky thing: the header of the OBJ file points to the MTL file (with
the header command <code class="docutils literal"><span class="pre">mtllib</span></code>).  This means if you move one or both of the files
you may have to change the header to reflect their new directory location.</p>
</div>
<div class="section" id="a-few-more-options">
<h2>A Few More Options<a class="headerlink" href="#a-few-more-options" title="Permalink to this headline">¶</a></h2>
<p>There are a few extra inputs for formatting the surface files you may want to use.</p>
<p>(1) Setting <code class="docutils literal"><span class="pre">dist_fac</span></code> will divide all the vertex coordinates by this factor.
Default will scale the vertices by the physical bounds of your sphere.</p>
<p>(2) Setting <code class="docutils literal"><span class="pre">color_field_max</span></code> and/or <code class="docutils literal"><span class="pre">color_field_min</span></code> will scale the colors
of all surfaces between this min and max.  Default is to scale the colors of each
surface to their own min and max values.</p>
</div>
<div class="section" id="uploading-to-sketchfab">
<h2>Uploading to SketchFab<a class="headerlink" href="#uploading-to-sketchfab" title="Permalink to this headline">¶</a></h2>
<p>To upload to <a class="reference external" href="https://sketchfab.com">Sketchfab</a> one only needs to zip the
OBJ and MTL files together, and then upload via your dashboard prompts in
the usual way.  For example, the above script produces:</p>
<iframe frameborder="0" height="480" width="854" allowFullScreen
webkitallowfullscreen="true" mozallowfullscreen="true"
src="http://skfb.ly/5k4j2fdcb?autostart=0&transparent=0&autospin=0&controls=1&watermark=1">
</iframe></div>
<div class="section" id="importing-to-meshlab-and-blender">
<h2>Importing to MeshLab and Blender<a class="headerlink" href="#importing-to-meshlab-and-blender" title="Permalink to this headline">¶</a></h2>
<p>The new OBJ formatting will produce multi-colored surfaces in both
<a class="reference external" href="http://meshlab.sourceforge.net/">MeshLab</a> and <a class="reference external" href="http://www.blender.org/">Blender</a>,
a feature not possible with the
<a class="reference external" href="http://blog.yt-project.org/post/3DSurfacesAndSketchFab.html">previous PLY exporter</a>.
To see colors in MeshLab go to the &#8220;Render&#8221; tab and
select &#8220;Color -&gt; Per Face&#8221;.  Note in both MeshLab and Blender, unlike Sketchfab, you can&#8217;t see
transparencies until you render.</p>
</div>
<div class="section" id="one-more-option">
<h2>...One More Option<a class="headerlink" href="#one-more-option" title="Permalink to this headline">¶</a></h2>
<p>If you&#8217;ve started poking around the actual code instead of skipping off to
lose a few days running around your own simulations
you may have noticed there are a few more options then those listed above,
specifically, a few related to something called &#8220;Emissivity.&#8221;  This allows you
to output one more type of variable on your surfaces.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">yt</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">yt</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;/data/workshop2012/IsolatedGalaxy/galaxy0030/galaxy0030&quot;</span><span class="p">)</span>
<span class="n">rho</span> <span class="o">=</span> <span class="p">[</span><span class="mf">2e-27</span><span class="p">,</span> <span class="mf">1e-27</span><span class="p">]</span>
<span class="n">trans</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s">&#39;./surfaces&#39;</span>

<span class="k">def</span> <span class="nf">emissivity</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;density&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;density&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">&#39;temperature&#39;</span><span class="p">]))</span>
<span class="n">add_field</span><span class="p">(</span><span class="s">&quot;emissivity&quot;</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="n">_Emissivity</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">r&quot;g*K/cm**6&quot;</span><span class="p">)</span>

<span class="n">sphere</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">sphere</span><span class="p">(</span><span class="s">&quot;max&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="s">&quot;Mpc&quot;</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">r</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rho</span><span class="p">):</span>
    <span class="n">surf</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">surface</span><span class="p">(</span><span class="n">sphere</span><span class="p">,</span> <span class="s">&#39;density&#39;</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
    <span class="n">surf</span><span class="o">.</span><span class="n">export_obj</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">transparency</span> <span class="o">=</span> <span class="n">trans</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                    <span class="n">color_field</span><span class="o">=</span><span class="s">&#39;temperature&#39;</span><span class="p">,</span> <span class="n">emit_field</span> <span class="o">=</span> <span class="s">&#39;emissivity&#39;</span><span class="p">,</span>
                    <span class="n">plot_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p>will output the same OBJ and MTL as in our previous example, but it will scale
an emissivity parameter by our new field.  Technically, this makes our outputs
not really OBJ files at all, but a new sort of hybrid file, however we needn&#8217;t worry
too much about that for now.</p>
<p>This parameter is useful if you want to upload your files in Blender and have the
embedded rendering engine do some approximate ray-tracing on your transparencies
and emissivities.   This does take some slight modifications to the OBJ importer
scripts in Blender.  For example, on a Mac, you would modify the file
&#8220;/Applications/Blender/blender.app/Contents/MacOS/2.65/scripts/addons/io_scene_obj/import_obj.py&#8221;,
in the function &#8220;create_materials&#8221; with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># ...</span>

                 <span class="k">elif</span> <span class="n">line_lower</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;tr&#39;</span><span class="p">):</span>  <span class="c"># translucency</span>
                     <span class="n">context_material</span><span class="o">.</span><span class="n">translucency</span> <span class="o">=</span> <span class="n">float_func</span><span class="p">(</span><span class="n">line_split</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                 <span class="k">elif</span> <span class="n">line_lower</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;tf&#39;</span><span class="p">):</span>
                     <span class="c"># rgb, filter color, blender has no support for this.</span>
                     <span class="k">pass</span>
                 <span class="k">elif</span> <span class="n">line_lower</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;em&#39;</span><span class="p">):</span> <span class="c"># MODIFY: ADD THIS LINE</span>
                     <span class="n">context_material</span><span class="o">.</span><span class="n">emit</span> <span class="o">=</span> <span class="n">float_func</span><span class="p">(</span><span class="n">line_split</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="c"># MODIFY: THIS LINE TOO</span>
                 <span class="k">elif</span> <span class="n">line_lower</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">b</span><span class="s">&#39;illum&#39;</span><span class="p">):</span>
                     <span class="n">illum</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">line_split</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="c"># ...</span>
</pre></div>
</div>
<p>To use this in Blender, you might create a
<a class="reference external" href="http://cgcookie.com/blender/2011/08/26/introduction-to-scripting-with-python-in-blender/">Blender script</a>
like the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">bpy</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">bpy</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">import_scene</span><span class="o">.</span><span class="n">obj</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s">&#39;./surfaces.obj&#39;</span><span class="p">)</span> <span class="c"># will use new importer</span>

<span class="c"># set up lighting = indirect</span>
<span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">worlds</span><span class="p">[</span><span class="s">&#39;World&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">light_settings</span><span class="o">.</span><span class="n">use_indirect_light</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">worlds</span><span class="p">[</span><span class="s">&#39;World&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">horizon_color</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span> <span class="c"># background = black</span>
<span class="c"># have to use approximate, not ray tracing for emitting objects ...</span>
<span class="c">#   ... for now...</span>
<span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">worlds</span><span class="p">[</span><span class="s">&#39;World&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">light_settings</span><span class="o">.</span><span class="n">gather_method</span> <span class="o">=</span> <span class="s">&#39;APPROXIMATE&#39;</span>
<span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">worlds</span><span class="p">[</span><span class="s">&#39;World&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">light_settings</span><span class="o">.</span><span class="n">indirect_factor</span><span class="o">=</span><span class="mf">20.</span> <span class="c"># turn up all emiss</span>

<span class="c"># set up camera to be on -x axis, facing toward your object</span>
<span class="n">scene</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">scenes</span><span class="p">[</span><span class="s">&quot;Scene&quot;</span><span class="p">]</span>
<span class="n">scene</span><span class="o">.</span><span class="n">camera</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.12</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span> <span class="c"># location</span>
<span class="n">scene</span><span class="o">.</span><span class="n">camera</span><span class="o">.</span><span class="n">rotation_euler</span> <span class="o">=</span> <span class="p">[</span><span class="n">radians</span><span class="p">(</span><span class="mf">90.</span><span class="p">),</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">radians</span><span class="p">(</span><span class="o">-</span><span class="mf">90.</span><span class="p">)]</span> <span class="c"># face to (0,0,0)</span>

<span class="c"># render</span>
<span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">filepath</span> <span class="o">=</span><span class="s">&#39;/Users/jillnaiman/surfaces_blender&#39;</span> <span class="c"># needs full path</span>
<span class="n">bpy</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">write_still</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>This above bit of code would produce an image like so:</p>
<img alt="../_images/surfaces_blender.png" src="../_images/surfaces_blender.png" />
<p>Note that the hottest stuff is brightly shining, while the cool stuff is less so
(making the inner isodensity contour barely visible from the outside of the surfaces).</p>
<p>If the Blender image caught your fancy, you&#8217;ll be happy to know there is a greater
integration of Blender and yt in the works, so stay tuned!</p>
</div>
</div>


    </div>
      
  </div>
</div>
    <div class="footer">
      &copy; Copyright 2013, the yt Project.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>