webpackJsonp([2],{0:function(t,e,n){t.exports=n(358)},17:function(t,e,n){"use strict";var i=n(7);n(40);var r=/<[^<]*?>|\r\n|[\r\n\t&<>]/gm,o=/^ +| +$|[\r\n\t] +| {2,}/gm,s=function(t){return(t||window).location.toString().split("#",2)[1]||""},a=function(t){return decodeURIComponent(t.replace(/\+/g," "))},l=function(t){var e,n={},i=/([^&;=]+)=?([^&;]*)/g;for(void 0===t&&(t=this.getHash());e=i.exec(t);)n[a(e[1])]=a(e[2]);return n},u=function(t,e,n){for(var r,o,l,u=/([^&;=]+)=?([^&;]*)/g,c=[],h=s();r=u.exec(h);)l=a(r[1]),l===t?(c.push([r[1],encodeURIComponent(e)].join("=")),o=!0):-1===i.inArray(l,n)&&c.push([r[1],r[2]].join("="));return o||c.push([encodeURIComponent(t),encodeURIComponent(e)].join("=")),c.join("&")},c=function(t,e){return t===e?0:e>t?-1:1},h=function(t){return t.replace(/\\t/g,"	").replace(/\\n/g,"")},d=function b(t){function e(t){var e,n='<span class="highlight-escape">%s</span>',i='<span class="highlight-html">&lt;%s&gt;</span>',r={"\r\n":n.replace(/%s/,"\\r\\n")+"<br/>\n","\r":n.replace(/%s/,"\\r")+"<br/>\n","\n":n.replace(/%s/,"\\n")+"<br/>\n","	":n.replace(/%s/,"\\t"),"&":"&amp;","<":"&lt;",">":"&gt;"};return e=r[t],void 0===e&&(e=i.replace(/%s/,b(t.slice(1,t.length-1)))),e}return t.replace(r,e)},p=function(t){function e(t){var e='<span class="translation-space"> </span>';return Array(t.length+1).join(e)}return t.replace(o,e)},f=function(t){return p(d(t))},g=function(t){var e,n,i=Date.now()-t,r=Math.round(Math.abs(i)/1e3),o=Math.round(r/60),s=Math.round(o/60),a=Math.round(s/24),l=Math.round(a/7),u=Math.round(a/365);return u>0?(e=ngettext("A year ago","%s years ago",u),n=[u]):l>0?(e=ngettext("A week ago","%s weeks ago",l),n=[l]):a>0?(e=ngettext("Yesterday","%s days ago",a),n=[a]):s>0?(e=ngettext("An hour ago","%s hours ago",s),n=[s]):o>0&&(e=ngettext("A minute ago","%s minutes ago",o),n=[o]),e?interpolate(e,n):gettext("A few seconds ago")},m=function(t,e,n){var r=i(t);r.length&&(r.select2(e),r.on("change",n))},v=function(t,e){for(var n=Array.prototype.slice.call(arguments).splice(2),i=t.split("."),r=i.pop(),o=0;o<i.length;o++)e=e[i[o]];return e[r].apply(this,n)},y=function w(t,e,n,i){t.toggleClass(e),n>1&&setTimeout(function(){return w(t,e,n-1,i)},i)};t.exports={getHash:s,getParsedHash:l,updateHashPart:u,strCmp:c,cleanEscape:h,fancyEscape:d,fancyHl:f,relativeDate:g,makeSelectableInput:m,executeFunctionByName:v,blinkClass:y}},19:function(t,e){"use strict";function n(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=Object.assign||function(t,e){for(var i,r,o=n(t),s=1;s<arguments.length;s++){i=arguments[s],r=Object.keys(Object(i));for(var a=0;a<r.length;a++)o[r[a]]=i[r[a]]}return o}},40:function(t,e){!function(t){"undefined"==typeof t.fn.each2&&t.fn.extend({each2:function(e){for(var n=t([0]),i=-1,r=this.length;++i<r&&(n.context=n[0]=this[i])&&e.call(n[0],i,n)!==!1;);return this}})}(jQuery),function(t,e){"use strict";function n(t,e){for(var n=0,i=e.length;i>n;n+=1)if(r(t,e[n]))return n;return-1}function i(){var e=t(L);e.appendTo("body");var n={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),n}function r(t,n){return t===n?!0:t===e||n===e?!1:null===t||null===n?!1:t.constructor===String?t+""==n+"":n.constructor===String?n+""==t+"":!1}function o(e,n){var i,r,o;if(null===e||e.length<1)return[];for(i=e.split(n),r=0,o=i.length;o>r;r+=1)i[r]=t.trim(i[r]);return i}function s(t){return t.outerWidth(!1)-t.width()}function a(n){var i="keyup-change-value";n.on("keydown",function(){t.data(n,i)===e&&t.data(n,i,n.val())}),n.on("keyup",function(){var r=t.data(n,i);r!==e&&n.val()!==r&&(t.removeData(n,i),n.trigger("keyup-change"))})}function l(n){n.on("mousemove",function(n){var i=I;(i===e||i.x!==n.pageX||i.y!==n.pageY)&&t(n.target).trigger("mousemove-filtered",n)})}function u(t,n,i){i=i||e;var r;return function(){var e=arguments;window.clearTimeout(r),r=window.setTimeout(function(){n.apply(i,e)},t)}}function c(t){var e,n=!1;return function(){return n===!1&&(e=t(),n=!0),e}}function h(t,e){var i=u(t,function(t){e.trigger("scroll-debounced",t)});e.on("scroll",function(t){n(t.target,e.get())>=0&&i(t)})}function d(t){t[0]!==document.activeElement&&window.setTimeout(function(){var e,n=t[0],i=t.val().length;t.focus(),t.is(":visible")&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&(e=n.createTextRange(),e.collapse(!1),e.select()))},0)}function p(e){e=t(e)[0];var n=0,i=0;if("selectionStart"in e)n=e.selectionStart,i=e.selectionEnd-n;else if("selection"in document){e.focus();var r=document.selection.createRange();i=document.selection.createRange().text.length,r.moveStart("character",-e.value.length),n=r.text.length-i}return{offset:n,length:i}}function f(t){t.preventDefault(),t.stopPropagation()}function g(t){t.preventDefault(),t.stopImmediatePropagation()}function m(e){if(!A){var n=e[0].currentStyle||window.getComputedStyle(e[0],null);A=t(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),A.attr("class","select2-sizer"),t("body").append(A)}return A.text(e.val()),A.width()}function v(e,n,i){var r,o,s=[];r=e.attr("class"),r&&(r=""+r,t(r.split(" ")).each2(function(){0===this.indexOf("select2-")&&s.push(this)})),r=n.attr("class"),r&&(r=""+r,t(r.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(o=i(this),o&&s.push(this))})),e.attr("class",s.join(" "))}function y(t,e,n,i){var r=t.toUpperCase().indexOf(e.toUpperCase()),o=e.length;return 0>r?void n.push(i(t)):(n.push(i(t.substring(0,r))),n.push("<span class='select2-match'>"),n.push(i(t.substring(r,r+o))),n.push("</span>"),void n.push(i(t.substring(r+o,t.length))))}function b(n){var i,r=0,o=null,s=n.quietMillis||100,a=n.url,l=this;return function(u){window.clearTimeout(i),i=window.setTimeout(function(){r+=1;var i=r,s=n.data,c=a,h=n.transport||t.fn.select2.ajaxDefaults.transport,d={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||e,dataType:n.dataType||"json"},p=t.extend({},t.fn.select2.ajaxDefaults.params,d);s=s?s.call(l,u.term,u.page,u.context):null,c="function"==typeof c?c.call(l,u.term,u.page,u.context):c,null!==o&&o.abort(),n.params&&(t.isFunction(n.params)?t.extend(p,n.params.call(l)):t.extend(p,n.params)),t.extend(p,{url:c,dataType:n.dataType,data:s,success:function(t){if(!(r>i)){var e=n.results(t,u.page);u.callback(e)}}}),o=h.call(l,p)},s)}}function w(e){var n,i,r=e,o=function(t){return""+t.text};t.isArray(r)&&(i=r,r={results:i}),t.isFunction(r)===!1&&(i=r,r=function(){return i});var s=r();return s.text&&(o=s.text,t.isFunction(o)||(n=s.text,o=function(t){return t[n]})),function(e){var n,i=e.term,s={results:[]};return""===i?void e.callback(r()):(n=function(r,s){var a,l;if(r=r[0],r.children){a={};for(l in r)r.hasOwnProperty(l)&&(a[l]=r[l]);a.children=[],t(r.children).each2(function(t,e){n(e,a.children)}),(a.children.length||e.matcher(i,o(a),r))&&s.push(a)}else e.matcher(i,o(r),r)&&s.push(r)},t(r().results).each2(function(t,e){n(e,s.results)}),void e.callback(s))}}function x(n){var i=t.isFunction(n);return function(r){var o=r.term,s={results:[]};t(i?n():n).each(function(){var t=this.text!==e,n=t?this.text:this;(""===o||r.matcher(o,n))&&s.results.push(t?this:{id:this,text:this})}),r.callback(s)}}function C(e,n){if(t.isFunction(e))return!0;if(!e)return!1;throw new Error("formatterName must be a function or a falsy value")}function E(e){return t.isFunction(e)?e():e}function _(e){var n=0;return t.each(e,function(t,e){e.children?n+=_(e.children):n++}),n}function T(t,n,i,o){var s,a,l,u,c,h=t,d=!1;if(!o.createSearchChoice||!o.tokenSeparators||o.tokenSeparators.length<1)return e;for(;;){for(a=-1,l=0,u=o.tokenSeparators.length;u>l&&(c=o.tokenSeparators[l],a=t.indexOf(c),!(a>=0));l++);if(0>a)break;if(s=t.substring(0,a),t=t.substring(a+c.length),s.length>0&&(s=o.createSearchChoice(s,n),s!==e&&null!==s&&o.id(s)!==e&&null!==o.id(s))){for(d=!1,l=0,u=n.length;u>l;l++)if(r(o.id(s),o.id(n[l]))){d=!0;break}d||i(s)}}return h!==t?t:void 0}function S(e,n){var i=function(){};return i.prototype=new e,i.prototype.constructor=i,i.prototype.parent=e.prototype,i.prototype=t.extend(i.prototype,n),i}if(window.Select2===e){var k,P,M,O,D,A,I,N,R,k={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case k.LEFT:case k.RIGHT:case k.UP:case k.DOWN:return!0}return!1},isControl:function(t){var e=t.which;switch(e){case k.SHIFT:case k.CTRL:case k.ALT:return!0}return t.metaKey?!0:!1},isFunctionKey:function(t){return t=t.which?t.which:t,t>=112&&123>=t}},L="<div class='select2-measure-scrollbar'></div>";N=t(document),D=function(){var t=1;return function(){return t++}}(),N.on("mousemove",function(t){I={x:t.pageX,y:t.pageY}}),P=S(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(n){var r,o,s,u,d=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==e&&null!==n.element.data("select2")&&this.destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+D()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=c(function(){return n.element.closest("body")}),v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.css(E(n.containerCss)),this.container.addClass(E(n.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(E(n.dropdownCssClass)),this.dropdown.data("select2",this),this.results=r=this.container.find(d),this.search=o=this.container.find("input.select2-input"),this.resultsPage=0,this.context=null,this.initContainer(),l(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",d,this.bind(this.highlightUnderEvent)),h(80,this.results),this.dropdown.on("scroll-debounced",d,this.bind(this.loadMoreIfNeeded)),t(this.container).on("change",".select2-input",function(t){t.stopPropagation()}),t(this.dropdown).on("change",".select2-input",function(t){t.stopPropagation()}),t.fn.mousewheel&&r.mousewheel(function(t,e,n,i){var o=r.scrollTop();i>0&&0>=o-i?(r.scrollTop(0),f(t)):0>i&&r.get(0).scrollHeight-r.scrollTop()+i<=r.height()&&(r.scrollTop(r.get(0).scrollHeight-r.height()),f(t))}),a(o),o.on("keyup-change input paste",this.bind(this.updateResults)),o.on("focus",function(){o.addClass("select2-focused")}),o.on("blur",function(){o.removeClass("select2-focused")}),this.dropdown.on("mouseup",d,this.bind(function(e){t(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown",function(t){t.stopPropagation()}),t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var s=n.element.prop("disabled");s===e&&(s=!1),this.enable(!s);var u=n.element.prop("readonly");u===e&&(u=!1),this.readonly(u),R=R||i(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus()},destroy:function(){var t=this.opts.element.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),t!==e&&(t.container.remove(),t.dropdown.remove(),t.opts.element.removeClass("select2-offscreen").removeData("select2").off(".select2").attr({tabindex:this.elementTabIndex}).prop("autofocus",this.autofocus||!1).show())},optionToData:function(t){return t.is("option")?{id:t.prop("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:t.prop("disabled"),locked:r(t.attr("locked"),"locked")}:t.is("optgroup")?{text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")}:void 0},prepareOpts:function(n){var i,s,a,l,u=this;if(i=n.element,"select"===i.get(0).tagName.toLowerCase()&&(this.select=s=n.element),s&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=t.extend({},{populateResults:function(i,r,o){var s,a=this.opts.id;(s=function(i,r,l){var c,h,d,p,f,g,m,v,y,b;for(i=n.sortResults(i,r,o),c=0,h=i.length;h>c;c+=1)d=i[c],f=d.disabled===!0,p=!f&&a(d)!==e,g=d.children&&d.children.length>0,m=t("<li></li>"),m.addClass("select2-results-dept-"+l),m.addClass("select2-result"),m.addClass(p?"select2-result-selectable":"select2-result-unselectable"),f&&m.addClass("select2-disabled"),g&&m.addClass("select2-result-with-children"),m.addClass(u.opts.formatResultCssClass(d)),v=t(document.createElement("div")),v.addClass("select2-result-label"),b=n.formatResult(d,v,o,u.opts.escapeMarkup),b!==e&&v.html(b),m.append(v),g&&(y=t("<ul></ul>"),y.addClass("select2-result-sub"),s(d.children,y,l+1),m.append(y)),m.data("select2-data",d),r.append(m)})(r,i,0)}},t.fn.select2.defaults,n),"function"!=typeof n.id&&(a=n.id,n.id=function(t){return t[a]}),t.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(s?(n.query=this.bind(function(n){var r,o,s,a={results:[],more:!1},l=n.term;s=function(t,e){var i;t.is("option")?n.matcher(l,t.text(),t)&&e.push(u.optionToData(t)):t.is("optgroup")&&(i=u.optionToData(t),t.children().each2(function(t,e){s(e,i.children)}),i.children.length>0&&e.push(i))},r=i.children(),this.getPlaceholder()!==e&&r.length>0&&(o=r[0],""===t(o).text()&&(r=r.not(o))),r.each2(function(t,e){s(e,a.results)}),n.callback(a)}),n.id=function(t){return t.id},n.formatResultCssClass=function(t){return t.css}):"query"in n||("ajax"in n?(l=n.element.data("ajax-url"),l&&l.length>0&&(n.ajax.url=l),n.query=b.call(n.element,n.ajax)):"data"in n?n.query=w(n.data):"tags"in n&&(n.query=x(n.tags),n.createSearchChoice===e&&(n.createSearchChoice=function(t){return{id:t,text:t}}),n.initSelection===e&&(n.initSelection=function(e,i){var s=[];t(o(e.val(),n.separator)).each(function(){var e=this,i=this,o=n.tags;t.isFunction(o)&&(o=o()),t(o).each(function(){return r(this.id,e)?(i=this.text,!1):void 0}),s.push({id:e,text:i})}),i(s)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");return n},monitorSource:function(){var t,n=this.opts.element;n.on("change.select2",this.bind(function(t){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),t=this.bind(function(){var t,i=n.prop("disabled");i===e&&(i=!1),this.enable(!i);var t=n.prop("readonly");t===e&&(t=!1),this.readonly(t),v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(E(this.opts.containerCssClass)),v(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(E(this.opts.dropdownCssClass))}),n.on("propertychange.select2 DOMAttrModified.select2",t),this.mutationCallback===e&&(this.mutationCallback=function(e){e.forEach(t)}),"undefined"!=typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(this.mutationCallback),this.propertyObserver.observe(n.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){var n=t.Event("select2-selecting",{val:this.id(e),object:e});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(e){e=e||{},e=t.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var t=this._enabled&&!this._readonly,e=!t;return t===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",e),this.close(),this.enabledInterface=t,!0)},enable:function(t){return t===e&&(t=!0),this._enabled===t?!1:(this._enabled=t,this.opts.element.prop("disabled",!t),this.enableInterface(),!0)},readonly:function(t){return t===e&&(t=!1),this._readonly===t?!1:(this._readonly=t,this.opts.element.prop("readonly",t),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,n,i,r,o=this.dropdown,s=this.container.offset(),a=this.container.outerHeight(!1),l=this.container.outerWidth(!1),u=o.outerHeight(!1),c=t(window).scrollLeft()+t(window).width(),h=t(window).scrollTop()+t(window).height(),d=s.top+a,p=s.left,f=h>=d+u,g=s.top-u>=this.body().scrollTop(),m=o.outerWidth(!1),v=c>=p+m,y=o.hasClass("select2-drop-above");this.opts.dropdownAutoWidth?(r=t(".select2-results",o)[0],o.addClass("select2-drop-auto-width"),o.css("width",""),m=o.outerWidth(!1)+(r.scrollHeight===r.clientHeight?0:R.width),m>l?l=m:m=l,v=c>=p+m):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body().css("position")&&(e=this.body().offset(),d-=e.top,p-=e.left),y?(n=!0,!g&&f&&(n=!1)):(n=!1,!f&&g&&(n=!0)),v||(p=s.left+l-m),n?(d=s.top-u,this.container.addClass("select2-drop-above"),o.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),o.removeClass("select2-drop-above")),i=t.extend({top:d,left:p,width:l},E(this.opts.dropdownCss)),o.css(i)},shouldOpen:function(){var e;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(e=t.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){function e(){return{width:Math.max(document.documentElement.scrollWidth,t(window).width()),height:Math.max(document.documentElement.scrollHeight,t(window).height())}}var n,i=this.containerId,r="scroll."+i,o="resize."+i,s="orientationchange."+i;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),n=t("#select2-drop-mask"),0==n.length&&(n=t(document.createElement("div")),n.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),n.hide(),n.appendTo(this.body()),n.on("mousedown touchstart",function(e){var n,i=t("#select2-drop");i.length>0&&(n=i.data("select2"),n.opts.selectOnBlur&&n.selectHighlighted({noFocus:!0}),n.close(),e.preventDefault(),e.stopPropagation())})),this.dropdown.prev()[0]!==n[0]&&this.dropdown.before(n),t("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),n.css(e()),n.show(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible();var a=this;this.container.parents().add(window).each(function(){t(this).on(o+" "+r+" "+s,function(n){t("#select2-drop-mask").css(e()),a.positionDropdown()})})},close:function(){if(this.opened()){var e=this.containerId,n="scroll."+e,i="resize."+e,r="orientationchange."+e;this.container.parents().add(window).each(function(){t(this).off(n).off(i).off(r)}),this.clearDropdownAlignmentPreference(),t("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(t.Event("select2-close"))}},clearSearch:function(){},getMaximumSelectionSize:function(){return E(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var e,n,i,r,o,s,a,l=this.results;if(n=this.highlight(),!(0>n)){if(0==n)return void l.scrollTop(0);e=this.findHighlightableChoices().find(".select2-result-label"),i=t(e[n]),r=i.offset().top+i.outerHeight(!0),n===e.length-1&&(a=l.find("li.select2-more-results"),a.length>0&&(r=a.offset().top+a.outerHeight(!0))),o=l.offset().top+l.outerHeight(!0),r>o&&l.scrollTop(l.scrollTop()+(r-o)),s=i.offset().top-l.offset().top,0>s&&"none"!=i.css("display")&&l.scrollTop(l.scrollTop()+s)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(e){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){i+=e;var r=t(n[i]);if(r.hasClass("select2-result-selectable")&&!r.hasClass("select2-disabled")&&!r.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(e){var i,r,o=this.findHighlightableChoices();return 0===arguments.length?n(o.filter(".select2-highlighted")[0],o.get()):(e>=o.length&&(e=o.length-1),0>e&&(e=0),this.results.find(".select2-highlighted").removeClass("select2-highlighted"),i=t(o[e]),i.addClass("select2-highlighted"),this.ensureHighlightVisible(),r=i.data("select2-data"),void(r&&this.opts.element.trigger({type:"select2-highlight",val:this.id(r),choice:r})))},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var n=t(e.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var t,e=this.results,n=e.find("li.select2-more-results"),i=this.resultsPage+1,r=this,o=this.search.val(),s=this.context;0!==n.length&&(t=n.offset().top-e.offset().top-e.height(),t<=this.opts.loadMorePadding&&(n.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:i,context:s,matcher:this.opts.matcher,callback:this.bind(function(t){r.opened()&&(r.opts.populateResults.call(this,e,t.results,{term:o,page:i,context:s}),r.postprocessResults(t,!1,!1),t.more===!0?(n.detach().appendTo(e).text(r.opts.formatLoadMore(i+1)),window.setTimeout(function(){r.loadMoreIfNeeded()},10)):n.remove(),r.positionDropdown(),r.resultsPage=i,r.context=t.context)})})))},tokenize:function(){},updateResults:function(n){function i(){u.scrollTop(0),l.removeClass("select2-active"),h.positionDropdown()}function o(t){u.html(t),i()}var s,a,l=this.search,u=this.results,c=this.opts,h=this,d=l.val(),p=t.data(this.container,"select2-last-term");if((n===!0||!p||!r(d,p))&&(t.data(this.container,"select2-last-term",d),n===!0||this.showSearchInput!==!1&&this.opened())){var f=this.getMaximumSelectionSize();if(f>=1&&(s=this.data(),t.isArray(s)&&s.length>=f&&C(c.formatSelectionTooBig,"formatSelectionTooBig")))return void o("<li class='select2-selection-limit'>"+c.formatSelectionTooBig(f)+"</li>");if(l.val().length<c.minimumInputLength)return o(C(c.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+c.formatInputTooShort(l.val(),c.minimumInputLength)+"</li>":""),void(n&&this.showSearch(!0));if(c.maximumInputLength&&l.val().length>c.maximumInputLength)return void o(C(c.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+c.formatInputTooLong(l.val(),c.maximumInputLength)+"</li>":"");c.formatSearching&&0===this.findHighlightableChoices().length&&o("<li class='select2-searching'>"+c.formatSearching()+"</li>"),l.addClass("select2-active"),a=this.tokenize(),a!=e&&null!=a&&l.val(a),this.resultsPage=1,c.query({element:c.element,term:l.val(),page:this.resultsPage,context:null,matcher:c.matcher,callback:this.bind(function(s){var a;return this.opened()?(this.context=s.context===e?null:s.context,this.opts.createSearchChoice&&""!==l.val()&&(a=this.opts.createSearchChoice.call(null,l.val(),s.results),a!==e&&null!==a&&h.id(a)!==e&&null!==h.id(a)&&0===t(s.results).filter(function(){return r(h.id(this),h.id(a))}).length&&s.results.unshift(a)),0===s.results.length&&C(c.formatNoMatches,"formatNoMatches")?void o("<li class='select2-no-results'>"+c.formatNoMatches(l.val())+"</li>"):(u.empty(),h.opts.populateResults.call(this,u,s.results,{term:l.val(),page:this.resultsPage,context:null}),s.more===!0&&C(c.formatLoadMore,"formatLoadMore")&&(u.append("<li class='select2-more-results'>"+h.opts.escapeMarkup(c.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(s,n),i(),void this.opts.element.trigger({type:"select2-loaded",data:s}))):void this.search.removeClass("select2-active")})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){d(this.search)},selectHighlighted:function(t){var e=this.highlight(),n=this.results.find(".select2-highlighted"),i=n.closest(".select2-result").data("select2-data");i&&(this.highlight(e),this.onSelect(i,t))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function n(){var n,i,r,o,s;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(n=this.opts.element.attr("style"),n!==e)for(i=n.split(";"),o=0,s=i.length;s>o;o+=1)if(r=i[o].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==r&&r.length>=1)return r[1];return n=this.opts.element.css("width"),n&&n.length>0?n:"resolve"===this.opts.width?0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=n.call(this);null!==i&&this.container.css("width",i)}}),M=S(P,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <div><b></b></div>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var e,n;this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),e=this.search.get(0),e.createTextRange&&(n=e.createTextRange(),n.collapse(!1),n.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},initContainer:function(){var e,n=this.container,i=this.dropdown;this.showSearch(!1),this.selection=e=n.find(".select2-choice"),this.focusser=n.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+D()),t("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()){if(t.which===k.PAGE_UP||t.which===k.PAGE_DOWN)return void f(t);switch(t.which){case k.UP:case k.DOWN:return this.moveHighlight(t.which===k.UP?-1:1),void f(t);case k.ENTER:return this.selectHighlighted(),void f(t);case k.TAB:return void this.selectHighlighted({noFocus:!0});case k.ESC:return this.cancel(t),void f(t)}}})),this.search.on("blur",this.bind(function(t){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(t){return!this.isInterfaceEnabled()||t.which===k.TAB||k.isControl(t)||k.isFunctionKey(t)||t.which===k.ESC?void 0:this.opts.openOnEnter===!1&&t.which===k.ENTER?void f(t):t.which==k.DOWN||t.which==k.UP||t.which==k.ENTER&&this.opts.openOnEnter?(this.open(),void f(t)):t.which==k.DELETE||t.which==k.BACKSPACE?(this.opts.allowClear&&this.clear(),void f(t)):void 0})),a(this.focusser),this.focusser.on("keyup-change input",this.bind(function(t){t.stopPropagation(),this.opened()||this.open()})),e.on("mousedown","abbr",this.bind(function(t){this.isInterfaceEnabled()&&(this.clear(),g(t),this.close(),this.selection.focus())})),e.on("mousedown",this.bind(function(e){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),f(e)})),i.on("mousedown",this.bind(function(){this.search.focus()})),e.on("focus",this.bind(function(t){f(t)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(t.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var e=this.selection.data("select2-data");e&&(this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(e),choice:e}),this.triggerChange({removed:e})))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text())this.updateSelection([]),this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==e&&null!==n&&(t.updateSelection(n),t.close(),t.setPlaceholder())})}},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var i=t.find(":selected");e(n.optionToData(i))}:"data"in e&&(e.initSelection=e.initSelection||function(n,i){var o=n.val(),s=null;e.query({matcher:function(t,n,i){var a=r(o,e.id(i));return a&&(s=i),a},callback:t.isFunction(i)?function(){i(s)}:t.noop})}),e},getPlaceholder:function(){return this.select&&""!==this.select.find("option").first().text()?e:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();if(""===this.opts.element.val()&&t!==e){if(this.select&&""!==this.select.find("option:first").text())return;
this.selection.find("span").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(t,e,n){var i=0,o=this;if(this.findHighlightableChoices().each2(function(t,e){return r(o.id(e.data("select2-data")),o.opts.element.val())?(i=t,!1):void 0}),n!==!1&&this.highlight(i),e===!0&&this.showSearchInput===!1){var s=this.opts.minimumResultsForSearch;s>=0&&this.showSearch(_(t.results)>=s)}},showSearch:function(e){this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),t(this.dropdown,this.container).toggleClass("select2-with-searchbox",e)},onSelect:function(t,e){if(this.triggerSelect(t)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"select2-selected",val:this.id(t),choice:t}),this.close(),e&&e.noFocus||this.selection.focus(),r(n,this.id(t))||this.triggerChange({added:t,removed:i})}},updateSelection:function(t){var n,i=this.selection.find("span");this.selection.data("select2-data",t),i.empty(),n=this.opts.formatSelection(t,i),n!==e&&i.append(this.opts.escapeMarkup(n)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&this.container.addClass("select2-allowclear")},val:function(){var t,n=!1,i=null,r=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(t).find(":selected").each2(function(t,e){return i=r.optionToData(e),!1}),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({added:i,removed:o});else{if(this.opts.initSelection===e)throw new Error("cannot call val() if initSelection() is not defined");if(!t&&0!==t)return void this.clear(n);this.opts.element.val(t),this.opts.initSelection(this.opts.element,function(t){r.opts.element.val(t?r.id(t):""),r.updateSelection(t),r.setPlaceholder(),n&&r.triggerChange({added:t,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t,n){var i;return 0===arguments.length?(i=this.selection.data("select2-data"),i==e&&(i=null),i):void(t&&""!==t?(i=this.data(),this.opts.element.val(t?this.id(t):""),this.updateSelection(t),n&&this.triggerChange({added:t,removed:i})):this.clear(n))}}),O=S(P,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var i=[];t.find(":selected").each2(function(t,e){i.push(n.optionToData(e))}),e(i)}:"data"in e&&(e.initSelection=e.initSelection||function(n,i){var s=o(n.val(),e.separator),a=[];e.query({matcher:function(n,i,o){var l=t.grep(s,function(t){return r(t,e.id(o))}).length;return l&&a.push(o),l},callback:t.isFunction(i)?function(){for(var t=[],n=0;n<s.length;n++)for(var o=s[n],l=0;l<a.length;l++){var u=a[l];if(r(o,e.id(u))){t.push(u),a.splice(l,1);break}}i(t)}:t.noop})}),e},selectChoice:function(t){var e=this.container.find(".select2-search-choice-focus");e.length&&t&&t[0]==e[0]||(e.length&&this.opts.element.trigger("choice-deselected",e),e.removeClass("select2-search-choice-focus"),t&&t.length&&(this.close(),t.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",t)))},initContainer:function(){var e,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=e=this.container.find(n);var i=this;this.selection.on("mousedown",".select2-search-choice",function(e){i.search[0].focus(),i.selectChoice(t(this))}),this.search.attr("id","s2id_autogen"+D()),t("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()){++this.keydowns;var n=e.find(".select2-search-choice-focus"),i=n.prev(".select2-search-choice:not(.select2-locked)"),r=n.next(".select2-search-choice:not(.select2-locked)"),o=p(this.search);if(n.length&&(t.which==k.LEFT||t.which==k.RIGHT||t.which==k.BACKSPACE||t.which==k.DELETE||t.which==k.ENTER)){var s=n;return t.which==k.LEFT&&i.length?s=i:t.which==k.RIGHT?s=r.length?r:null:t.which===k.BACKSPACE?(this.unselect(n.first()),this.search.width(10),s=i.length?i:r):t.which==k.DELETE?(this.unselect(n.first()),this.search.width(10),s=r.length?r:null):t.which==k.ENTER&&(s=null),this.selectChoice(s),f(t),void(s&&s.length||this.open())}if((t.which===k.BACKSPACE&&1==this.keydowns||t.which==k.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(e.find(".select2-search-choice:not(.select2-locked)").last()),void f(t);if(this.selectChoice(null),this.opened())switch(t.which){case k.UP:case k.DOWN:return this.moveHighlight(t.which===k.UP?-1:1),void f(t);case k.ENTER:return this.selectHighlighted(),void f(t);case k.TAB:return void this.selectHighlighted({noFocus:!0});case k.ESC:return this.cancel(t),void f(t)}if(t.which!==k.TAB&&!k.isControl(t)&&!k.isFunctionKey(t)&&t.which!==k.BACKSPACE&&t.which!==k.ESC){if(t.which===k.ENTER){if(this.opts.openOnEnter===!1)return;if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return}this.open(),(t.which===k.PAGE_UP||t.which===k.PAGE_DOWN)&&f(t),t.which===k.ENTER&&f(t)}}})),this.search.on("keyup",this.bind(function(t){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(t.Event("select2-blur"))})),this.container.on("mousedown",n,this.bind(function(e){this.isInterfaceEnabled()&&(t(e.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.on("focus",n,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==e&&null!==n&&(t.updateSelection(n),t.close(),t.clearSearch())})}},clearSearch:function(){var t=this.getPlaceholder(),n=this.getMaxSearchWidth();t!==e&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(t).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var i=[],r=[],o=this;t(e).each(function(){n(o.id(this),i)<0&&(i.push(o.id(this)),r.push(this))}),e=r,this.selection.find(".select2-search-choice").remove(),t(e).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var t=this.search.val();t=this.opts.tokenizer(t,this.data(),this.bind(this.onSelect),this.opts),null!=t&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t,e){this.triggerSelect(t)&&(this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),e&&e.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var i,r=!n.locked,o=t("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=t("<li class='select2-search-choice select2-locked'><div></div></li>"),a=r?o:s,l=this.id(n),u=this.getVal();i=this.opts.formatSelection(n,a.find("div")),i!=e&&a.find("div").replaceWith("<div title='"+this.opts.escapeMarkup(i)+"'>"+this.opts.escapeMarkup(i)+"</div>"),r&&a.find(".select2-search-choice-close").on("mousedown",f).on("click dblclick",this.bind(function(e){this.isInterfaceEnabled()&&(t(e.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),f(e))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),a.data("select2-data",n),a.insertBefore(this.searchContainer),u.push(l),this.setVal(u)},unselect:function(t){var e,i,r=this.getVal();if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";e=t.data("select2-data"),e&&(i=n(this.id(e),r),i>=0&&(r.splice(i,1),this.setVal(r),this.select&&this.postprocessResults()),t.remove(),this.opts.element.trigger({type:"removed",val:this.id(e),choice:e}),this.triggerChange({removed:e}))},postprocessResults:function(t,e,i){var r=this.getVal(),o=this.results.find(".select2-result"),s=this.results.find(".select2-result-with-children"),a=this;o.each2(function(t,e){var i=a.id(e.data("select2-data"));n(i,r)>=0&&(e.addClass("select2-selected"),e.find(".select2-result-selectable").addClass("select2-selected"))}),s.each2(function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")}),-1==this.highlight()&&i!==!1&&a.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&this.results.append("<li class='select2-no-results'>"+a.opts.formatNoMatches(a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-s(this.search)},resizeSearch:function(){var t,e,n,i,r,o=s(this.search);t=m(this.search)+10,e=this.search.offset().left,n=this.selection.width(),i=this.selection.offset().left,r=n-(e-i)-o,t>r&&(r=n-o),40>r&&(r=n-o),0>=r&&(r=t),this.search.width(r)},getVal:function(){var t;return this.select?(t=this.select.val(),null===t?[]:t):(t=this.opts.element.val(),o(t,this.opts.separator))},setVal:function(e){var i;this.select?this.select.val(e):(i=[],t(e).each(function(){n(this,i)<0&&i.push(this)}),this.opts.element.val(0===i.length?"":i.join(this.opts.separator)))},buildChangeDetails:function(t,e){for(var e=e.slice(0),t=t.slice(0),n=0;n<e.length;n++)for(var i=0;i<t.length;i++)r(this.opts.id(e[n]),this.opts.id(t[i]))&&(e.splice(n,1),n--,t.splice(i,1),i--);return{added:e,removed:t}},val:function(n,i){var r,o=this;if(0===arguments.length)return this.getVal();if(r=this.data(),r.length||(r=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:r}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(r,this.data()));else{if(this.opts.initSelection===e)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var n=t(e).map(o.id);o.setVal(n),o.updateSelection(e),o.clearSearch(),i&&o.triggerChange(this.buildChangeDetails(r,this.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(n.opts.id(t(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e,n){var i,r,o=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return t(this).data("select2-data")}).get():(r=this.data(),e||(e=[]),i=t.map(e,function(t){return o.opts.id(t)}),this.setVal(i),this.updateSelection(e),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(r,this.data())),void 0)}}),t.fn.select2=function(){var i,r,o,s,a=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","readonly","positionDropdown","data"],u=["val","opened","isFocused","container","data"];return this.each(function(){if(0===a.length||"object"==typeof a[0])i=0===a.length?{}:t.extend({},a[0]),i.element=t(this),"select"===i.element.get(0).tagName.toLowerCase()?s=i.element.prop("multiple"):(s=i.multiple||!1,"tags"in i&&(i.multiple=s=!0)),r=s?new O:new M,r.init(i);else{if("string"!=typeof a[0])throw"Invalid arguments to select2 plugin: "+a;if(n(a[0],l)<0)throw"Unknown method: "+a[0];if(o=e,r=t(this).data("select2"),r===e)return;if(o="container"===a[0]?r.container:r[a[0]].apply(r,a.slice(1)),n(a[0],u)>=0)return!1}}),o===e?this:o},t.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,n,i){var r=[];return y(t.text,n.term,r,i),r.join("")},formatSelection:function(t,n){return t?t.text:e},sortResults:function(t,e,n){return t},formatResultCssClass:function(t){return e},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(t,e){var n=e-t.length;return"Please enter "+n+" more character"+(1==n?"":"s")},formatInputTooLong:function(t,e){var n=t.length-e;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(t){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t.id},matcher:function(t,e){return(""+e).toUpperCase().indexOf((""+t).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:T,escapeMarkup:function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})},blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(t){return null}},t.fn.select2.ajaxDefaults={transport:t.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:b,local:w,tags:x},util:{debounce:u,markMatch:y},"class":{"abstract":P,single:M,multi:O}}}}(jQuery)},45:function(t,e){/*!
	 * jQuery serializeObject - v0.2 - 1/20/2010
	 * http://benalman.com/projects/jquery-misc-plugins/
	 * 
	 * Copyright (c) 2010 "Cowboy" Ben Alman
	 * Dual licensed under the MIT and GPL licenses.
	 * http://benalman.com/about/license/
	 */
!function(t,e){"$:nomunge";t.fn.serializeObject=function(){var n={};return t.each(this.serializeArray(),function(i,r){var o=r.name,s=r.value;n[o]=n[o]===e?s:t.isArray(n[o])?n[o].concat(s):[n[o],s]}),n}}(jQuery)},48:function(t,e,n){"use strict";var i,r=n(4),o=n(9),s=o.Model.extend({defaults:{text:"",level:"info",language:"en"}}),a=o.Collection.extend({model:s}),l=o.View.extend({className:"alert alert-block",render:function(){return this.$el.addClass(["alert",this.model.get("level")].join("-")),this.$el.attr("lang",this.model.get("language")),this.$el.html(this.model.get("text")).hide().fadeIn(300),this}}),u=o.View.extend({el:".js-alerts",initialize:function(){this.subViews=[],this.listenTo(this.collection,"add",this.add),this.listenTo(this.collection,"remove",this.remove)},add:function(t){var e=new l({model:t});this.subViews.push(e),this.$el.prepend(e.render().el)},remove:function(t){var e=r.find(this.subViews,function(e){return e.model===t});this.subViews=r(this.subViews).without(e),e.$el.fadeOut(3500,function(){e.remove()})}}),c=new a,h={show:function(t){i||(i=new u({collection:c}));var e=new s(t);c.add(e),window.setTimeout(function(){c.remove(e)},2e3)}};t.exports=h},52:function(t,e){jQuery.cookie=function(t,e,n){if("undefined"==typeof e){var i=null;if(document.cookie&&""!=document.cookie)for(var r=document.cookie.split(";"),o=0;o<r.length;o++){var s=jQuery.trim(r[o]);if(s.substring(0,t.length+1)==t+"="){i=decodeURIComponent(s.substring(t.length+1));break}}return i}n=n||{},null===e&&(e="",n.expires=-1);var a="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var l;"number"==typeof n.expires?(l=new Date,l.setTime(l.getTime()+24*n.expires*60*60*1e3)):l=n.expires,a="; expires="+l.toUTCString()}var u=n.path?"; path="+n.path:"",c=n.domain?"; domain="+n.domain:"",h=n.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),a,u,c,h].join("")}},61:function(t,e){!function(t){var e,n,i,r,o,s,a,l="Close",u="BeforeClose",c="AfterClose",h="BeforeAppend",d="MarkupParse",p="Open",f="Change",g="mfp",m="."+g,v="mfp-ready",y="mfp-removing",b="mfp-prevent-close",w=function(){},x=!!window.jQuery,C=t(window),E=function(t,n){e.ev.on(g+t+m,n)},_=function(e,n,i,r){var o=document.createElement("div");return o.className="mfp-"+e,i&&(o.innerHTML=i),r?n&&n.appendChild(o):(o=t(o),n&&o.appendTo(n)),o},T=function(n,i){e.ev.triggerHandler(g+n,i),e.st.callbacks&&(n=n.charAt(0).toLowerCase()+n.slice(1),e.st.callbacks[n]&&e.st.callbacks[n].apply(e,t.isArray(i)?i:[i]))},S=function(n){return n===a&&e.currTemplate.closeBtn||(e.currTemplate.closeBtn=t(e.st.closeMarkup.replace("%title%",e.st.tClose)),a=n),e.currTemplate.closeBtn},k=function(){t.magnificPopup.instance||(e=new w,e.init(),t.magnificPopup.instance=e)},P=function(){var t=document.createElement("p").style,e=["ms","O","Moz","Webkit"];if(void 0!==t.transition)return!0;for(;e.length;)if(e.pop()+"Transition"in t)return!0;return!1};w.prototype={constructor:w,init:function(){var n=navigator.appVersion;e.isIE7=-1!==n.indexOf("MSIE 7."),e.isIE8=-1!==n.indexOf("MSIE 8."),e.isLowIE=e.isIE7||e.isIE8,e.isAndroid=/android/gi.test(n),e.isIOS=/iphone|ipad|ipod/gi.test(n),e.supportsTransition=P(),e.probablyMobile=e.isAndroid||e.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),r=t(document),e.popupsCache={}},open:function(n){i||(i=t(document.body));var o;if(n.isObj===!1){e.items=n.items.toArray(),e.index=0;var a,l=n.items;for(o=0;o<l.length;o++)if(a=l[o],a.parsed&&(a=a.el[0]),a===n.el[0]){e.index=o;break}}else e.items=t.isArray(n.items)?n.items:[n.items],e.index=n.index||0;if(e.isOpen)return void e.updateItemHTML();e.types=[],s="",n.mainEl&&n.mainEl.length?e.ev=n.mainEl.eq(0):e.ev=r,n.key?(e.popupsCache[n.key]||(e.popupsCache[n.key]={}),e.currTemplate=e.popupsCache[n.key]):e.currTemplate={},e.st=t.extend(!0,{},t.magnificPopup.defaults,n),e.fixedContentPos="auto"===e.st.fixedContentPos?!e.probablyMobile:e.st.fixedContentPos,e.st.modal&&(e.st.closeOnContentClick=!1,e.st.closeOnBgClick=!1,e.st.showCloseBtn=!1,e.st.enableEscapeKey=!1),e.bgOverlay||(e.bgOverlay=_("bg").on("click"+m,function(){e.close()}),e.wrap=_("wrap").attr("tabindex",-1).on("click"+m,function(t){e._checkIfClose(t.target)&&e.close()}),e.container=_("container",e.wrap)),e.contentContainer=_("content"),e.st.preloader&&(e.preloader=_("preloader",e.container,e.st.tLoading));var u=t.magnificPopup.modules;for(o=0;o<u.length;o++){var c=u[o];c=c.charAt(0).toUpperCase()+c.slice(1),e["init"+c].call(e)}T("BeforeOpen"),e.st.showCloseBtn&&(e.st.closeBtnInside?(E(d,function(t,e,n,i){n.close_replaceWith=S(i.type)}),s+=" mfp-close-btn-in"):e.wrap.append(S())),e.st.alignTop&&(s+=" mfp-align-top"),e.fixedContentPos?e.wrap.css({overflow:e.st.overflowY,overflowX:"hidden",overflowY:e.st.overflowY}):e.wrap.css({top:C.scrollTop(),position:"absolute"}),(e.st.fixedBgPos===!1||"auto"===e.st.fixedBgPos&&!e.fixedContentPos)&&e.bgOverlay.css({height:r.height(),position:"absolute"}),e.st.enableEscapeKey&&r.on("keyup"+m,function(t){27===t.keyCode&&e.close()}),C.on("resize"+m,function(){e.updateSize()}),e.st.closeOnContentClick||(s+=" mfp-auto-cursor"),s&&e.wrap.addClass(s);var h=e.wH=C.height(),f={};if(e.fixedContentPos&&e._hasScrollBar(h)){var g=e._getScrollbarSize();g&&(f.marginRight=g)}e.fixedContentPos&&(e.isIE7?t("body, html").css("overflow","hidden"):f.overflow="hidden");var y=e.st.mainClass;return e.isIE7&&(y+=" mfp-ie7"),y&&e._addClassToMFP(y),e.updateItemHTML(),T("BuildControls"),t("html").css(f),e.bgOverlay.add(e.wrap).prependTo(e.st.prependTo||i),e._lastFocusedEl=document.activeElement,setTimeout(function(){e.content?(e._addClassToMFP(v),e._setFocus()):e.bgOverlay.addClass(v),r.on("focusin"+m,e._onFocusIn)},16),e.isOpen=!0,e.updateSize(h),T(p),n},close:function(){e.isOpen&&(T(u),e.isOpen=!1,e.st.removalDelay&&!e.isLowIE&&e.supportsTransition?(e._addClassToMFP(y),setTimeout(function(){e._close()},e.st.removalDelay)):e._close())},_close:function(){T(l);var n=y+" "+v+" ";if(e.bgOverlay.detach(),e.wrap.detach(),e.container.empty(),e.st.mainClass&&(n+=e.st.mainClass+" "),e._removeClassFromMFP(n),e.fixedContentPos){var i={marginRight:""};e.isIE7?t("body, html").css("overflow",""):i.overflow="",t("html").css(i)}r.off("keyup"+m+" focusin"+m),e.ev.off(m),e.wrap.attr("class","mfp-wrap").removeAttr("style"),e.bgOverlay.attr("class","mfp-bg"),e.container.attr("class","mfp-container"),!e.st.showCloseBtn||e.st.closeBtnInside&&e.currTemplate[e.currItem.type]!==!0||e.currTemplate.closeBtn&&e.currTemplate.closeBtn.detach(),e._lastFocusedEl&&t(e._lastFocusedEl).focus(),e.currItem=null,e.content=null,e.currTemplate=null,e.prevHeight=0,T(c)},updateSize:function(t){if(e.isIOS){var n=document.documentElement.clientWidth/window.innerWidth,i=window.innerHeight*n;e.wrap.css("height",i),e.wH=i}else e.wH=t||C.height();e.fixedContentPos||e.wrap.css("height",e.wH),T("Resize")},updateItemHTML:function(){var n=e.items[e.index];e.contentContainer.detach(),e.content&&e.content.detach(),n.parsed||(n=e.parseEl(e.index));var i=n.type;if(T("BeforeChange",[e.currItem?e.currItem.type:"",i]),e.currItem=n,!e.currTemplate[i]){var r=e.st[i]?e.st[i].markup:!1;T("FirstMarkupParse",r),r?e.currTemplate[i]=t(r):e.currTemplate[i]=!0}o&&o!==n.type&&e.container.removeClass("mfp-"+o+"-holder");var s=e["get"+i.charAt(0).toUpperCase()+i.slice(1)](n,e.currTemplate[i]);e.appendContent(s,i),n.preloaded=!0,T(f,n),o=n.type,e.container.prepend(e.contentContainer),T("AfterChange")},appendContent:function(t,n){e.content=t,t?e.st.showCloseBtn&&e.st.closeBtnInside&&e.currTemplate[n]===!0?e.content.find(".mfp-close").length||e.content.append(S()):e.content=t:e.content="",T(h),e.container.addClass("mfp-"+n+"-holder"),e.contentContainer.append(e.content)},parseEl:function(n){var i,r=e.items[n];if(r.tagName?r={el:t(r)}:(i=r.type,r={data:r,src:r.src}),r.el){for(var o=e.types,s=0;s<o.length;s++)if(r.el.hasClass("mfp-"+o[s])){i=o[s];break}r.src=r.el.attr("data-mfp-src"),r.src||(r.src=r.el.attr("href"))}return r.type=i||e.st.type||"inline",r.index=n,r.parsed=!0,e.items[n]=r,T("ElementParse",r),e.items[n]},addGroup:function(t,n){var i=function(i){i.mfpEl=this,e._openClick(i,t,n)};n||(n={});var r="click.magnificPopup";n.mainEl=t,n.items?(n.isObj=!0,t.off(r).on(r,i)):(n.isObj=!1,n.delegate?t.off(r).on(r,n.delegate,i):(n.items=t,t.off(r).on(r,i)))},_openClick:function(n,i,r){var o=void 0!==r.midClick?r.midClick:t.magnificPopup.defaults.midClick;if(o||2!==n.which&&!n.ctrlKey&&!n.metaKey){var s=void 0!==r.disableOn?r.disableOn:t.magnificPopup.defaults.disableOn;if(s)if(t.isFunction(s)){if(!s.call(e))return!0}else if(C.width()<s)return!0;n.type&&(n.preventDefault(),e.isOpen&&n.stopPropagation()),r.el=t(n.mfpEl),r.delegate&&(r.items=i.find(r.delegate)),e.open(r)}},updateStatus:function(t,i){if(e.preloader){n!==t&&e.container.removeClass("mfp-s-"+n),i||"loading"!==t||(i=e.st.tLoading);var r={status:t,text:i};T("UpdateStatus",r),t=r.status,i=r.text,e.preloader.html(i),e.preloader.find("a").on("click",function(t){t.stopImmediatePropagation()}),e.container.addClass("mfp-s-"+t),n=t}},_checkIfClose:function(n){if(!t(n).hasClass(b)){var i=e.st.closeOnContentClick,r=e.st.closeOnBgClick;if(i&&r)return!0;if(!e.content||t(n).hasClass("mfp-close")||e.preloader&&n===e.preloader[0])return!0;if(n===e.content[0]||t.contains(e.content[0],n)){if(i)return!0}else if(r&&t.contains(document,n))return!0;return!1}},_addClassToMFP:function(t){e.bgOverlay.addClass(t),e.wrap.addClass(t)},_removeClassFromMFP:function(t){this.bgOverlay.removeClass(t),e.wrap.removeClass(t)},_hasScrollBar:function(t){return(e.isIE7?r.height():document.body.scrollHeight)>(t||C.height())},_setFocus:function(){(e.st.focus?e.content.find(e.st.focus).eq(0):e.wrap).focus()},_onFocusIn:function(n){return n.target===e.wrap[0]||t.contains(e.wrap[0],n.target)?void 0:(e._setFocus(),!1)},_parseMarkup:function(e,n,i){var r;i.data&&(n=t.extend(i.data,n)),T(d,[e,n,i]),t.each(n,function(t,n){if(void 0===n||n===!1)return!0;if(r=t.split("_"),r.length>1){var i=e.find(m+"-"+r[0]);if(i.length>0){var o=r[1];"replaceWith"===o?i[0]!==n[0]&&i.replaceWith(n):"img"===o?i.is("img")?i.attr("src",n):i.replaceWith('<img src="'+n+'" class="'+i.attr("class")+'" />'):i.attr(r[1],n)}}else e.find(m+"-"+t).html(n)})},_getScrollbarSize:function(){if(void 0===e.scrollbarSize){var t=document.createElement("div");t.id="mfp-sbm",t.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(t),e.scrollbarSize=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return e.scrollbarSize}},t.magnificPopup={instance:null,proto:w.prototype,modules:[],open:function(e,n){return k(),e=e?t.extend(!0,{},e):{},e.isObj=!0,e.index=n||0,this.instance.open(e)},close:function(){return t.magnificPopup.instance&&t.magnificPopup.instance.close()},registerModule:function(e,n){n.options&&(t.magnificPopup.defaults[e]=n.options),t.extend(this.proto,n.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},t.fn.magnificPopup=function(n){k();var i=t(this);if("string"==typeof n)if("open"===n){var r,o=x?i.data("magnificPopup"):i[0].magnificPopup,s=parseInt(arguments[1],10)||0;o.items?r=o.items[s]:(r=i,o.delegate&&(r=r.find(o.delegate)),r=r.eq(s)),e._openClick({mfpEl:r},i,o)}else e.isOpen&&e[n].apply(e,Array.prototype.slice.call(arguments,1));else n=t.extend(!0,{},n),x?i.data("magnificPopup",n):i[0].magnificPopup=n,e.addGroup(i,n);return i};var M,O,D,A="inline",I=function(){D&&(O.after(D.addClass(M)).detach(),D=null)};t.magnificPopup.registerModule(A,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){e.types.push(A),E(l+"."+A,function(){I()})},getInline:function(n,i){if(I(),n.src){var r=e.st.inline,o=t(n.src);if(o.length){var s=o[0].parentNode;s&&s.tagName&&(O||(M=r.hiddenClass,O=_(M),M="mfp-"+M),D=o.after(O).detach().removeClass(M)),e.updateStatus("ready")}else e.updateStatus("error",r.tNotFound),o=t("<div>");return n.inlineElement=o,o}return e.updateStatus("ready"),e._parseMarkup(i,{},n),i}}});var N,R="ajax",L=function(){N&&i.removeClass(N)},j=function(){L(),e.req&&e.req.abort()};t.magnificPopup.registerModule(R,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){e.types.push(R),N=e.st.ajax.cursor,E(l+"."+R,j),E("BeforeChange."+R,j)},getAjax:function(n){N&&i.addClass(N),e.updateStatus("loading");var r=t.extend({url:n.src,success:function(i,r,o){var s={data:i,xhr:o};T("ParseAjax",s),e.appendContent(t(s.data),R),n.finished=!0,L(),e._setFocus(),setTimeout(function(){e.wrap.addClass(v)},16),e.updateStatus("ready"),T("AjaxContentAdded")},error:function(){L(),n.finished=n.loadError=!0,e.updateStatus("error",e.st.ajax.tError.replace("%url%",n.src))}},e.st.ajax.settings);return e.req=t.ajax(r),""}}});var F,B=function(n){if(n.data&&void 0!==n.data.title)return n.data.title;var i=e.st.image.titleSrc;if(i){if(t.isFunction(i))return i.call(e,n);if(n.el)return n.el.attr(i)||""}return""};t.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var t=e.st.image,n=".image";e.types.push("image"),E(p+n,function(){"image"===e.currItem.type&&t.cursor&&i.addClass(t.cursor)}),E(l+n,function(){t.cursor&&i.removeClass(t.cursor),C.off("resize"+m)}),E("Resize"+n,e.resizeImage),e.isLowIE&&E("AfterChange",e.resizeImage)},resizeImage:function(){var t=e.currItem;if(t&&t.img&&e.st.image.verticalFit){var n=0;e.isLowIE&&(n=parseInt(t.img.css("padding-top"),10)+parseInt(t.img.css("padding-bottom"),10)),t.img.css("max-height",e.wH-n)}},_onImageHasSize:function(t){t.img&&(t.hasSize=!0,F&&clearInterval(F),t.isCheckingImgSize=!1,T("ImageHasSize",t),t.imgHidden&&(e.content&&e.content.removeClass("mfp-loading"),t.imgHidden=!1))},findImageSize:function(t){var n=0,i=t.img[0],r=function(o){F&&clearInterval(F),F=setInterval(function(){return i.naturalWidth>0?void e._onImageHasSize(t):(n>200&&clearInterval(F),n++,void(3===n?r(10):40===n?r(50):100===n&&r(500)))},o)};r(1)},getImage:function(n,i){var r=0,o=function(){n&&(n.img[0].complete?(n.img.off(".mfploader"),n===e.currItem&&(e._onImageHasSize(n),e.updateStatus("ready")),n.hasSize=!0,n.loaded=!0,T("ImageLoadComplete")):(r++,200>r?setTimeout(o,100):s()))},s=function(){n&&(n.img.off(".mfploader"),n===e.currItem&&(e._onImageHasSize(n),e.updateStatus("error",a.tError.replace("%url%",n.src))),n.hasSize=!0,n.loaded=!0,n.loadError=!0)},a=e.st.image,l=i.find(".mfp-img");if(l.length){var u=document.createElement("img");u.className="mfp-img",n.img=t(u).on("load.mfploader",o).on("error.mfploader",s),u.src=n.src,l.is("img")&&(n.img=n.img.clone()),u=n.img[0],u.naturalWidth>0?n.hasSize=!0:u.width||(n.hasSize=!1)}return e._parseMarkup(i,{title:B(n),img_replaceWith:n.img},n),e.resizeImage(),n.hasSize?(F&&clearInterval(F),n.loadError?(i.addClass("mfp-loading"),e.updateStatus("error",a.tError.replace("%url%",n.src))):(i.removeClass("mfp-loading"),e.updateStatus("ready")),i):(e.updateStatus("loading"),n.loading=!0,n.hasSize||(n.imgHidden=!0,i.addClass("mfp-loading"),e.findImageSize(n)),i)}}});var U,H=function(){return void 0===U&&(U=void 0!==document.createElement("p").style.MozTransform),U};t.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(t){return t.is("img")?t:t.find("img")}},proto:{initZoom:function(){var t,n=e.st.zoom,i=".zoom";if(n.enabled&&e.supportsTransition){var r,o,s=n.duration,a=function(t){var e=t.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),i="all "+n.duration/1e3+"s "+n.easing,r={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},o="transition";return r["-webkit-"+o]=r["-moz-"+o]=r["-o-"+o]=r[o]=i,e.css(r),e},c=function(){e.content.css("visibility","visible")};E("BuildControls"+i,function(){if(e._allowZoom()){if(clearTimeout(r),e.content.css("visibility","hidden"),t=e._getItemToZoom(),!t)return void c();o=a(t),o.css(e._getOffset()),e.wrap.append(o),r=setTimeout(function(){o.css(e._getOffset(!0)),r=setTimeout(function(){c(),setTimeout(function(){o.remove(),t=o=null,T("ZoomAnimationEnded")},16)},s)},16)}}),E(u+i,function(){if(e._allowZoom()){if(clearTimeout(r),e.st.removalDelay=s,!t){if(t=e._getItemToZoom(),!t)return;o=a(t)}o.css(e._getOffset(!0)),e.wrap.append(o),e.content.css("visibility","hidden"),setTimeout(function(){o.css(e._getOffset())},16)}}),E(l+i,function(){e._allowZoom()&&(c(),o&&o.remove(),t=null)})}},_allowZoom:function(){return"image"===e.currItem.type},_getItemToZoom:function(){return e.currItem.hasSize?e.currItem.img:!1},_getOffset:function(n){var i;i=n?e.currItem.img:e.st.zoom.opener(e.currItem.el||e.currItem);var r=i.offset(),o=parseInt(i.css("padding-top"),10),s=parseInt(i.css("padding-bottom"),10);r.top-=t(window).scrollTop()-o;var a={width:i.width(),height:(x?i.innerHeight():i[0].offsetHeight)-s-o};return H()?a["-moz-transform"]=a.transform="translate("+r.left+"px,"+r.top+"px)":(a.left=r.left,a.top=r.top),a}}});var z="iframe",q="//about:blank",W=function(t){if(e.currTemplate[z]){var n=e.currTemplate[z].find("iframe");n.length&&(t||(n[0].src=q),e.isIE8&&n.css("display",t?"block":"none"))}};t.magnificPopup.registerModule(z,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){e.types.push(z),E("BeforeChange",function(t,e,n){e!==n&&(e===z?W():n===z&&W(!0))}),E(l+"."+z,function(){W()})},getIframe:function(n,i){var r=n.src,o=e.st.iframe;t.each(o.patterns,function(){return r.indexOf(this.index)>-1?(this.id&&(r="string"==typeof this.id?r.substr(r.lastIndexOf(this.id)+this.id.length,r.length):this.id.call(this,r)),r=this.src.replace("%id%",r),!1):void 0});var s={};return o.srcAction&&(s[o.srcAction]=r),e._parseMarkup(i,s,n),e.updateStatus("ready"),i}}});var $=function(t){var n=e.items.length;return t>n-1?t-n:0>t?n+t:t},V=function(t,e,n){return t.replace(/%curr%/gi,e+1).replace(/%total%/gi,n)};t.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var n=e.st.gallery,i=".mfp-gallery",o=Boolean(t.fn.mfpFastClick);return e.direction=!0,n&&n.enabled?(s+=" mfp-gallery",E(p+i,function(){n.navigateByImgClick&&e.wrap.on("click"+i,".mfp-img",function(){return e.items.length>1?(e.next(),!1):void 0}),r.on("keydown"+i,function(t){37===t.keyCode?e.prev():39===t.keyCode&&e.next()})}),E("UpdateStatus"+i,function(t,n){n.text&&(n.text=V(n.text,e.currItem.index,e.items.length))}),E(d+i,function(t,i,r,o){var s=e.items.length;r.counter=s>1?V(n.tCounter,o.index,s):""}),E("BuildControls"+i,function(){if(e.items.length>1&&n.arrows&&!e.arrowLeft){var i=n.arrowMarkup,r=e.arrowLeft=t(i.replace(/%title%/gi,n.tPrev).replace(/%dir%/gi,"left")).addClass(b),s=e.arrowRight=t(i.replace(/%title%/gi,n.tNext).replace(/%dir%/gi,"right")).addClass(b),a=o?"mfpFastClick":"click";r[a](function(){e.prev()}),s[a](function(){e.next()}),e.isIE7&&(_("b",r[0],!1,!0),_("a",r[0],!1,!0),_("b",s[0],!1,!0),_("a",s[0],!1,!0)),e.container.append(r.add(s))}}),E(f+i,function(){e._preloadTimeout&&clearTimeout(e._preloadTimeout),e._preloadTimeout=setTimeout(function(){e.preloadNearbyImages(),e._preloadTimeout=null},16)}),void E(l+i,function(){r.off(i),e.wrap.off("click"+i),e.arrowLeft&&o&&e.arrowLeft.add(e.arrowRight).destroyMfpFastClick(),e.arrowRight=e.arrowLeft=null})):!1},next:function(){e.direction=!0,e.index=$(e.index+1),e.updateItemHTML()},prev:function(){e.direction=!1,e.index=$(e.index-1),e.updateItemHTML()},goTo:function(t){e.direction=t>=e.index,e.index=t,e.updateItemHTML()},preloadNearbyImages:function(){var t,n=e.st.gallery.preload,i=Math.min(n[0],e.items.length),r=Math.min(n[1],e.items.length);for(t=1;t<=(e.direction?r:i);t++)e._preloadItem(e.index+t);for(t=1;t<=(e.direction?i:r);t++)e._preloadItem(e.index-t)},_preloadItem:function(n){if(n=$(n),!e.items[n].preloaded){var i=e.items[n];i.parsed||(i=e.parseEl(n)),T("LazyLoad",i),"image"===i.type&&(i.img=t('<img class="mfp-img" />').on("load.mfploader",function(){i.hasSize=!0}).on("error.mfploader",function(){i.hasSize=!0,i.loadError=!0,T("LazyLoadError",i)}).attr("src",i.src)),i.preloaded=!0}}}});var K="retina";t.magnificPopup.registerModule(K,{options:{replaceSrc:function(t){return t.src.replace(/\.\w+$/,function(t){return"@2x"+t})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var t=e.st.retina,n=t.ratio;n=isNaN(n)?n():n,n>1&&(E("ImageHasSize."+K,function(t,e){e.img.css({"max-width":e.img[0].naturalWidth/n,width:"100%"})}),E("ElementParse."+K,function(e,i){i.src=t.replaceSrc(i,n)}))}}}}),k()}(window.jQuery||window.Zepto)},62:function(t,e,n){var i=n(63);!function(t){t.fn.spin=function(e){return this.each(function(){var n=t(this),r=n.data();r.spinner&&(r.spinner.stop(),delete r.spinner),e!==!1&&(r.spinner=new i(t.extend({color:n.css("color")},e)).spin(this))}),this}}(jQuery)},63:function(t,e,n){!function(e,n){t.exports=n()}(this,function(){"use strict";function t(t,e){var n,i=document.createElement(t||"div");for(n in e)i[n]=e[n];return i}function e(t){for(var e=1,n=arguments.length;n>e;e++)t.appendChild(arguments[e]);return t}function n(t,e,n,i){var r=["opacity",e,~~(100*t),n,i].join("-"),o=.01+n/i*100,s=Math.max(1-(1-t)/e*(100-o),t),a=c.substring(0,c.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return d[r]||(p.insertRule("@"+l+"keyframes "+r+"{0%{opacity:"+s+"}"+o+"%{opacity:"+t+"}"+(o+.01)+"%{opacity:1}"+(o+e)%100+"%{opacity:"+t+"}100%{opacity:"+s+"}}",p.cssRules.length),d[r]=1),r}function i(t,e){var n,i,r=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<h.length;i++)if(n=h[i]+e,void 0!==r[n])return n;return void 0!==r[e]?e:void 0}function r(t,e){for(var n in e)t.style[i(t,n)||n]=e[n];return t}function o(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)void 0===t[i]&&(t[i]=n[i])}return t}function s(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function a(t,e){return"string"==typeof t?t:t[e%t.length]}function l(t){return"undefined"==typeof this?new l(t):void(this.opts=o(t||{},l.defaults,f))}function u(){function n(e,n){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}p.addRule(".spin-vml","behavior:url(#default#VML)"),l.prototype.lines=function(t,i){function o(){return r(n("group",{coordsize:c+" "+c,coordorigin:-u+" "+-u}),{width:c,height:c})}function s(t,s,l){e(d,e(r(o(),{rotation:360/i.lines*t+"deg",left:~~s}),e(r(n("roundrect",{arcsize:i.corners}),{width:u,height:i.width,left:i.radius,top:-i.width>>1,filter:l}),n("fill",{color:a(i.color,t),opacity:i.opacity}),n("stroke",{opacity:0}))))}var l,u=i.length+i.width,c=2*u,h=2*-(i.width+i.length)+"px",d=r(o(),{position:"absolute",top:h,left:h});if(i.shadow)for(l=1;l<=i.lines;l++)s(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=i.lines;l++)s(l);return e(t,d)},l.prototype.opacity=function(t,e,n,i){var r=t.firstChild;i=i.shadow&&i.lines||0,r&&e+i<r.childNodes.length&&(r=r.childNodes[e+i],r=r&&r.firstChild,r=r&&r.firstChild,r&&(r.opacity=n))}}var c,h=["webkit","Moz","ms","O"],d={},p=function(){var n=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),f={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};l.defaults={},o(l.prototype,{spin:function(e){this.stop();var n,i,o=this,a=o.opts,l=o.el=r(t(0,{className:a.className}),{position:a.position,width:0,zIndex:a.zIndex}),u=a.radius+a.length+a.width;if(e&&(e.insertBefore(l,e.firstChild||null),i=s(e),n=s(l),r(l,{left:("auto"==a.left?i.x-n.x+(e.offsetWidth>>1):parseInt(a.left,10)+u)+"px",top:("auto"==a.top?i.y-n.y+(e.offsetHeight>>1):parseInt(a.top,10)+u)+"px"})),l.setAttribute("role","progressbar"),o.lines(l,o.opts),!c){var h,d=0,p=(a.lines-1)*(1-a.direction)/2,f=a.fps,g=f/a.speed,m=(1-a.opacity)/(g*a.trail/100),v=g/a.lines;!function y(){d++;for(var t=0;t<a.lines;t++)h=Math.max(1-(d+(a.lines-t)*v)%g*m,a.opacity),o.opacity(l,t*a.direction+p,h,a);o.timeout=o.el&&setTimeout(y,~~(1e3/f))}()}return o},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(i,o){function s(e,n){return r(t(),{position:"absolute",width:o.length+o.width+"px",height:o.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*u+o.rotate)+"deg) translate("+o.radius+"px,0)",borderRadius:(o.corners*o.width>>1)+"px"})}for(var l,u=0,h=(o.lines-1)*(1-o.direction)/2;u<o.lines;u++)l=r(t(),{position:"absolute",top:1+~(o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:c&&n(o.opacity,o.trail,h+u*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&e(l,r(s("#000","0 0 4px #000"),{top:"2px"})),e(i,e(l,s(a(o.color,u),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(t,e,n){e<t.childNodes.length&&(t.childNodes[e].style.opacity=n)}});var g=r(t("group"),{behavior:"url(#default#VML)"});return!i(g,"transform")&&g.adj?u():c=i(g,"animation"),l})},70:function(t,e,n){"use strict";var i=n(7),r=n(17),o=function(t,e){t.length===t.filter(":checked").length?e.prop("disabled",!1):e.prop("disabled",!0)},s={updateRelativeDates:function(){i(".js-relative-date").each(function(t,e){i(e).text(r.relativeDate(Date.parse(i(e).attr("datetime"))))})},fixSidebarHeight:function(){var t,e,n=i("#body"),r=n.height(),o=parseInt(n.css("padding-bottom"),10),s=i("#wrapper").height()-n.offset().top-o;i("#sidebar").css("width","30%"),t=i("#sidebar #sidebar-content").height()+i("#footer").height()+o,e=Math.max(s,t),i("#sidebar").css("width",""),e>r&&n.css("height",e)},updateInputState:function(t,e){var n=i(t);if(n.length){var r=i(e);o(n,r),n.change(function(){o(n,r)})}}};t.exports=s},105:function(t,e){shortcut={all_shortcuts:{},add:function(t,e,n){var i={type:"keydown",propagate:!1,disable_in_input:!1,target:document,keycode:!1};if(n)for(var r in i)"undefined"==typeof n[r]&&(n[r]=i[r]);else n=i;var o=n.target;"string"==typeof n.target&&(o=document.getElementById(n.target));t=t.toLowerCase();var s=function(i){if(i=i||window.event,n.disable_in_input){var r;if(i.target?r=i.target:i.srcElement&&(r=i.srcElement),3==r.nodeType&&(r=r.parentNode),"INPUT"==r.tagName||"TEXTAREA"==r.tagName)return}i.keyCode?code=i.keyCode:i.which&&(code=i.which);var o=String.fromCharCode(code).toLowerCase();188==code&&(o=","),190==code&&(o=".");var s=t.split("+"),a=0,l={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},u={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},c={shift:{wanted:!1,pressed:!1},ctrl:{wanted:!1,pressed:!1},alt:{wanted:!1,pressed:!1},meta:{wanted:!1,pressed:!1}};i.ctrlKey&&(c.ctrl.pressed=!0),i.shiftKey&&(c.shift.pressed=!0),i.altKey&&(c.alt.pressed=!0),i.metaKey&&(c.meta.pressed=!0);for(var h=0;k=s[h],h<s.length;h++)"ctrl"==k||"control"==k?(a++,c.ctrl.wanted=!0):"shift"==k?(a++,c.shift.wanted=!0):"alt"==k?(a++,c.alt.wanted=!0):"meta"==k?(a++,c.meta.wanted=!0):k.length>1?u[k]==code&&a++:n.keycode?n.keycode==code&&a++:o==k?a++:l[o]&&i.shiftKey&&(o=l[o],o==k&&a++);return a!=s.length||c.ctrl.pressed!=c.ctrl.wanted||c.shift.pressed!=c.shift.wanted||c.alt.pressed!=c.alt.wanted||c.meta.pressed!=c.meta.wanted||(e(i),n.propagate)?void 0:(i.cancelBubble=!0,i.returnValue=!1,i.stopPropagation&&(i.stopPropagation(),i.preventDefault()),!1)};this.all_shortcuts[t]={callback:s,target:o,event:n.type},o.addEventListener?o.addEventListener(n.type,s,!1):o.attachEvent?o.attachEvent("on"+n.type,s):o["on"+n.type]=s},remove:function(t){t=t.toLowerCase();var e=this.all_shortcuts[t];if(delete this.all_shortcuts[t],e){var n=e.event,i=e.target,r=e.callback;i.detachEvent?i.detachEvent("on"+n,r):i.removeEventListener?i.removeEventListener(n,r,!1):i["on"+n]=!1}}}},117:function(t,e,n){"use strict";var i=n(7);n(61),n(45);var r=n(17),o=function(t){i(document).on("submit","#js-captcha",s),i.magnificPopup.open({items:{src:t,type:"inline"},focus:"#id_captcha_answer"})},s=function(t){t.preventDefault();var e=i(this),n=e.serializeObject(),o=n.sfn,s=n.efn,l=e.attr("action");i.ajax({url:l,type:"POST",data:n,success:function(){r.executeFunctionByName(o,window,t),i.magnificPopup.close()},error:function(t){a(t,s)}})},a=function(t,e){402===t.status?o(t.responseText):r.executeFunctionByName(e,window,t)};t.exports={onError:a}},118:function(t,e,n){"use strict";var i=(n(7),n(9));n(153);var r,o,s=i.Model.extend({validate:function(t){var e=t.value;return void 0===e||null===e?"Not a number":e%1!==0?"Not an integer":void 0}}),a=i.View.extend({el:".js-score",events:{"odometer-digit-added":"updateWidth"},updateWidth:function(t){var e=this.$el.find(".odometer-inside").width(),n=0===e?"auto":e;this.oldWidth!==n&&(this.$el.css("width",n),this.oldWidth=n)},initialize:function(){this.oldWidth=-1,this.updateWidth(),this.listenTo(this.model,"change:value",this.render)},render:function(){return this.$el.text(this.model.get("value")),this}}),l=function(t){r=new s({value:t},{validate:!0}),o=new a({model:r})},u=function(t){return r.set({value:t},{validate:!0}),this},c=function(){return r.get("value")};t.exports={init:l,set:u,get:c}},119:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),o=i(r);n(52);var s=n(19),a=i(s);n(105);var l={init:function(t){var e=this,n=this;this.state={searchText:"",searchFields:["source","target"],searchOptions:[]},this.$form=o["default"]("#search-form"),this.$container=o["default"](".js-search-container"),this.$fields=o["default"](".js-search-fields"),this.$options=o["default"](".js-search-options"),this.$input=o["default"]("#id_search"),this.settings=a["default"]({onSearch:this.onSearch},t),shortcut.add("ctrl+shift+s",function(){e.$input.focus()}),shortcut.add("escape",function(t){e.$form.hasClass("focused")&&(e.$input.blur(),i(t))}),this.$input.mouseup(function(t){t.preventDefault()}).focus(function(){e.$input.select(),e.$form.addClass("focused")}).blur(function(){""===e.$input.val()&&e.$input.val(e.state.searchText),e.$form.removeClass("focused");
});var i=function(t){t.preventDefault(),n.$container.toggle()};this.$input.click(function(t){l.isOpen()||i(t)}),this.$input.on("keypress",function(t){13===t.which&&e.$form.trigger("submit")}),this.$form.on("submit",this.handleSearch.bind(this)),o["default"](document).mouseup(function(t){e.isOpen()&&t.target!==n.$input.get(0)&&!e.$container.find(t.target).length&&i(t)})},setState:function(t){this.state=a["default"]({},this.state,t),this.updateUI()},isOpen:function(){return this.$container.is(":visible")},buildSearchQuery:function(){var t=this.state,e=t.searchText,n=t.searchFields,i=t.searchOptions,r=encodeURIComponent(e);if(n.length&&(r+="&sfields="+n.join(",")),i.length&&(r+="&soptions="+i.join(",")),n.length||i.length){var s="pootle-search",a={};n.length&&(a.sfields=n),i.length&&(a.soptions=i),o["default"].cookie(s,JSON.stringify(a),{path:"/"})}return r},handleSearch:function(t){t.preventDefault();var e=this.$input.val(),n=[],i=[];this.$fields.find("input:checked").each(function(){n.push(o["default"](this).val())}),this.$options.find("input:checked").each(function(){i.push(o["default"](this).val())}),n.length||(n=["source","target"]),this.setState({searchText:e,searchFields:n,searchOptions:i}),this.settings.onSearch.call(this,this.state.searchText)},onSearch:function(t){if(!t)return!1;var e="#search="+this.buildSearchQuery();return window.location=this.$form[0].action+e,!1},updateUI:function(){this.$input.val(this.state.searchText).focus();var t=this.state,e=t.searchFields,n=t.searchOptions;this.$fields.find("input").each(function(){o["default"](this).prop("checked",-1!==e.indexOf(this.value))}),this.$options.find("input").each(function(){o["default"](this).prop("checked",-1!==n.indexOf(this.value))})}};e["default"]=l,t.exports=e["default"]},152:function(t,e){!function(t){function e(e){function i(t){return t===!0?function(t){return t}:"string"==typeof t&&(t=r(t.split("")))||"function"==typeof t?function(e){return t(encodeURIComponent(e))}:encodeURIComponent}function r(e){var n=new RegExp(t.map(e,encodeURIComponent).join("|"),"ig");return function(t){return t.replace(n,decodeURIComponent)}}e=t.extend({unescape:!1},e||{}),n.encoder=i(e.unescape)}var n={put:function(t,e){(e||window).location.hash=this.encoder(t)},get:function(t){return(t||window).location.toString().split("#",2)[1]||""},encoder:encodeURIComponent},i={};i.base={callback:void 0,type:void 0,check:function(){},load:function(t){},init:function(t,n){e(n),r.callback=t,r._options=n,r._init()},_init:function(){},_options:{}},i.timer={_appState:void 0,_init:function(){var t=n.get();r._appState=t,r.callback(t),setInterval(r.check,100)},check:function(){var t=n.get();t!=r._appState&&(r._appState=t,r.callback(t))},load:function(t){t!=r._appState&&(n.put(t),r._appState=t,r.callback(t))}},i.hashchangeEvent={_init:function(){r.callback(n.get()),t(window).bind("hashchange",r.check)},check:function(){r.callback(n.get())},load:function(t){n.put(t)}};var r=t.extend({},i.base);"onhashchange"in window?r.type="hashchangeEvent":r.type="timer",t.extend(r,i[r.type]),t.history=r}(jQuery)},153:function(t,e,n){var i,r;(function(){var o,s,a,l,u,c,h,d,p,f,g,m,v,y,b,w,x,C,E,_,T,S,k,P,M,O,D,A,I,N,R,L,j=[].slice;x='<span class="odometer-value"></span>',y='<span class="odometer-ribbon"><span class="odometer-ribbon-inner">'+x+"</span></span>",l='<span class="odometer-digit"><span class="odometer-digit-spacer">8</span><span class="odometer-digit-inner">'+y+"</span></span>",h='<span class="odometer-formatting-mark"></span>',a="(,ddd).dd",d=/^\(?([^)]*)\)?(?:(.)(d+))?$/,p=30,c=2e3,o=20,f=2,u=.5,g=1e3/p,s=1e3/o,b="transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",M=document.createElement("div").style,w=null!=M.transition||null!=M.webkitTransition||null!=M.mozTransition||null!=M.oTransition,k=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,m=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,E=function(t){var e;return e=document.createElement("div"),e.innerHTML=t,e.children[0]},S=function(t,e){return t.className=t.className.replace(new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi")," ")},C=function(t,e){return S(t,e),t.className+=" "+e},O=function(t,e){var n;return null!=document.createEvent?(n=document.createEvent("HTMLEvents"),n.initEvent(e,!0,!0),t.dispatchEvent(n)):void 0},T=function(){var t,e;return null!=(t=null!=(e=window.performance)&&"function"==typeof e.now?e.now():void 0)?t:+new Date},P=function(t,e){return null==e&&(e=0),e?(t*=Math.pow(10,e),t+=.5,t=Math.floor(t),t/=Math.pow(10,e)):Math.round(t)},D=function(t){return 0>t?Math.ceil(t):Math.floor(t)},_=function(t){return t-P(t)},I=!1,(A=function(){var t,e,n,i,r;if(!I&&null!=window.jQuery){for(I=!0,i=["html","text"],r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(function(t){var e;return e=window.jQuery.fn[t],window.jQuery.fn[t]=function(t){var n;return null==t||null==(null!=(n=this[0])?n.odometer:void 0)?e.apply(this,arguments):this[0].odometer.update(t)}}(t));return r}})(),setTimeout(A,0),v=function(){function t(e){var n,i,r,o,s,a,l,u,h,d,p=this;if(this.options=e,this.el=this.options.el,null!=this.el.odometer)return this.el.odometer;this.el.odometer=this,u=t.options;for(i in u)o=u[i],null==this.options[i]&&(this.options[i]=o);null==(s=this.options).duration&&(s.duration=c),this.MAX_VALUES=this.options.duration/g/f|0,this.resetFormat(),this.value=this.cleanValue(null!=(h=this.options.value)?h:""),this.renderInside(),this.render();try{for(d=["innerHTML","innerText","textContent"],a=0,l=d.length;l>a;a++)r=d[a],null!=this.el[r]&&!function(t){return Object.defineProperty(p.el,t,{get:function(){var e;return"innerHTML"===t?p.inside.outerHTML:null!=(e=p.inside.innerText)?e:p.inside.textContent},set:function(t){return p.update(t)}})}(r)}catch(m){n=m,this.watchForMutations()}}return t.prototype.renderInside=function(){return this.inside=document.createElement("div"),this.inside.className="odometer-inside",this.el.innerHTML="",this.el.appendChild(this.inside)},t.prototype.watchForMutations=function(){var t,e=this;if(null!=m)try{return null==this.observer&&(this.observer=new m(function(t){var n;return n=e.el.innerText,e.renderInside(),e.render(e.value),e.update(n)})),this.watchMutations=!0,this.startWatchingMutations()}catch(n){t=n}},t.prototype.startWatchingMutations=function(){return this.watchMutations?this.observer.observe(this.el,{childList:!0}):void 0},t.prototype.stopWatchingMutations=function(){var t;return null!=(t=this.observer)?t.disconnect():void 0},t.prototype.cleanValue=function(t){var e;return"string"==typeof t&&(t=t.replace(null!=(e=this.format.radix)?e:".","<radix>"),t=t.replace(/[.,]/g,""),t=t.replace("<radix>","."),t=parseFloat(t,10)||0),P(t,this.format.precision)},t.prototype.bindTransitionEnd=function(){var t,e,n,i,r,o,s=this;if(!this.transitionEndBound){for(this.transitionEndBound=!0,e=!1,r=b.split(" "),o=[],n=0,i=r.length;i>n;n++)t=r[n],o.push(this.el.addEventListener(t,function(){return e?!0:(e=!0,setTimeout(function(){return s.render(),e=!1,O(s.el,"odometerdone")},0),!0)},!1));return o}},t.prototype.resetFormat=function(){var t,e,n,i,r,o,s,l;if(t=null!=(s=this.options.format)?s:a,t||(t="d"),n=d.exec(t),!n)throw new Error("Odometer: Unparsable digit format");return l=n.slice(1,4),o=l[0],r=l[1],e=l[2],i=(null!=e?e.length:void 0)||0,this.format={repeating:o,radix:r,precision:i}},t.prototype.render=function(t){var e,n,i,r,o,s,a,l,u,c,h,d;for(null==t&&(t=this.value),this.stopWatchingMutations(),this.resetFormat(),this.inside.innerHTML="",s=this.options.theme,e=this.el.className.split(" "),o=[],l=0,c=e.length;c>l;l++)n=e[l],n.length&&((r=/^odometer-theme-(.+)$/.exec(n))?s=r[1]:/^odometer(-|$)/.test(n)||o.push(n));for(o.push("odometer"),w||o.push("odometer-no-transitions"),s?o.push("odometer-theme-"+s):o.push("odometer-auto-theme"),this.el.className=o.join(" "),this.ribbons={},this.digits=[],a=!this.format.precision||!_(t)||!1,d=t.toString().split("").reverse(),u=0,h=d.length;h>u;u++)i=d[u],"."===i&&(a=!0),this.addDigit(i,a);return this.startWatchingMutations()},t.prototype.update=function(t){var e,n=this;return t=this.cleanValue(t),(e=t-this.value)?(S(this.el,"odometer-animating-up odometer-animating-down odometer-animating"),e>0?C(this.el,"odometer-animating-up"):C(this.el,"odometer-animating-down"),this.stopWatchingMutations(),this.animate(t),this.startWatchingMutations(),setTimeout(function(){return n.el.offsetHeight,C(n.el,"odometer-animating")},0),this.value=t):void 0},t.prototype.renderDigit=function(){return E(l)},t.prototype.insertDigit=function(t,e){return null!=e?this.inside.insertBefore(t,e):this.inside.children.length?this.inside.insertBefore(t,this.inside.children[0]):this.inside.appendChild(t)},t.prototype.addSpacer=function(t,e,n){var i;return i=E(h),i.innerHTML=t,n&&C(i,n),this.insertDigit(i,e)},t.prototype.addDigit=function(t,e){var n,i,r,o;if(null==e&&(e=!0),"-"===t)return this.addSpacer(t,null,"odometer-negation-mark");if("."===t)return this.addSpacer(null!=(o=this.format.radix)?o:".",null,"odometer-radix-mark");if(e)for(r=!1;;){if(!this.format.repeating.length){if(r)throw new Error("Bad odometer format without digits");this.resetFormat(),r=!0}if(n=this.format.repeating[this.format.repeating.length-1],this.format.repeating=this.format.repeating.substring(0,this.format.repeating.length-1),"d"===n)break;this.addSpacer(n)}i=this.renderDigit(),i.querySelector(".odometer-value").innerHTML=t,this.digits.push(i);var s=this.insertDigit(i);return O(this.el,"odometer-digit-added"),s},t.prototype.animate=function(t){return w&&"count"!==this.options.animation?this.animateSlide(t):this.animateCount(t)},t.prototype.animateCount=function(t){var e,n,i,r,o,a=this;if(n=+t-this.value)return r=i=T(),e=this.value,(o=function(){var l,u,c;return T()-r>a.options.duration?(a.value=t,a.render(),void O(a.el,"odometerdone")):(l=T()-i,l>s&&(i=T(),c=l/a.options.duration,u=n*c,e+=u,a.render(Math.round(e))),null!=k?k(o):setTimeout(o,s))})()},t.prototype.getDigitCount=function(){var t,e,n,i,r,o;for(i=1<=arguments.length?j.call(arguments,0):[],t=r=0,o=i.length;o>r;t=++r)n=i[t],i[t]=Math.abs(n);return e=Math.max.apply(Math,i),Math.ceil(Math.log(e+1)/Math.log(10))},t.prototype.getFractionalDigitCount=function(){var t,e,n,i,r,o,s;for(r=1<=arguments.length?j.call(arguments,0):[],e=/^\-?\d*\.(\d*?)0*$/,t=o=0,s=r.length;s>o;t=++o)i=r[t],r[t]=i.toString(),n=e.exec(r[t]),null==n?r[t]=0:r[t]=n[1].length;return Math.max.apply(Math,r)},t.prototype.resetDigits=function(){return this.digits=[],this.ribbons=[],this.inside.innerHTML="",this.resetFormat()},t.prototype.animateSlide=function(t){var e,n,i,r,o,s,a,l,c,h,d,p,f,g,m,v,y,b,w,x,E,_,T,S,k,P,M;if(v=this.value,l=this.getFractionalDigitCount(v,t),l&&(t*=Math.pow(10,l),v*=Math.pow(10,l)),i=t-v){for(this.bindTransitionEnd(),r=this.getDigitCount(v,t),o=[],e=0,d=w=0;r>=0?r>w:w>r;d=r>=0?++w:--w){if(y=D(v/Math.pow(10,r-d-1)),a=D(t/Math.pow(10,r-d-1)),s=a-y,Math.abs(s)>this.MAX_VALUES){for(h=[],p=s/(this.MAX_VALUES+this.MAX_VALUES*e*u),n=y;s>0&&a>n||0>s&&n>a;)h.push(Math.round(n)),n+=p;h[h.length-1]!==a&&h.push(a),e++}else h=function(){M=[];for(var t=y;a>=y?a>=t:t>=a;a>=y?t++:t--)M.push(t);return M}.apply(this);for(d=x=0,_=h.length;_>x;d=++x)c=h[d],h[d]=Math.abs(c%10);o.push(h)}for(this.resetDigits(),P=o.reverse(),d=E=0,T=P.length;T>E;d=++E)for(h=P[d],this.digits[d]||this.addDigit(" ",d>=l),null==(b=this.ribbons)[d]&&(b[d]=this.digits[d].querySelector(".odometer-ribbon-inner")),this.ribbons[d].innerHTML="",0>i&&(h=h.reverse()),f=k=0,S=h.length;S>k;f=++k)c=h[f],m=document.createElement("div"),m.className="odometer-value",m.innerHTML=c,this.ribbons[d].appendChild(m),f===h.length-1&&C(m,"odometer-last-value"),0===f&&C(m,"odometer-first-value");return 0>y&&this.addDigit("-"),g=this.inside.querySelector(".odometer-radix-mark"),null!=g&&g.parent.removeChild(g),l?this.addSpacer(this.format.radix,this.digits[l-1],"odometer-radix-mark"):void 0}},t}(),v.options=null!=(R=window.odometerOptions)?R:{},setTimeout(function(){var t,e,n,i,r;if(window.odometerOptions){i=window.odometerOptions,r=[];for(t in i)e=i[t],r.push(null!=(n=v.options)[t]?(n=v.options)[t]:n[t]=e);return r}},0),v.init=function(){var t,e,n,i,r,o;if(null!=document.querySelectorAll){for(e=document.querySelectorAll(v.options.selector||".odometer"),o=[],n=0,i=e.length;i>n;n++)t=e[n],o.push(t.odometer=new v({el:t,value:null!=(r=t.innerText)?r:t.textContent}));return o}},null!=(null!=(L=document.documentElement)?L.doScroll:void 0)&&null!=document.createEventObject?(N=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&v.options.auto!==!1&&v.init(),null!=N?N.apply(this,arguments):void 0}):document.addEventListener("DOMContentLoaded",function(){return v.options.auto!==!1?v.init():void 0},!1),i=[n(7)],r=function(){return v}.apply(e,i),!(void 0!==r&&(t.exports=r))}).call(this)},211:function(t,e,n){var i,r,o;/*!
		Autosize 3.0.12
		license: MIT
		http://www.jacklmoore.com/autosize
	*/
!function(n,s){r=[e,t],i=s,o="function"==typeof i?i.apply(e,r):i,!(void 0!==o&&(t.exports=o))}(this,function(t,e){"use strict";function n(t){function e(){var e=window.getComputedStyle(t,null);"vertical"===e.resize?t.style.resize="none":"both"===e.resize&&(t.style.resize="horizontal"),h="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(h)&&(h=0),r()}function n(e){var n=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=n,d=e,c&&(t.style.overflowY=e),i()}function i(){var e=window.pageYOffset,n=document.body.scrollTop,i=t.style.height;t.style.height="auto";var r=t.scrollHeight+h;return 0===t.scrollHeight?void(t.style.height=i):(t.style.height=r+"px",document.documentElement.scrollTop=e,void(document.body.scrollTop=n))}function r(){var e=t.style.height;i();var r=window.getComputedStyle(t,null);if(r.height!==t.style.height?"visible"!==d&&n("visible"):"hidden"!==d&&n("hidden"),e!==t.style.height){var o=document.createEvent("Event");o.initEvent("autosize:resized",!0,!1),t.dispatchEvent(o)}}var s=void 0===arguments[1]?{}:arguments[1],a=s.setOverflowX,l=void 0===a?!0:a,u=s.setOverflowY,c=void 0===u?!0:u;if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!o.has(t)){var h=null,d="hidden",p=function(e){window.removeEventListener("resize",r),t.removeEventListener("input",r),t.removeEventListener("keyup",r),t.removeEventListener("autosize:destroy",p),o["delete"](t),Object.keys(e).forEach(function(n){t.style[n]=e[n]})}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",p),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",r),window.addEventListener("resize",r),t.addEventListener("input",r),t.addEventListener("autosize:update",r),o.add(t),c&&(t.style.overflowY="hidden"),l&&(t.style.overflowX="hidden",t.style.wordWrap="break-word"),e()}}function i(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName){var e=document.createEvent("Event");e.initEvent("autosize:destroy",!0,!1),t.dispatchEvent(e)}}function r(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName){var e=document.createEvent("Event");e.initEvent("autosize:update",!0,!1),t.dispatchEvent(e)}}var o="function"==typeof Set?new Set:function(){var t=[];return{has:function(e){return Boolean(t.indexOf(e)>-1)},add:function(e){t.push(e)},"delete":function(e){t.splice(t.indexOf(e),1)}}}(),s=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(s=function(t){return t},s.destroy=function(t){return t},s.update=function(t){return t}):(s=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],function(t){return n(t,e)}),t},s.destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],i),t},s.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],r),t}),e.exports=s})},354:function(t,e,n){"use strict";var i=n(9),r=n(359).Unit,o={};o.UnitSet=i.Collection.extend({model:r,initialize:function(t,e){this.chunkSize=e.chunkSize,this.uIds=[],this.total=0},comparator:function(t){return this.uIds.indexOf(t.id)},getCurrent:function(){return this.activeUnit},setCurrent:function(t){this.activeUnit=t instanceof this.model?t:this.get(t)},setFirstAsCurrent:function(){this.setCurrent(this.at(0))},fetchedIds:function(){return this.map(function(t){return t.id})},next:function(){var t=this.indexOf(this.getCurrent());return t+1===this.length?null:this.at(t+1)},hasNext:function(){return null!==this.next()},prev:function(){var t=this.indexOf(this.getCurrent());return 0===t?null:this.at(t-1)},hasPrev:function(){return null!==this.prev()}}),t.exports=o},358:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function a(t){var e=p(".js-unit-checks"),n=p(".focusthis")[0];e.html(t).show(),C.blinkClass(e,"blink",4,200),n.focus()}var u=n(211),c=r(u),h=n(366),d=r(h),p=n(7),f=n(4);n(469),n(52),n(470),n(475),n(152),n(476),n(45),n(62),n(380),n(467),n(105);var g=n(478),m=n(354).UnitSet,v=n(117),y=n(70),b=n(48),w=n(118),x=n(119),C=n(17),E={dropdownAutoWidth:!0,width:"off"},_=f.extend({minimumResultsForSearch:-1},E);window.PTL=window.PTL||{},PTL.editor={init:function(t){var e=this;this.settings={mt:[]},t&&p.extend(this.settings,t),this.units=new m([],{chunkSize:this.settings.chunkSize}),this.filter="all",this.checks=[],this.sortBy="default",this.modifiedSince=null,this.user=null,this.ctxGap=0,this.ctxQty=parseInt(p.cookie("ctxQty"),10)||1,this.ctxStep=1,this.preventNavigation=!1,this.isUnitDirty=!1,this.isLoading=!0,this.showActivity(),this.cpRE=/^(<[^>]+>|\[n\|t]|\W$^\n)*(\b|$)/gm,this.timelineReq=null,this.tmReq=null,this.differencer=new diff_match_patch,this.wordComparer=new g({compare:"words"}),this.tmpl={vUnit:f.template(p("#view_unit").html()),tm:f.template(p("#tm_suggestions").html()),editCtx:f.template(p("#editCtx").html()),msg:f.template(p("#js-editor-msg").html())},x.init({onSearch:this.onSearch}),p("#js-filter-status").select2(E),p("#js-filter-sort").select2(_),p(document).on("click",".js-dev-img",function(t){t.preventDefault(),p(this).magnificPopup({type:"image",gallery:{enabled:!0}}).magnificPopup("open")}),p(document).on("input",".js-translation-area",function(t){return e.onTextareaChange(t)}),p(document).on("change","input.fuzzycheck",function(){return e.onStateChange()}),p(document).on("click","input.fuzzycheck",function(){return e.onStateClick()}),p(document).on("input","#id_translator_comment",function(){return e.handleTranslationChange()}),p(document).on("click",".switch-suggest-mode a",function(t){return e.toggleSuggestMode(t)}),p(document).on("focus",".focusthis",function(t){PTL.editor.focused=t.target}),p(document).on("click",".js-editor-reload",function(t){t.preventDefault(),p.history.load("")}),p(document).on("click",".js-editor-copytext",function(t){return e.copyText(t)}),p(document).on("click",".js-editor-copy-comment",function(t){var n=t.currentTarget.dataset.string;e.copyComment(n)}),p(document).on("click",".js-copyoriginal",function(t){var n=t.currentTarget.dataset.uid,i=[].concat(o(document.querySelectorAll("#js-unit-"+n+" .translation-text"))).map(function(t){return t.textContent});e.copyOriginal(i)}),p(document).on("mouseup","tr.view-row, tr.ctx-row",this.gotoUnit),p(document).on("keypress",".js-unit-index",function(t){return e.gotoIndex(t)}),p(document).on("dblclick click",".js-unit-index",this.unitIndex),p(document).on("click","input.submit",this.submit),p(document).on("click","input.suggest",this.suggest),p(document).on("click","#js-nav-prev",function(){return e.gotoPrev()}),p(document).on("click","#js-nav-next",function(){return e.gotoNext()}),p(document).on("click",".js-suggestion-reject",this.rejectSuggestion),p(document).on("click",".js-suggestion-accept",this.acceptSuggestion),p(document).on("click","#js-toggle-timeline",this.toggleTimeline),p(document).on("click",".js-toggle-check",this.toggleCheck),p(document).on("change","#js-filter-status",this.filterStatus),p(document).on("change","#js-filter-checks",this.filterChecks),p(document).on("change","#js-filter-sort",function(){return e.filterSort()}),p(document).on("click",".js-more-ctx",function(){PTL.editor.moreContext(!1)}),p(document).on("click",".js-less-ctx",this.lessContext),p(document).on("click",".js-show-ctx",this.showContext),p(document).on("click",".js-hide-ctx",this.hideContext),p(document).on("click",".js-editor-comment",function(t){t.preventDefault();var e=p(".js-editor-comment-form"),n=p(".js-editor-comment");n.toggleClass("selected"),n.hasClass("selected")?(e.css("display","inline-block"),p("#id_translator_comment").focus()):e.css("display","none")}),p(document).on("submit","#js-comment-form",this.comment),p(document).on("click",".js-comment-remove",this.removeComment),p(document).on("click",".js-editor-msg-hide",this.hideMsg),p(document).on("click",".js-toggle-raw",function(t){t.preventDefault(),p(".js-translate-translation").toggleClass("raw"),p(".js-toggle-raw").toggleClass("selected"),c["default"].update(document.querySelector(".js-translation-area"))}),window.addEventListener("beforeunload",function(t){PTL.editor.isUnitDirty&&(t.returnValue=gettext("You have unsaved changes in this unit. Navigating away will discard those changes."))}),shortcut.add("ctrl+return",function(){PTL.editor.isSuggestMode()?p("input.suggest").trigger("click"):p("input.submit").trigger("click")}),shortcut.add("ctrl+space",function(){return e.toggleState()}),shortcut.add("ctrl+shift+space",function(t){return e.toggleSuggestMode(t)}),shortcut.add("ctrl+up",function(){return e.gotoPrev()}),shortcut.add("ctrl+,",function(){return e.gotoPrev()}),shortcut.add("ctrl+down",function(){return e.gotoNext({isSubmission:!1})}),shortcut.add("ctrl+.",function(){return e.gotoNext({isSubmission:!1})}),navigator.platform.toUpperCase().indexOf("MAC")>=0&&(p("#js-nav-next").attr("title",gettext("Go to the next string (Ctrl+.)<br/><br/>Also:<br/>Next page: Ctrl+Shift+.<br/>Last page: Ctrl+Shift+End")),p("#js-nav-prev").attr("title",gettext("Go to the previous string (Ctrl+,)<br/><br/>Also:</br>Previous page: Ctrl+Shift+,<br/>First page: Ctrl+Shift+Home"))),shortcut.add("ctrl+shift+n",this.unitIndex),p(document).ajaxStart(function(){clearTimeout(PTL.editor.delayedActivityTimer),PTL.editor.delayedActivityTimer=setTimeout(function(){PTL.editor.showActivity()},3e3)}),p(document).ajaxStop(function(){clearTimeout(PTL.editor.delayedActivityTimer),PTL.editor.isLoading||PTL.editor.hideActivity()}),p.each(this.settings.mt,function(){var t=this.name,e=this.key;p.ajax({url:s(["js/mt/",t,".js"].join("")),async:!1,dataType:"script",success:function(){setTimeout(function(){PTL.editor.mt[t].init(e)},0),p(document).on("mt_ready","table.translate-table",PTL.editor.mt[t].ready)}})}),setInterval(y.updateRelativeDates,6e4),setTimeout(function(){p.history.init(function(t){var e=C.getParsedHash(t),n=!0,i=0;if(e.unit){var r=parseInt(e.unit,10);if(r&&!isNaN(r)){var o=PTL.editor.units.getCurrent(),s=PTL.editor.units.get(r);if(s&&s!==o)return PTL.editor.units.setCurrent(s),void PTL.editor.displayEditUnit();i=r,n=!PTL.editor.units.length}}if(PTL.editor.filter="all",PTL.editor.checks=[],PTL.editor.category=[],PTL.editor.sortBy="default","filter"in e){var a=e.filter;PTL.editor.filter=a,"checks"===a&&"checks"in e&&(PTL.editor.checks=e.checks.split(",")),"checks"===a&&"category"in e&&(PTL.editor.category=e.category),"sort"in e&&(PTL.editor.sortBy=e.sort)}if("modified-since"in e?PTL.editor.modifiedSince=e["modified-since"]:PTL.editor.modifiedSince=null,"month"in e?PTL.editor.month=e.month:PTL.editor.month=null,"user"in e&&0===PTL.editor.filter.indexOf("user-")){var l;PTL.editor.user=l=encodeURIComponent(e.user);var u=[],c={"user-suggestions":interpolate(gettext("%s's pending suggestions"),[l]),"user-suggestions-accepted":interpolate(gettext("%s's accepted suggestions"),[l]),"user-suggestions-rejected":interpolate(gettext("%s's rejected suggestions"),[l]),"user-submissions":interpolate(gettext("%s's submissions"),[l]),"user-submissions-overwritten":interpolate(gettext("%s's overwritten submissions"),[l])};for(var h in c)u.push(['<option value="',h,'" data-user="',l,'" class="',"js-user-filter",'">',c[h],"</option>"].join(""));p(".js-user-filter").remove(),p("#js-filter-status").append(u.join(""))}if("search"in e){PTL.editor.filter="search";var d={searchText:e.search};"sfields"in e&&(d.searchFields=e.sfields.split(",")),"soptions"in e&&(d.searchOptions=e.soptions.split(",")),x.setState(d)}PTL.editor.preventNavigation=!0;var f="search"===PTL.editor.filter?"all":PTL.editor.filter;p("#js-filter-status").select2("val",f),"checks"===PTL.editor.filter&&p("#js-filter-checks").is(":hidden")&&PTL.editor.getCheckOptions({success:PTL.editor.appendChecks}),p("#js-filter-sort").select2("val",PTL.editor.sortBy),"search"===PTL.editor.filter&&p(".js-filter-checks-wrapper").hide(),PTL.editor.preventNavigation=!1,PTL.editor.fetchUnits({initial:n,uId:i,success:function(){i>0?PTL.editor.units.setCurrent(i):PTL.editor.units.setFirstAsCurrent(),PTL.editor.displayEditUnit()}})},{unescape:!0})},1)},ready:function(){var t=this.units.getCurrent();t.get("isObsolete")&&this.displayObsoleteMsg(),c["default"](document.querySelector("textarea.expanding")),p(".extra-item-comment").filter(":not([dir])").bidi(),p(".suggestion-translation-body").filter(":not([dir])").bidi();var e=p(".focusthis")[0];e&&e.focus(),this.settings.targetLang=PTL.editor.normalizeCode(p(".js-translation-area").attr("lang"));var n=p(".js-developer-comments");if(n.html(d["default"](n.html())),this.hlSearch(),""!==this.settings.tmUrl&&this.getTMUnits(),null!==this.tmData){var i=this.getTMUnitsContent(PTL.editor.tmData);p("#extras-container").append(i)}p("table.translate-table").trigger("mt_ready"),this.isUnitDirty=!1,this.keepState=!1,this.isLoading=!1,this.hideActivity(),this.updateExportLink(),y.updateRelativeDates(),clearTimeout(this.delayedActivityTimer)},noResults:function(){PTL.editor.displayMsg({body:gettext("No results.")}),PTL.editor.reDraw()},canNavigate:function(){return this.isUnitDirty?window.confirm(gettext("You have unsaved changes in this unit. Navigating away will discard those changes.")):!0},escapeUnsafeRegexSymbols:function(t){return t.replace(/[!$&(-+\-.:<-?\[-^{-}]/g,"\\$&")},makeRegexForMultipleWords:function(t){return["(",PTL.editor.escapeUnsafeRegexSymbols(t).trim().replace(/ +/g,"|"),")"].join("")},hlSearch:function(){var t=x.state,e=t.searchText,n=t.searchFields,i=t.searchOptions,r="search"===PTL.editor.filter?e:"",o=[],s={notes:"div.developer-comments",locations:"div.translate-locations",source:"td.translate-original, div.original div.translation-text",target:"td.translate-translation"},a=void 0;p.each(n,function(t,e){o.push("tr.edit-row "+s[e]),o.push("tr.view-row "+s[e])}),a=i.indexOf("exact")>=0?new RegExp(["(",PTL.editor.escapeUnsafeRegexSymbols(r),")"].join("")):new RegExp(PTL.editor.makeRegexForMultipleWords(r),"i"),p(o.join(", ")).highlightRegex(a)},copyText:function(t){var e,n=p(t.currentTarget),i=n.data("action"),r=n.data("string")||n.data("translation-aid")||n.text(),o=p(this.focused);"overwrite"===i?(o.val(r).trigger("input"),e=r.length):(e=o.caret().start+r.length,o.val(o.caret().replace(r)).trigger("input")),o.caret(e,e),c["default"].update(this.focused)},copyOriginal:function(t){var e=p(".js-translation-area");if(e.length){for(var n,r=t.length-1,o=0;o<e.length;o++){var s=t[o]||t[r];p(e.get(o)).val(s).trigger("input")}n=p(e)[0],n.focus(),c["default"].update(n),PTL.editor.goFuzzy(),PTL.editor.cpRE.exec(p(n).val()),i=PTL.editor.cpRE.lastIndex,p(n).caret(i,i),PTL.editor.cpRE.lastIndex=0}},copyComment:function(t){var e=document.querySelector(".js-editor-comment"),n=document.querySelector(".js-editor-comment-form"),i=document.querySelector("#id_translator_comment");e.classList.contains("selected")||(n.style.display="inline-block",e.classList.add("selected")),i.focus(),i.value=t},doDiff:function(t,e){var n,i,r,o=[],s=this.differencer.diff_main(t,e);for(this.differencer.diff_cleanupSemantic(s),r=0;r<s.length;r++)n=s[r][0],i=C.fancyEscape(s[r][1]),n===DIFF_INSERT?o[r]=['<span class="diff-insert">',i,"</span>"].join(""):n===DIFF_DELETE?o[r]=['<span class="diff-delete">',i,"</span>"].join(""):n===DIFF_EQUAL&&(o[r]=i);return o.join("")},doFuzzyStyle:function(){p("tr.edit-row").addClass("fuzzy-unit")},undoFuzzyStyle:function(){p("tr.edit-row").removeClass("fuzzy-unit")},doFuzzyBox:function(){var t=p("input.fuzzycheck");t.prop("checked",!0),this.settings.isAdmin||(PTL.editor.isSuggestMode()||p(".js-fuzzy-block").show(),t[0].defaultChecked=!0),t.trigger("change")},undoFuzzyBox:function(){var t=p("input.fuzzycheck");t.prop("checked",!1),t.trigger("change")},goFuzzy:function(){this.isFuzzy()||(this.doFuzzyStyle(),this.doFuzzyBox())},ungoFuzzy:function(){this.isFuzzy()&&(this.undoFuzzyStyle(),this.undoFuzzyBox())},isFuzzy:function(){return p("input.fuzzycheck").prop("checked")},toggleFuzzyStyle:function(){this.isFuzzy()?this.doFuzzyStyle():this.undoFuzzyStyle()},toggleState:function(){p("input.fuzzycheck").blur().click()},updateUnitDefaultProperties:function(){p(".js-translation-area").each(function(){this.defaultValue=this.value});var t=p("#id_state")[0];t.defaultChecked=t.checked,this.handleTranslationChange()},updateCommentDefaultProperties:function(){var t=document.querySelector("#id_translator_comment");t.defaultValue=t.value,this.handleTranslationChange()},handleTranslationChange:function(){var t,e,n=document.querySelector("#id_translator_comment"),i=null!==n?n.value!==n.defaultValue:!1,r=p(".js-submit")[0],o=p(".js-suggest")[0],s=p(".js-translation-area").get(),a=p(".js-user-suggestion").map(function(){return p(this).data("translation-aid")}).get(),l=p("#id_state")[0],u=l.defaultChecked!==l.checked,c=!1,h=!1,d=!1;for(this.settings.isAdmin||(h=l.checked===!0),e=0;e<s.length&&!c;e++)t=s[e],c=t.defaultValue!==t.value;if(a.length)for(e=0;e<s.length&&!d;e++)t=s[e],d=-1!==a.indexOf(t.value);this.isUnitDirty=c||u||i,void 0!==r&&(r.disabled=!(u||c)||h),void 0!==o&&(o.disabled=!c||d)},onStateChange:function(){this.handleTranslationChange(),this.toggleFuzzyStyle()},onStateClick:function(){this.keepState=!0},onTextareaChange:function(t){this.handleTranslationChange();var e=this,n=t.target,i=n.defaultValue!==n.value;i&&!this.keepState&&this.ungoFuzzy(),clearTimeout(this.similarityTimer),this.similarityTimer=setTimeout(function(){e.checkSimilarTranslations(),e.similarityTimer=null},200)},getSimilarityData:function(){var t=this.units.getCurrent();return{similarity:t.get("similarityHuman"),mt_similarity:t.get("similarityMT")}},calculateSimilarity:function(t,e,n){var i,r,o,s,a=0,l=null;for(s=0;s<e.length;s++)i=e.eq(s),r=i.data(n),o=this.wordComparer.similarity(t,r),o>a&&(a=o,l=i.hasClass("js-translation-area")?null:i.val("id"));return{max:a,boxId:l}},checkSimilarTranslations:function(){var t="translation-aid",e="translation-aid-mt",n=p(["[data-",e,"]"].join("")),i="[data-"+t+"]";this.settings.isAnonymous||(i+="[data-suggestor-id!="+this.settings.userId+"]");var r=p(i);if(!r.length&&!n.length)return!1;var o,s=this.units.getCurrent(),a=p(".js-translation-area").val(),l={max:0,boxId:null},u={max:0,boxId:null};r.length&&(l=this.calculateSimilarity(a,r,t)),n.length&&(u=this.calculateSimilarity(a,n,e)),s.set({similarityHuman:l.max,similarityMT:u.max}),o=l.max>u.max?l:u,this.highlightBox(o.boxId,1===o.max)},highlightBox:function(t,e){var n="best-match",i="exact-match";if(p(".translate-table").find([".",n].join("")).removeClass([n,i].join(" ")),null===t)return!1;var r=[n];e&&r.push(i),p(t).addClass(r.join(" "))},doSuggestMode:function(){p("table.translate-table").addClass("suggest-mode")},undoSuggestMode:function(){p("table.translate-table").removeClass("suggest-mode")},isSuggestMode:function(){return p("table.translate-table").hasClass("suggest-mode")},toggleSuggestMode:function(t){t.preventDefault(),this.isSuggestMode()?this.undoSuggestMode():this.doSuggestMode()},updateExportLink:function(){var t=p(".js-export-view"),e=t.data("export-url"),n=C.getHash().replace(/&?unit=\d+/,""),i=n?[e,n].join("?"):e;t.data("href",i)},showActivity:function(t){this.hideMsg(),p("#js-editor-act").spin().fadeIn(300)},hideActivity:function(){p("#js-editor-act").spin(!1).fadeOut(300)},displayMsg:function(t){f.defaults(t,{showClose:!0}),this.hideActivity(),y.fixSidebarHeight(),p("#js-editor-msg-overlay").html(this.tmpl.msg({opts:t})).fadeIn(300)},hideMsg:function(){var t=p("#js-editor-msg-overlay");t.length&&t.fadeOut(300)},displayError:function(t){this.hideActivity(),b.show({text:t,level:"error"})},error:function(t,e){var n="";"abort"!==e&&(0===t.status?n=gettext("Error while connecting to the server"):402===t.status?v.onError(t,"PTL.editor.error"):n=404===t.status?gettext("Not found"):500===t.status?gettext("Server error"):"timeout"===e?gettext("The server seems down. Try again later."):t.hasOwnProperty("responseText")?p.parseJSON(t.responseText).msg:gettext("Unknown error"),PTL.editor.displayError(n))},displayObsoleteMsg:function(){var t=gettext("This unit no longer exists."),e=gettext("Go back to browsing"),n=p(".js-back-to-browser").attr("href"),i=gettext("Reload page"),r=["<div>",t,"</div>",'<div class="editor-msg-btns">','<a class="btn btn-xs js-editor-reload" href="#">',i,"</a>",'<a class="btn btn-xs" href="',n,'">',e,"</a>","</div>"].join("");PTL.editor.displayMsg({body:r,showClose:!1})},getReqData:function(){var t={};if("checks"===this.filter&&this.checks.length&&(t.checks=this.checks.join(",")),"checks"===this.filter&&this.category.length&&(t.category=this.category),"search"===this.filter){var e=x.state,n=e.searchText,i=e.searchFields,r=e.searchOptions;t.search=n,t.sfields=i,t.soptions=r}else t.filter=this.filter,"default"!==this.sortBy&&(t.sort=this.sortBy);return null!==this.modifiedSince&&(t["modified-since"]=this.modifiedSince),this.user&&(t.user=this.user),t},buildRow:function(t){return['<tr id="row',t.id,'" class="view-row">',this.tmpl.vUnit({unit:t.toJSON()}),"</tr>"].join("")},buildRows:function(){var t,e,n=this.getUnitGroups(),i=this.units.getCurrent(),r=[];return f.each(n,function(o){for(1!==n.length&&r.push(['<tr class="delimiter-row"><td colspan="2">','<div class="hd"><h2>',o.path,"</h2></div>","</td></tr>"].join("")),t=0;t<o.units.length;t++)e=o.units[t],e.id===i.id?r.push(this.getEditUnit()):r.push(this.buildRow(e))},this),r.join("")},buildCtxRows:function(t,e){var n,i,r=this.units.getCurrent(),o="";for(n=0;n<t.length;n++)i=t[n],i=p.extend({},r.toJSON(),i),o+='<tr id="ctx'+i.id+'" class="ctx-row '+e+'">',o+=this.tmpl.vUnit({unit:i}),o+="</tr>";return o},getUnitGroups:function(){var t,e=parseInt((this.units.chunkSize-1)/2,10),n=this.units.length,i=this.units.getCurrent(),r=this.units.indexOf(i),o=r-e,s=r+1+e,a=null;return 0>o?(s+=-o,o=0):s>n&&(o>s-n?o+=-(s-n):o=0,s=n),f.reduce(this.units.slice(o,s),function(e,n){return t=n.get("store").get("pootlePath"),t===a?e[e.length-1].units.push(n):e.push({path:t,units:[n]}),a=t,e},[])},displayEditUnit:function(){PTL.editor.units.length&&(this.fetchUnits(),this.hideMsg(),this.reDraw(this.buildRows()),this.updateNavButtons())},reDraw:function(t){var e=p(".js-editor-body"),n=e.find("tr");n.remove(),void 0!==t&&(e.append(t),this.ready())},updateNavButton:function(t,e){var n=p(t);n.is(":disabled")&&e||n.is(":enabled")&&!e||(e?(n.data("title",n.attr("title")),n.removeAttr("title")):n.attr("title",n.data("title")),n.prop("disabled",e))},updateNavButtons:function(){this.updateNavButton("#js-nav-prev",!this.units.hasPrev()),this.updateNavButton("#js-nav-next",!this.units.hasNext())},fetchUnits:function(t){var e={initial:!1,uId:0},n=l("/xhr/units/"),i={path:this.settings.pootlePath};if(t=p.extend({},e,t),t.initial)i.initial=t.initial,t.uId>0&&(i.uids=t.uId);else{var r,o,s,a=this.units.fetchedIds(),u=this.units.chunkSize,c=t.uId>0?t.uId:this.units.getCurrent().id,h=this.units.uIds.indexOf(c);if(o=Math.max(h-u,0),s=Math.min(h+u+1,this.units.total),0===t.uId&&(-1===a.indexOf(this.units.uIds[o])&&(o=Math.max(o-u,0)),-1===a.indexOf(this.units.uIds[s-1])&&(s=Math.min(s+u+1,this.units.total))),r=this.units.uIds.slice(o,s),r=f.difference(r,a),!r.length)return;i.uids=r.join(",")}p.extend(i,this.getReqData()),p.ajax({url:n,data:i,dataType:"json",cache:!1,success:function(e){if(e.uIds&&(PTL.editor.units.reset(),PTL.editor.units.uIds=e.uIds,PTL.editor.units.total=e.uIds.length),e.unitGroups.length){var n,i;for(n=0;n<e.unitGroups.length;n++)i=e.unitGroups[n],p.each(i,function(t,e){var n=p.extend({pootlePath:t},e.meta),i=f.map(e.units,function(t){return p.extend(t,{store:n})});PTL.editor.units.set(i,{remove:!1})});t.success&&p.isFunction(t.success)&&t.success()}else PTL.editor.noResults()},error:PTL.editor.error})},updateNav:function(){p("#items-count").text(this.units.total);var t=PTL.editor.units.getCurrent();if(void 0!==t){var e=this.units.uIds.indexOf(t.id)+1;p(".js-unit-index").text(e)}},getEditUnit:function(){var t,e,n,i,r,o="edit-row",s=this.units.getCurrent(),a=s.id,u=l(["/xhr/units/",a,"/edit/"].join("")),c="",h={before:[],after:[]},d={};return this.settings.vFolder&&(d.vfolder=this.settings.vFolder),p.ajax({url:u,async:!1,data:d,dataType:"json",success:function(t){PTL.editor.tmData=t.tm_suggestions||null,c=t.editor,PTL.editor.updateNav(),s.set("isObsolete",t.is_obsolete),t.ctx&&(PTL.editor.ctxGap=Math.max(t.ctx.before.length,t.ctx.after.length),h.before=t.ctx.before,h.after=t.ctx.after)},error:PTL.editor.error}),o+=s.get("isfuzzy")?" fuzzy-unit":"",o+="all"!==PTL.editor.filter?" with-ctx":"",r=h.before.length||h.after.length,i=this.editCtxUI({hasData:r}),e=i[0],n=i[1],t=("all"!==PTL.editor.filter?e+this.buildCtxRows(h.before,"before"):"")+'<tr id="row'+a+'" class="'+o+'">'+c+"</tr>"+("all"!==PTL.editor.filter?this.buildCtxRows(h.after,"after")+n:"")},submit:function(t){t.preventDefault();var e=t.target,n=PTL.editor.units.getCurrent().id,i=l(["/xhr/units/",n].join("")),r=p("#translate").serializeObject(),o=p(".js-translation-area")[0].value,s=p(".js-user-suggestion").map(function(){return{text:p(this).data("translation-aid"),id:this.id}}).get(),a={sfn:"PTL.editor.processSubmission",efn:"PTL.editor.error"};PTL.editor.updateUnitDefaultProperties();var u=f.pluck(s,"id"),c=f.pluck(s,"text"),h=c.indexOf(o);return-1===h||PTL.editor.isFuzzy()?(null!==PTL.editor.similarityTimer&&(clearTimeout(PTL.editor.similarityTimer),PTL.editor.checkSimilarTranslations()),p.extend(r,PTL.editor.getReqData(),PTL.editor.getSimilarityData(),a),e.disabled=!0,void p.ajax({url:i,type:"POST",data:r,dataType:"json",success:PTL.editor.processSubmission,error:PTL.editor.error})):void p(["#",u[h]].join("")).find(".js-suggestion-accept").trigger("click",[!0])},processSubmission:function(t){var e=p(".js-translation-area").map(function(t,e){return p(e).val()}).get(),n=PTL.editor.units.getCurrent();n.setTranslation(e),n.set("isfuzzy",PTL.editor.isFuzzy());var i=!!t.checks;p(".translate-container").toggleClass("error",i),t.user_score&&w.set(t.user_score),i?a(t.checks):PTL.editor.gotoNext()},suggest:function(t){t.preventDefault();var e=PTL.editor.units.getCurrent().id,n=l(["/xhr/units/",e,"/suggestions/"].join("")),i=p("#translate").serializeObject(),r={sfn:"PTL.editor.processSuggestion",efn:"PTL.editor.error"};PTL.editor.updateUnitDefaultProperties(),delete i.state,p.extend(i,PTL.editor.getReqData(),PTL.editor.getSimilarityData(),r),p.ajax({url:n,type:"POST",data:i,dataType:"json",success:PTL.editor.processSuggestion,error:PTL.editor.error})},processSuggestion:function(t){t.user_score&&w.set(t.user_score),PTL.editor.gotoNext()},gotoPrev:function(){if(!this.canNavigate())return!1;var t=this.units.prev();if(t){var e=C.updateHashPart("unit",t.id);p.history.load(e)}},gotoNext:function(){var t=arguments.length<=0||void 0===arguments[0]?{isSubmission:!0}:arguments[0];if(!this.canNavigate())return!1;var e=this.units.next();if(e){var n=C.updateHashPart("unit",e.id);p.history.load(n)}else if(t.isSubmission){var i=p(".js-back-to-browser").attr("href");window.location.href=[i,"finished"].join("?")}},gotoUnit:function(t){if(t.preventDefault(),!PTL.editor.canNavigate())return!1;if(t.ctrlKey||t.altKey||t.metaKey||2===t.which){var e="TD"!==t.target.nodeName?p(t.target).parents("td"):p(t.target);return void window.open(e.data("target"),"_blank")}if(""===window.getSelection().toString()){var n=this.id.match(/(row|ctx)([0-9]+)/);if(n){var i,r=n[1],o=parseInt(n[2],10);i="row"===r?C.updateHashPart("unit",o):["unit=",encodeURIComponent(o)].join(""),p.history.load(i)}}},unitIndex:function(t){t.preventDefault();var e=p(".js-unit-index")[0],n=window.getSelection(),i=document.createRange();i.selectNodeContents(e),n.removeAllRanges(),n.addRange(i),e.focus()},gotoIndex:function(t){if(13===t.which){t.preventDefault();var e=parseInt(p(".js-unit-index").text(),10);if(e&&!isNaN(e)&&e>0&&e<=this.units.total){var n=this.units.uIds[e-1],i=C.updateHashPart("unit",n);p.history.load(i)}}},getCheckOptions:function(t){var e=l("/xhr/stats/checks/"),n={path:this.settings.pootlePath};p.ajax({url:e,data:n,dataType:"json",success:t.success,error:PTL.editor.error})},filterChecks:function T(){if(!PTL.editor.preventNavigation){if(!PTL.editor.canNavigate())return!1;var T=p("#js-filter-checks").val();if("none"!==T){var t=p("#js-filter-sort").val(),e={filter:"checks",checks:T};"default"!==t&&(e.sort=t),p.history.load(p.param(e))}}},appendChecks:function(t){if(Object.keys(t).length){var e=p("#js-filter-checks"),n=PTL.editor.checks[0]||"none";e.find("optgroup").each(function(e){var n=!0,i=p(this);i.find("option").each(function(e){var i=p(this),r=i.val();r in t?(n=!1,i.text(i.data("title")+"("+t[r]+")")):i.remove()}),n&&i.hide()}),e.select2(E).select2("val",n),p(".js-filter-checks-wrapper").css("display","inline-block")}else PTL.editor.displayMsg({body:gettext("No results.")}),p("#js-filter-status").select2("val",PTL.editor.filter)},filterSort:function(){var t=p("#js-filter-status").val(),e=p("#js-filter-checks").val()||this.checks.join(","),n=p("#js-filter-sort").val(),i=this.user||null,r={filter:t};this.category.length?r.category=this.category:"none"!==e&&(r.checks=e),"default"!==n&&(r.sort=n),null!==i&&(r.user=i),p.history.load(p.param(r))},filterStatus:function(){if(!PTL.editor.canNavigate())return!1;var t=p("#js-filter-status option:selected"),e=t.val(),n=t.data("user"),i=p(".js-filter-checks-wrapper");if("checks"===e)PTL.editor.getCheckOptions({success:PTL.editor.appendChecks});else if(i.hide(),!PTL.editor.preventNavigation){var r={filter:e};PTL.editor.user&&n?r.user=PTL.editor.user:(PTL.editor.user=null,p(".js-user-filter").remove(),"default"!==PTL.editor.sortBy&&(r.sort=PTL.editor.sortBy)),p.history.load(p.param(r))}},editCtxUI:function(t){var e={hasData:!1,replace:!1};t=p.extend({},e,t);var n=PTL.editor.tmpl.editCtx({hasData:t.hasData,extraCls:"before"}),i=PTL.editor.tmpl.editCtx({hasData:t.hasData,extraCls:"after"});return t.replace&&(p("tr.edit-ctx.before").replaceWith(n),p("tr.edit-ctx.after").replaceWith(i)),[n,i]},moreContext:function(t){var e=l(["/xhr/units/",PTL.editor.units.getCurrent().id,"/context/"].join("")),n={gap:PTL.editor.ctxGap};n.qty=t?PTL.editor.ctxQty:PTL.editor.ctxStep,t&&0===n.qty||p.ajax({url:e,async:!1,dataType:"json",data:n,success:function(e){if(e.ctx.before.length||e.ctx.after.length){t?PTL.editor.ctxGap=Math.max(e.ctx.before.length,e.ctx.after.length):PTL.editor.ctxGap+=Math.max(e.ctx.before.length,e.ctx.after.length),p.cookie("ctxQty",PTL.editor.ctxGap,{path:"/"});var n=PTL.editor.buildCtxRows(e.ctx.before,"before"),i=PTL.editor.buildCtxRows(e.ctx.after,"after"),r=p("tr.edit-ctx");r.first().after(n),r.last().before(i)}},error:PTL.editor.error})},lessContext:function(){var t=p(".ctx-row.before"),e=p(".ctx-row.after");(t.length||e.length)&&(t.length===PTL.editor.ctxGap&&t.slice(0,PTL.editor.ctxStep).remove(),e.length===PTL.editor.ctxGap&&e.slice(-PTL.editor.ctxStep).remove(),PTL.editor.ctxGap-=PTL.editor.ctxStep,PTL.editor.ctxGap>=0&&(0===PTL.editor.ctxGap&&(PTL.editor.editCtxUI({hasData:!1,replace:!0}),p.cookie("ctxShow",!1,{path:"/"})),p.cookie("ctxQty",PTL.editor.ctxGap,{path:"/"})))},showContext:function(){var t=p(".ctx-row.before"),e=p(".ctx-row.after");t.length||e.length?(t.show(),e.show()):PTL.editor.moreContext(!0),PTL.editor.editCtxUI({hasData:!0,replace:!0}),p.cookie("ctxShow",!0,{path:"/"})},hideContext:function(){var t=p(".ctx-row.before"),e=p(".ctx-row.after");t.hide(),e.hide(),PTL.editor.editCtxUI({hasData:!1,replace:!0}),p.cookie("ctxShow",!1,{path:"/"})},onSearch:function(t){if(!PTL.editor.canNavigate())return!1;var e;if(t){var n=this.buildSearchQuery();e="search="+n}else e=C.updateHashPart("filter","all",["search","sfields","soptions"]);p.history.load(e)},comment:function(t){t.preventDefault(),PTL.editor.updateCommentDefaultProperties();var e=p(this).attr("action"),n=p(this).serializeObject();return p.ajax({
url:e,type:"POST",data:n,success:function(t){if(p(".js-editor-comment").removeClass("selected"),p("#editor-comment").fadeOut(200),p("#translator-comment").length)p(t.comment).hide().prependTo("#translator-comment").delay(200).animate({height:"show"},1e3,"easeOutQuad");else{var e='<div id="translator-comment">'+t.comment+"</div>";p(e).prependTo("#extras-container").delay(200).hide().animate({height:"show"},1e3,"easeOutQuad")}y.updateRelativeDates()},error:PTL.editor.error}),!1},removeComment:function(t){t.preventDefault();var e=p(this).data("url");p.ajax({url:e,type:"DELETE",success:function(){p(".js-comment-first").fadeOut(200)},error:PTL.editor.error})},showTimeline:function(){var t=p("#timeline-results");if(t.length)return void t.slideDown(1e3,"easeOutQuad");var e=PTL.editor.units.getCurrent().id,n=p(".translate-container"),i=l(["/xhr/units/",e,"/timeline/"].join(""));n.spin(),null!==PTL.editor.timelineReq&&PTL.editor.timelineReq.abort(),PTL.editor.timelineReq=p.ajax({url:i,dataType:"json",success:function(t){var e=t.uid;t.timeline&&e===PTL.editor.units.getCurrent().id&&(p("#translator-comment").length?p(t.timeline).hide().insertAfter("#translator-comment").slideDown(1e3,"easeOutQuad"):p(t.timeline).hide().prependTo("#extras-container").slideDown(1e3,"easeOutQuad"),y.updateRelativeDates(),p(".timeline-field-body").filter(":not([dir])").bidi(),p("#js-show-timeline").addClass("selected"))},complete:function(){n.spin(!1)},error:PTL.editor.error})},toggleTimeline:function(t){t.preventDefault();var e=p("#js-toggle-timeline");e.toggleClass("selected"),e.hasClass("selected")?PTL.editor.showTimeline():p("#timeline-results").slideUp(1e3,"easeOutQuad")},filterTMResults:function(t,e){var n=[];if(t.length>0&&t[0].source===e){var i=p(PTL.editor.focused);if(""===i.val()){var r=t[0].target;i.val(r).trigger("input"),i.caret(r.length,r.length),PTL.editor.goFuzzy()}}for(var o=0;o<t.length&&3>o;o++)"nobody"===t[o].username?t[o].fullname=gettext("some anonymous user"):t[o].fullname||(t[o].fullname=gettext("someone")),t[o].fullname=f.escape(t[o].fullname),n.push(t[o]);return n},getTMUnitsContent:function(t){var e=this.units.getCurrent(),n=e.get("store"),i=(n.get("source_lang"),n.get("target_lang"),e.get("source")[0]),r=PTL.editor.filterTMResults(t,i),o=gettext("Similar translations");return r.length?PTL.editor.tmpl.tm({store:n.toJSON(),unit:e.toJSON(),suggs:r,name:o}):""},getTMUnits:function(){var t=this.units.getCurrent(),e=t.get("store"),n=e.get("source_lang"),i=e.get("target_lang"),r=t.get("source")[0],o=e.get("project_style"),s=this.settings.tmUrl+n+"/"+i+"/unit/?source="+encodeURIComponent(r)+"&jsoncallback=?";r.length&&(o.length&&"standard"!=o&&(s+="&style="+o),null!==this.tmReq&&this.tmReq.abort(),this.tmReq=p.jsonp({url:s,callback:"_jsonp"+t.id,dataType:"jsonp",cache:!0,success:function(n){var i=this.callback.slice(6);if(i===t.id&&n.length){var r=t.get("source")[0],o=PTL.editor.filterTMResults(n,r),s=gettext("Similar translations"),a=PTL.editor.tmpl.tm({store:e.toJSON(),unit:t.toJSON(),suggs:o,name:s});p(a).hide().appendTo("#extras-container").slideDown(1e3,"easeOutQuad")}},error:PTL.editor.error}))},rejectSuggestion:function(t){t.stopPropagation();var e=p(this).data("sugg-id"),n=p("#suggestion-"+e),i=PTL.editor.units.getCurrent(),r=l("/xhr/units/"+i.id+"/suggestions/"+e+"/");p.ajax({url:r,type:"DELETE",success:function(t){t.user_score&&w.set(t.user_score),n.fadeOut(200,function(){p(this).remove(),p(".js-user-suggestion").length||PTL.editor.gotoNext()}),p(".js-comment-first").fadeOut(200)},error:PTL.editor.error})},acceptSuggestion:function(t,e){t.stopPropagation();var n,i=p(this).data("sugg-id"),r=p("#suggestion-"+i),o=PTL.editor.units.getCurrent(),e=e||!1,s=l("/xhr/units/"+o.id+"/suggestions/"+i+"/");p.ajax({url:s,type:"POST",success:function(t){p.each(t.newtargets,function(t,e){p("#id_target_f_"+t).val(e).focus()}),p.each(t.newdiffs,function(t,e){p.each(e,function(e,n){p("#suggdiff-"+t+"-"+e).html(n)})}),n=p(".js-translation-area").map(function(t,e){return p(e).val()}).get(),o.setTranslation(n),o.set("isfuzzy",!1),t.user_score&&w.set(t.user_score);var i=!!t.checks;p(".translate-container").toggleClass("error",i),i&&a(t.checks),r.fadeOut(200,function(){p(this).remove(),i||!e&&p(".js-user-suggestion").length||PTL.editor.gotoNext()})},error:PTL.editor.error})},toggleCheck:function(){var t,e=p(this).parent(),n=p(this).data("check-id"),i=PTL.editor.units.getCurrent().id,r=l(["/xhr/units/",i,"/checks/",n,"/toggle/"].join("")),o=!e.hasClass("false-positive"),s={};o&&(s.mute=1),p.post(r,s,function(n){e.toggleClass("false-positive",o),t=p("#translate-checks-block .check").not(".false-positive").size()>0,p(".translate-container").toggleClass("error",t)},"json")},isSupportedSource:function(t,e){for(var n in t)if(e===t[n].source)return!0;return!1},isSupportedTarget:function(t,e){for(var n in t)if(e===t[n].target)return!0;return!1},isSupportedPair:function(t,e,n){for(var i in t)if(e===t[i].source&&n===t[i].target)return!0;return!1},addMTButton:function(t,e,n){var i='<a class="translate-mt '+e+'">';i+='<i class="icon-'+e+'" title="'+n+'"><i/></a>',p(t).first().prepend(i)},addMTButtons:function(t){if(this.isSupportedTarget(t.pairs,PTL.editor.settings.targetLang)){var e,n=this,i=p(".translate-toolbar");i.each(function(){var i=n.normalizeCode(p(this).parents(".source-language").find(".translation-text").attr("lang"));e=t.validatePairs?n.isSupportedPair(t.pairs,i,PTL.editor.settings.targetLang):n.isSupportedSource(t.pairs,i),e&&n.addMTButton(p(this).find(".js-toolbar-buttons"),t.buttonClassName,t.hint+" ("+i.toUpperCase()+"&rarr;"+PTL.editor.settings.targetLang.toUpperCase()+")")})}},normalizeCode:function(t){if(t){var e=t.replace("_","-"),n=t.indexOf("@");return-1!==n&&(e=e.slice(0,n)),e}return t},collectArguments:function(t){return this.argSubs[this.argPos]=t,"["+this.argPos++ +"]"},translate:function(t,e){var n=this,i=p(".js-translation-area"),r=p(t).parents(".source-language").find(".translation-text"),o=PTL.editor.normalizeCode(r[0].lang),s=PTL.editor.normalizeCode(i[0].lang),a=/<[\/]?\w+.*?>/g,l=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegEG])/g,u=/{\d+(,\d+)?(:[a-zA-Z ]+)?}/g,h=/%\d+/g;return r.each(function(t){n.argSubs=[],n.argPos=0;var r=p(this).text().replace(a,n.collectArguments.bind(n)).replace(l,n.collectArguments.bind(n)).replace(u,n.collectArguments.bind(n)).replace(h,n.collectArguments.bind(n));e(r,o,s,function(e){var o,s,a=e.translation,l=e.msg,u=i[t],h=i.eq(t);if(void 0===a&&l)return void PTL.editor.displayError(l);for(o=0;o<n.argSubs.length;o++)r.match(new RegExp("\\["+o+"\\][^\\s]"))&&(a=a.replace(new RegExp("\\["+o+"\\]\\s+"),"["+o+"]")),r.match(new RegExp("[^\\s]\\["+o+"\\]"))&&(a=a.replace(new RegExp("\\s+\\["+o+"\\]"),"["+o+"]"));for(o=0;o<n.argSubs.length;o++)s=n.argSubs[o].replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;"),a=a.replace("["+o+"]",s);h.val(p("<div />").html(a).text()),c["default"].update(u),e.storeResult&&h.attr("data-translation-aid-mt",a)})}),i.eq(0).trigger("input").focus(),PTL.editor.goFuzzy(),!1}}},359:function(t,e,n){"use strict";var i=n(4),r=n(9);n(463);var o=n(17),s=r.RelationalModel.extend({}),a=r.RelationalModel.extend({relations:[{type:"HasOne",key:"store",relatedModel:s,reverseRelation:{key:"units"}}],setTranslation:function(t){i.isArray(t)||(t=[t]),this.set("target",i.map(t,function(t){return o.cleanEscape(t)}))}});t.exports={Store:s,Unit:a}},366:function(t,e){"use strict";function n(t){var e=window.location.toString().split("#",2)[0],n=encodeURIComponent(t);return e+"#search="+n+"&sfields=notes"}function i(t){return t?t.replace(r,function(t,e,i,r,o){return e+'<a href="'+n(i)+'">'+i+"</a>"}):""}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var r=/(^|\s+|>)(#[0-9a-z_\-]+)/gi;t.exports=e["default"]},380:function(t,e){(function(){function t(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var e=-1,n=1,i=0;t.Diff,t.prototype.diff_main=function(t,e,n,r){"undefined"==typeof r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=r;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[i,t]]:[];"undefined"==typeof n&&(n=!0);var s=n,a=this.diff_commonPrefix(t,e),l=t.substring(0,a);t=t.substring(a),e=e.substring(a),a=this.diff_commonSuffix(t,e);var u=t.substring(t.length-a);t=t.substring(0,t.length-a),e=e.substring(0,e.length-a);var c=this.diff_compute_(t,e,s,o);return l&&c.unshift([i,l]),u&&c.push([i,u]),this.diff_cleanupMerge(c),c},t.prototype.diff_compute_=function(t,r,o,s){var a;if(!t)return[[n,r]];if(!r)return[[e,t]];var l=t.length>r.length?t:r,u=t.length>r.length?r:t,c=l.indexOf(u);if(-1!=c)return a=[[n,l.substring(0,c)],[i,u],[n,l.substring(c+u.length)]],t.length>r.length&&(a[0][0]=a[2][0]=e),a;if(1==u.length)return[[e,t],[n,r]];l=u=null;var h=this.diff_halfMatch_(t,r);if(h){var d=h[0],p=h[1],f=h[2],g=h[3],m=h[4],v=this.diff_main(d,f,o,s),y=this.diff_main(p,g,o,s);return v.concat([[i,m]],y)}return o&&t.length>100&&r.length>100?this.diff_lineMode_(t,r,s):this.diff_bisect_(t,r,s)},t.prototype.diff_lineMode_=function(t,r,o){var s=this.diff_linesToChars_(t,r);t=s.chars1,r=s.chars2;var a=s.lineArray,l=this.diff_main(t,r,!1,o);this.diff_charsToLines_(l,a),this.diff_cleanupSemantic(l),l.push([i,""]);for(var u=0,c=0,h=0,d="",p="";u<l.length;){switch(l[u][0]){case n:h++,p+=l[u][1];break;case e:c++,d+=l[u][1];break;case i:if(c>=1&&h>=1){l.splice(u-c-h,c+h),u=u-c-h;for(var s=this.diff_main(d,p,!1,o),f=s.length-1;f>=0;f--)l.splice(u,0,s[f]);u+=s.length}h=0,c=0,d="",p=""}u++}return l.pop(),l},t.prototype.diff_bisect_=function(t,i,r){for(var o=t.length,s=i.length,a=Math.ceil((o+s)/2),l=a,u=2*a,c=new Array(u),h=new Array(u),d=0;u>d;d++)c[d]=-1,h[d]=-1;c[l+1]=0,h[l+1]=0;for(var p=o-s,f=p%2!=0,g=0,m=0,v=0,y=0,b=0;a>b&&!((new Date).getTime()>r);b++){for(var w=-b+g;b-m>=w;w+=2){var x,C=l+w;x=w==-b||w!=b&&c[C-1]<c[C+1]?c[C+1]:c[C-1]+1;for(var E=x-w;o>x&&s>E&&t.charAt(x)==i.charAt(E);)x++,E++;if(c[C]=x,x>o)m+=2;else if(E>s)g+=2;else if(f){var _=l+p-w;if(_>=0&&u>_&&-1!=h[_]){var T=o-h[_];if(x>=T)return this.diff_bisectSplit_(t,i,x,E,r)}}}for(var S=-b+v;b-y>=S;S+=2){var T,_=l+S;T=S==-b||S!=b&&h[_-1]<h[_+1]?h[_+1]:h[_-1]+1;for(var k=T-S;o>T&&s>k&&t.charAt(o-T-1)==i.charAt(s-k-1);)T++,k++;if(h[_]=T,T>o)y+=2;else if(k>s)v+=2;else if(!f){var C=l+p-S;if(C>=0&&u>C&&-1!=c[C]){var x=c[C],E=l+x-C;if(T=o-T,x>=T)return this.diff_bisectSplit_(t,i,x,E,r)}}}}return[[e,t],[n,i]]},t.prototype.diff_bisectSplit_=function(t,e,n,i,r){var o=t.substring(0,n),s=e.substring(0,i),a=t.substring(n),l=e.substring(i),u=this.diff_main(o,s,!1,r),c=this.diff_main(a,l,!1,r);return u.concat(c)},t.prototype.diff_linesToChars_=function(t,e){function n(t){for(var e="",n=0,o=-1,s=i.length;o<t.length-1;){o=t.indexOf("\n",n),-1==o&&(o=t.length-1);var a=t.substring(n,o+1);n=o+1,(r.hasOwnProperty?r.hasOwnProperty(a):void 0!==r[a])?e+=String.fromCharCode(r[a]):(e+=String.fromCharCode(s),r[a]=s,i[s++]=a)}return e}var i=[],r={};i[0]="";var o=n(t),s=n(e);return{chars1:o,chars2:s,lineArray:i}},t.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var i=t[n][1],r=[],o=0;o<i.length;o++)r[o]=e[i.charCodeAt(o)];t[n][1]=r.join("")}},t.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;r>n;)t.substring(o,r)==e.substring(o,r)?(n=r,o=n):i=r,r=Math.floor((i-n)/2+n);return r},t.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;r>n;)t.substring(t.length-r,t.length-o)==e.substring(e.length-r,e.length-o)?(n=r,o=n):i=r,r=Math.floor((i-n)/2+n);return r},t.prototype.diff_commonOverlap_=function(t,e){var n=t.length,i=e.length;if(0==n||0==i)return 0;n>i?t=t.substring(n-i):i>n&&(e=e.substring(0,n));var r=Math.min(n,i);if(t==e)return r;for(var o=0,s=1;;){var a=t.substring(r-s),l=e.indexOf(a);if(-1==l)return o;s+=l,(0==l||t.substring(r-s)==e.substring(0,s))&&(o=s,s++)}},t.prototype.diff_halfMatch_=function(t,e){function n(t,e,n){for(var i,r,o,a,l=t.substring(n,n+Math.floor(t.length/4)),u=-1,c="";-1!=(u=e.indexOf(l,u+1));){var h=s.diff_commonPrefix(t.substring(n),e.substring(u)),d=s.diff_commonSuffix(t.substring(0,n),e.substring(0,u));c.length<d+h&&(c=e.substring(u-d,u)+e.substring(u,u+h),i=t.substring(0,n-d),r=t.substring(n+h),o=e.substring(0,u-d),a=e.substring(u+h))}return 2*c.length>=t.length?[i,r,o,a,c]:null}if(this.Diff_Timeout<=0)return null;var i=t.length>e.length?t:e,r=t.length>e.length?e:t;if(i.length<4||2*r.length<i.length)return null;var o,s=this,a=n(i,r,Math.ceil(i.length/4)),l=n(i,r,Math.ceil(i.length/2));if(!a&&!l)return null;o=l?a&&a[4].length>l[4].length?a:l:a;var u,c,h,d;t.length>e.length?(u=o[0],c=o[1],h=o[2],d=o[3]):(h=o[0],d=o[1],u=o[2],c=o[3]);var p=o[4];return[u,c,h,d,p]},t.prototype.diff_cleanupSemantic=function(t){for(var r=!1,o=[],s=0,a=null,l=0,u=0,c=0,h=0,d=0;l<t.length;)t[l][0]==i?(o[s++]=l,u=h,c=d,h=0,d=0,a=t[l][1]):(t[l][0]==n?h+=t[l][1].length:d+=t[l][1].length,a&&a.length<=Math.max(u,c)&&a.length<=Math.max(h,d)&&(t.splice(o[s-1],0,[e,a]),t[o[s-1]+1][0]=n,s--,s--,l=s>0?o[s-1]:-1,u=0,c=0,h=0,d=0,a=null,r=!0)),l++;for(r&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),l=1;l<t.length;){if(t[l-1][0]==e&&t[l][0]==n){var p=t[l-1][1],f=t[l][1],g=this.diff_commonOverlap_(p,f),m=this.diff_commonOverlap_(f,p);g>=m?(g>=p.length/2||g>=f.length/2)&&(t.splice(l,0,[i,f.substring(0,g)]),t[l-1][1]=p.substring(0,p.length-g),t[l+1][1]=f.substring(g),l++):(m>=p.length/2||m>=f.length/2)&&(t.splice(l,0,[i,p.substring(0,m)]),t[l-1][0]=n,t[l-1][1]=f.substring(0,f.length-m),t[l+1][0]=e,t[l+1][1]=p.substring(m),l++),l++}l++}},t.prototype.diff_cleanupSemanticLossless=function(e){function n(e,n){if(!e||!n)return 6;var i=e.charAt(e.length-1),r=n.charAt(0),o=i.match(t.nonAlphaNumericRegex_),s=r.match(t.nonAlphaNumericRegex_),a=o&&i.match(t.whitespaceRegex_),l=s&&r.match(t.whitespaceRegex_),u=a&&i.match(t.linebreakRegex_),c=l&&r.match(t.linebreakRegex_),h=u&&e.match(t.blanklineEndRegex_),d=c&&n.match(t.blanklineStartRegex_);return h||d?5:u||c?4:o&&!a&&l?3:a||l?2:o||s?1:0}for(var r=1;r<e.length-1;){if(e[r-1][0]==i&&e[r+1][0]==i){var o=e[r-1][1],s=e[r][1],a=e[r+1][1],l=this.diff_commonSuffix(o,s);if(l){var u=s.substring(s.length-l);o=o.substring(0,o.length-l),s=u+s.substring(0,s.length-l),a=u+a}for(var c=o,h=s,d=a,p=n(o,s)+n(s,a);s.charAt(0)===a.charAt(0);){o+=s.charAt(0),s=s.substring(1)+a.charAt(0),a=a.substring(1);var f=n(o,s)+n(s,a);f>=p&&(p=f,c=o,h=s,d=a)}e[r-1][1]!=c&&(c?e[r-1][1]=c:(e.splice(r-1,1),r--),e[r][1]=h,d?e[r+1][1]=d:(e.splice(r+1,1),r--))}r++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(t){for(var r=!1,o=[],s=0,a=null,l=0,u=!1,c=!1,h=!1,d=!1;l<t.length;)t[l][0]==i?(t[l][1].length<this.Diff_EditCost&&(h||d)?(o[s++]=l,u=h,c=d,a=t[l][1]):(s=0,a=null),h=d=!1):(t[l][0]==e?d=!0:h=!0,a&&(u&&c&&h&&d||a.length<this.Diff_EditCost/2&&u+c+h+d==3)&&(t.splice(o[s-1],0,[e,a]),t[o[s-1]+1][0]=n,s--,a=null,u&&c?(h=d=!0,s=0):(s--,l=s>0?o[s-1]:-1,h=d=!1),r=!0)),l++;r&&this.diff_cleanupMerge(t)},t.prototype.diff_cleanupMerge=function(t){t.push([i,""]);for(var r,o=0,s=0,a=0,l="",u="";o<t.length;)switch(t[o][0]){case n:a++,u+=t[o][1],o++;break;case e:s++,l+=t[o][1],o++;break;case i:s+a>1?(0!==s&&0!==a&&(r=this.diff_commonPrefix(u,l),0!==r&&(o-s-a>0&&t[o-s-a-1][0]==i?t[o-s-a-1][1]+=u.substring(0,r):(t.splice(0,0,[i,u.substring(0,r)]),o++),u=u.substring(r),l=l.substring(r)),r=this.diff_commonSuffix(u,l),0!==r&&(t[o][1]=u.substring(u.length-r)+t[o][1],u=u.substring(0,u.length-r),l=l.substring(0,l.length-r))),0===s?t.splice(o-a,s+a,[n,u]):0===a?t.splice(o-s,s+a,[e,l]):t.splice(o-s-a,s+a,[e,l],[n,u]),o=o-s-a+(s?1:0)+(a?1:0)+1):0!==o&&t[o-1][0]==i?(t[o-1][1]+=t[o][1],t.splice(o,1)):o++,a=0,s=0,l="",u=""}""===t[t.length-1][1]&&t.pop();var c=!1;for(o=1;o<t.length-1;)t[o-1][0]==i&&t[o+1][0]==i&&(t[o][1].substring(t[o][1].length-t[o-1][1].length)==t[o-1][1]?(t[o][1]=t[o-1][1]+t[o][1].substring(0,t[o][1].length-t[o-1][1].length),t[o+1][1]=t[o-1][1]+t[o+1][1],t.splice(o-1,1),c=!0):t[o][1].substring(0,t[o+1][1].length)==t[o+1][1]&&(t[o-1][1]+=t[o+1][1],t[o][1]=t[o][1].substring(t[o+1][1].length)+t[o+1][1],t.splice(o+1,1),c=!0)),o++;c&&this.diff_cleanupMerge(t)},t.prototype.diff_xIndex=function(t,i){var r,o=0,s=0,a=0,l=0;for(r=0;r<t.length&&(t[r][0]!==n&&(o+=t[r][1].length),t[r][0]!==e&&(s+=t[r][1].length),!(o>i));r++)a=o,l=s;return t.length!=r&&t[r][0]===e?l:l+(i-a)},t.prototype.diff_prettyHtml=function(t){for(var r=[],o=/&/g,s=/</g,a=/>/g,l=/\n/g,u=0;u<t.length;u++){var c=t[u][0],h=t[u][1],d=h.replace(o,"&amp;").replace(s,"&lt;").replace(a,"&gt;").replace(l,"&para;<br>");switch(c){case n:r[u]='<ins style="background:#e6ffe6;">'+d+"</ins>";break;case e:r[u]='<del style="background:#ffe6e6;">'+d+"</del>";break;case i:r[u]="<span>"+d+"</span>"}}return r.join("")},t.prototype.diff_text1=function(t){for(var e=[],i=0;i<t.length;i++)t[i][0]!==n&&(e[i]=t[i][1]);return e.join("")},t.prototype.diff_text2=function(t){for(var n=[],i=0;i<t.length;i++)t[i][0]!==e&&(n[i]=t[i][1]);return n.join("")},t.prototype.diff_levenshtein=function(t){for(var r=0,o=0,s=0,a=0;a<t.length;a++){var l=t[a][0],u=t[a][1];switch(l){case n:o+=u.length;break;case e:s+=u.length;break;case i:r+=Math.max(o,s),o=0,s=0}}return r+=Math.max(o,s)},t.prototype.diff_toDelta=function(t){for(var r=[],o=0;o<t.length;o++)switch(t[o][0]){case n:r[o]="+"+encodeURI(t[o][1]);break;case e:r[o]="-"+t[o][1].length;break;case i:r[o]="="+t[o][1].length}return r.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(t,r){for(var o=[],s=0,a=0,l=r.split(/\t/g),u=0;u<l.length;u++){var c=l[u].substring(1);switch(l[u].charAt(0)){case"+":try{o[s++]=[n,decodeURI(c)]}catch(h){throw new Error("Illegal escape in diff_fromDelta: "+c)}break;case"-":case"=":var d=parseInt(c,10);if(isNaN(d)||0>d)throw new Error("Invalid number in diff_fromDelta: "+c);var p=t.substring(a,a+=d);"="==l[u].charAt(0)?o[s++]=[i,p]:o[s++]=[e,p];break;default:if(l[u])throw new Error("Invalid diff operation in diff_fromDelta: "+l[u])}}if(a!=t.length)throw new Error("Delta length ("+a+") does not equal source text length ("+t.length+").");return o},t.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},t.prototype.match_bitap_=function(t,e,n){function i(t,i){var r=t/e.length,s=Math.abs(n-i);return o.Match_Distance?r+s/o.Match_Distance:s?1:r}if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(e),o=this,s=this.Match_Threshold,a=t.indexOf(e,n);-1!=a&&(s=Math.min(i(0,a),s),a=t.lastIndexOf(e,n+e.length),-1!=a&&(s=Math.min(i(0,a),s)));var l=1<<e.length-1;a=-1;for(var u,c,h,d=e.length+t.length,p=0;p<e.length;p++){for(u=0,c=d;c>u;)i(p,n+c)<=s?u=c:d=c,c=Math.floor((d-u)/2+u);d=c;var f=Math.max(1,n-c+1),g=Math.min(n+c,t.length)+e.length,m=Array(g+2);m[g+1]=(1<<p)-1;for(var v=g;v>=f;v--){var y=r[t.charAt(v-1)];if(0===p?m[v]=(m[v+1]<<1|1)&y:m[v]=(m[v+1]<<1|1)&y|((h[v+1]|h[v])<<1|1)|h[v+1],m[v]&l){var b=i(p,v-1);if(s>=b){if(s=b,a=v-1,!(a>n))break;f=Math.max(1,2*n-a)}}}if(i(p+1,n)>s)break;h=m}return a},t.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(var n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},t.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),r=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=e.substring(t.start2-r,t.start2+t.length1+r);r+=this.Patch_Margin;var o=e.substring(t.start2-r,t.start2);o&&t.diffs.unshift([i,o]);var s=e.substring(t.start2+t.length1,t.start2+t.length1+r);s&&t.diffs.push([i,s]),t.start1-=o.length,t.start2-=o.length,t.length1+=o.length+s.length,t.length2+=o.length+s.length}},t.prototype.patch_make=function(r,o,s){var a,l;if("string"==typeof r&&"string"==typeof o&&"undefined"==typeof s)a=r,l=this.diff_main(a,o,!0),l.length>2&&(this.diff_cleanupSemantic(l),this.diff_cleanupEfficiency(l));else if(r&&"object"==typeof r&&"undefined"==typeof o&&"undefined"==typeof s)l=r,a=this.diff_text1(l);else if("string"==typeof r&&o&&"object"==typeof o&&"undefined"==typeof s)a=r,l=o;else{if("string"!=typeof r||"string"!=typeof o||!s||"object"!=typeof s)throw new Error("Unknown call format to patch_make.");a=r,l=s}if(0===l.length)return[];for(var u=[],c=new t.patch_obj,h=0,d=0,p=0,f=a,g=a,m=0;m<l.length;m++){var v=l[m][0],y=l[m][1];switch(h||v===i||(c.start1=d,c.start2=p),v){case n:c.diffs[h++]=l[m],c.length2+=y.length,g=g.substring(0,p)+y+g.substring(p);break;case e:c.length1+=y.length,c.diffs[h++]=l[m],g=g.substring(0,p)+g.substring(p+y.length);break;case i:y.length<=2*this.Patch_Margin&&h&&l.length!=m+1?(c.diffs[h++]=l[m],c.length1+=y.length,c.length2+=y.length):y.length>=2*this.Patch_Margin&&h&&(this.patch_addContext_(c,f),u.push(c),c=new t.patch_obj,h=0,f=g,d=p)}v!==n&&(d+=y.length),v!==e&&(p+=y.length)}return h&&(this.patch_addContext_(c,f),u.push(c)),u},t.prototype.patch_deepCopy=function(e){for(var n=[],i=0;i<e.length;i++){var r=e[i],o=new t.patch_obj;o.diffs=[];for(var s=0;s<r.diffs.length;s++)o.diffs[s]=r.diffs[s].slice();o.start1=r.start1,o.start2=r.start2,o.length1=r.length1,o.length2=r.length2,n[i]=o}return n},t.prototype.patch_apply=function(t,r){if(0==t.length)return[r,[]];t=this.patch_deepCopy(t);var o=this.patch_addPadding(t);r=o+r+o,this.patch_splitMax(t);for(var s=0,a=[],l=0;l<t.length;l++){var u,c=t[l].start2+s,h=this.diff_text1(t[l].diffs),d=-1;if(h.length>this.Match_MaxBits?(u=this.match_main(r,h.substring(0,this.Match_MaxBits),c),-1!=u&&(d=this.match_main(r,h.substring(h.length-this.Match_MaxBits),c+h.length-this.Match_MaxBits),(-1==d||u>=d)&&(u=-1))):u=this.match_main(r,h,c),-1==u)a[l]=!1,s-=t[l].length2-t[l].length1;else{a[l]=!0,s=u-c;var p;if(p=-1==d?r.substring(u,u+h.length):r.substring(u,d+this.Match_MaxBits),h==p)r=r.substring(0,u)+this.diff_text2(t[l].diffs)+r.substring(u+h.length);else{var f=this.diff_main(h,p,!1);if(h.length>this.Match_MaxBits&&this.diff_levenshtein(f)/h.length>this.Patch_DeleteThreshold)a[l]=!1;else{this.diff_cleanupSemanticLossless(f);for(var g,m=0,v=0;v<t[l].diffs.length;v++){var y=t[l].diffs[v];y[0]!==i&&(g=this.diff_xIndex(f,m)),y[0]===n?r=r.substring(0,u+g)+y[1]+r.substring(u+g):y[0]===e&&(r=r.substring(0,u+g)+r.substring(u+this.diff_xIndex(f,m+y[1].length))),y[0]!==e&&(m+=y[1].length)}}}}}return r=r.substring(o.length,r.length-o.length),[r,a]},t.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",r=1;e>=r;r++)n+=String.fromCharCode(r);for(var r=0;r<t.length;r++)t[r].start1+=e,t[r].start2+=e;var o=t[0],s=o.diffs;if(0==s.length||s[0][0]!=i)s.unshift([i,n]),o.start1-=e,o.start2-=e,o.length1+=e,o.length2+=e;else if(e>s[0][1].length){var a=e-s[0][1].length;s[0][1]=n.substring(s[0][1].length)+s[0][1],o.start1-=a,o.start2-=a,o.length1+=a,o.length2+=a}if(o=t[t.length-1],s=o.diffs,0==s.length||s[s.length-1][0]!=i)s.push([i,n]),o.length1+=e,o.length2+=e;else if(e>s[s.length-1][1].length){var a=e-s[s.length-1][1].length;s[s.length-1][1]+=n.substring(0,a),o.length1+=a,o.length2+=a}return n},t.prototype.patch_splitMax=function(r){for(var o=this.Match_MaxBits,s=0;s<r.length;s++)if(!(r[s].length1<=o)){var a=r[s];r.splice(s--,1);for(var l=a.start1,u=a.start2,c="";0!==a.diffs.length;){var h=new t.patch_obj,d=!0;for(h.start1=l-c.length,h.start2=u-c.length,""!==c&&(h.length1=h.length2=c.length,h.diffs.push([i,c]));0!==a.diffs.length&&h.length1<o-this.Patch_Margin;){var p=a.diffs[0][0],f=a.diffs[0][1];p===n?(h.length2+=f.length,u+=f.length,h.diffs.push(a.diffs.shift()),d=!1):p===e&&1==h.diffs.length&&h.diffs[0][0]==i&&f.length>2*o?(h.length1+=f.length,l+=f.length,d=!1,h.diffs.push([p,f]),a.diffs.shift()):(f=f.substring(0,o-h.length1-this.Patch_Margin),h.length1+=f.length,l+=f.length,p===i?(h.length2+=f.length,u+=f.length):d=!1,h.diffs.push([p,f]),f==a.diffs[0][1]?a.diffs.shift():a.diffs[0][1]=a.diffs[0][1].substring(f.length))}c=this.diff_text2(h.diffs),c=c.substring(c.length-this.Patch_Margin);var g=this.diff_text1(a.diffs).substring(0,this.Patch_Margin);""!==g&&(h.length1+=g.length,h.length2+=g.length,0!==h.diffs.length&&h.diffs[h.diffs.length-1][0]===i?h.diffs[h.diffs.length-1][1]+=g:h.diffs.push([i,g])),d||r.splice(++s,0,h)}}},t.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},t.prototype.patch_fromText=function(r){var o=[];if(!r)return o;for(var s=r.split("\n"),a=0,l=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;a<s.length;){var u=s[a].match(l);if(!u)throw new Error("Invalid patch string: "+s[a]);var c=new t.patch_obj;for(o.push(c),c.start1=parseInt(u[1],10),""===u[2]?(c.start1--,c.length1=1):"0"==u[2]?c.length1=0:(c.start1--,c.length1=parseInt(u[2],10)),c.start2=parseInt(u[3],10),""===u[4]?(c.start2--,c.length2=1):"0"==u[4]?c.length2=0:(c.start2--,c.length2=parseInt(u[4],10)),a++;a<s.length;){var h=s[a].charAt(0);try{var d=decodeURI(s[a].substring(1))}catch(p){throw new Error("Illegal escape in patch_fromText: "+d)}if("-"==h)c.diffs.push([e,d]);else if("+"==h)c.diffs.push([n,d]);else if(" "==h)c.diffs.push([i,d]);else{if("@"==h)break;if(""!==h)throw new Error('Invalid patch mode "'+h+'" in: '+d)}a++}}return o},t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},t.patch_obj.prototype.toString=function(){var t,r;t=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,r=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var o,s=["@@ -"+t+" +"+r+" @@\n"],a=0;a<this.diffs.length;a++){switch(this.diffs[a][0]){case n:o="+";break;case e:o="-";break;case i:o=" "}s[a+1]=o+encodeURI(this.diffs[a][1])+"\n"}return s.join("").replace(/%20/g," ")},this.diff_match_patch=t,this.DIFF_DELETE=e,this.DIFF_INSERT=n,this.DIFF_EQUAL=i}).call(window)},463:function(t,e,n){var i,r,o;!function(s,a){r=[e,n(9),n(4)],i=a,o="function"==typeof i?i.apply(e,r):i,!(void 0!==o&&(t.exports=o))}(this,function(t,e,n){"use strict";e.Relational={showWarnings:!0},e.Semaphore={_permitsAvailable:null,_permitsUsed:0,acquire:function(){if(this._permitsAvailable&&this._permitsUsed>=this._permitsAvailable)throw new Error("Max permits acquired");this._permitsUsed++},release:function(){if(0===this._permitsUsed)throw new Error("All permits released");this._permitsUsed--},isLocked:function(){return this._permitsUsed>0},setAvailablePermits:function(t){if(this._permitsUsed>t)throw new Error("Available permits cannot be less than used permits");this._permitsAvailable=t}},e.BlockingQueue=function(){this._queue=[]},n.extend(e.BlockingQueue.prototype,e.Semaphore,{_queue:null,add:function(t){this.isBlocked()?this._queue.push(t):t()},process:function(){var t=this._queue;for(this._queue=[];t&&t.length;)t.shift()()},block:function(){this.acquire()},unblock:function(){this.release(),this.isBlocked()||this.process()},isBlocked:function(){return this.isLocked()}}),e.Relational.eventQueue=new e.BlockingQueue,e.Store=function(){this._collections=[],this._reverseRelations=[],this._orphanRelations=[],this._subModels=[],this._modelScopes=[t]},n.extend(e.Store.prototype,e.Events,{initializeRelation:function(t,i,r){var o=n.isString(i.type)?e[i.type]||this.getObjectByName(i.type):i.type;o&&o.prototype instanceof e.Relation?new o(t,i,r):e.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("Relation=%o; missing or invalid relation type!",i)},addModelScope:function(t){this._modelScopes.push(t)},removeModelScope:function(t){this._modelScopes=n.without(this._modelScopes,t)},addSubModels:function(t,e){this._subModels.push({superModelType:e,subModels:t})},setupSuperModel:function(t){n.find(this._subModels,function(e){return n.filter(e.subModels||[],function(n,i){var r=this.getObjectByName(n);return t===r?(e.superModelType._subModels[i]=t,t._superModel=e.superModelType,t._subModelTypeValue=i,t._subModelTypeAttribute=e.superModelType.prototype.subModelTypeAttribute,!0):void 0},this).length},this)},addReverseRelation:function(t){var e=n.any(this._reverseRelations,function(e){return n.all(t||[],function(t,n){return t===e[n]})});!e&&t.model&&t.type&&(this._reverseRelations.push(t),this._addRelation(t.model,t),this.retroFitRelation(t))},addOrphanRelation:function(t){var e=n.any(this._orphanRelations,function(e){return n.all(t||[],function(t,n){return t===e[n]})});!e&&t.model&&t.type&&this._orphanRelations.push(t)},processOrphanRelations:function(){n.each(this._orphanRelations.slice(0),function(t){var i=e.Relational.store.getObjectByName(t.relatedModel);i&&(this.initializeRelation(null,t),this._orphanRelations=n.without(this._orphanRelations,t))},this)},_addRelation:function(t,e){t.prototype.relations||(t.prototype.relations=[]),t.prototype.relations.push(e),n.each(t._subModels||[],function(t){this._addRelation(t,e)},this)},retroFitRelation:function(t){var e=this.getCollection(t.model,!1);e&&e.each(function(e){e instanceof t.model&&new t.type(e,t)},this)},getCollection:function(t,i){t instanceof e.RelationalModel&&(t=t.constructor);for(var r=t;r._superModel;)r=r._superModel;var o=n.find(this._collections,function(t){return t.model===r});return o||i===!1||(o=this._createCollection(r)),o},getObjectByName:function(t){var e=t.split("."),i=null;return n.find(this._modelScopes,function(t){return i=n.reduce(e||[],function(t,e){return t?t[e]:void 0},t),i&&i!==t?!0:void 0},this),i},_createCollection:function(t){var n;return t instanceof e.RelationalModel&&(t=t.constructor),t.prototype instanceof e.RelationalModel&&(n=new e.Collection,n.model=t,this._collections.push(n)),n},resolveIdForItem:function(t,i){var r=n.isString(i)||n.isNumber(i)?i:null;return null===r&&(i instanceof e.RelationalModel?r=i.id:n.isObject(i)&&(r=i[t.prototype.idAttribute])),r||0===r||(r=null),r},find:function(t,e){var n=this.resolveIdForItem(t,e),i=this.getCollection(t);if(i){var r=i.get(n);if(r instanceof t)return r}return null},register:function(t){var e=this.getCollection(t);if(e){var n=t.collection;e.add(t),t.collection=n}},checkId:function(t,n){var i=this.getCollection(t),r=i&&i.get(n);if(r&&t!==r)throw e.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("Duplicate id! Old RelationalModel=%o, new RelationalModel=%o",r,t),new Error("Cannot instantiate more than one Backbone.RelationalModel with the same id per type!")},update:function(t){var e=this.getCollection(t);e.contains(t)||this.register(t),e._onModelEvent("change:"+t.idAttribute,t,e),t.trigger("relational:change:id",t,e)},unregister:function(t){var i,r;t instanceof e.Model?(i=this.getCollection(t),r=[t]):t instanceof e.Collection?(i=this.getCollection(t.model),r=n.clone(t.models)):(i=this.getCollection(t),r=n.clone(i.models)),n.each(r,function(t){this.stopListening(t),n.invoke(t.getRelations(),"stopListening")},this),n.contains(this._collections,t)?i.reset([]):n.each(r,function(t){i.get(t)?i.remove(t):i.trigger("relational:remove",t,i)},this)},reset:function(){this.stopListening(),n.each(this._collections,function(t){this.unregister(t)},this),this._collections=[],this._subModels=[],this._modelScopes=[t]}}),e.Relational.store=new e.Store,e.Relation=function(t,i,r){if(this.instance=t,i=n.isObject(i)?i:{},this.reverseRelation=n.defaults(i.reverseRelation||{},this.options.reverseRelation),this.options=n.defaults(i,this.options,e.Relation.prototype.options),this.reverseRelation.type=n.isString(this.reverseRelation.type)?e[this.reverseRelation.type]||e.Relational.store.getObjectByName(this.reverseRelation.type):this.reverseRelation.type,
this.key=this.options.key,this.keySource=this.options.keySource||this.key,this.keyDestination=this.options.keyDestination||this.keySource||this.key,this.model=this.options.model||this.instance.constructor,this.relatedModel=this.options.relatedModel,!n.isFunction(this.relatedModel)||this.relatedModel.prototype instanceof e.RelationalModel||(this.relatedModel=n.result(this,"relatedModel")),n.isString(this.relatedModel)&&(this.relatedModel=e.Relational.store.getObjectByName(this.relatedModel)),this.checkPreconditions()&&(!this.options.isAutoRelation&&this.reverseRelation.type&&this.reverseRelation.key&&e.Relational.store.addReverseRelation(n.defaults({isAutoRelation:!0,model:this.relatedModel,relatedModel:this.model,reverseRelation:this.options},this.reverseRelation)),t)){var o=this.keySource;o!==this.key&&"object"==typeof this.instance.get(this.key)&&(o=this.key),this.setKeyContents(this.instance.get(o)),this.relatedCollection=e.Relational.store.getCollection(this.relatedModel),this.keySource!==this.key&&delete this.instance.attributes[this.keySource],this.instance._relations[this.key]=this,this.initialize(r),this.options.autoFetch&&this.instance.fetchRelated(this.key,n.isObject(this.options.autoFetch)?this.options.autoFetch:{}),this.listenTo(this.instance,"destroy",this.destroy).listenTo(this.relatedCollection,"relational:add relational:change:id",this.tryAddRelated).listenTo(this.relatedCollection,"relational:remove",this.removeRelated)}},e.Relation.extend=e.Model.extend,n.extend(e.Relation.prototype,e.Events,e.Semaphore,{options:{createModels:!0,includeInJSON:!0,isAutoRelation:!1,autoFetch:!1,parse:!1},instance:null,key:null,keyContents:null,relatedModel:null,relatedCollection:null,reverseRelation:null,related:null,checkPreconditions:function(){var t=this.instance,i=this.key,r=this.model,o=this.relatedModel,s=e.Relational.showWarnings&&"undefined"!=typeof console;if(!r||!i||!o)return s&&console.warn("Relation=%o: missing model, key or relatedModel (%o, %o, %o).",this,r,i,o),!1;if(!(r.prototype instanceof e.RelationalModel))return s&&console.warn("Relation=%o: model does not inherit from Backbone.RelationalModel (%o).",this,t),!1;if(!(o.prototype instanceof e.RelationalModel))return s&&console.warn("Relation=%o: relatedModel does not inherit from Backbone.RelationalModel (%o).",this,o),!1;if(this instanceof e.HasMany&&this.reverseRelation.type===e.HasMany)return s&&console.warn("Relation=%o: relation is a HasMany, and the reverseRelation is HasMany as well.",this),!1;if(t&&n.keys(t._relations).length){var a=n.find(t._relations,function(t){return t.key===i},this);if(a)return s&&console.warn("Cannot create relation=%o on %o for model=%o: already taken by relation=%o.",this,i,t,a),!1}return!0},setRelated:function(t){this.related=t,this.instance.attributes[this.key]=t},_isReverseRelation:function(t){return t.instance instanceof this.relatedModel&&this.reverseRelation.key===t.key&&this.key===t.reverseRelation.key},getReverseRelations:function(t){var e=[],i=n.isUndefined(t)?this.related&&(this.related.models||[this.related]):[t];return n.each(i||[],function(t){n.each(t.getRelations()||[],function(t){this._isReverseRelation(t)&&e.push(t)},this)},this),e},destroy:function(){this.stopListening(),this instanceof e.HasOne?this.setRelated(null):this instanceof e.HasMany&&this.setRelated(this._prepareCollection()),n.each(this.getReverseRelations(),function(t){t.removeRelated(this.instance)},this)}}),e.HasOne=e.Relation.extend({options:{reverseRelation:{type:"HasMany"}},initialize:function(t){this.listenTo(this.instance,"relational:change:"+this.key,this.onChange);var e=this.findRelated(t);this.setRelated(e),n.each(this.getReverseRelations(),function(e){e.addRelated(this.instance,t)},this)},findRelated:function(t){var e=null;if(t=n.defaults({parse:this.options.parse},t),this.keyContents instanceof this.relatedModel)e=this.keyContents;else if(this.keyContents||0===this.keyContents){var i=n.defaults({create:this.options.createModels},t);e=this.relatedModel.findOrCreate(this.keyContents,i)}return e&&(this.keyId=null),e},setKeyContents:function(t){this.keyContents=t,this.keyId=e.Relational.store.resolveIdForItem(this.relatedModel,this.keyContents)},onChange:function(t,i,r){if(!this.isLocked()){this.acquire(),r=r?n.clone(r):{};var o=n.isUndefined(r.__related),s=o?this.related:r.__related;if(o){this.setKeyContents(i);var a=this.findRelated(r);this.setRelated(a)}if(s&&this.related!==s&&n.each(this.getReverseRelations(s),function(t){t.removeRelated(this.instance,null,r)},this),n.each(this.getReverseRelations(),function(t){t.addRelated(this.instance,r)},this),!r.silent&&this.related!==s){var l=this;this.changed=!0,e.Relational.eventQueue.add(function(){l.instance.trigger("change:"+l.key,l.instance,l.related,r,!0),l.changed=!1})}this.release()}},tryAddRelated:function(t,e,n){!this.keyId&&0!==this.keyId||t.id!==this.keyId||(this.addRelated(t,n),this.keyId=null)},addRelated:function(t,e){var i=this;t.queue(function(){if(t!==i.related){var r=i.related||null;i.setRelated(t),i.onChange(i.instance,t,n.defaults({__related:r},e))}})},removeRelated:function(t,e,i){if(this.related&&t===this.related){var r=this.related||null;this.setRelated(null),this.onChange(this.instance,t,n.defaults({__related:r},i))}}}),e.HasMany=e.Relation.extend({collectionType:null,options:{reverseRelation:{type:"HasOne"},collectionType:e.Collection,collectionKey:!0,collectionOptions:{}},initialize:function(t){if(this.listenTo(this.instance,"relational:change:"+this.key,this.onChange),this.collectionType=this.options.collectionType,!n.isFunction(this.collectionType)||this.collectionType===e.Collection||this.collectionType.prototype instanceof e.Collection||(this.collectionType=n.result(this,"collectionType")),n.isString(this.collectionType)&&(this.collectionType=e.Relational.store.getObjectByName(this.collectionType)),this.collectionType!==e.Collection&&!(this.collectionType.prototype instanceof e.Collection))throw new Error("`collectionType` must inherit from Backbone.Collection");var i=this.findRelated(t);this.setRelated(i)},_prepareCollection:function(t){if(this.related&&this.stopListening(this.related),!(t&&t instanceof e.Collection)){var i=n.isFunction(this.options.collectionOptions)?this.options.collectionOptions(this.instance):this.options.collectionOptions;t=new this.collectionType(null,i)}if(t.model=this.relatedModel,this.options.collectionKey){var r=this.options.collectionKey===!0?this.options.reverseRelation.key:this.options.collectionKey;t[r]&&t[r]!==this.instance?e.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("Relation=%o; collectionKey=%s already exists on collection=%o",this,r,this.options.collectionKey):r&&(t[r]=this.instance)}return this.listenTo(t,"relational:add",this.handleAddition).listenTo(t,"relational:remove",this.handleRemoval).listenTo(t,"relational:reset",this.handleReset),t},findRelated:function(t){var i=null;if(t=n.defaults({parse:this.options.parse},t),this.keyContents instanceof e.Collection)this._prepareCollection(this.keyContents),i=this.keyContents;else{var r=[];n.each(this.keyContents,function(e){if(e instanceof this.relatedModel)var i=e;else i=this.relatedModel.findOrCreate(e,n.extend({merge:!0},t,{create:this.options.createModels}));i&&r.push(i)},this),i=this.related instanceof e.Collection?this.related:this._prepareCollection(),i.set(r,n.defaults({merge:!1,parse:!1},t))}return this.keyIds=n.difference(this.keyIds,n.pluck(i.models,"id")),i},setKeyContents:function(t){this.keyContents=t instanceof e.Collection?t:null,this.keyIds=[],this.keyContents||!t&&0!==t||(this.keyContents=n.isArray(t)?t:[t],n.each(this.keyContents,function(t){var n=e.Relational.store.resolveIdForItem(this.relatedModel,t);(n||0===n)&&this.keyIds.push(n)},this))},onChange:function(t,i,r){r=r?n.clone(r):{},this.setKeyContents(i),this.changed=!1;var o=this.findRelated(r);if(this.setRelated(o),!r.silent){var s=this;e.Relational.eventQueue.add(function(){s.changed&&(s.instance.trigger("change:"+s.key,s.instance,s.related,r,!0),s.changed=!1)})}},handleAddition:function(t,i,r){r=r?n.clone(r):{},this.changed=!0,n.each(this.getReverseRelations(t),function(t){t.addRelated(this.instance,r)},this);var o=this;!r.silent&&e.Relational.eventQueue.add(function(){o.instance.trigger("add:"+o.key,t,o.related,r)})},handleRemoval:function(t,i,r){r=r?n.clone(r):{},this.changed=!0,n.each(this.getReverseRelations(t),function(t){t.removeRelated(this.instance,null,r)},this);var o=this;!r.silent&&e.Relational.eventQueue.add(function(){o.instance.trigger("remove:"+o.key,t,o.related,r)})},handleReset:function(t,i){var r=this;i=i?n.clone(i):{},!i.silent&&e.Relational.eventQueue.add(function(){r.instance.trigger("reset:"+r.key,r.related,i)})},tryAddRelated:function(t,e,i){var r=n.contains(this.keyIds,t.id);r&&(this.addRelated(t,i),this.keyIds=n.without(this.keyIds,t.id))},addRelated:function(t,e){var i=this;t.queue(function(){i.related&&!i.related.get(t)&&i.related.add(t,n.defaults({parse:!1},e))})},removeRelated:function(t,e,n){this.related.get(t)&&this.related.remove(t,n)}}),e.RelationalModel=e.Model.extend({relations:null,_relations:null,_isInitialized:!1,_deferProcessing:!1,_queue:null,_attributeChangeFired:!1,subModelTypeAttribute:"type",subModelTypes:null,constructor:function(t,i){if(i&&i.collection){var r=this,o=this.collection=i.collection;delete i.collection,this._deferProcessing=!0;var s=function(t){t===r&&(r._deferProcessing=!1,r.processQueue(),o.off("relational:add",s))};o.on("relational:add",s),n.defer(function(){s(r)})}e.Relational.store.processOrphanRelations(),e.Relational.store.listenTo(this,"relational:unregister",e.Relational.store.unregister),this._queue=new e.BlockingQueue,this._queue.block(),e.Relational.eventQueue.block();try{e.Model.apply(this,arguments)}finally{e.Relational.eventQueue.unblock()}},trigger:function(t){if(t.length>5&&0===t.indexOf("change")){var n=this,i=arguments;e.Relational.eventQueue.isLocked()?e.Relational.eventQueue.add(function(){var r=!0;if("change"===t)r=n.hasChanged()||n._attributeChangeFired,n._attributeChangeFired=!1;else{var o=t.slice(7),s=n.getRelation(o);s?(r=i[4]===!0,r?n.changed[o]=i[2]:s.changed||delete n.changed[o]):r&&(n._attributeChangeFired=!0)}r&&e.Model.prototype.trigger.apply(n,i)}):e.Model.prototype.trigger.apply(n,i)}else"destroy"===t?(e.Model.prototype.trigger.apply(this,arguments),e.Relational.store.unregister(this)):e.Model.prototype.trigger.apply(this,arguments);return this},initializeRelations:function(t){this.acquire(),this._relations={},n.each(this.relations||[],function(n){e.Relational.store.initializeRelation(this,n,t)},this),this._isInitialized=!0,this.release(),this.processQueue()},updateRelations:function(t,e){this._isInitialized&&!this.isLocked()&&n.each(this._relations,function(n){if(!t||n.keySource in t||n.key in t){var i=this.attributes[n.keySource]||this.attributes[n.key],r=t&&(t[n.keySource]||t[n.key]);(n.related!==i||null===i&&null===r)&&this.trigger("relational:change:"+n.key,this,i,e||{})}n.keySource!==n.key&&delete this.attributes[n.keySource]},this)},queue:function(t){this._queue.add(t)},processQueue:function(){this._isInitialized&&!this._deferProcessing&&this._queue.isBlocked()&&this._queue.unblock()},getRelation:function(t){return this._relations[t]},getRelations:function(){return n.values(this._relations)},fetchRelated:function(t,i,r){i=n.extend({update:!0,remove:!1},i);var o,s,a=[],l=this.getRelation(t),u=l&&(l.keyIds&&l.keyIds.slice(0)||(l.keyId||0===l.keyId?[l.keyId]:[]));if(r&&(o=l.related instanceof e.Collection?l.related.models:[l.related],n.each(o,function(t){(t.id||0===t.id)&&u.push(t.id)})),u&&u.length){var c=[];if(o=n.map(u,function(t){var e=l.relatedModel.findModel(t);if(!e){var n={};n[l.relatedModel.prototype.idAttribute]=t,e=l.relatedModel.findOrCreate(n,i),c.push(e)}return e},this),l.related instanceof e.Collection&&n.isFunction(l.related.url)&&(s=l.related.url(o)),s&&s!==l.related.url()){var h=n.defaults({error:function(){var t=arguments;n.each(c,function(e){e.trigger("destroy",e,e.collection,i),i.error&&i.error.apply(e,t)})},url:s},i);a=[l.related.fetch(h)]}else a=n.map(o,function(t){var e=n.defaults({error:function(){n.contains(c,t)&&(t.trigger("destroy",t,t.collection,i),i.error&&i.error.apply(t,arguments))}},i);return t.fetch(e)},this)}return a},get:function(t){var i=e.Model.prototype.get.call(this,t);if(!this.dotNotation||-1===t.indexOf("."))return i;var r=t.split("."),o=n.reduce(r,function(t,i){if(n.isNull(t)||n.isUndefined(t))return void 0;if(t instanceof e.Model)return e.Model.prototype.get.call(t,i);if(t instanceof e.Collection)return e.Collection.prototype.at.call(t,i);throw new Error("Attribute must be an instanceof Backbone.Model or Backbone.Collection. Is: "+t+", currentSplit: "+i)},this);if(void 0!==i&&void 0!==o)throw new Error("Ambiguous result for '"+t+"'. direct result: "+i+", dotNotation: "+o);return i||o},set:function(t,i,r){e.Relational.eventQueue.block();var o;n.isObject(t)||null==t?(o=t,r=i):(o={},o[t]=i);try{var s=this.id,a=o&&this.idAttribute in o&&o[this.idAttribute];e.Relational.store.checkId(this,a);var l=e.Model.prototype.set.apply(this,arguments);this._isInitialized||this.isLocked()?a&&a!==s&&e.Relational.store.update(this):(this.constructor.initializeModelHierarchy(),(a||0===a)&&e.Relational.store.register(this),this.initializeRelations(r)),o&&this.updateRelations(o,r)}finally{e.Relational.eventQueue.unblock()}return l},clone:function(){var t=n.clone(this.attributes);return n.isUndefined(t[this.idAttribute])||(t[this.idAttribute]=null),n.each(this.getRelations(),function(e){delete t[e.key]}),new this.constructor(t)},toJSON:function(t){if(this.isLocked())return this.id;this.acquire();var i=e.Model.prototype.toJSON.call(this,t);return!this.constructor._superModel||this.constructor._subModelTypeAttribute in i||(i[this.constructor._subModelTypeAttribute]=this.constructor._subModelTypeValue),n.each(this._relations,function(r){var o=i[r.key],s=r.options.includeInJSON,a=null;s===!0?o&&n.isFunction(o.toJSON)&&(a=o.toJSON(t)):n.isString(s)?(o instanceof e.Collection?a=o.pluck(s):o instanceof e.Model&&(a=o.get(s)),s===r.relatedModel.prototype.idAttribute&&(r instanceof e.HasMany?a=a.concat(r.keyIds):r instanceof e.HasOne&&(a=a||r.keyId,a||n.isObject(r.keyContents)||(a=r.keyContents||null)))):n.isArray(s)?o instanceof e.Collection?(a=[],o.each(function(t){var e={};n.each(s,function(n){e[n]=t.get(n)}),a.push(e)})):o instanceof e.Model&&(a={},n.each(s,function(t){a[t]=o.get(t)})):delete i[r.key],s&&(i[r.keyDestination]=a),r.keyDestination!==r.key&&delete i[r.key]}),this.release(),i}},{setup:function(t){return this.prototype.relations=(this.prototype.relations||[]).slice(0),this._subModels={},this._superModel=null,this.prototype.hasOwnProperty("subModelTypes")?e.Relational.store.addSubModels(this.prototype.subModelTypes,this):this.prototype.subModelTypes=null,n.each(this.prototype.relations||[],function(t){if(t.model||(t.model=this),t.reverseRelation&&t.model===this){var i=!0;if(n.isString(t.relatedModel)){var r=e.Relational.store.getObjectByName(t.relatedModel);i=r&&r.prototype instanceof e.RelationalModel}i?e.Relational.store.initializeRelation(null,t):n.isString(t.relatedModel)&&e.Relational.store.addOrphanRelation(t)}},this),this},build:function(t,e){this.initializeModelHierarchy();var n=this._findSubModelType(this,t)||this;return new n(t,e)},_findSubModelType:function(t,e){if(t._subModels&&t.prototype.subModelTypeAttribute in e){var n=e[t.prototype.subModelTypeAttribute],i=t._subModels[n];if(i)return i;for(n in t._subModels)if(i=this._findSubModelType(t._subModels[n],e))return i}return null},initializeModelHierarchy:function(){if(this.inheritRelations(),this.prototype.subModelTypes){var t=n.keys(this._subModels),i=n.omit(this.prototype.subModelTypes,t);n.each(i,function(t){var n=e.Relational.store.getObjectByName(t);n&&n.initializeModelHierarchy()})}},inheritRelations:function(){if(n.isUndefined(this._superModel)||n.isNull(this._superModel))if(e.Relational.store.setupSuperModel(this),this._superModel){if(this._superModel.inheritRelations(),this._superModel.prototype.relations){var t=n.filter(this._superModel.prototype.relations||[],function(t){return!n.any(this.prototype.relations||[],function(e){return t.relatedModel===e.relatedModel&&t.key===e.key},this)},this);this.prototype.relations=t.concat(this.prototype.relations)}}else this._superModel=!1},findOrCreate:function(t,e){e||(e={});var i=n.isObject(t)&&e.parse&&this.prototype.parse?this.prototype.parse(n.clone(t)):t,r=this.findModel(i);return n.isObject(t)&&(r&&e.merge!==!1?(delete e.collection,delete e.url,r.set(i,e)):r||e.create===!1||(r=this.build(i,n.defaults({parse:!1},e)))),r},find:function(t,e){return e||(e={}),e.create=!1,this.findOrCreate(t,e)},findModel:function(t){return e.Relational.store.find(this,t)}}),n.extend(e.RelationalModel.prototype,e.Semaphore),e.Collection.prototype.__prepareModel=e.Collection.prototype._prepareModel,e.Collection.prototype._prepareModel=function(t,i){var r;return t instanceof e.Model?(t.collection||(t.collection=this),r=t):(i=i?n.clone(i):{},i.collection=this,r="undefined"!=typeof this.model.findOrCreate?this.model.findOrCreate(t,i):new this.model(t,i),r&&r.validationError&&(this.trigger("invalid",this,t,i),r=!1)),r};var i=e.Collection.prototype.__set=e.Collection.prototype.set;e.Collection.prototype.set=function(t,r){if(!(this.model.prototype instanceof e.RelationalModel))return i.apply(this,arguments);r&&r.parse&&(t=this.parse(t,r));var o=!n.isArray(t),s=[],a=[];t=o?t?[t]:[]:n.clone(t),n.each(t,function(t){t instanceof e.Model||(t=e.Collection.prototype._prepareModel.call(this,t,r)),t&&(a.push(t),this.get(t)||this.get(t.cid)?null!=t.id&&(this._byId[t.id]=t):s.push(t))},this),a=o?a.length?a[0]:null:a;var l=i.call(this,a,n.defaults({parse:!1},r));return n.each(s,function(t){(this.get(t)||this.get(t.cid))&&this.trigger("relational:add",t,this,r)},this),l};var r=e.Collection.prototype.__remove=e.Collection.prototype.remove;e.Collection.prototype.remove=function(t,i){if(!(this.model.prototype instanceof e.RelationalModel))return r.apply(this,arguments);var o=!n.isArray(t),s=[];t=o?t?[t]:[]:n.clone(t),i||(i={}),n.each(t,function(t){t=this.get(t)||t&&this.get(t.cid),t&&s.push(t)},this);var a=r.call(this,o?s.length?s[0]:null:s,i);return n.each(s,function(t){this.trigger("relational:remove",t,this,i)},this),a};var o=e.Collection.prototype.__reset=e.Collection.prototype.reset;e.Collection.prototype.reset=function(t,i){i=n.extend({merge:!0},i);var r=o.call(this,t,i);return this.model.prototype instanceof e.RelationalModel&&this.trigger("relational:reset",this,i),r};var s=e.Collection.prototype.__sort=e.Collection.prototype.sort;e.Collection.prototype.sort=function(t){var n=s.call(this,t);return this.model.prototype instanceof e.RelationalModel&&this.trigger("relational:reset",this,t),n};var a=e.Collection.prototype.__trigger=e.Collection.prototype.trigger;e.Collection.prototype.trigger=function(t){if(!(this.model.prototype instanceof e.RelationalModel))return a.apply(this,arguments);if("add"===t||"remove"===t||"reset"===t||"sort"===t){var i=this,r=arguments;n.isObject(r[3])&&(r=n.toArray(r),r[3]=n.clone(r[3])),e.Relational.eventQueue.add(function(){a.apply(i,r)})}else a.apply(this,arguments);return this},e.RelationalModel.extend=function(t,n){var i=e.Model.extend.apply(this,arguments);return i.setup(this),i}})},467:function(t,e){!function(t,e){var n=t.parse,i=[1,4,5,6,7,10,11];t.parse=function(r){var o,s,a=0;if(s=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(r)){for(var l,u=0;l=i[u];++u)s[l]=+s[l]||0;s[2]=(+s[2]||1)-1,s[3]=+s[3]||1,"Z"!==s[8]&&s[9]!==e&&(a=60*s[10]+s[11],"+"===s[9]&&(a=0-a)),o=t.UTC(s[1],s[2],s[3],s[4],s[5]+a,s[6],s[7])}else o=n?n(r):NaN;return o}}(Date)},469:function(t,e){!function(t,e,n,i){t.fn.caret=function(t,n){var i,r,o=this[0];if("object"==typeof t&&"number"==typeof t.start&&"number"==typeof t.end)i=t.start,r=t.end;else if("number"==typeof t&&"number"==typeof n)i=t,r=n;else if("string"==typeof t)(i=o.value.indexOf(t))>-1?r=i+t[e]:i=null;else if("[object RegExp]"===Object.prototype.toString.call(t)){var s=t.exec(o.value);null!=s&&(i=s.index,r=i+s[0][e])}if("undefined"!=typeof i)return this[0].selectionStart=i,this[0].selectionEnd=r,this[0].focus(),this;var a=o.selectionStart,l=o.selectionEnd,u=o.value.substring(a,l);return{start:a,end:l,text:u,replace:function(t){return o.value.substring(0,a)+t+o.value.substring(l,o.value[e])}}}}(jQuery,"length","createRange","duplicate")},470:function(t,e){jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,e,n,i,r){return jQuery.easing[jQuery.easing.def](t,e,n,i,r)},easeInQuad:function(t,e,n,i,r){return i*(e/=r)*e+n},easeOutQuad:function(t,e,n,i,r){return-i*(e/=r)*(e-2)+n},easeInOutQuad:function(t,e,n,i,r){return(e/=r/2)<1?i/2*e*e+n:-i/2*(--e*(e-2)-1)+n},easeInCubic:function(t,e,n,i,r){return i*(e/=r)*e*e+n},easeOutCubic:function(t,e,n,i,r){return i*((e=e/r-1)*e*e+1)+n},easeInOutCubic:function(t,e,n,i,r){return(e/=r/2)<1?i/2*e*e*e+n:i/2*((e-=2)*e*e+2)+n},easeInQuart:function(t,e,n,i,r){return i*(e/=r)*e*e*e+n},easeOutQuart:function(t,e,n,i,r){return-i*((e=e/r-1)*e*e*e-1)+n},easeInOutQuart:function(t,e,n,i,r){return(e/=r/2)<1?i/2*e*e*e*e+n:-i/2*((e-=2)*e*e*e-2)+n},easeInQuint:function(t,e,n,i,r){return i*(e/=r)*e*e*e*e+n},easeOutQuint:function(t,e,n,i,r){return i*((e=e/r-1)*e*e*e*e+1)+n},easeInOutQuint:function(t,e,n,i,r){return(e/=r/2)<1?i/2*e*e*e*e*e+n:i/2*((e-=2)*e*e*e*e+2)+n},easeInSine:function(t,e,n,i,r){return-i*Math.cos(e/r*(Math.PI/2))+i+n},easeOutSine:function(t,e,n,i,r){return i*Math.sin(e/r*(Math.PI/2))+n},easeInOutSine:function(t,e,n,i,r){return-i/2*(Math.cos(Math.PI*e/r)-1)+n},easeInExpo:function(t,e,n,i,r){return 0==e?n:i*Math.pow(2,10*(e/r-1))+n},easeOutExpo:function(t,e,n,i,r){return e==r?n+i:i*(-Math.pow(2,-10*e/r)+1)+n},easeInOutExpo:function(t,e,n,i,r){return 0==e?n:e==r?n+i:(e/=r/2)<1?i/2*Math.pow(2,10*(e-1))+n:i/2*(-Math.pow(2,-10*--e)+2)+n},easeInCirc:function(t,e,n,i,r){return-i*(Math.sqrt(1-(e/=r)*e)-1)+n},easeOutCirc:function(t,e,n,i,r){return i*Math.sqrt(1-(e=e/r-1)*e)+n},easeInOutCirc:function(t,e,n,i,r){return(e/=r/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+n:i/2*(Math.sqrt(1-(e-=2)*e)+1)+n},easeInElastic:function(t,e,n,i,r){var o=1.70158,s=0,a=i;if(0==e)return n;if(1==(e/=r))return n+i;if(s||(s=.3*r),a<Math.abs(i)){a=i;var o=s/4}else var o=s/(2*Math.PI)*Math.asin(i/a);return-(a*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*(2*Math.PI)/s))+n},easeOutElastic:function(t,e,n,i,r){var o=1.70158,s=0,a=i;if(0==e)return n;if(1==(e/=r))return n+i;if(s||(s=.3*r),a<Math.abs(i)){a=i;var o=s/4}else var o=s/(2*Math.PI)*Math.asin(i/a);return a*Math.pow(2,-10*e)*Math.sin((e*r-o)*(2*Math.PI)/s)+i+n},easeInOutElastic:function(t,e,n,i,r){var o=1.70158,s=0,a=i;if(0==e)return n;if(2==(e/=r/2))return n+i;if(s||(s=r*(.3*1.5)),a<Math.abs(i)){a=i;var o=s/4}else var o=s/(2*Math.PI)*Math.asin(i/a);return 1>e?-.5*(a*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*(2*Math.PI)/s))+n:a*Math.pow(2,-10*(e-=1))*Math.sin((e*r-o)*(2*Math.PI)/s)*.5+i+n},easeInBack:function(t,e,n,i,r,o){return void 0==o&&(o=1.70158),i*(e/=r)*e*((o+1)*e-o)+n},easeOutBack:function(t,e,n,i,r,o){return void 0==o&&(o=1.70158),i*((e=e/r-1)*e*((o+1)*e+o)+1)+n},easeInOutBack:function(t,e,n,i,r,o){return void 0==o&&(o=1.70158),(e/=r/2)<1?i/2*(e*e*(((o*=1.525)+1)*e-o))+n:i/2*((e-=2)*e*(((o*=1.525)+1)*e+o)+2)+n},easeInBounce:function(t,e,n,i,r){return i-jQuery.easing.easeOutBounce(t,r-e,0,i,r)+n},easeOutBounce:function(t,e,n,i,r){return(e/=r)<1/2.75?i*(7.5625*e*e)+n:2/2.75>e?i*(7.5625*(e-=1.5/2.75)*e+.75)+n:2.5/2.75>e?i*(7.5625*(e-=2.25/2.75)*e+.9375)+n:i*(7.5625*(e-=2.625/2.75)*e+.984375)+n},easeInOutBounce:function(t,e,n,i,r){return r/2>e?.5*jQuery.easing.easeInBounce(t,2*e,0,i,r)+n:.5*jQuery.easing.easeOutBounce(t,2*e-r,0,i,r)+.5*i+n}})},475:function(t,e){!function(t){t.fn.highlightRegex=function(e){return void 0==e||""==e.source?t(this).find("span.highlight").each(function(){t(this).replaceWith(t(this).text()),t(this).parent().each(function(){node=t(this).get(0),node.normalize&&node.normalize()})}):t(this).each(function(){elt=t(this).get(0),elt.normalize(),t.each(t.makeArray(elt.childNodes),function(n,i){if(3==i.nodeType)for(var r=i;(pos=r.data.search(e))>=0&&(match=r.data.slice(pos).match(e)[0],0!=match.length);){var o=document.createElement("span");o.className="highlight";var s=r.splitText(pos),r=s.splitText(match.length),a=s.cloneNode(!0);o.appendChild(a),r.parentNode.replaceChild(o,s)}else t(i).highlightRegex(e)})}),t(this)}}(jQuery)},476:function(t,e){!function(t){function e(){}function n(t){s=[t]}function i(t,e,n){return t&&t.apply&&t.apply(e.context||e,n)}function r(t){return/\?/.test(t)?"&":"?"}function o(o){function p(t){G++||(X(),W&&(S[V]={s:[t]}),U&&(t=U.apply(o,[t])),i(j,o,[t,x,o]),i(B,o,[o,x]))}function D(t){G++||(X(),W&&t!=C&&(S[V]=t),i(F,o,[o,t]),i(B,o,[o,t]))}o=t.extend({},P,o);var A,I,N,R,L,j=o.success,F=o.error,B=o.complete,U=o.dataFilter,H=o.callbackParameter,z=o.callback,q=o.cache,W=o.pageCache,$=o.charset,V=o.url,K=o.data,Q=o.timeout,G=0,X=e;return _&&_(function(t){t.done(j).fail(F),j=t.resolve,F=t.reject}).promise(o),o.abort=function(){!G++&&X()},i(o.beforeSend,o,[o])===!1||G?o:(V=V||u,K=K?"string"==typeof K?K:t.param(K,o.traditional):u,V+=K?r(V)+K:u,H&&(V+=r(V)+encodeURIComponent(H)+"=?"),!q&&!W&&(V+=r(V)+"_"+(new Date).getTime()+"="),V=V.replace(/=\?(&|$)/,"="+z+"$1"),W&&(A=S[V])?A.s?p(A.s[0]):D(A):(E[z]=n,N=t(w)[0],N.id=d+k++,$&&(N[l]=$),M&&M.version()<11.6?(R=t(w)[0]).text="document.getElementById('"+N.id+"')."+g+"()":N[a]=a,O&&(N.htmlFor=N.id,N.event=f),N[m]=N[g]=N[v]=function(t){if(!N[y]||!/i/.test(N[y])){try{N[f]&&N[f]()}catch(e){}t=s,s=0,t?p(t[0]):D(c)}},N.src=V,X=function(t){L&&clearTimeout(L),N[v]=N[m]=N[g]=null,T[b](N),R&&T[b](R)},T[h](N,I=T.firstChild),R&&T[h](R,I),L=Q>0&&setTimeout(function(){D(C)},Q)),o)}var s,a="async",l="charset",u="",c="error",h="insertBefore",d="_jqjsp",p="on",f=p+"click",g=p+c,m=p+"load",v=p+"readystatechange",y="readyState",b="removeChild",w="<script>",x="success",C="timeout",E=window,_=t.Deferred,T=t("head")[0]||document.documentElement,S={},k=0,P={callback:d,url:location.href},M=E.opera,O=!!t("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;o.setup=function(e){t.extend(P,e)},t.jsonp=o}(jQuery)},478:function(t,e,n){var i,r,o;!function(n,s){r=[],i=s,o="function"==typeof i?i.apply(e,r):i,!(void 0!==o&&(t.exports=o))}(this,function(){"use strict";var t=function(t){return t.replace(/\s+/g," ").split(" ")},e=function(e,n){return null===e||void 0===e?e="":("string"!=typeof e||!e instanceof String)&&(e=e.toString()),"words"===n?t(e):e},n=function(t,e){return 1-t/e},i=function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;var n,i,r,o=[],s=[];for(n=0;n<e.length+1;++n)o[n]=n;for(n=0;n<t.length;n++){for(s[0]=n+1,i=0;i<e.length;i++)r=t[n]===e[i]?0:1,s[i+1]=Math.min(s[i]+1,o[i+1]+1,o[i]+r);for(i=0;i<s.length;i++)o[i]=s[i]}return s[e.length]},r=function(t){t=t||{},this.opts={compare:t.compare||"strings"}};return r.fn=r.prototype,r.fn.prepareInput=e,r.fn.distance=function(t,n){var t=e(t,this.opts.compare),n=e(n,this.opts.compare);return i(t,n)},r.fn.similarity=function(t,r){var t=e(t,this.opts.compare),r=e(r,this.opts.compare);return n(i(t,r),Math.max(t.length,r.length))},r})}});