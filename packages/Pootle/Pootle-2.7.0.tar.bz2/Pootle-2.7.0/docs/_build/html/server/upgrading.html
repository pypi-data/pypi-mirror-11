<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Upgrading &mdash; Pootle 2.7.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.7.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bootstrap.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Pootle 2.7.0 documentation" href="../index.html" />
    <link rel="up" title="Administering a server" href="index.html" />
    <link rel="next" title="Database Migration" href="database_migration.html" />
    <link rel="prev" title="Running under a Web Server" href="web.html" /> 
  </head>
  <body role="document">
  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid">
        <a class="brand" href="../index.html">Pootle</a>
        <span class="navbar-text pull-left"><b>2.7</b></span>
          <ul class="nav">
            <li class="divider-vertical"></li>
            
              <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../features/index.html">Features</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Administering a server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/index.html">Developers</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
</ul>
</ul>
</li>
              
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">Upgrading</a><ul>
<li><a class="reference internal" href="#preparatory-tasks">Preparatory tasks</a></li>
<li><a class="reference internal" href="#upgrading-upgrading">Upgrading</a></li>
<li><a class="reference internal" href="#post-upgrade-adjustments">Post-upgrade adjustments</a></li>
</ul>
</li>
</ul>
</ul>
</li>
            
            
              
  <li><a href="web.html"
         title="previous chapter">&laquo; Running under a Web Server</a></li>
  <li><a href="database_migration.html"
         title="next chapter">Database Migration &raquo;</a></li>
            
          </ul>
          <ul class="nav pull-right">
            
              
            
          
            
<form class="navbar-search pull-right" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
          </ul>
        </div>
      </div>
    </div>
  </div>

<div class="container content">
   
  <div class="section" id="upgrading">
<span id="id1"></span><h1>Upgrading<a class="headerlink" href="#upgrading" title="Permalink to this headline">¶</a></h1>
<p>These are the instructions for upgrading Pootle from an older version to a new
release.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>When upgrading please ensure that you:</p>
<ul class="last simple">
<li><strong>Carefully read this page</strong> before proceeding</li>
<li>Make all the recommended <strong>backups</strong></li>
<li>Try to <strong>follow these instructions</strong> as closely as possible</li>
</ul>
</div>
<p>This page is divided in three sections:</p>
<ol class="arabic simple">
<li>Preparatory tasks that should be performed before upgrading.</li>
<li>Detailed steps to actually perform the upgrade.</li>
<li>Suggested tasks to fine tune the setup after upgrading.</li>
</ol>
<div class="section" id="preparatory-tasks">
<span id="upgrading-preparatory-tasks"></span><h2>Preparatory tasks<a class="headerlink" href="#preparatory-tasks" title="Permalink to this headline">¶</a></h2>
<p>Before upgrading Pootle to a newer version, make sure to go through this
checklist.</p>
<ul class="simple">
<li>Familiarize yourself with <a class="reference internal" href="../releases/index.html"><em>important changes</em></a> in
Pootle.</li>
<li>If you want to change the database backend then have a look at the
<a class="reference internal" href="database_migration.html"><em>database migration</em></a> page first. We discourage
using SQLite, so if you are using it please migrate to a real database
server.</li>
<li>Ensure that you meet the <a class="reference internal" href="installation.html#installation-hardware-requirements"><span>hardware requirements</span></a> for the newer version.</li>
<li>Always make backups of all your translation files (your whole
<a class="reference internal" href="settings.html#std:setting-POOTLE_TRANSLATION_DIRECTORY"><code class="xref std std-setting docutils literal"><span class="pre">POOTLE_TRANSLATION_DIRECTORY</span></code></a>). Use the <a class="reference internal" href="commands.html#django-admin-sync_stores"><code class="xref std std-djadmin docutils literal"><span class="pre">sync_stores</span></code></a>
command to synchronize all your translation files to disk before making any
backup.</li>
<li>Also backup your settings, to avoid losing any settings customizations.</li>
<li>Make a backup of your complete database using the appropriate <em>dump</em>
command for your database system. For example <strong class="command">mysqldump</strong> for MySQL,
or <strong class="command">pg_dump</strong> for PostgreSQL.</li>
<li>And don&#8217;t forget to backup any code, templates or styling customization that
you have done to your installation.</li>
<li>Familiarize yourself with any new <a class="reference internal" href="settings.html#settings-available"><span>settings</span></a> that
have been introduced.</li>
</ul>
</div>
<div class="section" id="upgrading-upgrading">
<span id="id2"></span><h2>Upgrading<a class="headerlink" href="#upgrading-upgrading" title="Permalink to this headline">¶</a></h2>
<p>Upgrading Pootle using the <strong class="command">pip</strong>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You will need to adjust these instructions if you installed Pootle
using another method, such as directly from a Git checkout.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Always backup the following before upgrading:</p>
<ul class="last simple">
<li>the entire <strong>database</strong></li>
<li>all the <strong>settings</strong></li>
<li>all your <strong>translation files</strong></li>
<li>any <strong>code customizations</strong></li>
<li>any <strong>templates customizations</strong></li>
<li>any <strong>styling customizations</strong></li>
</ul>
</div>
<p>To perform the upgrade follow the next steps:</p>
<ul>
<li><p class="first">If you want to perform a <a class="reference internal" href="database_migration.html"><em>database migration</em></a> then
do it first.</p>
</li>
<li><p class="first">We highly recommended that you use a virtual environment. If your install
currently doesn&#8217;t use one then please <a class="reference internal" href="installation.html#installation-setup-environment"><span>set up a virtualenv</span></a>.</p>
</li>
<li><p class="first">If you are upgrading from a version older than Pootle 2.7.0, then you must
first upgrade to Pootle 2.6.0.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">(</span>env<span class="o">)</span> <span class="nv">$ </span>pip install --upgrade <span class="s2">&quot;Pootle&gt;=2.6,&lt;2.7&quot;</span>
<span class="o">(</span>env<span class="o">)</span> <span class="nv">$ </span>pootle setup
</pre></div>
</div>
<p>Then continue with the upgrade process.</p>
</li>
<li><p class="first">Upgrade the Pootle package:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">(</span>env<span class="o">)</span> <span class="nv">$ </span>pip install --upgrade Pootle
</pre></div>
</div>
</li>
<li><p class="first">Update your custom Pootle settings to adjust for any changes and to include
any new settings. Delete any obsolete settings. Check the <a class="reference internal" href="settings.html#settings-available"><span>available
settings</span></a> as needed.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Running <code class="xref std std-djadmin docutils literal"><span class="pre">pootle</span> <span class="pre">check</span></code> will highlight settings that have
been made obsolete or renamed.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are upgrading from a version of Pootle that uses
<code class="file docutils literal"><span class="pre">localsettings.py</span></code> then you must <a class="reference internal" href="settings.html#settings-customizing"><span>move your custom settings</span></a> to a new location in order to ensure that Pootle
uses them.</p>
</div>
</li>
<li><p class="first">Perform the database schema and data upgrade by running:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">(</span>env<span class="o">)</span> <span class="nv">$ </span>pootle migrate
</pre></div>
</div>
</li>
<li><p class="first">Reapply your custom changes to Pootle code, templates or styling. Read about
<a class="reference internal" href="../developers/customization.html"><em>customization of style sheets and templates</em></a> to adjust your customizations to the correct
locations and approach in the new release.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you have customized the CSS styling or the JavaScript code you
will have to run the following commands to update the static assets:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">(</span>env<span class="o">)</span> <span class="nv">$ </span><span class="nb">cd</span> <span class="nv">$pootle_dir</span>/pootle/static/js/
<span class="o">(</span>env<span class="o">)</span> <span class="nv">$ </span>npm install
<span class="o">(</span>env<span class="o">)</span> <span class="nv">$ </span>npm update
<span class="o">(</span>env<span class="o">)</span> <span class="nv">$ </span>pootle webpack
<span class="o">(</span>env<span class="o">)</span> <span class="nv">$ </span>pootle collectstatic --noinput --clear -i node_modules -i *.jsx
<span class="o">(</span>env<span class="o">)</span> <span class="nv">$ </span>pootle assets build
</pre></div>
</div>
<p class="last"><code class="docutils literal"><span class="pre">$pootle_dir</span></code> is the directory where <strong class="command">pip</strong> installed Pootle. Its
location depends on your settings for <strong class="command">pip</strong>, but by default it
should be <code class="file docutils literal"><span class="pre">~/.virtualenvs/env/lib/python2.7/site-packages/</span></code>.</p>
</div>
</li>
<li><p class="first">Finally, restart your server.</p>
</li>
</ul>
</div>
<div class="section" id="post-upgrade-adjustments">
<span id="upgrading-post-upgrade"></span><h2>Post-upgrade adjustments<a class="headerlink" href="#post-upgrade-adjustments" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Check that you can login as an admin user.  If your existing admin user has
no email address then you will not be able to login.  In order the fix this
use <a class="reference external" href="https://docs.djangoproject.com/en/1.7/ref/django-admin/#django-admin-createsuperuser" title="(in Django v1.7)"><code class="xref std std-djadmin docutils literal"><span class="pre">createsuperuser</span></code></a> to create a new superuser, or to create a
temporary superuser to fix your existing one.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">(</span>env<span class="o">)</span> <span class="nv">$ </span>pootle createsuperuser
</pre></div>
</div>
</li>
</ul>
<p>After a succesful upgrade you can now consider:</p>
<ul class="simple">
<li>Implementing some <a class="reference internal" href="optimization.html"><em>optimizations</em></a> to your setup.</li>
<li>Creating a <a class="reference internal" href="../features/translation_memory.html#translation-memory-local-translation-memory"><span>Local Translation Memory</span></a>.</li>
</ul>
</div>
</div>


</div>
<hr>

<footer class="footer">
  <div class="container">
    <p class="pull-right"><a href="#">Back to top ↑</a></p>
    <ul class="unstyled muted">
      <li><small>
        &copy; 2004-2015, Translate.<br/>
      </small></li>
      <li><small>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1.
      </small></li>
    </ul>
  </div>
</footer>
  </body>
</html>